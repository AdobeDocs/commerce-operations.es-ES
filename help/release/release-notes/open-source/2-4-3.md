---
title: Notas de la versión de Magento Open Source 2.4.3
description: Obtenga información sobre las nuevas funciones, mejoras, correcciones de errores y problemas conocidos de la versión 2.4.3 de Magento Open Source.
recommendations: noCatalog
exl-id: fba0e147-1aa2-4c41-bc7d-51dd6755e014
source-git-commit: 95ea96a566b0579a22b2ba738bd4a4bceef8cd9c
workflow-type: tm+mt
source-wordcount: '12744'
ht-degree: 0%

---

# Notas de la versión de Magento Open Source 2.4.3

Magento Open Source 2.4.3 incorpora mejoras en el rendimiento y la seguridad, además de mejoras significativas en la plataforma. Las mejoras de seguridad incluyen la expansión de la cobertura de reCAPTCHA y la inclusión de una limitación de velocidad integrada. Las dependencias del compositor principal y las bibliotecas de terceros se han actualizado a las últimas versiones compatibles con PHP 8.x. Page Builder ya está disponible como extensión agrupada en Magento Open Source. Ahora es la herramienta de edición de contenido predeterminada para Adobe Commerce y Magento Open Source.

Esta versión incluye más de 370 nuevas correcciones del código principal y 33 mejoras de seguridad. Incluye la resolución de casi 290 problemas de GitHub por parte de los miembros de nuestra comunidad. Estas contribuciones de la comunidad van desde una limpieza menor del código principal hasta mejoras significativas en GraphQL.

Esta versión incluye más de 370 nuevas correcciones del código principal y 33 mejoras de seguridad. Todos los problemas conocidos identificados en las notas de la versión 2.4.2 de Magento Open Source se han corregido en esta versión.

{{bics}}

Consulte las [notas de la versión de Adobe Commerce 2.4.2-p2](../security/2-4-2-patches.md) para obtener información sobre Adobe Commerce 2.4.2-p2.

## Otra información de la versión

Aunque el código de estas funciones se incluye con versiones trimestrales , varios de estos proyectos (por ejemplo, Progressive Web Applications (PWA) Studio) también se publican de forma independiente. Las correcciones de errores para estos proyectos se documentan en la información de versión independiente y específica del proyecto que está disponible en la documentación de cada proyecto.

## Aplicar `AC-3022.patch` para seguir ofreciendo DHL como transportista

DHL ha introducido la versión de esquema 6.2 y dejará de utilizar la versión de esquema 6.0 en un futuro próximo. Adobe Commerce 2.4.4 y las versiones anteriores compatibles con la integración de DHL solo admiten la versión 6.0. Los comerciantes que implementen estas versiones deben aplicar `AC-3022.patch` lo antes posible para seguir ofreciendo DHL como transportista. Consulte el artículo de la base de conocimiento [Aplicar un parche para seguir ofreciendo DHL como transportista](https://support.magento.com/hc/en-us/articles/7707818131597-Apply-a-patch-to-continue-offering-DHL-as-shipping-carrier) para obtener información sobre cómo descargar e instalar el parche.

## Aplique MC-43048__set_rate_limits__2.4.3.patch para solucionar el problema de limitación de velocidad de API

Esta revisión proporciona una solución para el problema en el que las API web no pueden procesar solicitudes que contengan más de 20 elementos en una matriz. Este problema afecta a las implementaciones que ejecutan Magento Open Source 2.4.3, Adobe Commerce 2.4.3 o 2.3.7-p1. Se ha añadido una limitación de velocidad integrada a estas versiones para evitar ataques de denegación de servicio (DoS), y el máximo predeterminado se estableció en 20. Este parche revierte el límite predeterminado a un valor más alto. Si sospecha que su tienda está experimentando un ataque de denegación de servicio, Adobe recomienda reducir los límites de entrada predeterminados a un valor más bajo para restringir el número de recursos que se pueden solicitar. Consulte el artículo de la base de conocimiento [API web no puede procesar solicitudes con más de 20 elementos en la matriz](https://support.magento.com/hc/en-us/articles/4406893342093).

## Aplique AC-384__Fix_Incompatible_PHP_Method__2.4.3_ce.patch para solucionar el error grave de PHP en la actualización

Durante la actualización a Magento Open Source 2.4.3 puede producirse el siguiente error grave:

```
PHP Fatal error: Uncaught Error: Call to undefined function Magento\Framework\Filesystem\Directory\str_contains() in [...]/magento/vendor/magento/framework/Filesystem/Directory/DenyListPathValidator.php:74
```

Este error se debe al uso de la función `str_contains`, que es una función de PHP 8.x. La aplicación Open Source 2.4.3 no soporta PHP 8.x. Este hotfix reemplaza esta función con una función compatible con PHP 7.x. Consulte el artículo de la base de conocimiento [Actualización de Adobe Commerce 2.4.3, 2.3.7-p1 Error irrecuperable de PHP](https://support.magento.com/hc/en-us/articles/4408021533069-Adobe-Commerce-upgrade-2-4-3-2-3-7-p1-PHP-Fatal-error-Hotfix).

## Características destacadas

Busque los siguientes aspectos destacados en esta versión.

### Mejoras sustanciales de seguridad

Esta versión incluye 33 correcciones de seguridad y mejoras de seguridad de la plataforma. Muchas de estas correcciones de seguridad se han trasladado a 2.4.2-p2 y 2.3.7-p1.

#### Treinta y tres mejoras de seguridad que ayudan a cerrar las vulnerabilidades de ejecución de código remoto (RCE) y ejecución de scripts en sitios múltiples (XSS)

Hasta la fecha no se han producido ataques confirmados relacionados con estos problemas. Sin embargo, es posible que se aprovechen ciertas vulnerabilidades para acceder a la información de los clientes o hacerse cargo de las sesiones de administrador. La mayoría de estos problemas requieren que un atacante obtenga acceso primero al administrador. Como resultado, le recordamos que tome todas las medidas necesarias para proteger a su administrador, entre las que se incluyen, entre otras, las siguientes: inclusión en la lista de permitidos de IP, [autenticación de doble factor](https://developer.adobe.com/commerce/testing/functional-testing-framework/two-factor-authentication/), uso de una VPN, uso de una ubicación única en lugar de `/admin` y buena higiene de la contraseña. Consulte [Boletín de seguridad de Adobe](https://helpx.adobe.com/es/security/products/magento/apsb21-64.html) para ver un análisis de estos problemas corregidos.

#### Mejoras de seguridad adicionales

Las mejoras de seguridad para esta versión mejoran el cumplimiento de las prácticas recomendadas de seguridad más recientes, que incluyen:

* Un **nuevo complemento de Compositor** ayuda a evitar la confusión de dependencias e identifica paquetes malintencionados con los mismos nombres que los paquetes internos en el repositorio de paquetes públicos. Consulte el complemento [Adobe Releases New Composer con la versión 2.4.3](https://magento.com/blog/best-practices/adobe-releases-new-composer-plugin-magento-243-release) de la publicación de blog.

* **La limitación de velocidad está ahora integrada en las API** para evitar ataques de denegación de servicio (DoS). Las API web ahora imponen restricciones en el tamaño o el número de recursos (el máximo predeterminado se establece en 20 y se puede configurar en un valor diferente según las necesidades comerciales) que un cliente puede solicitar. Consulte [Limitación de velocidad](https://developer.adobe.com/commerce/webapi/get-started/api-security/) para obtener información sobre cómo configurar estas restricciones. <!-- MC-35358-->

* **Se ha ampliado la cobertura de ReCAPTCHA** para incluir:

   * Las API web que tienen páginas de HTML correspondientes se tratan mediante ReCAPTCHA. (Esto excluye las API web a las que se accede mediante integraciones). La cobertura ReCAPTCHA protege los puntos finales de ataques de spam. Cuando un servicio de integración de terceros que utiliza OAuth tiene acceso a las API web, ReCAPTCHA se deshabilita.<!-- MC-34472-->

   * La página de tienda Realizar pedido y las API web relacionadas con pagos. La protección ReCAPTCHA para estas páginas está desactivada de forma predeterminada y se puede activar desde el Administrador. Esta cobertura agrega un mecanismo de fuerza anti-bruta para proteger las tiendas de ataques de carding.

{{cve-notice}}

### Mejoras de infraestructura

Esta versión incluye mejoras que mejoran la calidad del marco de trabajo y las siguientes áreas funcionales:

* Cuenta del cliente

* Catálogo

* CMS

* OMS

* Importar/Exportar

* Promociones y direccionamiento

* Carro y cierre de compra

* B2B

* Ensayo y previsualización

**PayPal más tarde ahora es compatible** en implementaciones que incluyen PayPal. Esta función permite a los compradores pagar un pedido en cuotas quincenales en lugar de pagar el importe completo en el momento de la compra. <!-- MC-40556-->

**Nuevo modo de indización `use_application_lock`**. El modo `use_application_lock` le permite habilitar la reindexación mediante el uso de variables de entorno o configurando el archivo `app/etc/env.php`. Ya no es necesario restablecer manualmente el indexador después de un error con este modo habilitado.  Consulte [Uso del modo de bloqueo de aplicación para reindexar procesos](https://developer.adobe.com/commerce/php/development/components/indexing/#using-application-lock-mode-for-reindex-processes).

### Mejoras de Platform

La versión 2.4.3 aún no es compatible con PHP 8.x, pero las siguientes actualizaciones de la plataforma nos acercan a la futura compatibilidad con PHP 8.x.

* Las dependencias del Compositor principal y las bibliotecas de terceros se han actualizado a las últimas versiones compatibles con PHP 8.x. <!-- MC-39514-->

* La biblioteca KnockoutJS se ha actualizado a la versión 3.5.1 (la versión más reciente). <!-- MC-40694-->

* Se ha eliminado la biblioteca obsoleta TinyMCE v3. El módulo `Magento_Tinymce3Banner` y las pruebas MFTF relacionadas con TinyMCE v3.x se han eliminado de Adobe Commerce. <!-- MC-42199 42170 -->

* Magento Open Source 2.4.3 ha sido probado y confirmado para ser compatible con Redis 6.0.12. (la versión 2.4.x sigue siendo compatible con Redis 5.x.)

* Las dependencias de la biblioteca Laminas se han actualizado a versiones compatibles con PHP 8.x. Se han quitado algunas dependencias redundantes del archivo `composer.json`. **Magento Open Source 2.4.3 usa Laminas 3.4.0**. <!-- MC-39513-->

### Mejoras de rendimiento

Esta versión incluye mejoras que reducen el tiempo de indexación de los indexadores Precio del producto y Regla de catálogo. Los comerciantes ahora pueden excluir un sitio web de un grupo de clientes o un catálogo compartido, lo que reduce el número de registros para la indexación y mejora los tiempos de indexación.

### Integración de Adobe Stock

Esta versión incluye Adobe Stock Integration v2.1.1.

### GraphQL

Esta versión añade cobertura de GraphQL para rutas compartidas. [route query](https://developer.adobe.com/commerce/webapi/graphql/schema/products/queries/route/) y [RoutableInterface](https://developer.adobe.com/commerce/webapi/graphql/schema/products/interfaces/routable/) admiten solicitudes de enrutamiento en páginas de productos, categorías y CMS. La consulta `urlResolver` ha quedado obsoleta y su funcionalidad ha sido reemplazada por la consulta `route`.

Consulte la [Guía para desarrolladores de GraphQL](https://developer.adobe.com/commerce/webapi/graphql/) para obtener más información sobre estas mejoras.

### Page Builder

Page Builder ya está disponible como extensión agrupada en Magento Open Source. Ahora es la herramienta de edición de contenido predeterminada para Adobe Commerce 2.4.3 y Magento Open Source 2.4.3. Puede reemplazar el editor WYSIWG con cualquier módulo de terceros.

Page Builder reemplaza el editor TinyMCE en las siguientes áreas de administración:

* Página de CMS
* Bloque de CMS
* Descripción de categoría
* Descripción del producto

Todo el contenido creado en TinyMCE se ha migrado a Page Builder como HTML.

### PWA Studio

Para obtener información acerca de mejoras y correcciones de errores, consulte [Versiones de PWA Studio](https://github.com/magento/pwa-studio/releases). Consulte [compatibilidad](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) para obtener una lista de versiones de PWA Studio y sus versiones compatibles.

### Actualizar herramienta de compatibilidad

El ámbito de la [herramienta de compatibilidad de actualización](https://experienceleague.adobe.com/docs/commerce-operations/upgrade-guide/upgrade-compatibility-tool/overview.html?lang=es) se ha ampliado en función de los comentarios de la comunidad. Únase a nuestro canal de Slack [#upgrade-compatibility-tool](https://magentocommeng.slack.com/archives/C019Y143U9F) para obtener soporte del equipo de productos de Adobe y de la comunidad, así como para guiar la futura dirección de la herramienta.

### Extensiones desarrolladas por el proveedor

Consulte los siguientes artículos para obtener actualizaciones sobre las funciones y los cambios de esta versión:

* [Amazon Pay](https://marketplace.magento.com/amzn-amazon-pay-magento-2-module.html)

* [Braintree](https://experienceleague.adobe.com/es/docs/commerce-admin/stores-sales/payments/braintree)

* [dotdigital Engagement Cloud](../../../upgrade/modules/upgrade.md)

* [Klarna](https://marketplace.magento.com/klarna-m2-klarna.html)

* [Nube de vértices](https://marketplace.magento.com/vertexinc-vertex-tax-module.html)

* [Yotpo Reseñas de productos](../../../upgrade/modules/upgrade.md)

## Problemas solucionados

Hemos corregido cientos de problemas en el código principal 2.4.3.

### Instalación, actualización e implementación

<!-- MC-41154-->

* El comando `bin/magento setup:db:status` devuelve ahora un mensaje que indica que todo está actualizado después de una actualización correcta. Anteriormente, la aplicación mostraba este error: `Declarative Schema is not up to date`.

<!-- MC-40031 -->

* Los valores de configuración ahora se conservan en la recarga del formulario cuando falla la creación de un nuevo producto configurable. Anteriormente, los valores se perdían durante la recarga del formulario y la aplicación mostraba este error: `The value specified in the URL Key field would generate a URL that already exists`. [GitHub-32102](https://github.com/magento/magento2/issues/32102)

<!-- MC-37596-->

* La aplicación ya no genera una excepción cuando ejecuta `bin/magento setup:upgrade` para actualizar desde una implementación de Magento Open Source con Redis a Adobe Commerce.

<!-- ENGCOM-8508 -->

* Las implementaciones que se ejecutan en Galera Cluster ahora admiten más clientes. [GitHub-31038](https://github.com/magento/magento2/issues/31038)

<!-- ENGCOM-9036 MC-41938 -->

* Los administradores ahora pueden iniciar sesión correctamente en una implementación cuando la aplicación se haya instalado con la opción `—use-rewrites=0` o con `web/seo/use_rewrites` establecido en 0 en `core_config_data_table`. [GitHub-32100](https://github.com/magento/magento2/issues/32100)

<!-- ENGCOM-8451 -->

* Se actualizó la carga de `sortOrder` para `AsyncCssPlugin`. La aplicación ahora carga `AsyncCssPlugin` antes de `JsFooterPlugin`. [GitHub-30882](https://github.com/magento/magento2/issues/30882)

<!-- ENGCOM-8701 -->

* `Magento\Config\Model\Config\PathValidator` ahora comprueba la ruta de acceso de visualización para determinar si existe un elemento y, si tiene una ruta de acceso de configuración, utiliza la ruta de acceso `config.xml` en su lugar para la validación. [GitHub-27678](https://github.com/magento/magento2/issues/27678)

<!-- ENGCOM-8684 -->

* La compilación de archivos Less con Grunt o por compilación del lado del servidor ahora produce los mismos resultados. Anteriormente. `.abs- styles`, que extiende otros `.abs- styles` en `_extends.less`, no se generaron correctamente cuando se compilaron con Grunt. Esto resultaba en diferencias entre las implementaciones de producción y desarrollo. [GitHub-7231](https://github.com/magento/magento2/issues/7231)

### Integración de Adobe Stock

<!-- MC-39754-->

* La aplicación ahora muestra un mensaje informativo y un vínculo a la página Administrador **Tiendas** > **Configuración** > **Avanzado** > **Sistema** en la página Buscar Adobe Stock cuando no se han establecido **Clave de API (ID de cliente)** y **Secreto de cliente**. Anteriormente, la aplicación mostraba este error: `We couldn't find any records` y ningún vínculo.

### Servidor

<!-- MC-40389-->

* Los administradores con acceso restringido (por ejemplo, a los que se les asigna acceso a un solo sitio web) ya no pueden editar las categorías configuradas como Ámbito global.

<!-- MC-39037-->

* El informe del sistema generado (**Sistema** > **Soporte técnico** > **Informe del sistema**) ahora se representa correctamente. Anteriormente, el contenido del informe estaba desalineado.

<!-- MC-30152 ENGCOM-8625-->

* La aplicación ahora desactiva la validación en el campo **Price**, como se espera cuando la configuración **Dynamic price** está habilitada durante la creación del paquete de productos. Anteriormente, la aplicación arrojaba un error de validación cuando se quitaba un valor del campo **Precio** cuando se habilitaba la configuración **Precio dinámico**. [GitHub-26214](https://github.com/magento/magento2/issues/26214)

<!-- MC-24840-->

* Las redirecciones infinitas ya no se producen cuando la URL del administrador difiere de la URL del sitio web predeterminado en implementaciones en las que la aplicación está configurada para ser accesible desde dos direcciones URL.

### Paquete de productos

<!-- MC-41810-->

* Ahora puede usar la mutación `addProductsToCart` para agregar un paquete de productos con más de una opción de casilla de verificación al carro de compras.

<!-- MC-41614-->

* La indexación de precios de los productos agrupados ahora se ejecuta mediante tablas temporales, lo que evita el bloqueo de tablas de base de datos. Anteriormente, la aplicación utilizaba tablas físicas, lo que resultaba en tablas bloqueadas.

<!-- MC-41177 magento/magento2#32594-->

* Ahora, el precio de un paquete de artículos se puede establecer en 0,00. Anteriormente, cuando se volvía a la página de edición después de establecer el precio en 0,00, el precio volvía a su valor predeterminado. [GitHub-32383](https://github.com/magento/magento2/issues/32383)

<!-- MC-40603-->

* Los detalles del pedido para pedidos que contienen productos agrupados ahora muestran el precio correcto para los productos agrupados si el precio se cambió antes de realizar el pedido.

<!-- MC-40035-->

* El estado de stock del producto agrupado ahora se actualiza en función del estado de stock de sus productos secundarios. Anteriormente, los productos agrupados se mostraban como agotados cuando se eliminaba una opción del producto y el producto agrupado tenía dos opciones con el mismo SKU.

<!-- MC-39276-->

* Un administrador ahora puede cambiar el valor del atributo `Shipment Type` de un producto agrupado después de que se haya movido a un grupo de atributos diferente. Anteriormente, este atributo siempre se guardaba con un valor `Together` si se movía a un grupo de atributos distinto del predeterminado en el conjunto de atributos.

<!-- MC-38900-->

* La mutación `setGuestEmailOnCart` de GraphQL ahora actualiza correctamente el correo electrónico de invitado. Anteriormente, las tablas de direcciones de presupuesto y presupuesto no se actualizaban.

<!-- MC-37719-->

* Añadir, eliminar o actualizar un producto secundario a un producto del paquete a través de llamadas a la API de REST ahora déclencheur la reindexación según lo esperado. Anteriormente, estas acciones no tenían déclencheur para volver a indexar y, como resultado, el producto del paquete no cambiaba su estado de stock hasta que se realizaba una reindexación manual.

<!-- MC-35725 ENGCOM-8568-->

* La aplicación ahora muestra el rango de precios correcto para los productos agrupados con precios de nivel. [GitHub-30284](https://github.com/magento/magento2/issues/30284)

<!-- MC-35638-->

* La aplicación ahora muestra el mismo precio total que se espera en la página del carro de compras y en la etapa de envío del flujo de trabajo de cierre de compra después de que haya cambiado el precio de una opción de paquete.

<!-- MC-32617-->

* Ahora puede configurar correctamente un producto agrupado accediendo a él desde un carro de compras del cliente. Anteriormente, la página Configurar producto nunca se cargaba completamente y no se podía guardar la configuración.

<!-- MC-30317 ENGCOM-7141-->

* Los comerciantes ahora pueden asignar un precio único para un paquete de productos en cada vista de tienda de una implementación de varias tiendas. Los precios específicos del sitio web se guardan en la tabla `catalog_product_bundle_selection_price`. Anteriormente, la aplicación no basaba el precio de un producto agrupado en el ámbito del sitio web ni siquiera cuando **Tiendas** > **Configuración** > **Catálogo** > **Catálogo** > **Precio** > **Ámbito del precio de catálogo** se establecía en `Website`. No se guardaron precios específicos de sitios web en `catalog_product_bundle_selection_price`. [GitHub-12584](https://github.com/magento/magento2/issues/12584)

<!-- ENGCOM-8705 MC-38953-->

* Las facturas de los productos agrupados ahora muestran la cantidad correcta para los productos simples asociados cuando se deshabilita **Asignación dinámica de precios**. Anteriormente, los productos simples asociados con el producto agrupado tenían la cantidad del producto principal, no el producto agrupado). [GitHub-30802](https://github.com/magento/magento2/issues/30802)

<!-- magento/magento2#30374 MC-36930-->

* La mutación `updateProductsInWishlist` ahora actualiza correctamente los elementos que pertenecen a un paquete de productos en una lista de deseos. Anteriormente, en lugar de actualizar el elemento de la lista de deseos, esta mutación eliminaba el elemento y creaba uno nuevo, que cambiaba el ID del elemento.

### Caché

<!-- ENGCOM-8554-->

* El archivo `varnish6.vcl` se ha actualizado para omitir el almacenamiento en caché de la página del cliente.

### CAPTCHA

<!-- MC-41572-->

* CAPTCHA ahora valida correctamente los datos proporcionados por un comprador, y los campos CAPTCHA ahora se muestran como se espera después de los múltiples intentos fallidos de un comprador para pagar con PayPal Payflow Pro.

<!-- MC-41281-->

* La validación CAPTCHA ya no falla aleatoriamente en la página de pago del flujo de trabajo de cierre de compra.

<!-- MC-41001-->

* La aplicación ahora muestra los campos CAPTCHA como se espera después de superar el número de intentos de finalización fallidos. Anteriormente, aunque la aplicación le pedía que intentara volver a intentar el desafío CAPTCHA, no mostraba los campos CAPTCHA.

<!-- MC-40359-->

* CAPTCHA ahora funciona como se espera en la página de cierre de compra. Anteriormente, después de que un comprador respondiera correctamente a un desafío CAPTCHA, el cargador de la página de pago nunca se completaba y la aplicación mostraba este error: `captchaData[formId] is undefined`. (Este error solo se producía cuando el comprador utilizaba el mismo explorador desde el que había accedido anteriormente a una implementación que ejecutaba 2.3.5-p1.)

<!-- ENGCOM-8630-->

* `_.isEmpty()` comprobaciones en el archivo `defaultCaptcha.js` ahora se completaron correctamente. Anteriormente, estas comprobaciones no se completaban y, como resultado, la página de cierre de compra no se cargaba después de la actualización. [GitHub-31641](https://github.com/magento/magento2/issues/31641)

### Carro y cierre de compra

<!-- MC-41911-->

* La aplicación ahora tiene en cuenta las ubicaciones decimales específicas de la configuración regional al convertir y actualizar la cantidad de productos en el carro de compras.

<!-- MC-40657-->

* La aplicación ahora muestra el mensaje de validación de Términos y condiciones en el bloque correspondiente solo cuando un comprador hace clic en el botón **Realizar pedido**. Anteriormente, la aplicación mostraba este mensaje en el bloque Aplicar código de descuento cada vez que un comprador cambiaba el método de pago en el flujo de trabajo de pago: `The order wasn't placed. First, agree to the terms and conditions, then try placing your order again`.

<!-- MC-39581-->

* La aplicación ahora descarta los cambios en el formulario de dirección de facturación en el paso de pago de cierre de compra si el comprador no hace clic en el botón **Actualizar** y vuelve al paso de envío.

<!-- MC-37807 ENGCOM-8530-->

* Los productos con una opción personalizable `(File)` ahora incluyen vínculos activos según lo esperado a lo largo del proceso de cierre de compra de envío múltiple. Anteriormente, faltaba este vínculo. [GitHub-31095](https://github.com/magento/magento2/issues/31095)

<!-- MC-37689-->

* El carro de compras Administrador ahora muestra los precios de los productos en las monedas correctas para las tiendas que admiten varias monedas. Anteriormente, los precios se convertían a la moneda especificada más de una vez: primero, cuando se agregaban productos al carro de compras desde la tienda y, después, cuando el pedido se procesaba posteriormente en el administrador.

<!-- MC-35640-->

* Los compradores ahora pueden agregar un producto al carro de compras cuyo precio mínimo anunciado (MAP) exceda su precio normal del producto.

<!-- MC-35289-->

* Los compradores ahora pueden cambiar correctamente su dirección de facturación del flujo de trabajo de cierre de compra al realizar el cierre de compra con varias direcciones.

<!-- MC-29335 magento/magento2#32251 -->

* Todas las transacciones de pago creadas por los invitados ahora se guardan en la base de datos y son visibles en el Administrador según lo esperado. Anteriormente, solo se guardaba un pequeño subconjunto de pedidos simultáneos en la base de datos y la mayoría de los pedidos se perdían debido a los tiempos de espera resultantes de los bloqueos de la base de datos. [GitHub-25862](https://github.com/magento/magento2/issues/25862)

<!-- MC-23989-->

* La aplicación ahora muestra correctamente los mensajes de bienvenida en línea que contienen caracteres especiales cuando un invitado coloca un producto en el minicarrito. Anteriormente, la aplicación no agregaba el producto al minicarrito ni mostraba el mensaje de bienvenida. [GitHub-32250](https://github.com/magento/magento2/issues/32250)

<!-- MC-41165-->

* La página de envío del flujo de trabajo de cierre de compra ahora se carga correctamente cuando la entrega en tienda está activada. Anteriormente, la aplicación arrojaba un error de JavaScript y la página de cierre de envío no se representaba completamente.

<!-- ENGCOM-9006-->

* Se agregó el argumento `itemResolvers` al archivo de catálogo `di.xml`. Como resultado, el cierre de compra ya no se interrumpe si los módulos de producto configurables y agrupados están desactivados. [GitHub-30860](https://github.com/magento/magento2/issues/30860)

<!-- ENGCOM-8944-->

* La aplicación ahora muestra los botones de opción en la sección **Información de pago y envío**, tal como se espera durante el flujo de trabajo de reorganización del administrador. [GitHub-30257](https://github.com/magento/magento2/issues/30257)

<!-- MC-39158 ENGCOM-8493-->

* La aplicación ahora aplica correctamente las reglas de precio del carro de compras con un descuento fijo de nivel de carro de compras cuando el carro de compras contiene un producto agrupado con varias opciones. Anteriormente, la regla de precio del carro de compras no se aplicaba completamente al pedido. [GitHub-30952](https://github.com/magento/magento2/issues/30952)

<!-- MC-40983 ENGCOM-8828-->

* El botón **Agregar al carro** de la vista de lista de categorías ahora funciona según lo esperado. [GitHub-32232](https://github.com/magento/magento2/issues/32232)

<!-- ENGCOM-8490-->

* Ahora puede usar POST `/V1/carts/mine/items` para agregar una cantidad personalizada de productos agrupados a un carro de compras. [GitHub-26909](https://github.com/magento/magento2/issues/26909)

<!-- ENGCOM-8886-->

* La aplicación ya no rellena el área de la dirección de facturación del flujo de trabajo de cierre de compra con la dirección de envío. Anteriormente, cuando el campo **Estado/Provincia** de la dirección de facturación estaba vacío y las direcciones de envío y facturación diferían, la aplicación rellenaba el campo de la dirección de facturación **Estado/Provincia** con información de la dirección de envío. [GitHub-31608](https://github.com/magento/magento2/issues/31608)

### Catálogo

<!-- MC-36787-->

* La actualización masiva de los atributos **Habilitar incrementos de cantidad** y **Incrementos de cantidad** ahora funciona según lo esperado. [GitHub-29544](https://github.com/magento/magento2/issues/29544)

<!-- MC-41575-->

* La aplicación ya no genera un error de JavaScript después de habilitar la sincronización de productos recientes con el administrador. Anteriormente, la aplicación mostraba este error de JavaScript: `Cannot read property 'status' of undefined`.

<!-- MC-41534-->

* Las actualizaciones del diseño del tema personalizado ahora se aplican según lo esperado. Anteriormente, las actualizaciones de diseño de temas personalizados se omitían.

<!-- MC-41499-->

* La caché de categoría de producto ahora se borra según lo esperado por `cron` durante la ejecución de `indexer_update_all_views`. Anteriormente, los recuentos de productos en la página Categoría después de la reindexación eran incorrectos.

<!-- MC-41422-->

* Los valores de atributo ahora permanecen inalterados cuando no se especifica un atributo en una solicitud de API de REST de actualización de producto para una vista de tienda. Anteriormente, si no se especificaba un atributo, la aplicación restablecía el valor del atributo a su valor de ámbito predeterminado.

<!-- MC-41284-->

* La cuadrícula Productos de administración (Administración **Catálogo** > **Productos**) ahora muestra el recuento de productos correcto cuando los productos se filtran por SKU.

<!-- MC-40873-->

* La aplicación ahora muestra un estado de stock preciso cuando se agrega un producto a una página de CMS cuando los permisos de categoría están habilitados y evita la visualización del precio para el grupo del cliente especificado. Anteriormente, todos los productos se mostraban agotados, independientemente del estado real de las existencias.

<!-- MC-40859-->

* El campo de entrada de precio del bloque de precios del grupo de clientes de precios avanzados ahora tiene una anchura mínima de cinco dígitos. Anteriormente, solo se veían dos símbolos en este campo en pantallas de baja resolución.

<!-- MC-40825-->

* La aplicación ahora elimina correctamente una imagen multimedia del producto después de eliminar un producto. Anteriormente, la imagen multimedia del producto permanecía en la carpeta después de eliminar correctamente el producto.

<!-- MC-40811 magento/magento2#32042-->

* El diseño de la página ahora se actualiza según lo esperado al crear o editar un producto en el Administrador y, a continuación, crear una actualización de diseño de programación. [GitHub-32007](https://github.com/magento/magento2/issues/32007)

<!-- MC-40773-->

* Ahora, un atributo de producto personalizado con un valor de cero se puede guardar correctamente como en blanco. Anteriormente, la aplicación no actualizaba este valor a en blanco.

<!-- MC-40736 ENGCOM-8789-->

* Los archivos de actualización de diseño de categoría personalizada ahora se aplican a los productos según lo esperado. Anteriormente, el identificador del archivo de actualización (`catalog_category_view_*`) no coincidía con el identificador del producto. [GitHub-27285](https://github.com/magento/magento2/issues/27285)

<!-- MC-40679-->

* Se ha deshabilitado la ordenación para la columna Impuesto de producto fijo (FPT) de la lista Productos de administración. Anteriormente, la página Productos no se podía volver a cargar después de ordenar la columna FTP.

<!-- MC-40443-->

* La vista previa del widget de productos de Page Builder ahora funciona como se espera en una implementación de varios sitios web cuando los productos coincidentes tienen un precio diferente en cada sitio web.

<!-- MC-40344 ENGCOM-8629-->

* La ordenación por posición en la búsqueda de productos mediante GET `/rest/V1/products/?searchCriteria[filterGroups]` ahora funciona según lo esperado. Anteriormente, la colección de productos no tenía un valor de campo `position` para ordenar. [GitHub-31591](https://github.com/magento/magento2/issues/31591)

<!-- MC-40122-->

* Los usuarios administradores ahora pueden ver espacios dobles en los campos **Nombre** y **SKU** de la cuadrícula del producto. Anteriormente, la aplicación contraía varios espacios en uno solo.

<!-- MC-39869-->

* Los productos ahora aparecen como agotados en la tienda cuando la cantidad vendible en el administrador es 0. Anteriormente, estos productos estaban disponibles en la tienda y la aplicación mostraba un botón **Agregar al carro** activo. [GitHub-31117](https://github.com/magento/magento2/issues/31117)

<!-- MC-39809-->

* Los administradores ahora pueden agregar productos con opciones personalizables `(File)` a la cuadrícula Artículos pedidos desde la sección Carro de compras (columna Actividades del cliente) de la página Administrador - Cliente. Anteriormente, la aplicación no agregaba el elemento a la lista porque el valor no tenía el formato correcto antes de insertarse en `\Magento\Catalog\Model\Product\Type\AbstractType::_prepareOptions`.

<!-- MC-39619-->

* La aplicación ya no pide a los compradores que seleccionen una opción de producto para un producto agrupado que solo tiene una opción.

<!-- MC-39617-->

* La aplicación ahora muestra todas las subcategorías en las actualizaciones de diseño (categorías de anclaje y no anclaje) durante la creación de un nuevo widget.

<!-- MC-39481-->

* La consulta `product` ya no sobrescribe los valores predeterminados de todas las vistas de tienda en una implementación de varias tiendas cuando se actualiza un nombre de producto solo para una vista de tienda. [GitHub-31083](https://github.com/magento/magento2/issues/31083)

<!-- MC-39470 magento/magento2#31492-->

* Magento Open Source actualiza el recuento total de páginas según lo esperado cuando cambia el valor por página de la lista Productos relacionados con el administrador, Aumentar ventas y Realizar ventas cruzadas. [GitHub-31059](https://github.com/magento/magento2/issues/31059)

<!-- MC-39444-->

* Los administradores ahora pueden agregar productos con dos o más opciones personalizables `(File)` a un pedido por SKU.

<!-- MC-39140-->

* La aplicación ya no genera un error cuando un administrador con permisos restringidos añade un widget de producto a una página de CMS en el Admin. Anteriormente, la aplicación arrojaba este error cuando el administrador hacía clic en el botón **Guardar**: `We are sorry, an error has occurred while generating the content`.

<!-- MC-39134-->

* Las páginas de detalles del producto ahora se abren con la opción personalizable de fecha rellenada con la fecha del pedido anterior en que **Usar JavaScript Calendar** está habilitado. El solucionador de valores de la opción de fecha personalizada ahora vuelve a un formato alternativo si el valor no tiene un formato basado en la configuración actual. Anteriormente, el valor de la opción de fecha personalizada estaba vacío.

<!-- MC-39104-->

* La aplicación ahora solo muestra un error en el carro de compras cuando el producto está agotado. Anteriormente, la aplicación mostraba mensajes redundantes. [GitHub-27469](https://github.com/magento/magento2/issues/27469)

<!-- MC-38575-->

* Ahora puede establecer los atributos del paquete `required_options` y `has_options` como se espera al crear o actualizar un producto del paquete mediante el extremo `POST /V1/product/:sku`. Anteriormente, estos atributos personalizados se establecían en 0 (cero) a pesar de los esfuerzos por establecerlo en 1 (uno).

<!-- MC-35717  magento/partners-magento2ee#427-->

* Los administradores ahora pueden agregar un producto con una opción personalizable `(File)` a un pedido por SKU. [GitHub-30285](https://github.com/magento/magento2/issues/30285)

<!-- MC-30625-->

* Ahora puede guardar un producto y un precio sin especificar `type_id`. [GitHub-13639](https://github.com/magento/magento2/issues/13639)

<!-- MC-39024-->

* Los productos de grupo ahora están disponibles en la tienda como se espera cuando se usa una solicitud REST `PUT /V1/products/:sku/links` para asociar un nuevo producto secundario con un nuevo producto de grupo. Anteriormente, los productos no se indexaban correctamente después de ejecutar `bin/magento cron:run`.

<!-- ENGCOM-9010 8947-->

* Ya no puede crear un producto con un valor de SKU `NULL`. Anteriormente, se podía crear un producto sin un valor de SKU a través de un importador personalizado o directamente en la base de datos, pero cuando se intentaba editarlo desde el administrador, la aplicación arrojaba un error. [GitHub-27411](https://github.com/magento/magento2/issues/27411), [GitHub-32525](https://github.com/magento/magento2/issues/32525)

<!-- ENGCOM-8902-->

* Al añadir las opciones personalizadas necesarias a un producto simple, ya no se eliminará de los productos compuestos principales sin previo aviso. La aplicación ahora muestra una advertencia informativa y no guarda el producto.  Anteriormente, la aplicación guardaba los cambios del producto y no mostraba una advertencia. [GitHub-30492](https://github.com/magento/magento2/issues/30492)

### Regla de catálogo

<!-- MC-39896-->

* La consulta `products` devuelve ahora los valores actuales cuando se aplica una regla de precio de catálogo a un artículo. [GitHub-26738](https://github.com/magento/magento2/issues/26738)

<!-- ENGCOM-8367-->

* Las tablas temporales que comienzan con `catalogrule_product__temp` ahora se eliminan como se espera cuando la reindexación falla después de que caduque una regla de carro de compras o catálogo, esté deshabilitada o quede inactiva. [GitHub-22273](https://github.com/magento/magento2/issues/22273)

<!-- ENGCOM-8949-->

* Ahora las zonas horarias se aplican del mismo modo en `\Magento\CatalogRule\Model\Indexer\IndexBuilder::reindexById` y `\Magento\CatalogRule\Model\Indexer\IndexBuilder::reindexByIds`. [GitHub-29549](https://github.com/magento/magento2/issues/29549)

### Contenido de CMS

<!-- MC-41471-->

* Las imágenes grandes ahora cambian de tamaño según lo esperado durante la carga cuando el ajuste de configuración **Habilitar cambio de tamaño de front-end** está habilitado.

<!-- MC-40663 ENGCOM-8883-->

* Se ha corregido el control de errores del controlador de guardado de páginas de CMS. Anteriormente, cuando se arrojaba un objeto `Error` en el evento `cms_page_prepare_save`, la aplicación pasaba este objeto a la función `addExceptionMessage`, rompiendo su contrato porque esta función espera un `Exception`. Esto se resolvió agregando un mensaje de error mediante la función `addErrorMessage`. [GitHub-30149](https://github.com/magento/magento2/issues/30149)

### Productos configurables

<!-- MC-40719-->

* La aplicación ya no duplica miniaturas de productos en la galería de imágenes de un producto cuando hace clic en las opciones configurables de un producto.

<!-- MC-37418-->

* La ventana emergente de configuración que la aplicación muestra cuando edita un producto configurable desde una lista de artículos deseados ahora se cierra como se espera cuando hace clic en el botón **Aceptar**.

<!-- MC-39878  magento/magento2#31472-->

* La aplicación ahora genera correctamente facturas para pedidos que contienen solo un producto configurable. [GitHub-31143](https://github.com/magento/magento2/issues/31143)

<!-- ENGCOM-8673-->

* Los compradores ahora pueden agregar productos configurables al carro de compras desde una vista de tienda no predeterminada. Anteriormente, cuando el comprador de una vista de tienda no predeterminada intentaba agregar un producto configurable, la aplicación mostraba este error: `Could not add item to cart. Please check required options and try again`. [GitHub-31660](https://github.com/magento/magento2/issues/31660)

### Política de seguridad de contenido (CSP)

<!-- ENGCOM-8577-->

* La directiva de seguridad de contenido ahora admite la carga de imágenes y fuentes codificadas en Base64 mediante `data: scheme`.

### cron

<!-- MC-30804-->

* Las consultas de limpieza de Cron se han refactorizado para reducir o eliminar los siguientes problemas de rendimiento: `cron` trabajos permanecen atascados en un estado pendiente, consultas MySQL cada vez más lentas y un aumento en el uso de CPU. [GitHub-26507](https://github.com/magento/magento2/issues/26507)

<!-- ENGCOM-8571-->

* `cronjobs` que han estado en estado `running` durante más de 24 horas ahora se cambian automáticamente al estado `error`.  Como resultado, se puede volver a ejecutar una nueva instancia de ese trabajo y no es necesario cambiar manualmente el estado del trabajo cuando un trabajo permanece establecido incorrectamente en el estado `running`. Anteriormente, si un(a) `cronjob` estaba bloqueado(a) en el estado `running`, la aplicación impedía que se iniciaran nuevas instancias del mismo trabajo y tenía que cambiar manualmente el estado del trabajo. [GitHub-8933](https://github.com/magento/magento2/issues/8933)

<!-- ENGCOM-8571-->

* `cron` trabajos ahora se completan según lo esperado y ya no arrojan este error de serialización: `[Magento\Framework\DB\Adapter\DeadlockException]SQLSTATE[40001]: Serialization failure: 1213 Deadlock found when trying to get lock; try restarting transaction, query was: DELETE FROM cron_schedule WHERE (status = 'missed') AND (job_code in ('indexer_reindex_all_invalid', 'indexer_update_all_views', 'indexer_clean_all_changelogs')) AND (created_at < '2018-09-28 18:32:28')`. [GitHub-18409](https://github.com/magento/magento2/issues/18409)

<!-- ENGCOM-8571-->

* `indexer_update_all_views` trabajos cron ahora se ejecutan como se esperaba después de un error anterior. La ejecución fallida se marca como un error en `cron_schedule schedule`, y la ejecución posterior no falla automáticamente. Anteriormente, la tabla `cron_schedule` se llenaba con trabajos pendientes y el trabajo cron `indexer_update_all_views` no se ejecutaba. [GitHub-23054](https://github.com/magento/magento2/issues/23054)

<!-- ENGCOM-8571-->

* `cron` interbloqueos ya no se producen como resultado de `cron` que intenta establecer un bloqueo en implementaciones grandes en las que los grupos se superponen. [GitHub-8933](https://github.com/magento/magento2/issues/8933)

<!-- ENGCOM-8571-->

* `cron` interbloqueos ya no se producen en la tabla `cron_schedule` después de que se hayan ejecutado unos pocos `cron` trabajos. [GitHub-22438](https://github.com/magento/magento2/issues/22438)

### Atributos del cliente personalizados

<!-- MC-41611-->

* El campo **Estado** de la libreta de direcciones de la cuenta de cliente de la tienda ahora se carga como y sigue siendo un elemento de página desplegable. El botón **Enviar** ahora está deshabilitado hasta que todos los elementos de la página se hayan cargado por completo. Anteriormente, la aplicación cargaba este campo como un cuadro de texto antes de procesarlo como un elemento desplegable y los compradores podían introducir y guardar valores en el campo de texto, lo que posteriormente provocaba un error durante la desprotección.

<!-- MC-40329-->

* La aplicación ya no genera un error cuando se guarda un atributo de dirección del cliente con un archivo adjunto en el campo Dirección del cliente del administrador al cargar archivos. Esto se produjo debido a la falta de una instrucción return en la acción del controlador. Anteriormente, la aplicación arrojó este error: `Something went wrong while saving the file`.

<!-- MC-39354-->

* Las llamadas a la API REST GET Cart ahora devuelven valores de atributo personalizados correctos para las direcciones de facturación y envío. Anteriormente, los atributos de direcciones personalizadas se mostraban incorrectamente en la página de detalles de pedidos de la página Mi tienda de cuentas y en el Administrador.

<!-- MC-24495-->

* La aplicación ahora administra correctamente archivos que contienen atributos de dirección de cliente con tipo de entrada `file (attachment)`. Anteriormente, la aplicación arrojó este error durante la carga del archivo adjunto: `Something went wrong while saving the file`.

### Cliente

<!-- MC-40579-->

* El filtrado por fecha de creación de cuenta ahora produce resultados que cumplen con la configuración de zona horaria configurada y que capturan todas las cuentas creadas relevantes.

<!-- MC-40502-->

* El filtro de cuadrícula de cliente ahora utiliza una opción de sitio web correcta para un usuario restringido si los datos se almacenaron en caché anteriormente. Anteriormente, el filtro de cuadrícula del cliente recuperaba parámetros de sitio web de la caché e incluía datos incorrectos para usuarios restringidos.

<!-- MC-39189-->

* La aplicación ya no genera una excepción en la página Admin Customers cuando se elimina un sitio web en una implementación de varios sitios web. Anteriormente, cuando un administrador intentaba obtener acceso a la lista completa de clientes, la aplicación no mostraba todos los clientes y mostraba este error: `The website with id 2 that was requested wasn't found. Verify the website and try again`.

<!-- MC-38913-->

* Los administradores con permiso ahora pueden reasignar clientes a distintos sitios web desde la pestaña Información de la cuenta del cliente.

<!-- MC-39852-->

* Ahora puede cargar un archivo correctamente al crear un atributo de dirección de cliente con un tipo de entrada de `(File)`. Anteriormente, al intentar cargar y guardar un archivo, la aplicación arrojaba este error: `Something went wrong while saving the file`.

### Directorio

<!-- MC-39520-->

* La aplicación ya no genera una excepción cuando un comprador introduce un código postal no válido durante la sección de envío del flujo de trabajo de cierre de compra. [GitHub-23371](https://github.com/magento/magento2/issues/23371)

### Descargable

<!-- MC-35779-->

* La aplicación ahora muestra vínculos a productos descargables en el correo electrónico Nuevo pedido cuando el pedido contiene un producto descargable y un producto configurable con una opción descargable. Anteriormente, la aplicación mostraba el vínculo al producto descargable independiente, pero no el vínculo al producto configurable con una opción descargable.

### EAV

<!-- MC-41756-->

* Los valores de fecha de atributo de dirección del cliente ahora se guardan en formato de cuatro dígitos en lugar de formato de dos dígitos.

### Correo electrónico

<!-- MC-39757-->

* El vínculo para restablecer la contraseña en la página de restablecimiento de contraseña de administrador ahora funciona según lo esperado. Anteriormente, cuando se utilizaba una plantilla personalizada para la página Restablecer contraseña de administrador, la aplicación mostraba este mensaje cuando un administrador hacía clic en el vínculo dentro del correo electrónico: `Your password reset link has expired`. Esto ocurría porque la plantilla de correo electrónico personalizada contenía la variable incorrecta para el ID de usuario.

<!-- MC-41588-->

* El envío de correos electrónicos de clientes desde el administrador ahora funciona correctamente cuando se habilita en el nivel de vista de tienda. Anteriormente, la aplicación no enviaba correos electrónicos a los clientes cuando la configuración de las notificaciones por correo electrónico se habilitaba en el nivel de vista de tienda, pero no en el nivel global.

<!-- MC-40950-->

* La aplicación ahora envía correos electrónicos como se espera en implementaciones de varios sitios en las que no todos los sitios web han habilitado el envío asincrónico de correos electrónicos. Anteriormente, si al menos un sitio web tenía esta configuración deshabilitada, no se enviaba correo electrónico desde ningún sitio web, incluso cuando estaba habilitada. Los correos electrónicos de factura, envío y nota de abono tenían problemas similares. Sin embargo, los correos electrónicos Comentarios sobre pedidos, Comentarios sobre facturas, Comentarios sobre envíos y Comentarios sobre notas de abono se han enviado correctamente. [GitHub-31950](https://github.com/magento/magento2/issues/31950)

<!-- MC-30127 magento/magento2#31455-->

* Las facturas y los PDF de factura ahora incluyen los mismos precios para los productos agrupados que se esperan. Anteriormente, los PDF de factura incluían el precio incorrecto de los productos agrupados. [GitHub-12856](https://github.com/magento/magento2/issues/12856)

<!-- ENGCOM-9021-->

* La conversión de cadenas se ha agregado al método de filtro de la plantilla de correo electrónico para garantizar que el valor devuelto sea un `string`. Anteriormente, cuando se detectaba una excepción sin estar en modo de desarrollador, la aplicación devolvía un objeto `phrase`. Esto a su vez desencadenó un `Uncaught TypeError` irrecuperable. [GitHub-32671](https://github.com/magento/magento2/issues/32671)

<!-- ENGCOM-8807-->

* Los correos electrónicos de confirmación de pedido ahora se envían según lo esperado cuando se habilita el envío asincrónico (**Tiendas** > **Configuración** > **Ventas** > **Correos electrónicos de ventas** > **Configuración general** > **Envío asincrónico**) en un sitio web en una implementación de varios sitios. [GitHub-31950](https://github.com/magento/magento2/issues/31950)

<!-- MC-18023 ENGCOM-9000-->

* La aplicación ahora registra un error como se espera cuando se produce una excepción cuando un cliente intenta enviar un correo electrónico desde el formulario de contacto. [GitHub-23645](https://github.com/magento/magento2/issues/23645)

### Marcos

<!-- MC-41712-->

* Ahora se comprueba la existencia de anotaciones docblock en las clases principales del administrador junto con la clase original y las interfaces heredadas. Anteriormente, como las clases principales no se comprobaban, la realización de cualquier acción relacionada con el cliente en el Administrador que activaba un evento provocaba un error. La aplicación registró este error en el registro de excepciones: `report.CRITICAL: Method's return type must be specified using @return annotation.`.

<!-- MC-41192-->

* La aplicación ya no genera un error grave cuando el servidor Redis se detiene en una implementación en la que el almacenamiento en caché de páginas Redis está habilitado.

<!-- MC-40739-->

* La aplicación ahora cumple la configuración **Excluir la carpeta multimedia de la copia de seguridad** cuando la copia de seguridad está habilitada con `bin/magento config:set system/backup/functionality_enabled 1`. Anteriormente, se hizo una copia de seguridad de la carpeta de medios a pesar de esta configuración porque la ruta de acceso a `/magento` se formó incorrectamente con un // doble.

<!-- MC-40654 ENGCOM-8881-->

* La aplicación ahora traduce todas las cadenas traducibles como se espera para la página del carro de administración. Anteriormente, la carga de traducción se producía demasiado tarde y omitía todos los observadores suscritos a la acción de controlador antes del envío. [GitHub-31849](https://github.com/magento/magento2/issues/31849)

<!-- MC-39776-->

* La validación del formulario en la página Crear nueva cuenta de cliente ahora funciona correctamente cuando la configuración de la extensión de habilitación de **Iniciar sesión como cliente** está deshabilitada. Anteriormente, la aplicación arrojaba un error de JavaScript.

<!-- MC-39193-->

* Se ha mejorado la administración de excepciones para los procesos secundarios bifurcados por `ProcessManager`. Cuando ahora se produce una excepción, se sale del proceso principal y se muestra un mensaje de error solo una vez. Anteriormente, se registraban varios errores de indizador y se mostraban varios mensajes. [GitHub-30622](https://github.com/magento/magento2/issues/30622)

<!-- MC-39132-->

* Los complementos de Magento Open Source globales (por ejemplo, `webapi_rest` y `graphql` ) ya no se activan para un nuevo tipo de área personalizada cuando el `di.xml` de este archivo de área no contiene complementos registrados.

<!-- MC-38770-->

* Las excepciones que se producen durante la inicialización ya no se almacenan en caché y ahora almacenan en déclencheur un código de respuesta 500.

<!-- ENGCOM-8232-->

* El último controlador combinado en un archivo `communication.xml` ya no invalida todos los controladores creados anteriormente. [GitHub-29528](https://github.com/magento/magento2/issues/29528)

### Correcciones generales

<!-- MC-41194-->

* La aplicación ahora muestra el número correcto de estrellas en la página Mis críticas de producto y en la página Mi cuenta revisiones recientes. Anteriormente, la aplicación solo aplicaba las estrellas de revisión a la primera revisión y dejaba sin protagonizar las demás revisiones de la página.

<!-- MC-40653-->

* Los vínculos de cuenta en los encabezados ahora siguen los estándares WCAG. Anteriormente, los vínculos de cuenta en los encabezados contenían ID duplicados, lo que provocaba que fallara la validación de WCAG.

<!-- MC-39765-->

* La aplicación ya no genera errores generados por el registro del sistema cuando un comprador invitado utiliza una dirección no válida. Anteriormente, la aplicación mostraba este error intermitentemente en lugar de procesar la página: `No such entity with addressId`. [GitHub-15115](https://github.com/magento/magento2/issues/15115)

<!-- MC-39747-->

* El proceso de cambio de tamaño de la imagen ya no se detiene para las imágenes en formato no compatible. Anteriormente, cuando `catalog:images:resize` encontraba un formato de imagen no compatible, el proceso se detuvo y la aplicación mostró este error: `bin/magento catalog:images:resize Unsupported image format`.

<!-- ENGCOM-8925-->

* Se ha agregado compatibilidad con WEBP y AVIF para imágenes de logotipo al administrador. [GitHub-32495](https://github.com/magento/magento2/issues/32495)

<!-- MC-38156-->

* Ya no puede cambiar el ámbito del atributo `media_gallery`. Anteriormente, cuando se volvía a cambiar el ámbito del atributo `media_gallery` a `global`, la aplicación arrojaba un error.

<!-- MC-36818  magento/partners-magento2ee#470-->

* Los productos relacionados que se agregaron como una actualización programada ya no se muestran en la página de productos de una tienda después de la fecha de finalización de la actualización. [GitHub-469](https://github.com/magento/partners-magento2ee/issues/469)

<!-- MC-33499 magento/partners-magento2ee#446-->

* El filtrado ahora funciona como se espera en la lista de exportaciones programadas cuando se selecciona el tipo de entidad. Anteriormente, el filtro no funcionaba y la aplicación arrojaba un error de JavaScript. [GitHub-361](https://github.com/magento/partners-magento2ee/issues/361)

<!-- MC-30084 ENGCOM-8674-->

* Las imágenes de categoría ahora se copian como se espera del directorio `catalog/tmp/category` al directorio `catalog/category` cuando las categorías se guardan mediante el método de almacenamiento de la base de datos. La fila de imagen de la tabla `media_storage_file_storage` ahora también tiene el `directory_id` correcto. [GitHub-11995](https://github.com/magento/magento2/issues/11995)

<!-- MC-24768-->

* Ahora se notifica a los comerciantes sobre las cachés invalidadas como se espera después de enviar cambios a la jerarquía de CMS. Anteriormente, la aplicación no invalidaba las cachés al guardar la jerarquía de CMS.

<!-- MC-24725-->

* Se han reducido las solicitudes redundantes de AJAX a la sección del carro de compras. Anteriormente, la aplicación no cargaba correctamente el subtotal del carro de compras, lo que activaba la recarga de nuevo.

<!-- MC-23740-->

* Se ha agregado validación para las direcciones URL para evitar que las palabras reservadas se incluyan en las claves URL. Consulte [Definición de identificadores uniformes de recursos (URI) conocidos](https://tools.ietf.org/html/rfc5785)

<!-- ENGCOM-9037-->

* En implementaciones que ejecutan PHP 7.4, la aplicación devuelve ahora un error 404 cuando la configuración **Generar reescrituras de URL de &quot;categoría/producto&quot;** se establece en **No**, y un comprador intenta acceder a una ruta de categoría inexistente. Anteriormente, la aplicación devolvió un error 500 que indica: `Trying to access array offset on value of type bool`. [GitHub-31984](https://github.com/magento/magento2/issues/31984)

<!-- ENGCOM-8901-->

* `nowdoc` ha reemplazado a `heredoc` en el conmutador de almacén `Magento_Backend`. [GitHub-32262](https://github.com/magento/magento2/issues/32262)

<!-- ENGCOM-8685-->

* Se agregaron las regiones Argentina, Bolivia, Chile, Ecuador, Guyana, Paraguay, Perú, Surinam y Venezuela a la tabla `directory_country_region`. [GitHub-31169](https://github.com/magento/magento2/issues/31169)

<!-- ENGCOM-8505-->

* Se agregaron las regiones de Albania, Dinamarca, Grecia, Islandia, Portugal y Suecia a la tabla `directory_country_region`. [GitHub-31040](https://github.com/magento/magento2/issues/31040)

<!-- MC-30104 magento/magento2#31480 -->

* Los mensajes ahora se marcan como errores en la cola de mensajes de MysqlMQ cuando se producen excepciones. [GitHub-18140](https://github.com/magento/magento2/issues/18140)

<!-- ENGCOM-8579-->

* La aplicación ahora hace referencia al objeto de clase correcto al cargar la información de impuestos para las páginas de nota de abono de administrador y factura. [GitHub-31197](https://github.com/magento/magento2/issues/31197)

<!-- MC-40346-->

* La integración de Royal Mail Click &amp; Drop ahora funciona según lo esperado. Anteriormente, la aplicación arrojó este error cuando intentó activar esta integración: `Sorry! Something went wrong. Please try again later`. [GitHub-28996](https://github.com/magento/magento2/issues/28996)

<!-- ENGCOM-8498-->

* La aplicación ahora muestra un mensaje de error informativo cuando se pasa un envío, una nota de abono o un ID de factura incorrectos en una dirección URL. Anteriormente, la aplicación arrojaba un error grave. [GitHub-30424](https://github.com/magento/magento2/issues/30424)

<!-- ENGCOM-8632-->

* Se ha eliminado la recursión en la ubicación de los archivos estáticos.  La aplicación ahora muestra una página 404 en lugar de un error 500. Anteriormente, un error en la configuración predeterminada de NGINX provocaba una recursión infinita. [GitHub-31530](https://github.com/magento/magento2/issues/31530)

<!-- ENGCOM-8550-->

* El nombre del archivo `cms_index_noroute.xml` se ha corregido a `cms_noroute_index.xml`. [GitHub-31300](https://github.com/magento/magento2/issues/31300)

<!-- ENGCOM-8516-->

* El archivo `.editorconfig` se ha refactorizado para corregir el formato automático de `db_schema_whitelist.json` archivos. [GitHub-31171](https://github.com/magento/magento2/issues/31171)

<!-- ENGCOM-9018-->

* El cambio de tamaño de una ventana del explorador ya no almacena en déclencheur los eventos de lupa de enlace duplicados. [GitHub-30788](https://github.com/magento/magento2/issues/30788)

<!-- ENGCOM-8722-->

* La aplicación ya no emite una excepción SQL al filtrar `Magento\Users\Model\ResourceModel\Users\Collection` por `user_id`. [GitHub-31216](https://github.com/magento/magento2/issues/31216)

### Tarjetas de regalo

<!-- MC-32651-->

* Se ha añadido la lógica de validación de intervalo de precios a la página de creación de tarjetas regalo. Anteriormente, un administrador podía crear una tarjeta con un valor mínimo que superara el valor máximo. [GitHub-493](https://github.com/magento/partners-magento2ee/issues/493)

<!-- MC-32638979 magento/partners-magento2ee#40851-->

* La consulta `addRequisitionListItemsToCart` ahora devuelve la cantidad de una tarjeta regalo personalizada como se espera cuando la solicitud no contiene un valor para `allow_open_amount`.

### Mensaje de regalo

<!-- ENGCOM-8539-->

* Ahora se redirige directamente a los administradores a la página de administración solicitada después de iniciar sesión.  Anteriormente, cuando un administrador iniciaba sesión, se le redirigía al tablero de administración (o a cualquier página configurada como página de inicio) y tenía que desplazarse manualmente a su destino. [GitHub-31042](https://github.com/magento/magento2/issues/31042)

### Google Tag Manager

<!-- MC-39072-->

* El componente IU para la dirección de facturación en la página de pago del flujo de trabajo de cierre de compra ahora utiliza correctamente la dirección de oferta cuando Google Tag Manager está habilitado. Anteriormente, se producía un error de JavaScript en la página de pago.

### GraphQL

<!-- MC-41885-->

* La consulta de GraphQL `products` ahora devuelve opciones de atributo que se ordenan en el mismo orden utilizado en la página de edición de atributos.

<!-- MC-41473-->

* La respuesta a la solicitud de GraphQL `{ category(id: 2){ children { name children { name } } } }` ahora incluye un árbol de categorías ordenado correctamente.

<!-- MC-41030-->

* El objeto `CartItemPrices` ahora contiene el nuevo campo de GraphQL `fixed_product_taxes`, que devuelve una matriz de los impuestos fijos sobre productos que se aplican a un elemento del carro de compras. Anteriormente, los impuestos de producto fijos aplicados a un elemento del carro de compras no se incluían en la consulta del carro de compras.

<!-- MC-40920-->

* Las solicitudes vacías a GraphQL ahora emiten el código de respuesta 200 en lugar de 500. Anteriormente, el analizador de GraphQL arrojaba una excepción antes de que se generara el resultado de la consulta.

<!-- MC-40867 magento/partners-magento2ee#532 -->

* La mutación `applyRewardPointsToCart` ahora actualiza el total general de un carro de compras para reflejar con precisión el valor de los puntos de recompensa deducidos. [GitHub-486](https://github.com/magento/partners-magento2ee/issues/486)

<!-- MC-40379-->

* Los productos desactivados ya no se incluyen en la respuesta de GraphQL cuando GraphQL se utiliza para vincular productos de ampliación de venta.

<!-- MC-40262-->

* Los comerciantes ahora pueden usar el método GraphQL `setShippingAddressesOnCart` para establecer las direcciones de facturación y envío para el carro de compras de un comprador cuando se deshabilita el cierre de compra de un invitado.

<!-- MC-39508-->

* La consulta `categoryList` ya no genera una excepción cuando contiene varios fragmentos en el objeto `CategoryTree`. [GitHub-31086](https://github.com/magento/magento2/issues/31086)

<!-- MC-38995-->

* La consulta de GraphQL `product` ahora devuelve los precios correctos del grupo de clientes.

<!-- MC-38822-->

* La respuesta de consulta `products` de GraphQL ahora ordena las agregaciones según la posición del atributo del producto.

<!-- ENGCOM-8462-->

* La aplicación ya no emite errores de tipo durante las consultas de GraphQL cuando los sufijos de URL de productos y categorías contienen valores nulos. [GitHub-30909](https://github.com/magento/magento2/issues/30909)

<!-- magento/magento2#31164-->

* El objeto `CustomizableDateValue` ahora contiene el atributo `type`. Su valor es una enumeración que se puede establecer en DATE, DATE_TIME o TIME.

<!--  magento/partners-magento2ee#421-->

* La consulta [`dynamicBlocks`](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/dynamic-blocks/) devuelve el contenido de bloques dinámicos que coinciden con los filtros especificados.

<!-- ENGCOM-8603-->

* La solicitud POST `V1/products/special-price-delete` ahora elimina solamente el precio con un `store_id` especificado según lo esperado. Anteriormente, la llamada eliminaba todos los precios especiales para el SKU especificado de todas las tiendas. [GitHub-25907](https://github.com/magento/magento2/issues/25907)

<!--  magento/partners-magento2ee#280 -->

* Se ha corregido un error con el atributo `country_code` en la mutación `createGiftRegistry`.

<!-- magento/partners-magento2ee#280 -->

* Se han corregido problemas con el atributo `giftRegistryUid` de la mutación `updateGiftRegistryItems`.

<!-- magento/partners-magento2ee#280 -->

* Se ha agregado una comprobación adicional para evitar que la mutación `updateGiftRegistryRegistrants` se use para agregar personas aleatorias como inscritos a un registro de regalos.

<!-- magento/magento2#31380 -->

* La mutación `addConfigurableProductsToCart` devuelve ahora la miniatura correcta del producto especificado. Anteriormente, devolvía la miniatura del producto principal.

<!-- ENGCOM-8477-->

* La consulta `products` ya no expone el precio especial de un producto cuando el período de precio especial está establecido para una fecha futura. [GitHub-30210](https://github.com/magento/magento2/issues/30210), [GitHub-29631](https://github.com/magento/magento2/issues/29631)

<!-- magento-engcom/magento2ee#576-->

* La respuesta a la consulta `customer` ahora incluye el atributo `total_giftcard` como parte del objeto `OrderTotal`.

<!-- MC-41084 ENGCOM-9042 -->

* Se ha corregido un problema que hacía que la consulta `products` devolviera información errónea acerca de los niveles de precios en artículos que no tienen establecidos precios de nivel. [GitHub-32279](https://github.com/magento/magento2/issues/32279)

### Imagen

<!-- MC-38951-->

* Ahora puede establecer los atributos del paquete required_options y has_options como se espera al crear o actualizar un producto del paquete mediante el extremo POST `/V1/product/:sku`. Anteriormente, estos atributos personalizados se establecían en 0 (cero) a pesar de los esfuerzos por establecerlo en 1 (uno).

### Importar/exportar

<!-- MC-41576-->

* El filtro ID de categoría para entidades de producto en la cuadrícula Exportar atributos de entidad de la página ahora funciona según lo esperado.

<!-- MC-41439-->

* El estado de existencias de productos agrupados ahora se actualiza, según lo esperado, cuando todos los productos secundarios están agotados. [GitHub-32647](https://github.com/magento/magento2/issues/32647)

<!-- MC-41184-->

* El estado de stock de producto configurable ahora se actualiza automáticamente según lo esperado cuando el estado de stock de producto secundario se actualiza mediante la importación. Anteriormente, el estado de existencias del producto no se actualizaba automáticamente cuando el estado de existencias del producto secundario se actualizaba mediante la importación.

<!-- MC-41151-->

* Ahora puede guardar valores vacíos en una exportación programada. Anteriormente, la aplicación actualizaba los valores de filtro vacíos después de crear o guardar la exportación. Los valores `no` y `not specified` se representaban con cero en la base de datos, y se anuló un valor de `not selected` con `no`.

<!-- MC-41092-->

* El proceso de exportación ahora tiene en cuenta el ámbito de la función del usuario al exportar productos, fuentes de stock y entidades del cliente. Anteriormente, el proceso de exportación ignoraba el ámbito de la función de usuario, que permitía la exportación de entidades de exportación de función de usuario privadas.

<!-- MC-40943-->

* La aplicación ahora establece la clase de impuestos del producto en `None` si se importa un producto con `tax_class_name` valores `None` o `0`. Anteriormente, si `product tax_class_name` era `None` en el archivo CSV, la aplicación creaba una nueva clase de impuestos `None`, que duplicaba la clase de impuestos existente. Si `product tax_class_name` eran `0` en el archivo CSV, la aplicación ignoró ese valor y la clase de impuestos del producto no cambió después de la importación.

<!-- MC-40898-->

* Los administradores ahora pueden cambiar correctamente el `name` de `bundle_values` de un producto del paquete desde el administrador. Anteriormente, la aplicación mostraba el producto agotado en la tienda después de cambiar el nombre del administrador. Los productos también se combinaron con el mismo SKU en una sola sección de opción de paquete.

<!-- MC-40333-->

* La aplicación ahora tiene en cuenta el ámbito del usuario al exportar los datos del cliente. Anteriormente, al intentar exportar clientes, la aplicación exportaba datos de clientes de todos los sitios web.

<!-- MC-40305-->

* La aplicación ahora elimina las relaciones de producto entre las ventas ascendentes, las ventas cruzadas y los productos relacionados durante la importación del archivo CSV, tal como se espera cuando se especifica `__EMPTY__VALUE__` en el archivo CSV.

<!-- MC-40012-->

* La exportación de datos de direcciones personalizadas para muchos clientes (Administrador **Sistema** > **Exportar**) ya no provoca un error de memoria de forma rutinaria. Anteriormente, al exportar los datos de direcciones personalizadas, la aplicación intentaba cargar todos los datos del cliente, lo que provocaba un agotamiento de la memoria, y la aplicación arrojaba un error de no asignación de memoria.

<!-- MC-39977-->

* Los precios de nivel duplicados ya no se importan durante el proceso de importación CSV predeterminado. Anteriormente, faltaba validación para evitar la importación de precios de nivel duplicados y, cuando se producían precios de nivel duplicados, los comerciantes no podían guardar los productos. Los comerciantes también vieron este error cuando intentaron programar un cambio de producto: `SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry…`.

<!-- MC-39609  magento/magento2#31397-->

* Todas las imágenes de productos se validan durante la importación. Anteriormente, la aplicación solo validaba la primera imagen cuando un producto tenía varias imágenes. [GitHub-28236](https://github.com/magento/magento2/issues/28236)

<!-- MC-39483-->

* Ahora puede eliminar una región de una dirección de cliente como se espera durante la importación. Anteriormente, la región asignada no cambiaba cuando se importaba una dirección de cliente con una región vacía.

<!-- MC-38810-->

* Los productos con contenido JSON o HTML como atributos de producto adicionales ahora se exportan correctamente a un archivo CSV. Anteriormente, el archivo CSV contenía cadenas de datos superpuestas en campos incorrectos.

### Índice

<!-- MC-39718 ENGCOM-8567-->

* Process Manager ahora se cierra con un error cuando falla un proceso secundario. Anteriormente, Process Manager siempre se cerraba correctamente si el número de funciones que se le pasaban (por ejemplo, dimensiones del indizador) era inferior al valor de la variable de entorno `MAGE_INDEXER_THREADS_COUNT`. [GitHub-30964](https://github.com/magento/magento2/issues/30964)

<!-- MC-39272-->

* Los productos ahora están disponibles según lo esperado en los resultados de búsqueda de la tienda al vincular productos con una solicitud REST PUT `/V1/products/:sku/links` cuando el modo de indizador está establecido en **Actualizar al guardar**.

<!-- MC-38310 magento/magento2#32693-->

* El indizador de reglas de precios de catálogo ahora funciona como se espera cuando el modo de indizador está establecido en **Actualizar al guardar**. [GitHub-370](https://github.com/magento/partners-magento2ee/issues/370)

<!-- ENGCOM-8890-->

* La eliminación de una categoría deshabilitada que no incluye un producto ahora no afecta a la búsqueda en el catálogo ni a las tablas de índice plano de categorías. Anteriormente, al eliminar una categoría inactiva se activaba un reindexado completo. [GitHub-23297](https://github.com/magento/magento2/issues/23297)

<!-- ENGCOM-8599 8474-->

* Los indexadores personalizados ahora pueden utilizar nombres de columna de entidad diferentes para las suscripciones. Anteriormente, el déclencheur de la base de datos utilizaba el nombre de columna del indizador establecido por última vez en **Actualizar por programación** en lugar del indizador designado. [GitHub-21853](https://github.com/magento/magento2/issues/21853)

<!-- ENGCOM-8887-->

* La aplicación ya no envía solicitudes de AJAX para volver a cargar las secciones de datos de clientes (`Magento_Customer/js/section-config`) que no se ven afectadas por la solicitud. [GitHub-31948](https://github.com/magento/magento2/issues/31948)

<!-- MC-39569-->

* Los siguientes indizadores ya no se invalidan después de agregar, quitar o reordenar productos en una categoría: `catalog_category_product` y `catalogsearch_fulltext` (y sus dependientes). Anteriormente, estas eliminaciones involuntarias desencadenaban una reindexación completa de los sitios. Ahora se impide una reindexación completa en estas condiciones cuando el catálogo plano no está habilitado.

### Infraestructura

<!-- MC-41445-->

* La dependencia `pelago/emogrifier` se ha actualizado de la versión 3.1.0 a la 5.0.0. Esta actualización resultó en la introducción de cambios incompatibles con versiones anteriores en la clase `Magento\Email\Model\Template\Filter`. El código modificado se ejecuta durante el procesamiento de las plantillas de correo electrónico. Consulte [Referencia de BIC](https://developer.adobe.com/commerce/php/development/backward-incompatible-changes/reference/).

<!-- MC-42212-->

* Se ha corregido un problema con `\Magento\CatalogInventory\Model\Indexer\Stock\CacheCleaner::getCategoryIdsByProductIds` que impedía guardar un nuevo producto.

<!-- MC-42199-->

* Se ha eliminado la biblioteca obsoleta TinyMCE v3. El módulo `Magento_Tinymce3Banner` y las pruebas MFTF relacionadas con TinyMCE v3.x se han eliminado de Adobe Commerce.

<!-- MC-41497-->

* La aplicación ya no genera un error `Invalid header value detected` en el formulario Contáctenos cuando un comprador introduce una dirección de correo electrónico que contiene marcas diacríticas francesas (como &quot;é&quot;, &quot;è&quot;). La aplicación ahora convierte letras UTF-8 en el nombre de usuario a codificación ASCII. Anteriormente, las letras UTF-8 no se convertían a codificación ASCII en la sección única de la dirección de correo electrónico.

<!-- MC-39947-->

* La aplicación ya no genera un error grave de PHP cuando se añade un complemento a una clase principal. [GitHub-31291](https://github.com/magento/magento2/issues/31291)

<!-- ENGCOM-9012-->

* Se han actualizado los archivos README.md para estos módulos: `Magento_Msrp`, `Magento_MsrpConfigurableProduct`, `Magento_MsrpGroupedProduct`, `Magento_Multishipping`, `Magento_MysqlMq`. [GitHub-32577](https://github.com/magento/magento2/issues/32577)

<!-- magento/partners-magento2ee#501-->

* `phpcpd` se ha actualizado a la versión 6.0.3 para garantizar la compatibilidad con PHP 8.

<!-- ENGCOM-9073-->

* `ramsey/uuid` se ha actualizado por compatibilidad con PHP 8.0. [GitHub-31777](https://github.com/magento/magento2/issues/31777), [GitHub-826](https://github.com/magento/magento2-functional-testing-framework/issues/826)

<!-- ENGCOM-8997-->

* `colinmollenhour/php-redis-session-abstract` se ha actualizado a la versión 1.4.4 para garantizar la compatibilidad con PHP 8. [GitHub-32709](https://github.com/magento/magento2/issues/32709)

<!-- ENGCOM-8527-->

* Se corrigió una combinación no válida de tabulaciones y espacios en el archivo `phpstan.neon`. [GitHub-31239](https://github.com/magento/magento2/issues/31239)

<!-- ENGCOM-8668-->

* Se ha eliminado el uso de la propiedad obsoleta `$_isScopePrivate` en toda la base de código. [GitHub-30506](https://github.com/magento/magento2/issues/30506)

<!-- ENGCOM-8551-->

* Los diseños de página ya no están codificados en  `Magento\Widget\Block\Adminhtml\Widget\Instance\Edit\Chooser\Container`.  Como resultado, la función `getPageLayouts()` devuelve ahora la lista real de diseños de página declarados por los diferentes módulos según lo esperado. Anteriormente, solo devolvía diseños codificados. [GitHub-31168](https://github.com/magento/magento2/issues/31168)

<!-- ENGCOM-8509-->

* El archivo `composer.lock` se ha actualizado a la última versión de Coding Standard. [GitHub-31152](https://github.com/magento/magento2/issues/31152)

<!-- ENGCOM-9015 -->

* Se agregó una dependencia que falta en el paquete `web-token/jwt-framework` al `magento/module-jwt-framework-adapter`. [GitHub-32578](https://github.com/magento/magento2/issues/32578)

<!-- ENGCOM-9019 -->

* Se han agregado agentes de escucha pasivos a la biblioteca `fotorama.js` para mejorar la puntuación de las métricas de Lightthouse. [GitHub-31140](https://github.com/magento/magento2/issues/31140)

<!-- ENGCOM-9014 -->

* Se ha actualizado el archivo README.md para el módulo Google Analytics. [GitHub-32616](https://github.com/magento/magento2/issues/32616)

<!-- ENGCOM-8375 -->

* El Administrador de procesos ahora gestiona las excepciones correctamente en los procesos bifurcados. El proceso principal ahora se cierra y la aplicación muestra un mensaje de error solo una vez. Además, las excepciones de los procesos bifurcados ahora se gestionan cuando se inician en el proceso principal. Anteriormente, la aplicación registraba varios errores de indizador y mostraba varios mensajes de error.  [GitHub-30622](https://github.com/magento/magento2/issues/30622)

<!-- ENGCOM-8544 -->

* La aplicación ya no emite un error cuando se añade un complemento a una clase principal. (El parámetro `optionsProvider` ahora se declara después de `getContentIdentities` en `Assest.php`.) Anteriormente, la aplicación arrojaba este error: `Error: Cannot instantiate interface Magento\Framework\Data\OptionSourceInterface`. [GitHub-31291](https://github.com/magento/magento2/issues/31291)

<!-- ENGCOM-8549 -->

* Al ejecutar `Magento\Framework\Filesystem\Io\Ftp::ls()` en una carpeta vacía, ahora se devuelve una matriz vacía como se esperaba. Anteriormente, la aplicación arrojó esta excepción: `Invalid argument supplied for foreach() in vendor/magento/framework/Filesystem/Io/Ftp.php…`. [GitHub-31288](https://github.com/magento/magento2/issues/31288)

<!-- ENGCOM-8791 -->

* El método `update` tanto para el Rol como para las Reglas se ha marcado como obsoleto en `app/code/Magento/Authorization/Model/Role.php`. [GitHub-30756](https://github.com/magento/magento2/issues/30756)

<!-- ENGCOM-8946 -->

* Se ha corregido la concatenación de los parámetros de cookie de SameSite. Anteriormente, una concatenación incorrecta adjuntaba el sufijo `lex` a `value`, `domain` y otros parámetros. [GitHub-26377](https://github.com/magento/magento2/issues/26377), [GitHub-32440](https://github.com/magento/magento2/issues/32440)

<!-- ENGCOM-8698 ENGCOM-9034 -->

* `allure-framework/allure-phpunit` se ha actualizado a la versión 1.3.1 en toda la base de código. Anteriormente, la aplicación mostraba este error: `Warning: Use of undefined constant GLOB_BRACE - assumed 'GLOB_BRACE' (this will throw an Error in a future version of PHP) in /var/www/html/src/vendor/allure-framework/allure-phpunit/src/Yandex/Allure/Adapter/AllureAdapter.php:74.` [GitHub-24635](https://github.com/magento/magento2/issues/24635)

<!-- ENGCOM-8783 -->

* La aplicación ahora muestra más errores informativos cuando se producen errores al ejecutar comandos `bin/magento` en el modo de producción. Anteriormente, la aplicación no mostraba mensajes de error o mostraba mensajes sin información. [GitHub-32786](https://github.com/magento/magento2/issues/32786)

<!-- ENGCOM-8953 -->

* El objeto PHP `ArrayIterator` se ha actualizado para que funcione según lo esperado con PHP 7.4. [GitHub-32088](https://github.com/magento/magento2/issues/32088)

<!-- ENGCOM-8469 -->

* La aplicación ya no genera un error cuando un cliente intenta completar un pedido cuando no hay transportistas disponibles. En su lugar, muestra la página de cierre de compra y este mensaje: `Sorry, no quotes are available for this order at this time`. Anteriormente, la aplicación mostraba una página de desprotección en blanco y registraba este mensaje en el registro de excepciones: `array_keys() expects parameter 1 to be array, null given`. [GitHub-30830](https://github.com/magento/magento2/issues/30830)

<!-- ENGCOM-8557 -->

* La aplicación ya no registra cada cookie como un contexto independiente. La matriz `$_COOKIE` también se ha convertido en una cadena. Anteriormente, debido a que cada cookie se registraba como un contexto independiente, cuando el número de cookies superaba las 50, la aplicación registraba este mensaje: `Unable to send the cookie. Maximum number of cookies would be exceeded`. [GitHub-31334](https://github.com/magento/magento2/issues/31334)

### Factura

<!-- ENGCOM-8472 -->

* Al crear nuevas facturas en el Administrador, la casilla de verificación **Copia de correo electrónico de** ahora funciona según lo esperado. Anteriormente, la casilla de verificación se ignoraba si la configuración global para enviar correos electrónicos de factura estaba habilitada en **Correos electrónicos de ventas**. Ahora es coherente y funciona del mismo modo que las páginas de creación de envío y nota de abono. [GitHub-28511](https://github.com/magento/magento2/issues/28511)

### Galería de medios

<!-- MC-41728-->

* `bin/magento media-gallery:sync` ahora falla como se espera al procesar imágenes PNG que carecen de información de XMP.

<!-- ENGCOM-8814-->

* Las entradas de la tabla `catalog_product_entity_media_gallery` se quitan según lo esperado cuando se eliminan productos relacionados. [GitHub-17727](https://github.com/magento/magento2/issues/17727)

<!-- ENGCOM-8945-->

* Los detalles de la imagen ahora se pueden actualizar en la Galería multimedia cuando la minificación de JavaScript está habilitada. Anteriormente, los detalles de la imagen no se guardaban y la aplicación mostraba este error: `TypeError: Cannot read property 'call' of undefined in jquery.validate`. [GitHub-31633](https://github.com/magento/magento2/issues/31633)

### MFTF

Las nuevas características y las correcciones de errores principales de MFTF se describen en [Registro de cambios del marco de pruebas funcionales](https://github.com/magento/magento2-functional-testing-framework/blob/develop/CHANGELOG.md).

<!-- ENGCOM-8496-->

* Los comandos `magento indexer:reindex` y `cache:flush` y el grupo de acción `AdminReindexAndFlushCache` se han eliminado de las pruebas para mejorar la ejecución de los siguientes módulos: `Bundle`, `Catalog`, `CatalogRule`, `CatalogRuleConfigurable`, `CatalogUrlRewrite`, `Downloadable`, `Indexer`, `Paypal` y `Sales`. [GitHub-31031](https://github.com/magento/magento2/issues/31031)

<!-- ENGCOM-8562-->

* `AdminSubmitCategoriesPopupActionGroup` se ha agregado a las pruebas para evitar errores en las pruebas. [GitHub-31251](https://github.com/magento/magento2/issues/31251)

<!-- ENGCOM-8562-->

* Las pruebas se han refactorizado con `StorefrontCheckQuickSearchStringActionGroup` y `StorefrontAssertProductNameOnProductMainPageActionGroup` (grupos de acción existentes). [GitHub-31251](https://github.com/magento/magento2/issues/31251)

#### Pruebas refactorizadas

Las siguientes pruebas se han refactorizado para mejorar el tiempo de ejecución:

`AddOutOfStockProductToCompareListTest`  <!-- ENGCOM-8547-->

`AdminApplyTierPriceToProductWithPercentageDiscountTest` <!-- ENGCOM-8522-->

`AdminCheckingCreditMemoTotalsTest` <!-- ENGCOM-8606-->

`AdminCheckDashboardWithChartsTest` <!-- ENGCOM-8897-->

`AdminConfigDefaultProductLayoutFromConfigurationSettingTest`  <!-- ENGCOM-8891-->

`AdminCreateInvoiceTest` <!-- ENGCOM-8581-->

`AdminCreateOrderAddProductCheckboxTest` <!-- ENGCOM-8492-->

`AdminMassOrdersCancelCompleteAndClosedTest` <!-- ENGCOM-8538-->

`AdminMassOrdersCancelProcessingAndClosedTest`  <!-- ENGCOM-8670-->

`AdminMassOrdersHoldOnCompleteTest`  <!-- ENGCOM-8897-->

`AdminMassOrdersHoldOnPendingAndProcessingTest` (reemplazo de `AdminMassOrdersHoldOnPendingAndProcessingTest` obsoleto) <!-- ENGCOM-8669-->

`AdminMassOrdersUpdateCancelPendingOrderTest` <!-- ENGCOM-8602-->

`AdminMassProductPriceUpdateTest` <!-- ENGCOM-8587-->

`AdminMassUpdateProductAttributesMissingRequiredFieldTest` <!-- ENGCOM-8511-->

`AdminOrdersReleaseInUnholdStatusTest`  <!-- ENGCOM-8592—-->

`AdminPanelIsFrozenIfStorefrontIsOpenedViaCustomerViewTest`  <!-- ENGCOM-8601-->

`AdminSortingByWebsitesTest`  <!-- ENGCOM-8583-->

`AdminUpdateSimpleProduct` <!-- ENGCOM-8536-->

`AdminUpdateSimpleProductWithRegularPriceInStockEnabledFlatTest`  <!-- ENGCOM-8533-->

`AdminValidateShippingTrackingNumberTest`  <!-- ENGCOM-8593-->

`CancelOrdersInOrderSalesReportTest`  <!-- ENGCOM-8591-->

`ProductsQtyReturnAfterOrderCancelTest` <!-- ENGCOM-8506-->

`StorefrontConfigurableProductBasicInfoTest`  <!-- ENGCOM-8711-->

#### Grupos de acción

Las acciones repetitivas se han sustituido por grupos de acciones en estas pruebas:

`AdminCheckConfigurableProductPriceWithDisabledChildProductTest`  <!-- ENGCOM-8574-->

`AdminConfigurableProductCreateTest` <!-- ENGCOM-9013-->

`AdminConfigurableProductRemoveAnOptionTest` <!-- ENGCOM-9038-->

`AdminCreateProductDuplicateUrlkeyTest` <!-- ENGCOM-9007-->

`AdminCreateSimpleProductNegativePriceTest` <!-- ENGCOM-900-->

`AdminCreateSimpleProductZeroPriceTest`  <!-- ENGCOM-9040-->

`AdminCreateVirtualProductFillingRequiredFieldsOnlyTest` <!-- ENGCOM-9003-->

`AdminUpdateSimpleProductWithRegularPriceInStockDisabledProductTest` <!-- ENGCOM-9002-->

`AdminUpdateSimpleProductWithRegularPriceInStockNotVisibleIndividuallyTest`  <!-- ENGCOM-9011-->

`AdminUpdateSimpleProductWithRegularPriceInStockVisibleInCatalogOnlyTest`  <!-- ENGCOM-9041-->

#### Nuevos grupos de acción

`AdminClearFiltersOnGridActionGroup` <!-- ENGCOM-8604-->

`AdminClickAddNewPageOnPagesGridActionGroup`  <!-- ENGCOM-8613-->

`AdminClickInsertWidgetActionGroup` <!-- ENGCOM-8614-->

`AdminClickRefundOfflineOnNewMemoPageActionGroup` <!-- ENGCOM-8580-->

`AdminFillAccountInformationOnCreateOrderPageActionGroup` <!-- ENGCOM-8495-->

`AdminGoToOrderStatusPageActionGroup`  <!-- ENGCOM-8615-->

`AdminOpenCMSPagesGridActionGroup`<!-- ENGCOM-8682-->

`AdminSelectAttributeSetOnEditProductPageActionGroup` <!-- ENGCOM-8566-->

`AssertAdminProductIsAssignedToCategoryActionGroup` (reemplaza la cuadrícula de productos de filtrado por SKU y hace clic en la primera fila (para reducir el tiempo de ejecución de la prueba) <!-- ENGCOM-8535 8534-->

`AssertLinkActionGroup` <!-- ENGCOM-8457-->

`AssertStorefrontCartDiscountActionGroup` <!-- ENGCOM-8431-->

`ClickPlaceOrderActionGroup` <!-- ENGCOM-8671-->

`SaveCmsPageActionGroup` <!-- ENGCOM-8683-->

`StorefrontAssertProductNameIsNotOnProductMainPageActionGroup` <!-- ENGCOM-8562-->

`StorefrontGuestCheckoutProceedToPaymentStepActionGroup` <!-- ENGCOM-8582-->

`StorefrontHoverProductOnCategoryPageActionGroup` <!-- ENGCOM-8575-->

`StorefrontSelectCustomizeAndAddToTheCartButtonActionGroup` <!-- ENGCOM-8573-->

#### Grupos de acciones eliminados

<!-- ENGCOM-8525 8558 8608 8546 8695 8889 8681 8627 8714-->

* Se quitó `CliIndexerReindexActionGroup` (o se cambió el valor) de las pruebas para mejorar el tiempo de ejecución de los módulos `Backend`, `Bundle`, `BundleImportExport`, `Catalog`, `CatalogRule`, `CatalogSearch`, `Checkout`, `Downloadable`, `Elasticsearch`, `Elasticsearch6`, `Indexer`, `LayeredNavigation`, `LoginAsCustomer`, `Newsletter`, `Sales`, `SalesRule`, `Search`, `Store`, `Swatches`, `UrlRewrite`, `Weee` y `Wishlist`.

<!-- ENGCOM-8893 8951 8893 9001 8715 8724 8721 8843-->

* Se eliminaron `CliCacheFlushActionGroup` de `Catalog`, `CatalogUrlRewrite`, `Checkout`, `Config`, `ConfigurableProduct`, `Contact`, `Cookie`, `CurrencySymbol`, `Customer`, `Downloadable`, `Elasticsearch`, `Elasticsearch6`, `Fedex`, `Indexer`, `LayeredNavigation`, `LoginAsCustomer`, `Msrp`, `Multishipping`, `Sales`, `Swatches`, `Translation`, `UrlRewrite`, `Vault`, `Weee` y `Wishlist` módulos.

### Newsletter

<!-- ENGCOM-8948 MC-40885-->

* La aplicación ya no envía correos electrónicos de newsletter a un cliente que se ha dado de baja de la newsletter en el periodo de tiempo entre la creación de la cola de la newsletter y el envío de la newsletter. [GitHub-32116](https://github.com/magento/magento2/issues/32116)

<!-- ENGCOM-8675-->

* La aplicación respeta ahora la configuración de habilitación de boletines informativos (**Tiendas** > **Configuración** > **Configuración** > **Clientes** > **Boletín** > **Opciones generales**). Anteriormente, esta configuración siempre se recuperaba del ámbito predeterminado en implementaciones de varias tiendas. [GitHub-31188](https://github.com/magento/magento2/issues/31188)

<!-- ENGCOM-8551-->

* La llamada de REST a GET `/V1/customers/search` devuelve ahora la información correcta para los clientes suscritos a varios boletines. [GitHub-31168](https://github.com/magento/magento2/issues/31168)

<!-- ENGCOM-8817-->

* El estado de suscripción de almacenamiento en caché se ha eliminado del complemento de newsletter. [GitHub-19345](https://github.com/magento/magento2/issues/19345)

### Pedido

<!-- MC-40963-->

* La aplicación ahora calcula correctamente un saldo de cliente facturado al devolver el crédito de tienda a una cuenta de cliente para un pedido parcialmente facturado.

<!-- ENGCOM-8710-->

* La aplicación guarda ahora un pedido modificado como se espera cuando guarda un saldo de cliente reembolsado. [GitHub-393](https://github.com/magento/partners-magento2ee/issues/393)

### Métodos de pago

<!-- MC-41525-->

* La aplicación ahora procesa bloques de pago en `frontend` independientemente del área desde la que se envió el correo electrónico. (El área actual ahora se emula como `frontend` antes de que se represente el bloque de pago). Anteriormente, los bloques de pago se representaban en el área desde la que se enviaba el correo electrónico. Como resultado, tanto si el correo electrónico de ventas se activó desde el administrador como desde la API de REST, las direcciones URL de los recursos intentaron cargarlos desde un área incorrecta (`webapi_rest` o `adminhtml`).

<!-- MC-40810-->

* La aplicación ahora envía el vínculo de un producto descargable a la dirección de correo electrónico especificada durante el cierre de compra. Anteriormente, cuando un comprador invitado utilizaba el Pago y envío de PayPal Express e introducía diferentes direcciones de correo electrónico para enviar el pedido y para pagar, la aplicación enviaba el vínculo de producto descargable a la primera dirección.

<!-- MC-38051-->

* La aplicación ahora muestra un valor preciso para el crédito de tienda disponible en la página Método de pago en implementaciones que admiten varias monedas.

<!-- MC-37820-->

* La lista de métodos de pago ahora se actualiza según lo esperado cuando un comprador invitado cambia la dirección de envío de un pedido a un país diferente durante el cierre de compra. Anteriormente, el cambio de la dirección de facturación no almacenaba en déclencheur una actualización de los posibles métodos de pago.

#### PayPal

<!-- MC-39895-->

* Los compradores ahora pueden realizar correctamente un pedido de PayPal Payflow Pro con una dirección de envío que contenga caracteres especiales. Anteriormente, la aplicación rechazaba el pago de estos pedidos.

<!-- MC-39861-->

* Ahora se redirige a los compradores a la página de éxito del pedido después de un pago realizado correctamente con PayPal. Anteriormente, se redirigía a los compradores a una página en blanco porque se perdían datos de sesión.

### Rendimiento

<!-- MC-41647-->

* Se ha mejorado el rendimiento de la búsqueda de SKU de administrador en catálogos grandes. Las sugerencias del optimizador de consultas ahora fuerzan el uso del índice durante la ejecución de la consulta.

<!-- MC-41440-->

* Se ha mejorado el rendimiento del proceso cron `catalog_product_alert` al ejecutarse en tablas grandes (varios millones de filas). Anteriormente, `catalog_product_alert` cargaba todas las alertas de producto, lo que provocaba una excepción de memoria insuficiente.

<!-- ENGCOM-8752-->

* La aplicación ya no carga todas las páginas de CMS cuando solo se necesita una página de edición para procesar un formulario de administrador.  Estas páginas ahora se cargan más rápido. [GitHub-30936](https://github.com/magento/magento2/issues/30936)

<!-- ENGCOM-8510-->

* Los valores numéricos de las expresiones `WHERE IN` ahora se convierten en números, no en cadenas, lo que mejora el rendimiento de las consultas en algunas versiones de MariaDB. [GitHub-31135](https://github.com/magento/magento2/issues/31135)

* El modo `use_application_lock` le permite habilitar la reindexación mediante el uso de variables de entorno o configurando el archivo `app/etc/env.php`. Ya no es necesario restablecer manualmente el indexador después de un error con este modo habilitado. Cuando este modo no está habilitado, debe restablecer manualmente el indexador tras producirse un error. Consulte [Uso del modo de bloqueo de aplicación para reindexar procesos](https://developer.adobe.com/commerce/php/development/components/indexing/#using-application-lock-mode-for-reindex-processes).

### Precio

<!-- MC-41767-->

* La aplicación ahora actualiza correctamente el precio de un producto con precios agrupados cuando un comprador actualiza la cantidad del producto en la tienda. [GitHub-32669](https://github.com/magento/magento2/issues/32669)

<!-- MC-39282-->

* Los productos agrupados ahora se pueden guardar cuando se ha asignado un precio de nivel a los productos y se utiliza `Magento\Framework\Api\ExtensibleDataObjectConverter` para convertir los datos del producto. Anteriormente, cuando se usaba `Magento\Framework\Api\ExtensibleDataObjectConverter` para convertir datos de producto en una matriz al guardar un producto, la aplicación no lo guardó y mostró este error: `Notice: Undefined index: price in app/code/Magento/Catalog/Model/Product/Type/Price.php on line 382.`

<!-- MC-36811-->

* Las actualizaciones de precios programadas ahora se aplican a productos que ya están en el carro de compras de un comprador. [GitHub-356](https://github.com/magento/partners-magento2ee/issues/356)

<!-- MC-24693-->

* El precio de nivel ahora se aplica a un producto como se espera cuando los incrementos de cantidad están activados y el inventario decimal es inferior a 1. Anteriormente, la cantidad mínima de precio de nivel se establecía en 1.

### Vídeo del producto

<!-- MC-39755-->

* Ahora puede usar el botón **Agregar vídeo** (Administrador **Catálogo** > **Productos**) para agregar varios vídeos de forma consecutiva. Anteriormente, los campos de vídeo conservaban los detalles del vídeo anterior.

<!-- MC-40817-->

* La introducción del modo de pantalla completa para un vídeo de producto en una página de producto ahora funciona como se espera en dispositivos móviles. Anteriormente, al entrar en modo de pantalla completa, el vídeo se pausaba antes de salir del modo de pantalla completa.

<!-- MC-39759-->

* Los botones de flecha de navegación (**Siguiente** y **Anterior**) ahora están visibles como se espera en los vídeos de productos de tienda.

<!-- MC-40463-->

* Los comerciantes ahora pueden agregar videos de Vimeo usando el botón **Insertar video** en la página del producto según lo esperado. Anteriormente, la aplicación mostraba un error 404. [GitHub-31753](https://github.com/magento/magento2/issues/31753)

### Cita

<!-- MC-39531-->

* La llamada a `/V1/guest-carts/examplecartid/items` ahora devuelve la vista de almacén solicitada. Anteriormente, devolvía la primera vista de tienda de la tienda, no la solicitada.

<!-- MC-33893 ENGCOM-8992-->

* El envío de facturas ahora se puede configurar. Anteriormente, el envío de facturas no se podía configurar y la aplicación siempre enviaba una factura después de crearla. Los correos electrónicos de factura y pedido se enviaron en el ámbito de un observador. Los observadores independientes ahora rigen el envío del correo electrónico de pedido y el correo electrónico de factura. [GitHub-27656](https://github.com/magento/magento2/issues/27656)

### Informes

<!-- MC-39737-->

* La fecha de la última revisión en Administración **Informes** > **Revisiones** > **Por productos** ahora muestra la fecha de revisión correcta. Anteriormente, la aplicación mostraba la fecha de creación del producto en lugar de la fecha de revisión.

### Críticas

<!-- MC-40116-->

* Las estrellas de clasificación de revisión de productos ahora se calculan correctamente en la sección Detalles de revisión de la página Mi cuenta.

<!-- MC-39763-->

* Las secciones Clasificación promedio del producto y Clasificación del producto de la página de detalles de revisión del producto ahora se representan correctamente. Anteriormente, el ID de revisión no se establecía cuando la aplicación calculaba la clasificación de tiendas y la plantilla de revisión de producto no se representaba correctamente.

<!-- MC-36149-->

* El vínculo **Sea el primero en revisar este producto** ahora cambia según lo esperado a un recuento de revisiones después de que un administrador apruebe una revisión.

<!-- ENGCOM-8501 MC-30270-->

* Los administradores ahora pueden ordenar las revisiones de producto en la sección Revisiones de producto de la página de edición de productos según lo esperado. [GitHub-30270](https://github.com/magento/magento2/issues/30270)

<!-- MC-41003  magento/magento2#32259-->

* Las revisiones ahora se guardan con el ID de almacén correcto después de que un administrador apruebe y guarde la revisión desde un dominio diferente al del almacén. [GitHub-17510](https://github.com/magento/magento2/issues/17510)

### Recompensas

<!-- MC-39820-->

* La aplicación ahora actualiza la lista de métodos de pago cuando un comprador que ha cerrado la compra con varias direcciones comprueba o desmarca la opción **Crédito de tienda (puntos de recompensa)**.

### Ventas

<!-- MC-39796-->

* Los usuarios administradores ahora pueden realizar pedidos de artículos sin existencias cuando la opción **Pedidos no satisfechos** está habilitada (**Tiendas** > **Configuración** > **Catálogo** > **Inventario** > **Opciones de productos**). Anteriormente, la aplicación arrojaba un error.

<!-- MC-42280-->

* Los compradores ahora pueden encontrar un pedido en la página Pedidos y devoluciones cuando el apellido termina en un espacio en blanco.

<!-- MC-41438-->

* Las facturas ahora se crean con el total general correcto cuando se aplica una regla de precio del carro de compras que asigna un descuento del 100% a un pedido que también está sujeto a impuestos de descuento y productos del catálogo y que cumple los requisitos para el envío gratuito. Anteriormente, el pedido tenía el precio correcto, pero la factura no. [GitHub-30853](https://github.com/magento/magento2/issues/30853)

<!-- MC-40384-->

* Filtrar los pedidos por fecha ahora devuelve resultados precisos. Anteriormente, la aplicación no devolvía un pedido realizado después de 00:00 UTC cuando se filtraban los pedidos por fecha de pedido.

<!-- MC-40030-->

* La cuadrícula de notas de crédito ahora muestra el símbolo de moneda correcto cuando se usa el ámbito **Sitio web** para un atributo **Price** en una implementación de varias tiendas.

<!-- MC-40013-->

* Los botones de opción Métodos de pago ya no desaparecen en la sección Información de pago y envío del flujo de trabajo de cierre de compra después de volver a cargar la página Crear nuevo pedido del administrador. [GitHub-32106](https://github.com/magento/magento2/issues/32106)

<!-- MC-39891-->

* El texto en árabe ahora se muestra correctamente en las facturas.

<!-- MC-39864-->

* La aplicación ahora calcula correctamente los totales de impuestos de la nota de abono parcial para las notas de abono que se basan en un pedido o en una factura en tiendas que implementan PayPal Payment Pro como pasarela de pago. Anteriormente, para pedidos con varias facturas, la aplicación aplicaba todo el impuesto de ese pedido para la cancelación parcial de la factura en la nota de abono.

<!-- MC-39521 ENGCOM-8528-->

* La aplicación ya no crea interbloqueos de base de datos aleatorios al enviar nuevos correos electrónicos de pedido a los clientes. Anteriormente, se producían interbloqueos porque la aplicación guardaba todo el objeto y sus objetos relacionados en lugar de columnas SQL actualizadas. La aplicación mostró este tipo de error: `SQLSTATE[40001]: Serialization failure: 1213 Deadlock found when trying to get lock; try restarting transaction`. [GitHub-31090](https://github.com/magento/magento2/issues/31090)

<!-- MC-39353-->

* La página de detalles de pedido de tienda ahora muestra la cantidad de producto enviada correctamente. Anteriormente, las cantidades de productos eran incorrectas porque la plantilla de la página Envío de pedidos procesaba **Cantidad enviada** como `int`. Esto se cambió a `float`.

<!-- MC-39026-->

* La aplicación ya no envía copias por correo electrónico de una factura de pedido cuando el botón **Enviar copia por correo electrónico de la factura** está desmarcado. Anteriormente, la aplicación enviaba un correo electrónico a **Cliente** y **Enviar copia del correo electrónico de factura a**. [GitHub-28511](https://github.com/magento/magento2/issues/28511)

<!-- MC-38973-->

* La aplicación ya no crea entradas de direcciones duplicadas para una cuenta de cliente al crear un nuevo pedido desde el administrador para un cliente existente. Se cambió el nombre de la casilla de verificación **Guardar en la libreta de direcciones** a **Agregar a la libreta de direcciones** y ahora está desactivada de forma predeterminada en el administrador.

<!-- MC-38834-->

* La aplicación ahora usa el logotipo que se ha cargado en la configuración de **Logotipo para la vista de impresión de HTML** cuando los compradores imprimen un pedido desde su cuenta. Anteriormente, la aplicación mostraba el logotipo de LUMA en lugar del logotipo cargado.

<!-- MC-38625-->

* El localizador de artículos de la tienda ahora funciona como se espera cuando el número de artículos supera los 20. Anteriormente, el localizador tenía en cuenta productos secundarios y el recuento total era incorrecto.

<!-- MC-23915 ENGCOM-8713-->

* La aplicación muestra ahora los símbolos de divisa correctos para los valores de subtotal y envío y gestión en las cuadrículas de la página Pedido y de la página Nota de Abono. [GitHub-22662](https://github.com/magento/magento2/issues/22662)

<!-- ENGCOM-8486-->

* Los administradores que utilizan Safari ahora pueden añadir correctamente un producto a un pedido del administrador. Anteriormente, cuando el administrador hacía clic en el botón **Agregar productos seleccionados al pedido**, la aplicación mostraba el icono de carga giratoria y la página se bloqueaba.

### Regla de ventas

<!-- MC-40671-->

* La aplicación ahora aplica las reglas de precio del carro de compras con **Descuento de cantidad máxima aplicado a** o **Paso de cantidad de descuento (comprar X)** condiciones correctamente cuando se aplican varias reglas de precio del carro de compras. Anteriormente, si se aplicaba una regla de precio del carro de compras con **Descuento de cantidad máxima a** o **Paso de cantidad de descuento (comprar X)** después de otra regla de precio del carro de compras, el descuento total se reducía al valor configurado para **Descuento de cantidad máxima se aplica a** o **Paso de cantidad de descuento (comprar X)** veces el precio del producto.

<!-- MC-39827-->

* El informe Coupon ahora refleja con precisión la actividad de los cupones en implementaciones en las que se implementa una base de datos dividida.

<!-- MC-39477-->

* Las reglas de precios del carro de compras que contienen la condición Categoría **IS NOT** se aplican ahora según lo esperado a productos simples o secundarios configurables que no están asignados a una categoría pero cuyos productos principales están asignados.

<!-- MC-39034-->

* La consulta de GraphQL `cart` ahora devuelve el total general correcto para el paso de facturación de un carro de compras cuando se aplica un cupón al pedido.

### Buscar {#search-heading}

<!-- MC-41138-->

* La página de categoría ya no contiene estos identificadores de elemento HTML duplicados: `modes-label`, `mode-list`, `toolbar-amount`, `sorter`, `limiter`.

<!-- MC-40981-->

* Los resultados parciales de búsqueda de palabras ya no incluyen coincidencias inesperadas o irrelevantes, y las búsquedas producen resultados coherentes tanto en la tienda como en el administrador. La aplicación ahora utiliza un analizador diferente sin un simulador para las búsquedas parciales de palabras. Anteriormente, los resultados de búsqueda mostraban productos que no incluían palabras clave de búsqueda. (Anteriormente, el analizador predeterminado incluía un analizador y, como se utilizó el mismo analizador en el momento de la búsqueda para la búsqueda de palabras parciales, el resultado de la búsqueda podría producir coincidencias inesperadas o irrelevantes).

<!-- MC-40715-->

* La búsqueda rápida ahora devuelve resultados si la consulta de búsqueda tiene varias palabras y el nombre del producto está configurado como no se puede buscar. Anteriormente, si el nombre del producto estaba configurado como no se puede buscar, la aplicación arrojaba una excepción de consulta en consultas de búsqueda con varias palabras.

<!-- MC-40672-->

* Los resultados de búsqueda ahora incluyen el atributo `weight` como se espera cuando se configura como un atributo en el que se puede buscar.

<!-- MC-40409-->

* La aplicación ya no genera un error cuando se ve una página de categoría vacía con Elasticsearch habilitado. En su lugar, procesa la página según lo esperado y muestra un mensaje informativo. Anteriormente, un índice de texto completo vacío activaba una excepción en una página de categoría.

<!-- MC-40376-->

* La función de autocompletar el campo de búsqueda ahora funciona como se espera si un comprador hace clic fuera del campo de búsqueda después de comenzar su búsqueda. Las sugerencias de autocompletar ahora vuelven a aparecer cuando el comprador reanuda la escritura. Anteriormente, la aplicación no mostraba sugerencias de autocompletar y al hacer clic en el cuadro de búsqueda no se volvían a ver las sugerencias de búsqueda (aunque sí se volvían a escribir cartas adicionales).

<!-- MC-34217-->

* Al buscar un producto en función de su SKU total o parcial en Búsqueda avanzada, ahora se devuelve el producto esperado.

<!-- MC-31395-->

* Los filtros de navegación por capas ahora muestran recuentos de productos precisos. Anteriormente, los valores de recuento de productos de Elasticsearch no se filtraban con permisos de catálogo.

<!-- MC-23881 ENGCOM-8618-->

* Elasticsearch ya no genera un error cuando el parámetro de página de dirección URL de categoría supera la paginación. [GitHub-23843](https://github.com/magento/magento2/issues/23843)

<!-- MC-24033  magento/magento2#3274-->

* Ahora puede agregar un asignador de campos de Elasticsearch personalizado a `Magento\Elasticsearch\Model\Adapter\FieldMapper\Product\FieldProvider\FieldName\Resolver\CompositeResolver`.

<!-- ENGCOM-9029 MC-24026-->

* Los desarrolladores ahora pueden cambiar las asignaciones de Elasticsearch. Anteriormente, las plantillas dinámicas enviadas al servidor de Elasticsearch en las asignaciones predeterminadas estaban codificadas, lo que impedía a los desarrolladores indexar en Elasticsearch cualquier dato adicional asociado a un módulo personalizado.

<!-- ENGCOM-8464 -->

* Los campos de búsqueda (minibúsqueda de formularios) ahora funcionan según lo esperado cuando las sugerencias de búsqueda están desactivadas.

### Envío

<!-- MC-41464-->

* La aplicación ahora actualiza el precio de envío como se espera cuando un comprador vuelve a la página del carro de compras después de eliminar un producto durante el cierre de compra con varias direcciones.

<!-- MC-41343-->

* La solicitud ahora muestra el precio de envío ajustado correcto cuando algunos artículos del carro cumplen los requisitos para el envío gratuito. Anteriormente, cuando un subconjunto de artículos del carro de compras cumplía los requisitos para el envío gratuito, la aplicación no ajustaba el precio de envío y mostraba el precio de envío completo al comprador.

<!-- MC-41186-->

* Los usuarios administradores restringidos a un sitio web específico ahora pueden crear un envío para un pedido realizado en el mismo sitio web. Anteriormente, la aplicación arrojaba esta excepción cuando un usuario administrador que no tenía permiso para acceder a la vista de tienda predeterminada intentaba enviar un pedido colocado en una vista de tienda a la que el usuario administrador tenía acceso: `Notice: Undefined offset: 1 in /app/code/Magento/Catalog/Model/Product/Attribute/Backend/GroupPrice/AbstractGroupPrice.php on line 293`.

<!-- MC-41069-->

* La aplicación ahora tiene en cuenta los descuentos pertinentes en la regla de precio de carro de compras al determinar si un pedido cumple las condiciones para el envío gratuito de DHL.

<!-- MC-40702-->

* Las etiquetas de envío ahora utilizan la divisa base como se espera en lugar de la divisa de pedido en tiendas que admiten varias divisas cuando se realiza un pedido en una divisa no base. [GitHub-31891](https://github.com/magento/magento2/issues/31891)

<!-- MC-40678-->

* La aplicación ahora muestra el subtotal de pedido correcto cuando un comprador vuelve a la página del carro de compras durante el cierre de compra después de salir de la página de envío múltiple. [GitHub-31889](https://github.com/magento/magento2/issues/31889)

<!-- MC-40541 magento/magento2#31841 -->

* La edición de la información de facturación durante la creación del pedido de administración ya no cambia la información de envío para los clientes con diferentes direcciones de envío y facturación predeterminadas. [GitHub-31786](https://github.com/magento/magento2/issues/31786)

<!-- MC-37385 ENGCOM-8578-->

* La aplicación ya no desmarca la casilla de verificación **Anexar comentarios** cuando un comprador hace clic en **Obtener métodos y tarifas de envío** y selecciona un método de envío al crear un pedido desde el administrador.

<!-- MC-36425-->

* Los compradores ahora pueden usar el botón Atrás del navegador para volver a la página Seleccionar método de envío mientras retiran un pedido con varias direcciones. Anteriormente, la aplicación mostraba una página Seleccionar método de envío dañada. [GitHub-30268](https://github.com/magento/magento2/issues/30268)

<!-- MC-40021 ENGCOM-8983-->

* La cantidad de productos ahora permanece sin cambios según lo esperado después de que un comprador cambie la cantidad en la página Enviar a varias direcciones y haga clic en el botón Atrás del explorador.

<!-- ENGCOM-9096-->

* Los cargos por método de envío de tarifa única ya no se convierten en cero cuando se aplica una regla de precio de carro de compras durante el cierre de compra. [GitHub-21832](https://github.com/magento/magento2/issues/21832)

<!-- ENGCOM-8537-->

* La aplicación ya no genera un error cuando un comerciante intenta enviar un pedido mediante DHL cuando la casilla de verificación **Crear etiqueta de envío** está habilitada y el nombre del producto contiene caracteres Unicode. Anteriormente, la aplicación mostraba este error al solicitar la creación de etiquetas: `The response is in wrong format`.

<!-- ENGCOM-8952 -->

* Puede realizar correctamente un pedido del administrador en una implementación de varios sitios en la que `United States` está habilitado en un sitio web y `Disable all countries` está habilitado como el ámbito predeterminado en el otro sitio web. Anteriormente, la aplicación no realizó el pedido y mostró este error: `Please check the shipping address information. "regionId" is required. Enter and try again`.

### Almacenar

<!-- MC-40538-->

* La aplicación ya no trata una cadena de `0` como un valor vacío al mostrar una página principal de la tienda. Anteriormente, la aplicación trataba un valor entero al principio de una ruta de solicitud como un ID de almacén, lo que tenía efectos no deseados en la SEO.

<!-- MC-40313-->

* Los complementos para `\Magento\Framework\App\ActionInterface` en `lib/internal/Magento/Framework/App/Action/Plugin` se han quitado para seguir la guía de que los complementos se deben usar para personalizar el comportamiento de un módulo desde otro módulo. [GitHub-28050](https://github.com/magento/magento2/issues/28050)

<!-- MC-24772-->

* La aplicación ahora muestra este mensaje cuando intenta seleccionar `Website` como predeterminado cuando `Store View` está deshabilitado durante la creación del sitio web: `Please enable your Store View before using this Web Site as Default`. Anteriormente, el sitio web se bloqueaba y la aplicación no mostraba una alerta.

### Impuestos

<!-- MC-39571-->

* La aplicación ahora tiene en cuenta los impuestos ocultos durante la validación del importe mínimo del pedido.

<!-- MC-38025 ENGCOM-8612-->

* La aplicación ahora muestra Impuestos fijos sobre productos (FPT), tal como se espera cuando un comprador regresa a su carro de compras y continúa con el cierre de compra después de agregar productos agrupados al carro de compras. [GitHub-30250](https://github.com/magento/magento2/issues/30250)

<!-- MC-37657 magento/magento2#31850-->

* La aplicación ahora rellena previamente los campos de entrada **Número de IVA** para las direcciones de facturación y envío de la sección Información de dirección de la página de nuevo pedido del administrador con números de IVA guardados cuando un administrador crea un pedido para un cliente existente. [GitHub-31846](https://github.com/magento/magento2/issues/31846)

<!-- ENGCOM-8617 magento-engcom/magento2ee#558-->

* La aplicación ahora muestra el campo **Número de IVA** en la página de registro del cliente cuando `customer/create_account/vat_frontend_visibility` está habilitado.

### Prueba

<!-- MC-41393-->

* Los entornos de prueba se han actualizado a Redis 6.0.12.

<!-- ENGCOM-8529-->

* Se eliminó `CacheCleaner::cleanAll();` de las pruebas de integración.

<!-- ENGCOM-8898-->

* Se ha añadido una prueba para este escenario: Los usuarios administradores pueden editar una cuenta de cliente cuando el cliente está suscrito a un boletín informativo en cola.

<!-- ENGCOM-8484-->

* Se eliminó el comando `cache:flush` de las pruebas para mejorar el tiempo de ejecución de los módulos `Catalog`, `CatalogUrlRewrite` y `LoginAsCustomer`.

<!-- ENGCOM-8499-->

* Se han eliminado los parámetros redundantes y se ha cambiado la opción POST a GET donde era necesario en `\Magento\Logging\Model\ProcessorTest::testLoggingProcessorLogsActionShipping`.

### Tema

<!-- MC-41474-->

* La página de inicio de sesión del cliente ya no muestra este mensaje cuando la configuración de **Mover código JS al final de la página** (**Almacenar** > **Configuraciones** > **Avance** > **Desarrollador** > **Configuración de JavaScript**) y las cookies están habilitadas: `The store will not work correctly in the case when cookies are disabled`.

<!-- MC-40982-->

* Los vínculos de cuenta en los encabezados ahora siguen los estándares WCAG. Anteriormente, los vínculos de cuenta en los encabezados contenían ID duplicados, lo que provocaba que fallara la validación de WCAG.

<!-- MC-40278-->

* La aplicación ahora prioriza la configuración de la tienda para una imagen de logotipo de tienda sobre la configuración del diseño. Anteriormente, el tamaño de las imágenes de logotipo era fijo y no variaba según el almacén.

<!-- MC-35227-->

* La aplicación ahora muestra los elementos de página de forma coherente en las páginas de tienda que utilizan temáticas estándar de Magento Open Source. Anteriormente, no todos los estilos se aplicaban en la temática en blanco, por lo que no todos los elementos de página se mostraban en las páginas que utilizaban esta temática. (Por ejemplo, no había ningún icono de lupa en el campo de búsqueda de la página Mis pedidos).

### Traducción y configuraciones regionales

<!-- MC-23553-->

* Los corchetes que se agregan a las cadenas ya no se escapan cuando se configura la traducción en línea. Anteriormente, el método `escapeHtmlAttr` convertía los corchetes en códigos de entidad de HTML.

<!-- ENGCOM-8694-->

* Las frases que no se pueden traducir en el administrador ahora se pueden traducir. (Esta solicitud de extracción contribuye a los esfuerzos continuos para que todas las cadenas de administrador sean localizables). [GitHub-11175](https://github.com/magento/magento2/issues/11175)

<!-- ENGCOM-8584-->

* Ahora se pueden traducir las cadenas de texto de la plantilla que se usan para administrar los métodos de pago almacenados (**Mi cuenta** > **Métodos de pago almacenados** ).

<!-- MC-30798 ENGCOM-8717-->

* Solicite los correos electrónicos enviados desde el administrador ahora usan la configuración regional del almacén, no la configuración regional asociada a la cuenta del administrador.

### IU

<!-- MC-41784-->

* El pie de página del administrador ahora muestra la versión del producto correcta.

<!-- MC-41067-->

* La paginación para orígenes está ahora presente como se espera durante la creación del envío de administración.

<!-- MC-40240-->

* El filtro de cuadrícula de producto ahora funciona correctamente cuando utiliza atributos de fecha personalizados para filtrar productos y la configuración regional del usuario administrador es `en_GB`.

<!-- MC-39279-->

* Los gestos de pellizco y zoom ahora funcionan según lo esperado en la lupa de la galería de imágenes de la página de productos en dispositivos iOS.

<!-- MC-38787-->

* La paginación de los resultados de búsqueda de la cuadrícula de productos de administración ahora comienza en la página uno para cada búsqueda según lo esperado.

<!-- MC-38423-->

* Se han resuelto las anomalías con la visualización del carro de compras al ampliar o reducir. Anteriormente, los elementos de visualización se superponían al ampliar esta página.

<!-- MC-38226-->

* La página de revisión de pedidos que se muestra durante el cierre de compra con PayPal Express Checkout ahora se carga correctamente. Anteriormente, la plantilla contenía el botón **Actualizar método de entrega** que no se usaba y que el script solo ocultaba parcialmente durante la representación de la página.

<!-- MC-37941-->

* Las estrellas de clasificación y el texto de revisión de la sección de revisiones del cliente de la página del producto ahora se separan correctamente cuando hay nombres de clasificación largos.

<!-- MC-37688-->

* Las opciones ahora se muestran según lo esperado en la lista desplegable Acciones de las páginas Archivar Facturas, Envíos y Notas de Abono.

<!-- MC-23729  magento/magento2#31549-->

* La aplicación ahora muestra un valor de tiempo correcto cuando la opción `datetime` componente `timeOnly` está establecida en **yes**. [GitHub-23157](https://github.com/magento/magento2/issues/23157)

<!-- ENGCOM-8514 -->

* Ahora puede quitar una actualización de diseño después de crear un widget nuevo en Administración **Contenido** > **Widgets**.  [GitHub-29936](https://github.com/magento/magento2/issues/29936)

<!-- ENGCOM-8502 MC-35716-->

* El botón **Eliminar actualización de diseño** ahora funciona como se espera en cualquier diseño que haya agregado desde Administración **Contenido** > **Widgets**. Anteriormente, este botón no funcionaba en ningún diseño distinto del primero seleccionado al agregar varios diseños. [GitHub-30286](https://github.com/magento/magento2/issues/30286)

<!-- ENGCOM-8524 -->

* La aplicación utiliza ahora el título de página definido en el archivo de diseño como título de la página del explorador para el archivo de edición de cuentas de cliente. Anteriormente, la acción del controlador `Magento\Customer\Controller\Account\Edit` aplicaba el valor del título de página a `Account Information`. [GitHub-30724](https://github.com/magento/magento2/issues/30724)

<!-- ENGCOM-8896 8826-->

* Se han añadido a estas páginas las casillas de verificación que permiten a los comerciantes alternar entre mostrar y ocultar contraseñas:
   * Inicio de sesión del cliente
   * Registro de cliente
   * Edición de clientes (sección Cambio de contraseña)
   * El cliente estableció la nueva contraseña [GitHub-31557](https://github.com/magento/magento2/issues/31557)

<!-- ENGCOM-8545 -->

* Se ha eliminado un encabezado redundante en las celdas de la cuadrícula que aparecía cuando un administrador añadía un producto a un conjunto de productos agrupado después de cambiar el conjunto de atributos. [GitHub-30911](https://github.com/magento/magento2/issues/30911)

<!-- ENGCOM-8895 -->

* La aplicación ahora muestra un filtro `DateRange` en el área de Inicio de sesión de la página **Cliente** > **Inicio de sesión**. Anteriormente, la aplicación mostraba un filtro `Text`. [GitHub-30328](https://github.com/magento/magento2/issues/30328)

<!-- ENGCOM-9009 -->

* JavaScript se ha eliminado de los archivos de plantilla y se ha movido a archivos independientes para reducir los problemas de procesamiento en las páginas de administración. Anteriormente, las páginas de administración no se representaban correctamente en implementaciones en las que se había habilitado la minificación de HTML. La aplicación mostró este error: `An error has happened during application run. See exception log for details`. [GitHub-32454](https://github.com/magento/magento2/issues/32454)

<!-- ENGCOM-9044 -->

* El widget `dropdownDialog` ahora carga solamente los fragmentos `jquery-ui` arrastrables y redimensionables que necesita. Anteriormente, cargaba grandes cantidades de código innecesario, lo que inflaba el tiempo de carga y reducía el rendimiento. [GitHub-32810](https://github.com/magento/magento2/issues/32810)

### Reescrituras de URL

<!-- MC-41550-->

* Las reescrituras de URL de productos para un sitio web específico en una implementación de varios sitios ahora se generan tal como se espera después de que los productos se asignen a un sitio web mediante una actualización masiva.

<!-- MC-40780 magento/magento2#32598-->

* La aplicación ahora genera correctamente la ruta de URL para las categorías secundarias cuando la casilla de verificación **Usar valor predeterminado** para la clave URL está habilitada para la categoría principal. Anteriormente, al mover una categoría en la jerarquía, se producía un valor `url_path` incorrecto al usar claves de URL diferentes en una implementación de vista de varias tiendas. [GitHub-16202](https://github.com/magento/magento2/issues/16202)

<!-- MC-40371-->

* La aplicación ahora actualiza `url_path` de la categoría asignada a todo el ámbito de almacén cuando se mueve una categoría en la jerarquía de categorías. Anteriormente, al mover una categoría en la jerarquía, se producía un(a) `url_path` incorrecto.

<!-- MC-39463-->

* Las redirecciones de URL creadas desde el administrador mediante una URL personalizada ahora funcionan correctamente. Anteriormente, GraphQL almacenaba en caché la respuesta de una consulta de GraphQL `urlResolver` y devolvía el valor antiguo después de actualizar la reescritura de la URL.

<!-- MC-38931  magento/magento2#31106-->

* Las reescrituras de URL del producto ahora se eliminan según lo esperado cuando se elimina un producto de un sitio web. [GitHub-24184](https://github.com/magento/magento2/issues/24184)

<!-- ENGCOM-8719 -->

* Se agregó una referencia `main_table` a `store_id` en la función `addStoreFilter` de la colección `app/code/Magento/UrlRewrite/Model/ResourceModel/UrlRewriteCollection.php`. Anteriormente, se producían problemas cada vez que se agregaba un(a) `join` a la colección en una tabla que también contiene una columna `store_id`. [GitHub-31853](https://github.com/magento/magento2/issues/31853)

<!-- ENGCOM-8894 -->

* El extremo REST `PUT /V1/products/:sku` ahora vuelve a generar las reescrituras de URL del producto según lo esperado. Anteriormente, el extremo generaba de nuevo los valores de producto `url_key`, pero no reescribía las direcciones URL. [GitHub-30316](https://github.com/magento/magento2/issues/30316)

### Usuario

<!-- MC-40777-->

* Ahora puede guardar una nueva función de usuario efectiva (Administrador **Sistema** > **Permisos** > **Funciones de usuario**) con todo el árbol `Catalog` seleccionado excluyendo `Edit Product Design` (**Catálogo** > **Inventario** > **Productos** > **Editar diseño de producto**). Anteriormente, la aplicación no guardó los cambios de producto realizados por un usuario con esta función y mostraba este error: `Not allowed to edit the product's design attributes`. [GitHub-31973](https://github.com/magento/magento2/issues/31973)

<!-- MC-38442-->

* La aplicación ahora utiliza la plantilla de correo electrónico personalizada correcta al generar correos electrónicos para los nuevos usuarios administradores. Anteriormente, la aplicación utilizaba la plantilla predeterminada antigua, que omitía el nombre y los apellidos del administrador.

<!-- MC-38122-->

* La aplicación ahora utiliza la plantilla de correo electrónico correcta al enviar correos electrónicos a los nuevos usuarios. Anteriormente, la aplicación utilizaba la plantilla predeterminada incluso cuando se seleccionaba una plantilla personalizada.

### VersionCMS

<!-- MC-39953-->

* La aplicación ahora aplica la temática correcta a una página de CMS después de cambiar su diseño. Anteriormente, la aplicación cambiaba el tema asignado a Luma después de guardar los cambios de diseño, independientemente del tema asignado a la página.

### Vídeo

<!-- MC-42059 ENGCOM-9039-->

* Los vídeos ya están disponibles en la galería de productos como se espera cuando se habilita y utiliza el agrupamiento avanzado de JavaScript. [GitHub-32501](https://github.com/magento/magento2/issues/32501)

<!-- ENGCOM-8532-->

* Los vídeos de YouTube para productos simples que pertenecen a un producto configurable ahora funcionan según lo esperado. Anteriormente, las imágenes se ordenaban por ID en lugar de por posición. En consecuencia, algunos videos fueron tratados como imágenes. [GitHub-29690](https://github.com/magento/magento2/issues/29690)

### Marco de API web

<!-- MC-41758-->

* La API de catálogo ahora actualiza correctamente los valores de opciones personalizadas de un producto añadiendo nuevos valores y eliminando valores antiguos. Anteriormente, la API no eliminaba los valores antiguos.

<!-- MC-34431-->

* POST `/V1/guest-carts/:cartId/billing-address` ahora devuelve el ID de dirección como un número entero, no como una cadena.

### Widget

<!-- MC-39128-->

* Un administrador ahora puede eliminar todas las actualizaciones de diseño de un widget. Anteriormente, cuando un widget tenía varias actualizaciones de diseño, un administrador solo podía eliminar la primera.

<!-- MC-39107-->

* Al hacer clic en el botón **Agregar al carro** en el widget del producto, ya no se volverá a cargar la página. Anteriormente, al hacer clic en el botón **Agregar al carro** de un widget de productos, se volvía a cargar una página actual antes de que se agregara el producto al carro de compras.

### Lista de deseos

<!-- MC-40651-->

* La aplicación ya no restablece los ajustes de configuración de un producto configurable cuando hace clic en el botón **Editar elemento** para el producto de una lista de artículos deseados. [GitHub-32119](https://github.com/magento/magento2/issues/32119)

<!-- MC-40417-->

* La aplicación ahora muestra el precio de producto correcto cuando actualiza un producto con una opción de archivo personalizable en la lista de deseos. Anteriormente, la aplicación mostraba el precio de producto incorrecto y no mostraba un vínculo al archivo cargado.

<!-- MC-39060-->

* El recuento total de productos en una lista de deseos para un cliente con varias listas de deseos ahora coincide con el número de elementos en la lista de deseos. Anteriormente, el recuento total de productos incluía productos sin existencias.

<!-- MC-36779 magento/magento2#31110-->

* La aplicación ahora elimina un producto de una lista de artículos deseados después de añadirlo a un pedido. [GitHub-30260](https://github.com/magento/magento2/issues/30260)

<!-- MC-34456 ENGCOM-8816-->

* Los compradores ahora pueden añadir productos relacionados a su carro de compras desde una lista de deseos. Anteriormente, la aplicación solo agregaba el producto configurable, no el producto configurable y sus productos relacionados, cuando un comprador hacía clic en el vínculo **Seleccionar todo** de la sección Productos relacionados. [GitHub-32274](https://github.com/magento/magento2/issues/32274)

## Problemas conocidos

**Problema**: _Error de JavaScript cuando reCAPTCHA está deshabilitado_. Si reCAPTCHA está deshabilitado para la desprotección, esta continúa, pero la aplicación muestra un error `Uncaught TypeError` en el registro de la consola.  Este problema se solucionará en una versión posterior. <!-- MC-42589 42649-->

**Problema**: _Error de la directiva de seguridad de contenido_. La tienda muestra el siguiente error en el registro de la consola: `The Content-Security-Policy directive frame-ancestors does not support the source expression unsafe-inline`. El rendimiento de la tienda no se ve afectado. <!-- MC-42613-->

**Problema**: _Anomalías en la visualización de los importes de las tarjetas de regalo con crédito PayPal_. Cuando se activa el crédito de PayPal y se configuran varios importes de tarjetas regalo, si un comprador cambia el importe por el valor de una tarjeta regalo, la tienda no actualiza el importe para los pagos a plazos. Se incluirá una corrección para este problema en Adobe Commerce 2.4.4 y Magento Open Source 2.4.4.<!-- MC-42499 AC-344-->

**Problema**: _El botón **Agregar al pedido**&#x200B;no funciona para los productos agregados al carro de compras por SKU_.  la aplicación muestra este mensaje de error cuando hace clic en el botón **Agregar al pedido** después de agregar productos al pedido por SKU: `An error has happened during application run`. Los productos no se añaden al carro de compras. **Solución alternativa**: use la característica Agregar productos. <!-- AC-345-->

## Contribuciones comunitarias

Estamos agradecidos a la comunidad de Magento Open Source en general y queremos agradecer sus contribuciones a esta versión.

El equipo de ingeniería de la comunidad [Colaboradores de Magento](https://magento.biterg.io/app/kibana) mantiene una lista de las principales personas y socios que aportan contingentes por mes, trimestre y año. Desde esa página de colaboradores, puede seguir los vínculos a sus PR fusionadas en GitHub.

### Contribuciones de socios

En el cuadro siguiente se destacan las contribuciones de los asociados. Esta tabla enumera el socio que contribuyó con la solicitud de extracción, la solicitud de extracción externa y el número de problema de GitHub asociado a ella (si está disponible).

{{$include /help/_includes/release-notes/engcomm-2-4-3-partner.md}}

### Contribuciones de colaborador individual

La siguiente tabla identifica las contribuciones de los miembros de nuestra comunidad. En esta tabla se enumeran las solicitudes de extracción externas, el número de problema de GitHub asociado a ellas (si está disponible) y el miembro de la comunidad que contribuyó con la solicitud de extracción.

{{$include /help/_includes/release-notes/engcomm-2-4-3-issues.md}}

### Requisitos del sistema

Nuestra pila de tecnología está construida sobre PHP y MySQL. Para obtener más información, consulte [Requisitos del sistema](../../../installation/system-requirements.md).

### Instrucciones de instalación y actualización

Puede instalar Magento Open Source 2.4.3 con [Composer](../../../installation/composer.md).

## Kits de herramientas de migración

La herramienta de migración de datos ayuda a transferir los datos del almacén de Magento 1.x existente a Magento 2.x. Esta interfaz de línea de comandos incluye funciones de verificación, seguimiento de progreso, registro y prueba. Para obtener instrucciones de instalación, consulte [Instalar la herramienta de migración de datos](../../../tools/data-migration-tool/install.md). Considere la posibilidad de explorar o contribuir al [repositorio de migración de datos](https://github.com/magento/data-migration-tool).

El [Kit de herramientas de migración de código](https://github.com/magento-commerce/code-migration) ayuda a transferir las extensiones y personalizaciones de almacén de Magento 1.x existentes a Magento 2.x. La interfaz de línea de comandos incluye scripts para convertir módulos y diseños de Magento 1.x.
