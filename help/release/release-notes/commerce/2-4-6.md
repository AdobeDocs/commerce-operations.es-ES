---
title: Notas de la versión de Adobe Commerce 2.4.6
description: Obtenga información sobre las nuevas funciones, mejoras, correcciones de errores y problemas conocidos de la versión 2.4.6 de Adobe Commerce.
source-git-commit: f90b88c50cc3088bd79b360d1b0582c086faef1a
workflow-type: tm+mt
source-wordcount: '9748'
ht-degree: 0%

---


# Notas de la versión de Adobe Commerce 2.4.6

Adobe Commerce 2.4.6 presenta compatibilidad con PHP 8.2. PHP 8.1 sigue siendo totalmente compatible, pero se ha eliminado el soporte para PHP 7.4. Incluye mejoras significativas de rendimiento y escalabilidad. Se han optimizado las operaciones de GraphQL para operaciones de carro de compras masivo y la respuesta de procesamiento del árbol de categorías. Esta versión presenta el metapaquete de la extensión de Adobe Commerce.

Esta versión incluye más de 300 correcciones y mejoras de calidad. Las dependencias del Compositor principal y las bibliotecas de terceros se han actualizado a las últimas versiones compatibles con PHP 8.2.

{{bics}}

## Otra información de la versión

Aunque el código de estas funciones está empaquetado con versiones del código principal de Adobe Commerce, varios de estos proyectos (por ejemplo, B2B, Page Builder y Progressive Web Application (PWA) Studio) también se publican de forma independiente. Las correcciones de errores de estos proyectos se documentan en la información de versión específica del proyecto que está disponible en la documentación de cada proyecto.

## Elementos destacados de Adobe Commerce 2.4.6

Busque los siguientes aspectos destacados en esta versión.

### Mejoras de seguridad

Esta versión incluye ocho correcciones de seguridad y mejoras de seguridad de la plataforma.

Hasta la fecha no se han producido ataques confirmados relacionados con estos problemas. Sin embargo, algunas vulnerabilidades se pueden aprovechar para acceder a la información del cliente o para hacerse cargo de las sesiones del administrador. La mayoría de estos problemas requieren que un atacante obtenga primero acceso al administrador. Como resultado, le recordamos que siga todos los pasos necesarios para proteger a su administrador, incluidos, entre otros, estos esfuerzos:

* INCLUSIÓN EN LA LISTA DE PERMITIDOS IP
* [Autenticación de dos factores](https://developer.adobe.com/commerce/testing/functional-testing-framework/two-factor-authentication/)
* Uso de una VPN
* Uso de una ubicación única en lugar de `/admin`
* Buena higiene de las contraseñas

Consulte [Boletín de seguridad de Adobe](https://helpx.adobe.com/security/products/magento/apsb23-17.html) para el último debate sobre estas cuestiones fijas.

#### Mejoras de seguridad adicionales

Las mejoras de seguridad para esta versión mejoran el cumplimiento de las prácticas recomendadas de seguridad más recientes, incluidas:

* Las lagunas en los registros de acciones de administración se han corregido con una auditoría más específica de las acciones dentro de las vistas de cuadrícula, las acciones masivas y las exportaciones. <!-- AC-1553 -->

* La validación de reCAPTCHA ya no falla durante el cierre de compra cuando se producen errores inesperados durante el procesamiento del pago. [GitHub-35093](https://github.com/magento/magento2/issues/35093) <!-- AC-2642 -->

* **Nueva configuración del sistema para requerir confirmación por correo electrónico cuando un usuario administrador cambia su correo electrónico**. Para reducir la vulnerabilidad del sitio, se agregó una nueva configuración del sistema (deshabilitada de forma predeterminada) para requerir confirmación por correo electrónico cuando un usuario administrador cambia su correo electrónico: **[!UICONTROL Stores]** > **[!UICONTROL Settings:Configuration]** > **[!UICONTROL Customers]** > **[!UICONTROL Customer Configuration]** > **[!UICONTROL Account Information Options]** > **[!UICONTROL Require email confirmation if an email has been changed]**. Cuando esta opción está habilitada, la aplicación solicitará confirmación por correo electrónico cada vez que el usuario administrador cambie su dirección de correo electrónico. El siguiente módulo se ve afectado por este cambio: `Magento_Customer`. <!-- AC-3064 -->


### Mejoras en la plataforma

Adobe Commerce 2.4.6 presenta compatibilidad con PHP 8.2. PHP 8.1 sigue siendo totalmente compatible. <!-- AC-6598 -->

La compatibilidad con PHP 7.4 se ha eliminado de esta versión. No puede ejecutar Adobe Commerce 2.4.6 en PHP 7.4.

Adobe Commerce 2.4.6 ahora es compatible:

* Compositor 2.2.x. Se ha eliminado el Compositor 1.x. <!-- AC-2839 -->

* Versión 7.0.x. Aunque la compatibilidad con Redis 6.2 se mantiene, recomendamos implementar esta versión con Redis 7.0.x porque se espera que Redis 6.2 llegue al final de su vida útil en 2024. <!-- AC-6606 -->

* Ahora, OpenSearch es compatible como motor de búsqueda predeterminado para implementaciones en la nube y locales de Adobe Commerce. Se admite como motor de búsqueda independiente para Magento Open Source. Esta versión es compatible con OpenSearch v2.x y se ha probado con OpenSearch 2.5. Aunque la compatibilidad con OpenSearch 1.x permanece, recomendamos utilizar esta versión con OpenSearch 2.x. Puede instalar y ejecutar Adobe Commerce y Magento Open Source 2.4.6 con OpenSearch 2.x tanto en la nube como en las instalaciones [Requisitos previos del motor de búsqueda](https://experienceleague.adobe.com/docs/commerce-operations/installation-guide/prerequisites/search-engine/overview.html). <!-- AC-449 3555 -->

* Elasticsearch 8.x. Consulte [Actualizar Elasticsearch](../../../upgrade/prepare/prerequisites.md#upgrade-elasticsearch). <!-- AC-6597 -->

* MariaDB 10.6 (versión LTS). Esta versión sigue siendo compatible con MariaDB 10.4, pero recomendamos actualizar a MariaDB 10.6. <!-- AC-6921 -->

#### Otras actualizaciones y reemplazos

* El esquema DHL se ha migrado de la versión 6.2 a la versión 10.0. <!-- AC-3023-->

* Las bibliotecas JavaScript obsoletas se han actualizado a sus versiones más recientes y se han eliminado dependencias obsoletas. Estos cambios son compatibles con versiones anteriores. <!-- AC-2036-->

* La compatibilidad con PHP 7.4 se ha eliminado de Commerce codebase. <!-- AC-2841-->

* Las dependencias de Symfony se han actualizado a la nueva versión de LTS. Las dependencias incluyen:<!-- AC-2656-->

   * `friendsofphp/php-cs-fixer`
   * `symfony/console`
   * `symfony/event-dispatcher`
   * `symfony/finder`
   * `symfony/process`
   * `web-token/jwt-framework`

* `jquery-migrate` se ha eliminado de la base de código de comercio. [GitHub-21406](https://github.com/magento/magento2/issues/21406) <!-- AC-1199 -->

* Actualizado `jQuery/fileUpload` biblioteca a v10.32. <!-- AC-2658-->

* Los componentes del marco Zend (ZF1) que han llegado al final de su vida útil se han eliminado de la base de código. Consulte [Cambios incompatibles con versiones anteriores resaltados](https://developer-stage.adobe.com/commerce/php/development/backward-incompatible-changes/highlights/).<!-- AC-1512 -->

* Las dependencias de Laminas se han actualizado para admitir PHP 8.2. <!-- AC-7019-->

* La variable `laminas/laminas-dependency-plugin` Se ha eliminado el complemento Composer. [GitHub-36515](https://github.com/magento/magento2/issues/36515) <!-- AC-7100-->

* Reemplazado `Zend_Filter` con `laminas/laminas-filter`. <!-- AC-5922-->

* Actualizado `web-token/jwt-framework` a la versión 3.0.5. (versión más reciente) <!-- AC-3772-->

* Actualizado `allure-framework/allure-phpunit` a v2.x. <!-- AC-2660-->

* Se ha actualizado el `Chart-js` biblioteca a v3.9.1 <!-- AC-2661-->


### Mejoras de rendimiento y escalabilidad

* **Rendimiento mejorado para operaciones que afectan a muchos segmentos de clientes**. Los comerciantes pueden mejorar el rendimiento de las operaciones que implican más de 100 segmentos de clientes al habilitar una nueva configuración. La variable **[!UICONTROL Real-time Check if Customer is Matched by Segment]** se puede deshabilitar según sea necesario para reducir el tiempo de procesamiento reduciendo la validación de cada segmento de cliente frente a los clientes. Consulte [Validación de segmentos del cliente](https://experienceleague.adobe.com/docs/commerce-operations/performance-best-practices/configuration.html#customer-segments-validation). <!-- AC-6832 ACPT-835-->

* **Nueva configuración del sistema para limitar el número de productos mostrados en la cuadrícula del producto**. Los comerciantes pueden utilizar el nuevo **[!UICONTROL Limit Number of Products in Grid]** configuración para mejorar el rendimiento de la cuadrícula del producto. Este límite está configurado para 20000 de forma predeterminada y solo afecta a las colecciones de productos que utilizan los componentes de la interfaz de usuario. Limitar el número de productos mostrados puede mejorar el rendimiento de las operaciones de las cuadrículas rellenadas con más de 200.000 productos. Consulte [Limitar número de productos en la cuadrícula](https://experienceleague.adobe.com/docs/commerce-operations/performance-best-practices/configuration.html#limit-number-of-products-in-grid)<!-- ACPT-42 -->

* **Rendimiento de importación mejorado (hasta 100.000 registros por minuto)**. Los comerciantes pueden utilizar el nuevo `POST /rest/<store_view_code>/V1/import/csv` Punto final de la API de REST para importar datos en Adobe Commerce. Este extremo proporciona las mismas capacidades que la función de importación de administración y admite el uso de un archivo CSV para crear, actualizar y eliminar productos, precios de producto y entidades de cliente. <!-- ACPT-6 -->

* **Rendimiento de procesamiento de pedidos de alto rendimiento mejorado mediante equilibrio de carga**. Adobe Commerce 2.4.6 en la infraestructura de nube, los clientes que tienen un gran volumen de pedidos simultáneos (1000 pedidos por minuto) ahora pueden mejorar el rendimiento del procesamiento de pedidos al equilibrar la carga en su base de datos entre diferentes nodos. Los comerciantes pueden reequilibrar esta carga habilitando conexiones secundarias para la base de datos MySQL y las instancias de Redis. Consulte [Procesamiento de pedidos de alto rendimiento](https://experienceleague.adobe.com/docs/commerce-operations/performance-best-practices/high-throughput-order-processing.html#load-balancing) <!-- ACPT-495 -->


### Paquete de metapacol de la extensión de Adobe Commerce

Esta versión presenta el paquete de metapaquete v1.1.0 de la extensión de Adobe Commerce, que agrupa automáticamente las extensiones de Adobe Commerce seleccionadas con esta versión principal. Las versiones de estas extensiones incluidas en este metapackage se instalan cuando `composer update` se ejecuta, lo que simplifica el proceso de actualización de estas extensiones al actualizar a la última versión principal. Estas extensiones seguirán manteniendo programas de versiones independientes.

El paquete de metapacaídas de la extensión de Adobe Commerce para Adobe Commerce 2.4.6 incluye estas dos extensiones:

* [Cierre rápido de pernos](https://experienceleague.adobe.com/docs/commerce-merchant-services/quick-checkout/overview.html)
* [Eventos de Adobe I/O para Adobe Commerce](https://developer.adobe.com/commerce/events/get-started/)

Las versiones futuras de este paquete de herramientas de extensión contendrán extensiones adicionales.

### Eventos de Adobe I/O para Adobe Commerce

Eventos de Adobe I/O para Adobe Commerce captura eventos de comercio y transfiere datos de Adobe Commerce a otros sistemas de Adobe. Los desarrolladores pueden crear aplicaciones nativas de la nube en Adobe Developer App Builder que se suscriban a eventos de comercio como actualizaciones de inventario, cambios de estado de pedidos y actualizaciones de precios. Los desarrolladores pueden utilizar esta capacidad para intercambiar datos para la organización de todo el recorrido comprador en sus sistemas de misión crítica.

### Actualizaciones de accesibilidad

El enfoque de esta versión ha sido crear una experiencia de tienda en Venia (PWA) que sea más perceptible, operable, comprensible y robusta. Estas mejoras incluyen:

<!-- AC-2479-->

* Etiqueta de texto visual para la variable **[!UICONTROL Sign in]** ahora coincide con su nombre accesible. (Se recomienda que el nombre accesible de un elemento de la interfaz de usuario empiece por el texto de etiqueta visible).

<!-- AC-2481 2492-->

* Se han agregado nombres descriptivos accesibles a los botones en toda la tienda.

<!-- AC-2488-->

* Se han añadido etiquetas descriptivas verbales a la variable **[!UICONTROL Has Video]** casillas de verificación en los filtros de búsqueda.

<!-- AC-2787-->

* Los usuarios que solo utilizan el teclado ahora pueden acceder a toda la funcionalidad de la página en la tienda. Anteriormente, los compradores no podían acceder a los vínculos de subnavegación utilizando solo pulsaciones de teclas.


### Integración de Adobe Commerce con Adobe IMS

Los siguientes módulos IMS de Adobe se han disociado del código principal de Adobe Commerce 2.4.6 y ahora están empaquetados como un paquete de metapacaídas independiente:

* `adobe-ims`
* `adobe-ims-api`
* `admin-adobe-ims`

El nuevo `adobe-ims-metapackage` La versión 2.2.0 está incluida con Adobe Commerce 2.4.6. Ninguna funcionalidad ha cambiado en esta versión.<!-- CABPI-505-->


### B2B

La función Pedidos de compra para empresas ahora está totalmente expuesta por la API de GraphQL. Esta versión presenta dos esquemas de GraphQL:

* El esquema de GraphQL de orden de compra cubre la funcionalidad de Gestión de órdenes de compra del usuario de la empresa B2B, como la creación, edición y eliminación de órdenes de compra. Consulte [Pedidos de compra (B2B)](https://developer.adobe.com/commerce/webapi/graphql/schema/b2b/purchase-order/).
* El esquema GraphQL de regla de orden de compra permite crear, editar y eliminar reglas de aprobación, así como validar manualmente órdenes de compra. Consulte [Reglas de aprobación de orden de compra (B2B)](https://developer.adobe.com/commerce/webapi/graphql/schema/b2b/purchase-order-rule/).

Esta versión incluye varias correcciones de errores. Consulte [Notas de la versión B2B](https://experienceleague.adobe.com/docs/commerce-admin/b2b/release-notes.html).


### Braintree

<!-- BUNDLE-3107-->

* La variable **[!UICONTROL Pay Later]** botón y banners (mensajes) para Italia y España se han habilitado para Braintree.

<!-- BUNDLE-3109-->

* Se ha habilitado la mensajería PayLater con PayPal Vault.

<!-- BUNDLE-3140-->

* Se añadieron los enlaces web Protección contra fraudes y ACH. El enlace web de protección contra fraude se activa cuando se toma una decisión de riesgo en el Braintree. El enlace web ACH se activa cuando el estado de un pago ACH se actualiza a `settled` o `settlement decline`.

<!-- BUNDLE-3141-->

* Se ha agregado un vínculo web LPM (Métodos de pago locales).

### GraphQL

Las mejoras de rendimiento de GraphQL incluyen:

**Se ha mejorado el tiempo de respuesta al consultar categorías con permisos de categoría habilitados**. Los tiempos de respuesta han mejorado al consultar productos en categorías para las que los permisos de categoría están habilitados y que contienen muchos grupos de clientes o catálogos compartidos. Los cambios de código que admiten esta mejora de rendimiento incluyen: <!-- B2B-2179 2404 2329-->

* Se ha optimizado la operación de resolución de GraphQL.
* El proveedor de datos ya no vuelve a establecer los datos en caché en tiempo de ejecución para cada nuevo producto que se procese, lo que mejora el rendimiento. <!-- B2B-2452-->
* El procesamiento de permisos de productos se ha optimizado en la resolución de GraphQL. Los permisos de producto ahora se aplican a colecciones de productos en su lugar por producto.  <!-- B2B-2404-->
* Permisos optimizados leídos en catálogos compartidos en el `addProductsToCart` mutación. <!-- B2B-2424-->
* Los permisos del producto se han optimizado con fragmentos en línea del producto. <!-- B2B-2459-->

**Rendimiento optimizado del procesamiento del árbol de categorías**. La variable `categoryList` se ha optimizado para admitir clientes con un gran número de categorías. Los comerciantes que utilicen esta consulta para buscar más de 1500 categorías con hasta cinco niveles de subcategorías anidadas notarán una mejora en el rendimiento. La carga de elementos secundarios de categoría mediante la refactorización de código se ha mejorado mediante la eliminación de llamadas de método innecesarias, la mejora del almacenamiento en caché del árbol de categorías y la carga recursiva de datos de categoría.  Los cambios de código que admiten esta mejora de rendimiento incluyen: <!-- B2B-2484 2469 2472-->

* Se ha mejorado la captura de metadatos de atributos personalizados para modelos de categoría. <!-- B2B-2463-->
* Se ha mejorado la recuperación del ID de categoría y `getChildren` se han reducido. <!-- B2B-2464-->
* Se ha mejorado la carga de los elementos secundarios de la categoría.<!-- B2B-2469-->

**Reducción de los tiempos de respuesta de las consultas de operaciones del carro de compras masivo**. Se han optimizado las mutaciones de adición de productos para mejorar el rendimiento de las consultas al añadir hasta 500 productos simples y configurables. Los productos del paquete no se ven afectados. Las mutaciones optimizadas incluyen `addProductsToCart`, `addConfigurableProductsToCart`, `addDownloadableProductsToCart`, `addSimpleProductsToCart`, `addVirtualProductsToCart`,`addWishlistItemsToCart`y `updateCartItems`. <!-- B2B-2331 2423-->

**la consulta del cliente ahora admite la ordenación de pedidos**. La variable `orders` objeto de salida de la variable `customer` La consulta ahora contiene un campo de ordenación. Ahora puede ordenar los pedidos por número de pedido o fecha de creación y en orden ascendente o descendente. <!-- AC-6903-->

Nuevas mutaciones:

`deleteCustomer` <!-- AC-2879-->


### Page Builder

Page Builder v.1.7.3 es compatible con Adobe Commerce 2.4.6.


### PWA Studio

PWA Studio v.13.0.x es compatible con Adobe Commerce 2.4.6 e incluye varias mejoras para mejorar la accesibilidad. Para obtener información sobre las correcciones de errores, consulte [Versiones de PWA Studio](https://github.com/magento/pwa-studio/releases). Consulte [Compatibilidad de versiones](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) para obtener una lista de versiones de PWA Studio y sus versiones principales compatibles con Adobe Commerce.


### Problema conocido

**Problema**: Actualmente, New Relic no es compatible con PHP 8.2. Las implementaciones que ejecutan New Relic pueden ejecutar Adobe Commerce 2.4.6 en PHP 8.1 pero no en PHP 8.2. **Solución alternativa**: Ejecute Adobe Commerce 2.4.6 en PHP 8.1 hasta que se publique una nueva versión de New Relic compatible con PHP 8.2. Esta versión se espera para el verano de 2023. <!-- AC-7769-->

## Problemas solucionados

Se han corregido cientos de problemas en el código principal de Adobe Commerce 2.4.6. A continuación se describe un subconjunto de los problemas corregidos incluidos en Adobe Commerce 2.4.6.

### Instalación, actualización, implementación

<!-- ACP2E-1168-->

* La implementación de contenido estático ya no agota el tiempo de espera o falla durante implementaciones estándar o compactas con varias configuraciones regionales y sitios web.

<!-- ACP2E-923-->

* La estrategia compacta ya no provoca una referencia no válida a un dominio externo al ejecutar la implementación de contenido estático (`bin/magento set:static-content:deploy -f --strategy compact`).

<!-- AC-5994-->

* En ejecución `bin/magento setup:di:compile -vvv` (o con el `-v` o `-vv` ) ahora devuelve un mensaje informativo en caso de error. [GitHub-35391](https://github.com/magento/magento2/issues/35391)

<!-- AC-5973-->

* Adobe Commerce ya no genera la siguiente excepción al ejecutar el `bin/magento setup:upgrade` en una implementación que ya esté ejecutando la herramienta de migración de datos: `PHP Fatal error:  Declaration of Migration\Logger\Logger::addRecord(int $level, string $message, array $context = []): bool must be compatible with Monolog\Logger::addRecord(int $level, string $message, array $context = [], ?Monolog\DateTimeImmutable $datetime = null): bool in /var/www/html/vendor/magento/data-migration-tool/src/Migration/Logger/Logger.php on line 34`. [GitHub-35604](https://github.com/magento/magento2/issues/35604)

<!-- AC-5970-->

* La variable `bin/magento setup:db:status` el comando ya no falla en los entornos que ejecutan MySQL 8.0.29. Anteriormente, el resultado del comando afirmaba erróneamente que el esquema declarativo estaba obsoleto. [GitHub-35671](https://github.com/magento/magento2/issues/35671)

<!-- AC-1377-->

* La variable `composer install` el comando ya no se sobrescribe `.gitignore` archivos. [GitHub-32888](https://github.com/magento/magento2/issues/32888)

<!-- AC-6671-->

* Ejecución `bin/magento sampledata:remove` para eliminar datos de ejemplo después de la actualización en Alpine Linux ya no falla con este error: `Undefined constant "MagentoHackathon\Composer\Magento\Deploystrategy\GLOB_BRACE`. [GitHub-36062](https://github.com/magento/magento2/issues/36062)


<!-- AC-6933-->

* `bin/magento setup:upgrade` ahora se ejecuta correctamente después de la primera ejecución `composer install --no-dev`. [GitHub-36351](https://github.com/magento/magento2/issues/36351)

<!-- AC-6796-->

* Las entradas de seguimiento de pila de excepciones y excepciones ahora se incluyen en `var/log/exception.log`. [GitHub-36054](https://github.com/magento/magento2/issues/36054)

<!-- AC-2681-->

* Adobe Commerce ahora genera un error de validación de parámetros al utilizar la línea de comandos para establecer una conexión Redis sin contraseña.

### Accesibilidad

<!-- AC-6678 6679 6677-->

* La variable **[!UICONTROL Proceed to Checkout]**, **[!UICONTROL Review Order]** y **[!UICONTROL Place Order]** los botones del flujo de trabajo de cierre de compra ahora funcionan como se espera con la entrada de teclado.

<!-- AC-2485-->

* Indicación visual de enfoque en botones al utilizar **[!UICONTROL TAB]** o **[!UICONTROL SHIFT + TAB]** ahora, navegar por los controles de página funciona según lo esperado.

#### Lectores de pantalla

<!-- AC-2498-->

* El lector de pantalla de la página del historial de pedidos ahora lee la descripción de imagen correcta.

Los lectores de pantalla ahora anuncian:

* Recuento total de elementos encontrado en los resultados de búsqueda según lo esperado <!--- AC-3522-->
* Nombre del usuario registrado cuando un usuario inicia sesión correctamente con los controles de teclado <!--- AC-6477-->
* El encabezado de página de resultados de búsqueda de productos ahora lee el valor correcto para la variable `<title>` element <!--- AC-2489-->
* Si se requieren campos de entrada <!--- AC-2494-->
* Corrija el estado actual de los elementos de acordeón (contraídos y expandidos) <!--- AC-2487-->
* Cuando el contenido de la página se ha actualizado después de que el usuario haya hecho clic en la variable **[!UICONTROL Create an account]** botón <!---AC-6676-->



### Paquete de productos

<!-- ACP2E-906-->

* La actualización del producto del paquete mediante API para una vista de tienda específica ahora no anula otros datos de vistas de almacén para el mismo producto del paquete. Anteriormente, los títulos de las opciones del producto del paquete se anulaban con el título de la primera opción para otras vistas de tiendas.

<!-- AC-3769-->

* Los productos agrupados ahora se pueden filtrar correctamente desde Administración **[!UICONTROL Catalog]** > **[!UICONTROL Products]** cuando se utiliza una configuración regional holandesa. Anteriormente, Adobe Commerce mostraba este error cuando intentaba filtrar por `Type: Bundle Product`: `Something went wrong with processing the default view and we have restored the filter to its original state`. [GitHub-35704](https://github.com/magento/magento2/issues/35704)

<!-- ACP2E-1038-->

* La cuadrícula de productos ya no genera una excepción cuando los productos del paquete tienen un precio especial que supera los 1000. Anteriormente, al buscar el producto por SKU o al navegar a **[!UICONTROL Catalog]** > **[!UICONTROL Products]**, Adobe Commerce generó este error: `Non Numeric value encountered`. [GitHub-36284](https://github.com/magento/magento2/issues/36284))

<!-- ACP2E-1220-->

* Las columnas de las notas de crédito y los PDF de factura de los pedidos que contienen una combinación de paquetes y productos simples ahora se representan correctamente. Anteriormente, las columnas se distorsionaban o desalinizaban.

<!-- ACP2E-1315-->

* En las consultas de GraphQL que contienen un `BundleProduct` fragmento, la variable `items.options.product` contiene datos como se espera. Anteriormente, el objeto podía ser nulo en algunas circunstancias.

<!-- AC-6548-->

* Las cantidades decimales para las opciones de paquetes ahora se representan correctamente cuando **[!UICONTROL Quantity uses decimals]** está activada. Anteriormente, solo se procesaba la parte entera de la cantidad, no el componente fraccional. Por ejemplo, una cantidad de 1,5 se representó como 1,0. [GitHub-35964](https://github.com/magento/magento2/issues/35964)

<!-- B2B-2453-->

* Las consultas de productos de GraphQL ahora solo devuelven opciones de producto de paquete dentro del ámbito de la tienda que se consulta.

<!-- B2B-2455-->

* Los productos que no están asignados a categorías pero que son opciones de producto para paquetes o productos agrupados ahora se devuelven en respuestas cuando la variable **[!UICONTROL Allow Category Browsing]** el ajuste de configuración está habilitado para el cliente que envía la consulta.

### Caché

<!-- ACP2E-134-->

* La caché de página completa ya no se descarga después del cumplimiento del pedido a menos que el producto solicitado no esté en existencias. Anteriormente, la caché se depuraba para la categoría cada vez que se creaba un envío.

<!-- ACP2E-1321-->

* Los datos ahora se almacenan correctamente en caché cuando se configura la caché L2 y se desalojan parcialmente los datos remotos. Anteriormente, después de vaciar únicamente la caché de datos sin hash de esos datos, la nueva caché no se guardaba mientras existieran los hashes de datos.

<!-- B2B-2471-->

* Errores corregidos en `CatalogUrlResolverIdentity` y `CmsUrlResolverIdentity` que impedía el almacenamiento en caché. Esto afectaba al almacenamiento en caché de consultas de ruta en varias solicitudes.

### Carro de compras y cierre de compra

<!-- ACP2E-965-->

* Los compradores ahora pueden agregar un artículo adicional al carro cuando el carro contiene la cantidad mínima del producto simple.

<!-- ACP2E-964-->

* Las llamadas a la API de REST para recuperar datos del carro de compras ahora devuelven lo mismo `grand_total` y `base_grand_total` cuando la moneda de almacén y la moneda base son iguales. [GitHub-34649](https://github.com/magento/magento2/issues/34649)

<!-- ACP2E-962-->

* El valor exportado de **[!UICONTROL Maximum Qty Allowed in Shopping Cart]** ahora coincide con el valor predeterminado establecido en la configuración de administración.

<!-- ACP2E-889-->

* Adobe Commerce ahora calcula correctamente el total general de reembolsos de pedidos con un descuento en el envío.

<!-- ACP2E-876-->

* Google reCAPTCHA ahora funciona según lo esperado para pedidos de tienda. Anteriormente, Adobe Commerce mostraba estos errores cuando Google ReCAPTCHA no se seleccionaba por primera vez antes de que un comprador intentara realizar un pedido: `ReCaptcha validation failed, please try again` y `No such cart with id = ID`.

<!-- AC-2338-->

* La actualización de la imagen CAPTCHA ahora respeta la configuración de Administración y no se activa cuando la configuración está desactivada. Anteriormente, la actualización se activaba cada vez que cambiaba el método de pago, independientemente de si la configuración estaba activada o desactivada. [GitHub-34855](https://github.com/magento/magento2/issues/34855)

<!-- ACP2E-479-->

* Adobe Commerce ahora muestra una ventana emergente de confirmación tal como se espera antes de redirigir un comprador a la página siguiente cuando este cambia la cantidad de producto en la página del carro de compras sin actualizar el carro de compras y luego intenta navegar a la página siguiente.

<!-- AC-5987-->

* Ahora, los compradores pueden reducir la cantidad de un producto del carro de compras después de haberlo reducido en el administrador. Anteriormente, Adobe Commerce generaba el siguiente error cuando un comprador intentaba reducir la cantidad de productos: `The requested qty is not available`. [GitHub-35780](https://github.com/magento/magento2/issues/35780)

<!-- AC-6744-->

* Adobe Commerce ya no genera un error en la consola de JavaScript cuando la cantidad de producto supera el máximo configurado durante el cierre de compra de varios envíos. Ahora, Adobe Commerce muestra un mensaje de error informativo. [GitHub-36184](https://github.com/magento/magento2/issues/36184)

<!-- ACP2E-1276-->

* La cantidad de artículos en la página del carro de compras ya no se representa como un número negativo cuando un comprador utiliza la tecla de flecha hacia abajo en su teclado para cambiar la cantidad de productos. [GitHub-36299](https://github.com/magento/magento2/issues/36299)

<!-- ACP2E-1232-->

* Los compradores ya no pueden añadir al carro un producto de una categoría que ahora no está permitida después de cambiar el grupo de clientes al que pertenece el comprador. Adobe Commerce ahora comprueba el acceso de permisos de grupos de clientes para categorías específicas cuando se han cambiado los ajustes de configuración de permisos.

<!-- ACP2E-926-->

* Los carros de compras de los clientes ya no están vacíos antes de la creación del pedido del administrador y el contenido del carro de compras ahora se restaura si el pedido se cancela o se abandona. Los artículos ahora se eliminan del carro solo después de la creación del pedido. Anteriormente, cada vez que un usuario administrador intentaba crear un pedido en la página Administrar carro de compras del administrador, el carro de compras se vaciaba.

<!-- AC-6939-->

* El minicarro ahora muestra las imágenes de producto correctas después de ejecutar `bin/magento catalog:image:resize`. Anteriormente, todas las imágenes se reemplazaban por la imagen de marcador de posición de producto predeterminada. [GitHub-35535](https://github.com/magento/magento2/issues/35535)

<!-- AC-2376-->

* El cierre de compra ahora se puede completar correctamente cuando la dirección de envío contiene un atributo de extensión. Anteriormente, Adobe Commerce generaba este error: `Object of class Magento\Quote\Api\Data\AddressExtension could not be converted to string`. [GitHub-34202](https://github.com/magento/magento2/issues/34202)

<!-- AC-2793-->

* La variable `addBundleProductsToCart` la mutación ya no agrega productos a una cotización si una opción de producto requerida no tiene valor. [GitHub-25676](https://github.com/magento/magento2/issues/25676)

<!-- B2B-2458-->

* Adobe Commerce ahora devuelve un mensaje informativo cuando un `addProductsToCart` la mutación falla al agregar un producto al carro de compras con permisos insuficientes.

<!-- ACP2E-1242-->

* Adobe Commerce ya no genera un error en la página del carro de compras cuando se usa el pedido rápido para agregar un producto en una cantidad que supera el inventario disponible.

<!-- AC-6312-->

* La variable `setGiftOptionsOnCart` la mutación ahora requiere la autorización del cliente para las operaciones del carro de compras del cliente.

### Regla de precios del carro de compras

<!-- AC-2242-->

* Las opciones de envío libres de reglas de precios del carro de compras que se establecen durante la creación de reglas ahora se aplican a los pedidos según lo esperado. Anteriormente, las opciones de envío gratuitas aplicadas durante la regla creada se ignoraban durante el cierre de compra y el envío gratuito no estaba permitido cuando se aplicaba la regla. [GitHub-35013](https://github.com/magento/magento2/issues/35013)

<!-- ACP2E-1074-->

* La variable `discount_percent` de `sales_order_item` la tabla de un producto ahora se rellena según lo esperado con el porcentaje de descuento cuando la cantidad de descuento del artículo no está establecida, o es buena o igual a la cantidad de artículo del pedido. Anteriormente, esta columna no se rellenaba cuando se aplicaba una regla de precio del carro de compras a este producto.

### Catálogo

<!-- ACP2E-1181-->

* El widget de lista de productos ya no muestra precios incorrectos o en caché para un comprador que ha iniciado sesión. El precio mostrado en el widget de página principal ahora coincide con la dirección del comprador y se actualiza cuando este actualiza la dirección. Anteriormente, la caché del explorador no actualizaba los precios del producto en la página principal en función de las reglas de impuestos del grupo de clientes.

<!-- ACP2E-1007-->

* La función Comparar lista de productos ahora funciona correctamente en una implementación multisitio web y depende del sitio web.

<!-- ACP2E-900-->

* Adobe Commerce ya no muestra los datos de la página anterior cuando vuelve a cargar una página de detalles del producto. Anteriormente, cuando se volvía a cargar la página de detalles del producto, los datos de la primera pestaña se combinaban con los datos recién cargados durante una segunda división.

<!-- ACP2E-816-->

* Las categorías con subcategorías ahora se pueden expandir en el menú principal de dispositivos móviles según lo esperado. Anteriormente, los compradores no podían abrir ni expandir categorías con subcategorías en implementaciones móviles. [GitHub-35329](https://github.com/magento/magento2/issues/35329)

<!-- ACP2E-789-->

* Las listas de categorías ahora se actualizan según lo esperado cuando se asigna un producto a un nuevo sitio web o tienda. Anteriormente, el indizador de precios del producto no se marcaba como inválido y, posteriormente, se volvía a activar en un `cron` ejecute como se espera. Como resultado, la entrada de precio del producto no aparecía en la tabla de índices de precios y no se mostraba en la nueva tienda o sitio web.

<!-- AC-6395-->

* El recuento de inventario de tienda ahora es preciso cuando el valor de **[!UICONTROL Display Out of Stock Products]** está habilitado. [GitHub-35899](https://github.com/magento/magento2/issues/35899)

<!-- AC-6384-->

* La página de categoría ya no está vacía cuando la variable **[!UICONTROL Allow All Products Per Page]** está activada. [GitHub-35900](https://github.com/magento/magento2/issues/35900)

<!-- AC-6330-->

* La variable **[!UICONTROL Display Out of Stock Products]** la opción de configuración ahora funciona según lo esperado cuando está habilitada. Anteriormente, todos los productos se mostraban como fuera de existencias en la tienda cuando esta opción estaba habilitada en el Administrador. [GitHub-35898](https://github.com/magento/magento2/issues/35898)

<!-- AC-2631-->

* Los clientes asignados a un grupo de mayoristas ahora pueden agregar un producto agrupado a su carrito cuando lo permiten los permisos de categoría. Si este permiso no está definido para un grupo de clientes, la configuración tiene prioridad.

<!-- ACP2E-1306-->

* La ordenación de productos por atributos booleanos ahora funciona según lo esperado. [GitHub-36390](https://github.com/magento/magento2/issues/36390)

<!-- ACP2E-1206-->

* Los descuentos en las reglas de precios del catálogo ya no se aplican a las opciones de productos personalizadas de precio fijo, sino que se aplican únicamente al precio original del producto.

<!-- ACP2E-1027-->

* Los productos relacionados ahora se recuperan correctamente en la página de detalles del producto de tienda cuando se generan mediante la regla de producto relacionada para atributos de producto alfanuméricos. [GitHub-36285](https://github.com/magento/magento2/issues/36285)

<!-- AC-6810-->

* Las reglas de precios del catálogo ahora tienen en cuenta el ámbito seleccionado y se aplican a productos solo para los sitios web para los que el atributo tiene un valor de opción que coincide con la regla. Anteriormente, la regla no tenía en cuenta el ámbito seleccionado en las implementaciones de varios sitios. [GitHub-36049](https://github.com/magento/magento2/issues/36049)

<!-- ACP2E-891-->

* Las opciones de muestra, los atributos de color y tamaño ahora están preseleccionados en la página de detalles del producto cuando un comprador modifica el producto configurable desde la página Mi carro de compras. (La versión jQuery 3.x ahora es compatible con el `swatchRenderer` nombre del widget, que ahora es el caso del camello). Anteriormente, la opción de muestra no estaba preseleccionada.

<!-- ACP2E-1361-->

* Ahora se notifica a los clientes de las caídas de precios del producto cuando están suscritos al cliente a la alerta de caída de precios. Anteriormente, las notificaciones de bajada de precios no siempre se enviaban debido al almacenamiento en caché a nivel de aplicación.

<!-- ACP2E-1348-->

* Reglas de catálogo basadas en SKU con la variable **[!UICONTROL is not one of]** ahora funciona según lo esperado.

<!-- AC-729-->

* Adobe Commerce ya no supone erróneamente que una categoría es la categoría principal de otra según la ruta de la categoría. Anteriormente, cuando dos categorías eran adyacentes y un ID de categoría empezaba con el ID de categoría de otra categoría, Adobe Commerce suponía que las categorías tenían la misma categoría principal. [GitHub-32464](https://github.com/magento/magento2/issues/32464)


### Productos configurables

<!-- ACP2E-1083-->

* Adobe Commerce ya no genera un error cuando un usuario administrador agrega productos manualmente a un producto configurable que ya tiene muchos productos simples asignados a él. Anteriormente, Adobe Commerce mostraba este error: `Something went wrong with processing the default view and we have restored the filter to its original state`.

<!-- AC-2877-->

* Los compradores ya no pueden añadir productos configurables con una cantidad vendible de 0 al carro de compras en implementaciones con pedidos atrasados desactivados. Adobe Commerce ahora indica que el producto no está en existencias. [GitHub-35319](https://github.com/magento/magento2/issues/35319)

<!-- AC-2678-->

* La creación de un nuevo producto mediante la importación de un producto configurable con muchas opciones desde una vista de tienda diferente ahora resulta en una copia exacta del primer producto como se espera. Anteriormente, el criterio de ordenación de las opciones configurables del nuevo producto era incorrecto y los títulos no se traducían a la configuración regional de la nueva vista de tienda en implementaciones con varias vistas de tienda y configuraciones regionales. [GitHub-35200](https://github.com/magento/magento2/issues/35200)

<!-- AC-535-->

* Los productos configurables con todos los productos secundarios fuera de existencias ahora se muestran como sin existencias en la tienda.

<!-- AC-6852-->

* Los SKU de producto configurables y los nombres de producto ahora se muestran con precisión. Anteriormente, el nombre y los SKU se mostraban como indefinidos después de mover un grupo de atributos sobre el grupo Detalles del producto en **[!UICONTROL Stores]** > **[!UICONTROL Attribute set]**. [GitHub-36309](https://github.com/magento/magento2/issues/36309)

### Cupones

<!-- ACP2E-1053-->

* Se ha añadido la lógica de validación al flujo de trabajo Administrar códigos de cupón para aplicar la configuración del código de cupón al generar cupones. Anteriormente, la generación de código de cupón ignoraba el **[!UICONTROL Code Length]** cuando la variable **Cantidad de cupones** era bueno a 2500.

<!-- ACP2E-1029-->

* Los puntos de devolución ahora se añaden a la cuenta de un cliente como se espera cuando se aplica un cupón de recompensa durante el cierre de compra con el método de pago PayPal Express.

<!-- ACP2E-1225-->

* Ahora puede aplicar un código de cupón durante la creación del pedido de administrador cuando la regla de precio del carro de compras tenga peso como condición. Anteriormente, no se establecían códigos de cupones si no se seleccionaban otros campos para el producto. [GitHub-36271](https://github.com/magento/magento2/issues/36271)

<!-- ACP2E-1223-->

* Ahora puede filtrar los informes de cupones por varias reglas de precios del carro de compras. [GitHub-36272](https://github.com/magento/magento2/issues/36272)

<!-- AC-2812-->

* Las opciones personalizadas ahora se aplican y se guardan cuando un usuario administrador pulsa **[!UICONTROL Enter]** al configurar un producto con opciones personalizadas. Anteriormente, se podían seleccionar opciones y añadir el producto a un pedido, pero las opciones no se guardaban y se pedía al usuario administrador que volviera a seleccionar las opciones del producto. [GitHub-35284](https://github.com/magento/magento2/issues/35284)

<!-- AC-6688-->

* Los códigos de cupón ahora se pueden exportar correctamente a Excel XML. Anteriormente, el archivo generado no contenía todos los códigos de cupones seleccionados, sino solo todos los elementos seleccionados en el selector de elementos por página.[GitHub-36073](https://github.com/magento/magento2/issues/36073)

### cron

<!-- ACP2E-1243-->

* La variable `catalog_index_refresh_price` el trabajo de cron ahora se ejecuta correctamente. Anteriormente, Adobe Commerce registraba este error durante la ejecución de cron: `report.ERROR: Cron Job catalog_index_refresh_price has an error: SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens`.

### Moneda

<!-- ACP2E-1012-->

* Se ha agregado un espacio que faltaba entre los símbolos de moneda personalizados y los precios a los precios de los productos de tienda y administración. Se ha añadido la condición adecuada y la expresión regex para permitir un NBSP personalizado en los símbolos de moneda. Por ejemplo, IDRx 105.00 se mostraba anteriormente como IDRx105.00.

### Segmento de cliente

<!-- ACP2E-1185-->

* El filtro Sí/No de la cuadrícula de segmentos del cliente administrador durante la creación de una nueva regla de precio del carro de compras ahora funciona según lo esperado.

### Correo electrónico

<!-- ACP2E-1063-->

* Adobe Commerce ya no envía correos electrónicos duplicados de clientes después de crear un pedido desde el administrador.

<!-- ACP2E-1200-->

* Los correos electrónicos del orden de administración ya no se envían cuando se llama a la función **[!UICONTROL Email order confirmation]** está desactivado. [GitHub-36256](https://github.com/magento/magento2/issues/36256)

<!-- ACP2E-1151-->

* Las opciones de imagen ya no se muestran como marcas de HTML en la nota de crédito, la confirmación de pedido y los correos electrónicos de cliente de factura (plantilla predeterminada) para productos con opciones personalizadas.

### Marcos

<!-- AC-6385-->

* Los usuarios administradores ahora pueden abrir correctamente el Administrador **[!UICONTROL Store]** > **[!UICONTROL Configuration]** cuando no haya ningún país en la **Países de la Unión Europea** configure (**[!UICONTROL Stores]** > **[!UICONTROL Configuration]** > **[!UICONTROL General]** > **[!UICONTROL Country options]** > **[!UICONTROL European Union Countries]**). Anteriormente, cuando un usuario administrador intentaba abrir esta página, Adobe Commerce generaba este error: `TypeError: explode(): Argument #2 ($string) must be of type string, null given in /var/www/php/folder/vendor/magento/module-config/ViewModel/CountryFilter.php:46`. [GitHub-35901](https://github.com/magento/magento2/issues/35901)

<!-- AC-6361-->

* `jquery.cookie` ahora funcionan como se espera con las dependencias de JavaScript. Anteriormente, no se podían usar alias para `jquery/jquery.cookie`. [GitHub-35913](https://github.com/magento/magento2/issues/35913)

<!-- AC-3226-->

* La variable `bin/magento i18n:collect-phrases` ahora incluye el comando `<title>` en el archivo CSV exportado. [GitHub-35462](https://github.com/magento/magento2/issues/35462)

<!-- AC-6841-->

* `Magento\Framework\Code\Reader\ArgumentsReader::getParentCall()` ahora admite argumentos de constructor con nombre. Ahora puede llamar a una función estableciendo los parámetros por su nombre.

<!-- ACP2E-1287-->

* Los errores ahora se registran según lo esperado en la `exception.log` archivo. Anteriormente, aunque los errores se registraban en la variable `system.log` , los errores no se registraron en `var/log/exception.log`.

<!-- AC-3758-->

* Los comerciantes ahora tienen la capacidad de especificar un proveedor SMTP externo personalizado. [GitHub-26104](https://github.com/magento/magento2/issues/26104)

<!-- AC-3752-->

* Ahora, las integraciones de OAuth se pueden volver a autorizar según lo esperado en implementaciones que ejecutan Adobe Commerce 2.4.3-p2. Anteriormente, la reautorización producía este error: `The attempt to post data to consumer failed due to an unexpected error. Please try again later`. Adobe Commerce también intentó descifrar valores no cifrados. [GitHub-35313](https://github.com/magento/magento2/issues/35313)

<!-- ACP2E-1201-->

* El correcto `rowId` ahora se pasa cuando la categoría `urlKey` se guarda para las categorías que tienen categorías secundarias. Anteriormente, el error `categoryId` se pasó al guardar la categoría `URLKey`.

<!-- ACP2E-981-->

* El código de atributo del producto `event` se ha agregado a la lista de códigos de atributos de producto reservados, lo que elimina los errores asociados con el uso de un atributo con este nombre en la tienda. Anteriormente, la aplicación arrojaba este error en los detalles del producto y en las páginas de búsqueda/lista de productos al `event` se ha utilizado:  `report.CRITICAL: Error: Call to a member function getStatus() on string in /home/mer33515/public_html/ee24develop/magento2ee/app/code/Magento/CatalogEvent/Observer/ApplyIsSalableToProduct.php:23`.

<!-- AC-5985-->

* Los mensajes de error de validación de tienda que se producen durante la colocación del pedido ahora se muestran de forma coherente. Anteriormente, los mensajes aparecían, se contraían y luego reaparecían. [GitHub-35651](https://github.com/magento/magento2/issues/35651)

<!-- AC-2943-->

* Los consumidores de AMQP ya no fallan debido a un problema obsoleto `trim()` en implementaciones que ejecutan PHP 8.1. Anteriormente, cuando el consumidor de AMQP se iniciaba después de la instalación, Adobe Commerce generaba este error: `Deprecated Functionality: trim(): Passing null to parameter #1 ($string) of type string is deprecated in .../vendor/magento/framework-amqp/Config.php on line 143`. [GitHub-35380](https://github.com/magento/magento2/issues/35380)

<!-- AC-2882-->

* La variable `getFilteredTimerIds` ahora funciona como se espera.  Clase `Magento\Framework\Profiler\Driver\Standard\Stat` ahora es compatible con PHP 8.1. Anteriormente, Adobe Commerce arrojaba una excepción cuando se llamaba a este método. [GitHub-35307](https://github.com/magento/magento2/issues/35307)

<!-- AC-2784-->

* Se ha eliminado la dependencia del `imagemin-svgo` biblioteca.

<!-- AC-2058-->

* El proceso de minificación de plantillas ahora procesa correctamente los comentarios consecutivos cuando el primer comentario comienza con `//`. [GitHub-34880](https://github.com/magento/magento2/issues/34880)

<!-- AC-2241-->

* Se ha corregido una consulta de base de datos emitida por el `BundleGraphQl` que devolvió este error: `"debugMessage": "Notice: Undefined offset: 16 in vendor/magento/module-bundle-graph-ql/Model/Resolver/Options/Collection.php on line 130"`.[GitHub-34991](https://github.com/magento/magento2/issues/34991)

### Correcciones generales

<!-- ACP2E-1068-->

* Adobe Commerce ahora muestra un intervalo de tiempo preciso cuando un usuario administrador selecciona la variable **[!UICONTROL Last 24 Hours]** en el panel Estadísticas de administración . Anteriormente, Adobe Commerce mostraba un intervalo de tiempo incorrecto. Esto ocurría porque la zona horaria de la base de datos permanecía sin cambios.

<!-- ACP2E-1066-->

* Las notas de crédito ahora se pueden generar tanto para cantidades enteros como decimales. Anteriormente, solo se admitían cantidades enteras.

<!-- ACP2E-1001-->

* La regla de validación de entrada del código postal del cliente para el tipo **numérica solamente** ahora funciona según lo esperado en la variable **[!UICONTROL Edit Customer Address]** campo (**[!UICONTROL Store]** > **[!UICONTROL Attribute]** > **[!UICONTROL Customer Address]**). Anteriormente, la información de la dirección del cliente se guardaba sin validación de código postal.

<!-- ACP2E-975-->

* Los usuarios administradores con acceso restringido a un sitio web ahora pueden iniciar sesión correctamente en el administrador con la función Iniciar sesión como cliente .

<!-- ACP2E-873-->

* Las cuentas de cliente compartidas globalmente ahora tienen direcciones que se validan con la lista de países permitidos para el sitio web actual y se guardan correctamente. Anteriormente, estas cuentas se validaban incorrectamente en los países permitidos del sitio web donde se registraba al cliente.

<!-- AC-3167-->

* Las rutas de navegación de la jerarquía de páginas de CMS ya no se muestran cuando **[!UICONTROL Enable Hierarchy Functionality]** está desactivado. Anteriormente, se mostraban las rutas de exploración y, cuando los compradores hacían clic en ellas, se mostraba una página 404. [GitHub-35513](https://github.com/magento/magento2/issues/35513)

<!-- AC-2567-->

* La eliminación de un producto de todos los sitios web a través del administrador ya no causa el siguiente error: `SQLSTATE[42000]: Syntax error or access violation`. [GitHub-35133](https://github.com/magento/magento2/issues/35133)

<!-- AC-2235-->

* Los clientes que superen el número máximo de intentos fallidos de inicio de sesión ahora pueden iniciar sesión después de restablecer la contraseña. [GitHub-34981](https://github.com/magento/magento2/issues/34981)

<!-- AC-2020-->

* El componente de filas dinámicas ahora se comporta como se espera cuando un usuario administrador agrega un nuevo elemento. Anteriormente, el componente de fila se comportaba incorrectamente cuando se añadía un nuevo producto simple a un producto agrupado. [GitHub-34850](https://github.com/magento/magento2/issues/34850)

<!-- magento/magento2/pull/35598-->

* Se corrigieron errores ortográficos y gramática incorrecta en la variable `app/code/Magento/Backend/etc/menu.xsd` archivo.

<!-- magento/magento2/pull/35818-->

* La variable `app/code/Magento/Authorization/README.md` se ha actualizado para describir con precisión la creación de tablas.

<!-- magento/magento2/pull/35940-->

* La variable `recordLogin` se ha actualizado para establecer los valores de inicio de sesión en el modelo de usuario, así como para preservar los valores correctos en la variable `logdate` y `lognum` campos de la variable `admin_user` tabla. Anteriormente, no se registraban los intentos de inicio de sesión de los usuarios administradores actualizados.

<!-- magento/magento2/pull/35990-->

* Las plantillas de problemas de GitHub se han convertido en formularios de problema para problemas de experiencia de desarrollador y solicitudes de funciones.

<!-- ACP2E-961-->

* La variable `Is required` el atributo customer ahora se ha implementado correctamente por ámbito del sitio web para el formulario de edición del cliente de administración.

<!-- ACP2E-895-->

* La variable **[!UICONTROL Grid Filter Condition Type]** el campo de atributos de dirección del cliente y del cliente ya no está visible en la página de edición de atributos cuando el **[!UICONTROL Use in Filter Option]s** está desactivado.

<!-- AC-6020-->

* Adobe Commerce ahora muestra un mensaje de error informativo si un comerciante no puede introducir un valor de atributo SKU opcional al crear un producto. Anteriormente, la aplicación arrojaba esta excepción cuando el atributo era opcional: `Deprecated Functionality: trim(): Passing null to parameter #1 ($string) of type string is deprecated in /var/www/html/mg244/project-community-edition/vendor/magento/module-eav/Model/Entity/AbstractEntity.php on line 932`. [GitHub-35810](https://github.com/magento/magento2/issues/35810)

<!-- ACP2E-716-->

* La variable **[!UICONTROL Show my quotes]** en la variable **[!UICONTROL My Quotes]** ahora funciona según lo esperado. Anteriormente, los resultados de filtro incluían las comillas de otros usuarios administradores.

### Tarjetas de regalo

<!-- ACP2E-851-->

* Las cantidades del producto de la tarjeta de regalo ahora son iguales a la cantidad especificada en un archivo CSV durante la importación. Se han añadido comprobaciones de las opciones existentes y los valores anteriores se actualizan ahora en función de una clave única. Anteriormente, las cantidades de tarjetas de regalo se duplicaban cuando las tarjetas de regalo se importaban varias veces.

### Ajuste de regalo

<!-- AC-3061-->

* El precio de ajuste de regalo ahora se muestra como se espera en el bloque de resumen del pedido cuando el ajuste de regalo se ha aplicado en el nivel de pedido a un pedido que contiene productos físicos y virtuales. Anteriormente, Adobe Commerce no mostraba el precio de ajuste de regalo.

### GraphQL

<!-- AC-1730-->

* `Types` que implementan varias interfaces en el código de GraphQL ahora puede separarse con una `&` firmar y `,` de conformidad con el `@doc`especificación.

<!-- ACP2E-885-->

* La variable `setShippingAddressesOnCart` la mutación ahora admite la configuración de códigos de región numéricos como `region`. Anteriormente, esta mutación funcionaba incorrectamente en valores numéricos de código de región.

<!-- ACP2E-1237-->

* La variable `products` la consulta ahora solo devuelve revisiones asociadas al ámbito especificado. Anteriormente, las consultas devolvían revisiones de todas las tiendas.

<!-- ACP2E-882-->

* Los permisos de categoría ahora se respetan durante las solicitudes de GraphQL.

<!-- AC-1805-->

* La variable `customer` la consulta ahora filtra en los pedidos con una `from` y `to` correctamente. [GitHub-31537](https://github.com/magento/magento2/issues/31537)

<!-- AC-5984-->

* La variable `product` query ahora devuelve datos de categoría correctos en agregación. Anteriormente, `attribute_code.category_uid` devuelve el valor de `category_id` en lugar de `category_uid`.

<!-- AC-6084-->

* La variable `customerOrders` la consulta ya no genera un `\"model\" value should be specified`error. [GitHub-35852](https://github.com/magento/magento2/issues/35852)

<!-- ACP2E-894-->

* La variable `customer` la consulta ahora filtra los pedidos según el ámbito. Ahora puede especificar si la consulta debe filtrar los pedidos por almacén, sitio web o globalmente.

<!-- ACP2E-1172-->

* La variable `categoryList` query ahora devuelve un recuento de productos preciso para las categorías principales anclada y no anclada. El nuevo `is_anchor` se ha añadido al conjunto de categorías de la lista de columnas seleccionadas. Anteriormente, las solicitudes devolvían un recuento de productos de 0. [GitHub-36300](https://github.com/magento/magento2/issues/36300)

<!-- AC-2500-->

* La variable `generateCustomerTokenAsAdmin` la mutación ahora funciona según lo esperado al crear un token para iniciar sesión en una tienda no predeterminada en una implementación de varias tiendas. [GitHub-35084](https://github.com/magento/magento2/issues/35084)

<!-- AC-1731-->

* La variable `createEmptyCart` la mutación ahora lanza una excepción como se espera cuando se utiliza un token caducado. [GitHub-26112](https://github.com/magento/magento2/issues/26112)

<!-- AC-1965-->

* Los mensajes de error de consulta del carro de compras han sido más informativos. [GitHub-34546](https://github.com/magento/magento2/issues/34546)

<!-- AC-2798-->

* Datos de agregación en respuesta a una `products` la consulta ahora incluye valores correctos para el atributo de tipo de precio `attribute_code` y `label`. [GitHub-28878](https://github.com/magento/magento2/issues/28878)

<!-- AC-6685-->

* La variable `products` query devuelve información de categoría como se espera cuando el prefijo de base de datos tiene un valor no nulo. Anteriormente, devolvía un valor `Internal server error`. [GitHub-36117](https://github.com/magento/magento2/issues/36117)

<!-- AC-1003-->

* Se ha corregido el tipo de devolución para la variable `getCustomerIsGuest` método. [GitHub-29529](https://github.com/magento/magento2/issues/29529)

<!-- B2B-2221-->

* La variable `Magento\CatalogGraphQl\Plugin\DesignLoader` se ha refactorizado.

<!-- B2B-2379-->

* La recarga del carro de compras ahora se activa una vez solo como se espera cuando el carro de compras se inicializa mediante mutaciones de GraphQL. Anteriormente, la carga del carro de compras activaba una revalidación innecesaria del carro de compras con respecto al inventario de existencias, que consumía recursos significativos cada vez que se cargaba el carro de compras.

<!-- AC-1726-->

* Se ha añadido la variable `gift_message` escriba a la `OrderItemInterface`. [GitHub-29418](https://github.com/magento/magento2/issues/29418)

<!-- AC-2454-->

* Las opciones de producto devueltas en las respuestas de GraphQL ahora incluyen solo los productos que están dentro del catálogo al que pertenece el usuario. Si el usuario pertenece a un catálogo compartido, solo se devuelven los productos de los catálogos compartidos. Si el usuario es invitado o no parte de un catálogo compartido personalizado, solo se devuelven los productos del catálogo público.


### Google ReCAPTCHA

<!-- AC-3179-->

* Un error reCAPTCHA en la variable `var/log/exception.log` para el inicio de sesión del administrador de reCAPTCHA de Google V3 se ha resuelto y no se registran mensajes de error. Anteriormente, se producía el siguiente error cada pocos segundos cuando un usuario administrador configuraba su **[!UICONTROL Configuration]** > **[!UICONTROL Security]** > **[!UICONTROL Google reCAPTCHA Admin Panel]** configuración: `main.ERROR: Can not resolve reCAPTCHA parameter. {"exception":"[object] (Magento\Framework\Exception\InputException(code: 0): Can not resolve reCAPTCHA parameter. at /home/xxxxxxx/public_html/vendor/magento/module-re-captcha-ui/Model/CaptchaResponseResolver.php:25)"} []`. [GitHub-34975](https://github.com/magento/magento2/issues/34975)

### Imagen

<!-- ACP2E-905-->

* Se han actualizado las recomendaciones sobre el tamaño del logotipo para la factura del PDF.

### Importar/exportar

<!-- ACP2E-957-->

* La importación de un producto con la misma clave de URL numérica que un producto existente pero sin su carácter alfabético terminal ya no provoca un error de validación cuando la variable **[!UICONTROL Product URL Suffix]** se configura como vacío en el administrador.

<!-- AC-6588-->

* La variable `bin/magento app:config:import`ahora importa correctamente el contenido de un `config.php` cuando contiene ciertos `cron` expresiones. Anteriormente, la importación fallaba con este error: `Import failed: Notice: Trying to access array offset on value of type null in [..]/vendor/magento/module-config/Model/Config/Backend/Currency/Cron.php on line 66`. [GitHub-31428](https://github.com/magento/magento2/issues/31428)

<!-- ACP2E-1289-->

* La exportación completa ahora funciona correctamente cuando AWS S3 se utiliza como almacenamiento remoto. Anteriormente, la exportación fallaba debido al tamaño del archivo cargado.

<!-- ACP2E-982-->

* El estado del producto ahora se importa correctamente cuando faltan columnas de datos de inventario en el archivo CSV. Anteriormente, después de la importación del producto, el origen predeterminado se asignaba automáticamente al producto, su cantidad se establecía en cero y su estado se mostraba como no disponible cuando faltaban columnas de datos de inventario en el archivo CSV.

<!-- ACP2E-841-->

* La importación de valores de precios avanzados ahora proporciona el recuento correcto para registros nuevos y actualizados cuando la importación incluye más de 100 registros. Anteriormente, el mensaje de éxito de importación proporcionaba el recuento incorrecto.

<!-- ACP2E-984-->

* Los archivos CSV exportados ahora contienen rutas correctas a los nombres de categoría que se guardan en varios idiomas. Se ha agregado un ID de tienda para la colección de categorías. Anteriormente, los archivos exportados contenían rutas mixtas con distintos idiomas en lugar de una ruta de categoría derivada de la vista de almacén predeterminada.

<!-- ACP2E-1319-->

* La actualización de las opciones personalizadas para un producto en una vista de almacén específica mediante la importación ahora se completa correctamente. Anteriormente, se generaba un error interno del servidor si las filas relacionadas con el producto se dividían en varios lotes.

<!-- AC-6926-->

* La variable `Fixer.io` el servicio de importación ahora funciona según lo esperado. Los tipos de cambio ahora se importan correctamente. [GitHub-36010](https://github.com/magento/partners-magento2ee/issues/36010)


### Índice

<!-- AC-3152-->

* Indexador `batch_size` para el `catalogpermissions_category` el índice ahora se cambia por el valor proporcionado en la variable `env.php` como se espera. Anteriormente, un error tipográfico en la ruta del indizador `batch_size` se ha evitado cambiar el tamaño del lote por el valor proporcionado en `env.php`. [GitHub-652](https://github.com/magento/partners-magento2ee/issues/652)

<!-- ACP2E-1296-->

* La reindexación de precios ahora se ejecuta correctamente cuando el catálogo contiene productos de paquete que no están asignados a ningún sitio web. Anteriormente, se producía el siguiente error al ejecutar el índice de precios del producto: `Warning: Undefined array key <bundel product id > in vendor/magento/module-bundle/Model/ResourceModel/Indexer/Price/DisabledProductOptionPriceModifier.php on line 117`. [GitHub-35796](https://github.com/magento/magento2/issues/35796)

### Infraestructura

<!-- ACP2E-869-->

* Se ha añadido la sanización de `DATE` y `DATETIME` en volcados de base de datos para la compatibilidad con Adobe Commerce. Anteriormente, los campos de tipo datetime no se eliminaban para las tablas customer/cito/order de la tabla de copia de seguridad de la base de datos.

<!-- ACP2E-804-->

* La variable `escaper.js` `escapeHtml` ahora convierte el carácter especial ampersand (&amp;) en `"$amp;"` por `InnerHtml` regla. Esta solución genérica resuelve problemas especiales de conversión de referencias de caracteres y caracteres en el cuadro de entrada del título y guarda el valor exacto tal como está insertado. Anteriormente, los caracteres &amp; se codificaban incorrectamente en los nombres de nodo de la jerarquía de contenido.

<!-- AC-5972-->

* Problemas con terceros `colinmollenhour/php-redis-session-abstract` módulo y PHP 8.1 se han resuelto. [GitHub-35634](https://github.com/magento/magento2/issues/35634)

### Galería de medios

<!-- AC-3034-->

* La Galería multimedia heredada ahora está deshabilitada de forma predeterminada. Anteriormente, **[!UICONTROL Enable old Media gallery]** se estableció en **[!UICONTROL Yes]**.

<!-- ACP2E-1302 -->

* La Galería de nuevos medios se ha optimizado para mejorar la carga del árbol de directorios en la página de categorías.

### Registro

<!-- ACP2E-1312-->

* Ahora puede generar informes del sistema para archivos de registro de 0 bytes. Anteriormente, Adobe Commerce generaba un error al generar un informe para una colección de archivos de registro cuando uno o más archivos estaban vacíos.

### Pedido

<!-- ACP2E-1107-->

* La página nota de abono de pedido de ventas de administrador ahora muestra el total general correcto para los pedidos creados con crédito de almacén y varias facturas. Anteriormente, el cálculo del total general era incorrecto y el usuario no podía generar una nota de abono.

<!-- ACP2E-998-->

* El prefijo de pedido que se pasa en la secuencia de comandos de instalación ahora se agrega correctamente al ID de pedido.

<!-- ACP2E-790-->

* La página de detalles del pedido ahora se carga correctamente cuando el pedido contiene un producto con un valor de texto personalizado largo. Anteriormente, la página de detalles del pedido no se cargaba y el valor de la variable `sales_order_item.product_options` no se almacenaba correctamente si un producto contenía un valor largo para una opción personalizada de texto.

<!-- AC-3178-->

* El estado del pedido de tienda es ahora preciso para los pedidos parcialmente reembolsados. Anteriormente, un pedido permanecía en estado de procesamiento después del envío cuando se aplicaba un reembolso parcial. [GitHub-35528](https://github.com/magento/magento2/issues/35528)

<!-- AC-3031-->

* El grupo de clientes ahora se representa con precisión como **Sin sesión iniciada** para un pedido creado por un usuario invitado. Anteriormente, el grupo de clientes era NULL en los resúmenes de pedidos de invitado, lo que afectaba a los correos electrónicos de confirmación y a la exportación de pedidos. [GitHub-35440](https://github.com/magento/magento2/issues/35440)

<!-- AC-2811-->

* Un estado de **[!UICONTROL Closed]** ahora se asigna a pedidos virtuales según lo esperado después de que se haya emitido una nota de crédito y se haya reembolsado al cliente. Anteriormente, los productos virtuales se mostraban como **[!UICONTROL Complete]** en la lista desplegable Estado , pero **[!UICONTROL Closed]** en el pie de página del pedido comenta cuando el comentario se agregó desde el administrador. [GitHub-35283](https://github.com/magento/magento2/issues/35283)

<!-- AC-6641-->

* Los clientes ahora pueden realizar pedidos de productos con una cantidad inferior a uno, y la cantidad de producto ahora se escribe estrictamente como `float`. Anteriormente, porque la cantidad del producto se escribía estrictamente como `int`, los pedidos de una cantidad de producto menor que uno fallaron con este mensaje: `Some of the products are disabled`. [GitHub-36060](https://github.com/magento/magento2/issues/36060)

<!-- ACP2E-1313-->

* Los reembolsos de envío ahora se calculan correctamente cuando **[!UICONTROL Apply discount on prices]** la opción de configuración está definida en **[!UICONTROL including taxes]**.

<!-- ACP2E-1199-->

* Las cuadrículas de facturas, envíos y notas de abono ahora se actualizan asincrónicamente después de archivar los pedidos.

<!-- ACP2E-1194-->

* Los pedidos duplicados ya no son el resultado de solicitudes GraphQL simultáneas e idénticas. Las cotizaciones ahora están bloqueadas durante un máximo de 10 segundos para evitar la creación de pedidos duplicados y la segunda solicitud falla con estos errores: `The cart isn't active` o `The order has already been placed and is currently processing`. Este valor de bloqueo se puede configurar mediante di para la variable `Magento\Quote\Model\PlaceOrderMutex` class `lockWaitTimeout` parámetro. [GitHub-36274](https://github.com/magento/magento2/issues/36274)

<!-- ACP2E-1170-->

* Al agregar un comentario a un pedido archivado, ya no se vuelve a la cuadrícula de pedidos no archivados y se mantiene su estado archivado.

<!-- ACP2E-860-->

* Los valores de los atributos de la empresa ahora se muestran según lo esperado en las secciones de dirección de facturación y envío del flujo de trabajo de cierre de compra. Anteriormente, los atributos de empresa no se mostraban correctamente en la página de detalles del pedido porque las tiendas no se habían configurado correctamente durante la creación del pedido. Los valores de atributo solo se almacenaban correctamente cuando la variable **Mostrar empresa** se ha definido como **[!UICONTROL optional]** para **Sitio web principal** en implementaciones de varias tiendas.

<!-- ACP2E-1117-->

* La variable `customer_address_id` ahora se configura como se espera para una nueva dirección de facturación cuando **[!UICONTROL My billing and shipping address are the same]** está activada. Se ha introducido una condición adicional para identificar si la dirección de facturación es la misma que la dirección de envío antes de configurar el ID de dirección de cliente para la dirección de envío.

<!-- AC-6057-->

* Se han resuelto los problemas de concurrencia con la colocación de pedidos. Anteriormente, si se realizaban dos pedidos desde distintos navegadores al mismo tiempo o casi al mismo tiempo, se asignaba a ambos pedidos el mismo ID de pedido. [GitHub-35833](https://github.com/magento/magento2/issues/35833)

<!-- AC-6908-->

* Colocar un pedido facturado automáticamente para un producto libre cuando la indexación asincrónica está habilitada ahora funciona como se espera. No se agregan entradas a la variable `sales_order_grid or sales_invoice_grid` para estos pedidos. Anteriormente, Adobe Commerce arrojaba una excepción porque la aplicación intentaba indexar las cuadrículas durante la colocación del pedido en lugar de depender de `cron`. [GitHub-36334](https://github.com/magento/magento2/issues/36334)

### Page Builder

<!-- ACP2E-956-->

* Ahora puede usar la función de arrastrar y soltar del Generador de páginas para importar imágenes de forma masiva a la galería.

<!-- AC-2074-->

* Se han resuelto los problemas con la regla CSS del deslizador del Page Builder. [GitHub-34527](https://github.com/magento/magento2/issues/34527)

<!-- ACP2E-978-->

* `Dropdown`, `Text area`y `Text field` Los atributos de ahora están disponibles en la lista de atributos del producto de Page Builder. Anteriormente, solo `Dropdown` y `Text area` estaban disponibles.

### Pago

<!-- ACP2E-862-->

* El método de pago COD ya no se procesa en el flujo de trabajo de cierre de compra cuando COD está exento para el país especificado en las direcciones de envío y facturación. Anteriormente, los ajustes de configuración del administrador para esta función no estaban implementados.

<!-- AC-1119-->

* La información de pago de Vault ya no se muestra en la sección Pago del flujo de trabajo de creación de órdenes de administración si el comprador no ha guardado un token. [GitHub-33954](https://github.com/magento/magento2/issues/33954)

<!-- AC-2688-->

* Los precios personalizados ya no se duplican después de aplicar un descuento mediante la regla de precio del carro de compras. [GitHub-35154](https://github.com/magento/magento2/issues/35154)

<!-- ACP2E-1120-->

* El nuevo estado de pedido pendiente ahora se acepta según lo esperado cuando se realiza un pedido utilizando el método de pago Zero Subtotal Checkout.

<!-- ACP2E-1121-->

* La configuración del correo electrónico de los invitados ahora se respeta durante la creación de pedidos para un comprador invitado con PayPal Express a través de GraphQL. Anteriormente, el conjunto de direcciones de correo electrónico era anulado por la dirección de correo electrónico establecida en la cuenta de PayPal.

#### Braintree

<!-- BUNDLE-3186-->

* Los ID de pedido ahora se añaden a las solicitudes de liquidación de transacciones de pago.

<!-- AC-3030-->

* Adobe Commerce ya no genera el siguiente error cuando un comerciante hace clic en **[!UICONTROL Reports]** > **[!UICONTROL Braintree Settlement]**: `Error: Undefined constant Braintree\PaymentInstrumentType::ANDROID_PAY_CARD in /var/www/html/vendor/paypal/module-braintree-core/Ui/Component/Report/Listing/Column/PaymentType.php:49`. [GitHub-35434](https://github.com/magento/magento2/issues/35434)

<!-- BUNDLE-3043-->

* La variable `customerPaymentTokens` query ya no devuelve tokens de Braintree cuando el almacén está desactivado en el administrador.

<!-- BUNDLE-3107-->

* La variable **[!UICONTROL Pay Later]** se han habilitado botones y banners para Italia y España.

<!-- BUNDLE-3137-->

* Los usuarios administradores ahora pueden crear un pedido o reordenar cuando el método de pago del Braintree está habilitado. Anteriormente, Adobe Commerce generaba este error: `report.CRITICAL: Error: Call to a member function getMethodInstance() on null in /app/vendor/paypal/module-braintree-core/Block/Form.php:174`.

<!-- BUNDLE-3139-->

* El cierre de compra mediante el método de pago del Braintree ahora se completa correctamente cuando el Braintree PayPal está habilitado y **[!UICONTROL Enable Card Payments]** está desactivado. Anteriormente, la barra de progreso nunca se resolvía y Adobe Commerce mostraba este error de consola: `adapter.js:66 Uncaught TypeError: Cannot read properties of undefined (reading 'clientToken')at Object.getClientToken (adapter.js:66:66)`. [GitHub-35961](https://github.com/magento/magento2/issues/35961)

<!-- BUNDLE-3140 3141-->

* Se han implementado la protección contra el fraude, el pago ACH y los enlaces web de métodos de pago locales. El enlace web de protección contra el fraude se activa únicamente si se ha tomado una decisión de riesgo en el Braintree. El vínculo web ACH solo se activa después de que un pago ACH se haya actualizado a `settled` o `settlement decline`.

<!-- BUNDLE-3143-->

* La variable **[!UICONTROL Tagline]** y **[!UICONTROL Layout]** los campos de configuración se han eliminado de todos los **[!UICONTROL PayPal]** en la sección Estilo de administración .

<!-- ACP2E-1229-->

* La opción de método de pago de Braintree Vault permanece seleccionada en el flujo de trabajo de cierre de compra cuando un comprador actualiza su dirección de facturación. Anteriormente, se anulaba la selección del método de pago cuando el comprador anulaba la selección de **[!UICONTROL My billing and shipping address are the same]** botón.

<!-- BUNDLE-3184-->

* Los artículos de línea ahora se pasan para transacciones de PayPal cuando la variable **[!UICONTROL Send Line Items]** el ajuste de configuración se habilita desde el Administrador.

<!-- BUNDLE-3187-->

* Lógica de validación del método de pago ACH **[!UICONTROL Account Number]** ahora admite texto de cuatro a 17 dígitos.

<!-- BUNDLE-3043-->

* La variable `customerPaymentTokens` query ya no devuelve tokens de Braintree cuando el almacén está desactivado desde el administrador.

<!-- BUNDLE-3137-->

* Los usuarios administradores ahora pueden crear un pedido o repedido para los clientes cuando el método de pago del Braintree está habilitado. Anteriormente, Adobe Commerce generaba este error: `report.CRITICAL: Error: Call to a member function getMethodInstance() on null in /app/vendor/paypal/module-braintree-core/Block/Form.php:174`

<!-- BUNDLE-3139-->

* Los compradores ahora pueden utilizar el método de pago del Braintree en tiendas donde **[!UICONTROL Enable Card Payments]** se ha desactivado. Anteriormente, Adobe Commerce generaba este error de JavaScript: `_adapter.js:66 Uncaught TypeError: Cannot read properties of undefined (reading 'clientToken')at Object.getClientToken (adapter.js:66:66).`

### Rendimiento

<!-- ACP2E-1028-->

* El indizador de precios ahora elimina los datos obsoletos como se espera después de reemplazar los registros durante la reindexación parcial de catálogos grandes. Anteriormente, el proceso de reindexación eliminaba los registros obsoletos antes de reemplazarlos, lo que ocasionalmente hacía que los productos desaparecieran temporalmente de la tienda. [GitHub-35616](https://github.com/magento/magento2/issues/35616)

<!-- ACP2E-963-->

* El rendimiento del `bin/magento/setup:upgrade` se ha mejorado. Anteriormente, este comando recreaba los déclencheur de la base de datos, lo que causaba un tiempo de inactividad significativo durante la ejecución del comando. Además, los indexadores no volvieron al modo programado y permanecieron en el modo de guardado. [GitHub-33386](https://github.com/magento/magento2/issues/33386)

<!-- ACP2E-1016-->

* La actualización de los precios de nivel por API ahora se ejecuta más rápido. Anteriormente, la actualización de los precios de los niveles generaba precios innecesarios `SELECT` , que retrasaba la ejecución cuando se asignaban muchos grupos de clientes a un producto.

<!-- ACP2E-1307-->

* Se ha optimizado la carga de páginas que incluyen la lista de productos del widget de catálogo. Anteriormente, los atributos no globales se cargaban directamente desde la base de datos.

### Informes

<!-- ACP2E-852-->

* El informe Registro de administración ahora muestra una **[!UICONTROL Value before change]** cuando se actualiza una regla de categoría.

<!-- ACP2E-1104-->

* Informe Total del pedido **from** y **a** las fechas ahora se muestran correctamente después de seleccionarlas en el selector de fechas.

<!-- BUNDLE-3147-->

* La variable `ANDROID_PAY_CARD` constante en `Braintree/Ui/Component/Report/Listing/Column/PaymentType.php` ha reemplazado `GOOGLE_PAY_CARD`. Esto resuelve los problemas con el informe del Braintree.

### Autorizaciones de devolución de mercancías (RMA)

<!-- ACP2E-1285-->

* El campo de comentarios de la RMA (**[!UICONTROL Orders]** > **[!UICONTROL Return]**) ya no contiene espacios en blanco redundantes. (El `<textarea>` y `<?php` ahora están en una línea.

<!-- ACP2E-1279-->

* La variable **[!UICONTROL Use Config Settings]** para **[!UICONTROL Enable RMA]** ahora guarda su valor como se espera cuando se guarda un producto.

### Reseñas

<!-- ACP2E-1214-->

* Los usuarios administradores con acceso restringido a un ámbito específico ahora pueden eliminar las revisiones de productos según lo esperado.

### Funciones

<!-- ACP2E-1277-->

* Se ha añadido una ACL que faltaba para **[!UICONTROL Stores]** > **[!UICONTROL Configuration]** > **[!UICONTROL Services]** > **[!UICONTROL OAuth]**. Anteriormente, no se podía definir el acceso a esta configuración de OAuth al configurar permisos de funciones.

### Buscar {#search-heading}

<!-- ACP2E-989-->

* Las búsquedas de cadenas entre comillas ahora funcionan según lo esperado cuando la variable **[!UICONTROL Minimum Terms to Match]** está habilitado. Anteriormente, Adobe Commerce generaba este error: `{"error":{"root_cause":[{"type":"parsing_exception","reason":"[match_phrase] query does not support [minimum_should_match]' ...`.

<!-- ACP2E-877-->

* La variable **Punto de registro** filtro de búsqueda de registros de cliente en las cuadrículas de cliente de pedidos de ventas ahora funciona según lo esperado durante la creación del pedido.

<!-- ACP2E-783-->

* La calidad de las sugerencias de búsqueda se ha mejorado para las consultas de varias palabras.

<!-- AC-6768-->

* Los resultados de búsqueda ahora incluyen resultados de opciones fuera de existencias para todos los productos disponibles cuando **[!UICONTROL Display Out Of Stock Products]** está habilitado [GitHub-36055](https://github.com/magento/magento2/issues/36055)

### Envío

<!-- ACP2E-670-->

* Las tarifas de envío para FedEx, USPS y UPS se calculan correctamente cuando la regla de Carro de Envío Gratuito está configurada para que coincida solamente un subconjunto de artículos en el carro de compras.

<!-- AC-937-->

* La página Administración de envío ya no muestra la opción de envío gratuito cuando el total del pedido es menor que la cantidad mínima especificada para el pedido que es elegible para envío gratuito. [GitHub-33697](https://github.com/magento/magento2/issues/33697)

<!-- AC-838-->

* Adobe Commerce ahora honra al cliente administrador **[!UICONTROL Show Company]** configuración al mostrar el envío o la dirección del cliente. Cuando se deshabilita esta configuración, la compañía de envío ya no se incluye en el envío, la dirección del cliente o el registro de pedidos de la base de datos. Anteriormente, la información se mostraba a pesar de la configuración de la deshabilitación. [GitHub-33729](https://github.com/magento/magento2/issues/33729)

<!-- magento/magento2/pull/35631-->

* Se ha eliminado una operación de guardado superflua entre comillas al calcular el envío.

<!-- magento/magento2/pull/35817-->

* `storeId` el ámbito ahora se aplica directamente desde `$request->getStoreId()` para garantizar que el ámbito no se pierda cuando un usuario administrador crea una cotización. Anteriormente, ocasionalmente se producían problemas con los métodos de envío cuando se creaba una cotización desde el administrador mediante módulos de terceros.

<!-- ACP2E-1304-->

* Ahora se generan direcciones URL compatibles con SEO para productos cuyos `url_key` se anula en el nivel de vista de tienda. Anteriormente, las direcciones URL de productos de categoría no se redirigían a direcciones URL compatibles con SEO.

<!-- ACP2E-1196-->

* Adobe Commerce ya no genera un error de importe mínimo de pedido cuando se aplica un descuento a los costes de envío.

<!-- ACP2E-1190-->

* Los reembolsos de envío ahora se calculan correctamente cuando se aplican impuestos después de aplicar un descuento al envío.

<!-- ACP2E-910 AC-3182-->

* Todas las promociones aplicables a un carro de compras solicitado a través de GraphQL `cart` se devuelven juntos. Las promociones incluyen descuentos de artículos de línea, reglas/descuentos del carro de compras, cupones, tarjetas de regalo y crédito de la tienda. [GitHub-35545](https://github.com/magento/magento2/issues/35545)

<!-- AC-2363-->

* Se ha añadido la variable `price_excl_tax` y `price_excl_tax` a la salida de la variable `setShippingMethodsOnCart` mutación. [GitHub-31206](https://github.com/magento/magento2/issues/31206)

<!-- AC-1096-->

* Los ID de envío únicos ahora se pasan en las respuestas de GraphQL como se espera con los detalles de envío de pedidos que se envían a varias direcciones para consultas de GraphQL.

### Ensayo

<!-- ACP2E-879-->

* La reprogramación de la fecha de finalización de una actualización de ensayo ya no genera un error una vez completada la actualización. Anteriormente, los administradores no podían abrir páginas de productos ni cuadrículas de productos, y Adobe Commerce daba este error: `report.CRITICAL: Exception: Item (Magento\Catalog\Model\Product\Interceptor) with the same ID "1" already exists`.

<!-- ACP2E-776-->

* El tablero de ensayo ahora muestra el número total correcto de registros y la paginación del tablero ahora funciona según lo esperado. Anteriormente. el tablero mostraba un máximo de 20 registros.

<!-- ACP2E-1213-->

* Las previsualizaciones de ensayo de contenido ahora se cargan más rápido en implementaciones con muchas tiendas. La vista previa de la reindexación ahora vuelve a indexar solo las tiendas seleccionadas.

<!-- ACP2E-919-->

* Los productos ahora se pueden agregar al carro de compras en modo de vista previa de programación. La actualización de los vínculos de rutas de exploración en el modo de vista previa de programación con estos parámetros corrigió este problema: `version`, `timestamp`y `signature`.

### Impuesto

<!-- AC-3201-->

* La variable **[!UICONTROL Display Zero Tax Subtotal]** la configuración de ahora se aplica según lo esperado para pedidos en implementaciones que ofrecen varios métodos de envío. Anteriormente, el campo de impuesto cero estaba visible en la página del carro de compras durante la finalización de la compra antes de que se seleccionara un método de envío aunque esta configuración estuviera deshabilitada. [GitHub-35561](https://github.com/magento/magento2/issues/35561)

<!-- AC-3157-->

* Adobe Commerce ahora puede mostrar productos agrupados con impuestos en la página de categoría de tienda en implementaciones que ejecutan PHP 8.1. Anteriormente, Adobe Commerce no mostraba una lista de productos y arrojaba esta excepción: `main.CRITICAL: Exception: Deprecated Functionality: ucfirst(): Passing null to parameter #1 ($string) of type string is deprecated in /var/www/m24/vendor/magento/module-tax/Pricing/Render/Adjustment.php on line 188 in /var/www/m24/vendor/magento/framework/App/ErrorHandler.php:61`. [GitHub-35500](https://github.com/magento/magento2/issues/35500)

<!-- ACP2E-1258-->

* Los comerciantes ya no pueden mover una actualización programada a otra actualización que contenga el mismo ID de regla. Anteriormente, la programación de actualizaciones para las reglas de precios del carro de compras creaba programaciones duplicadas cuando se movía una actualización a otra actualización que contenía el mismo ID de regla.

<!-- ACP2E-1295-->

* La asignación automática de grupos de clientes ahora funciona cuando no hay ningún ID de IVA asociado a la dirección del cliente. Si la dirección no contiene un ID de IVA, se trata como perteneciente a un cliente registrado sin IVA y Adobe Commerce cambia el grupo de clientes a un grupo sin IVA. Anteriormente, cuando **[!UICONTROL Enable Automatic Assignment to Customer Group]** se habilitó, la cuenta del cliente no se asignó automáticamente al `customerGroup` cuando se eliminó el ID de IVA de la cuenta de cliente.

<!-- ACP2E-493-->

* Ahora se muestran los bloques dinámicos correctos para las reglas de catálogo por etapas en el modo de vista previa de ensayo. Anteriormente, se mostraban bloques dinámicos no relacionados.

<!-- ACP2E-1080-->

* Varios impuestos ahora se representan correctamente en la sección Resumen de impuestos de facturas y notas de crédito cuando se aplica el envío múltiple durante el cierre de compra.

<!-- ACP2E-1076-->

* Los descuentos ya no se aplican cuando un subtotal de pedido que incluye impuestos junto con la cantidad de Impuesto fijo del producto supera la condición de regla del carro de compras en la página del carro de compras. Anteriormente, los descuentos se aplicaban incluso cuando el total superaba la condición de regla del carro de compras.

<!-- ACP2E-913-->

* Ahora puede especificar un `vat_id` al usar GraphQL para añadir o actualizar la dirección de un comprador invitado.

### Prueba

<!-- ACP2E-1171-->

* Se corrigieron errores de pruebas unitarias para distintas versiones de `ICU` y `libxml` bibliotecas.

<!-- ACP2E-1134-->

* Los desarrolladores ahora pueden solicitar al sistema que ejecute una corrección de datos en una vista específica del almacén. El nuevo parámetro opcional `scope` acepta `string` que corresponde al alias de la fijación del almacén.

<!-- ACP2E-1133-->

* Se ha agregado la capacidad de generar varias instancias de un archivo de datos mediante la opción `count` parámetro.

<!-- AC-6860-->

* Eliminado no nativo `array_first` desde dependencias de desarrollo en el marco de MFTF.

### Traducciones y configuraciones regionales

<!-- ACP2E-912-->

* La traducción en línea ahora funciona correctamente con caracteres especiales, incluidos los caracteres Unicode extendidos en frases ubicadas en etiquetas SCRIPT. Anteriormente, los caracteres japoneses se representaban incorrectamente en scripts editados al utilizar la traducción en línea.

<!-- ACP2E-844-->

* La variable `ñ` ahora, el carácter de un nombre de producto se convierte en `n` durante la generación de claves de URL.

<!-- AC-3499-->

* El resultado de la ejecución `bin/magento i18n:collect-phrases` ahora incluye traducciones de plantillas de correo en `depend` construye según lo esperado. [GitHub-35449](https://github.com/magento/magento2/issues/35449)

<!-- ACP2E-1135-->

* Los caracteres japoneses ahora se pueden introducir directamente en el conjunto de atributos de la página del producto (cuadro combinado). Anteriormente, la introducción directa de caracteres japoneses en este cuadro combinado daba como resultado caracteres modificados o eliminados al ejecutar el explorador Firefox en MacOS. La variable `textInput` El atributo HTML, que puede gestionar mejor la conversión de caracteres japoneses en todos los navegadores, ha reemplazado al `Value` y `valueUpdate` atributos.

<!-- ACP2E-1238-->

* La variable `getOptions` ahora captura correctamente el método `price` valores de etiqueta de atributo basados en la vista de tienda. Anteriormente, la variable `price` se tradujo durante las operaciones de GraphQL para la vista de tienda incorrecta.

### IU

<!-- ACP2E-1018-->

* La moneda específica del sitio web ahora se utiliza como se espera para las columnas Precio especial, Costo y MSRP de la cuadrícula Productos de administración. Anteriormente, el símbolo de moneda correcto no se mostraba en la cuadrícula de producto del catálogo de administración al filtrar por la vista de tienda por un precio especial.

<!-- ACP2E-980-->

* La funcionalidad de arrastrar y soltar de las opciones personalizadas del producto ahora funciona según lo esperado. Ahora puede mover una opción personalizable de una página a otra cuando hay varias páginas disponibles en la cuadrícula de opciones personalizables.

<!-- ACP2E-866-->

* Los gráficos del panel de administración ahora muestran intervalos de tiempo desde el inicio del año natural actual hasta la fecha actual según lo esperado. Anteriormente, los intervalos de fechas se incluían a lo largo de 12 meses.

<!-- AC-3088-->

* Se ha añadido un icono de favoritos predeterminado que falta en la página principal de la tienda. [GitHub-35493](https://github.com/magento/magento2/issues/35493)

<!-- ACP2E-1025-->

* El administrador ahora muestra correctamente la última fecha de inicio de sesión de cada usuario administrador. Anteriormente, cuando un usuario administrador iniciaba sesión en Admin por primera vez, se mostraba un valor de fecha de inicio de sesión vacío en la cuadrícula del usuario Administrador.


<!-- AC-3762-->

* La función de vista previa de plantilla de correo electrónico (**[!UICONTROL Marketing]** > **[!UICONTROL Communications]** > **[!UICONTROL Email Templates]**) ahora muestra las plantillas correctamente. Anteriormente, la imagen de vista previa estaba truncada. [GitHub-35697](https://github.com/magento/magento2/issues/35697)

<!-- magento/magento2/pull/35656-->

* Se ha añadido la variable `new-shipping-address-modal` para admitir el estilo del nuevo modal de dirección de envío.

<!-- magento/magento2/pull/35738-->

* Se ha añadido texto informativo debajo de la etiqueta `Search Weight` del atributo `Storefront Properties` campo de entrada en Administración **[!UICONTROL Stores]**  > [!UICONTROL Attributes] > **[!UICONTROL Product]**.

<!-- ACP2E-1323-->

* Las vistas previas de correo electrónico ahora se abren en una pestaña independiente en lugar de en una ventana emergente, que proporciona una vista más amplia del contenido del correo electrónico. Anteriormente, el contenido del correo electrónico se truncaba.

<!-- ACP2E-1299-->

* La función de filtro para la cuadrícula de funciones del usuario (Administrador) **[!UICONTROL System]** > **[!UICONTROL Permissions]** > **[!UICONTROL User roles]** > **[!UICONTROL Administrators]**) ahora funciona según lo esperado. El valor de la matriz ahora se gestiona por separado. Anteriormente, cuando intentaba introducir una consulta en esta cuadrícula, Adobe Commerce generaba este error de consola y la página no se cargaba: `Uncaught TypeError: Cannot read properties of null`. [GitHub-35993](https://github.com/magento/magento2/issues/35993)

<!-- ACP2E-328-->

* Se ha añadido la validación de valores de atributo al crear un cliente a través de la API de REST. El proceso de creación ahora falla cuando se proporcionan valores de atributos no válidos. Anteriormente, no había ninguna validación para el sexo, que no es un campo obligatorio. Durante la creación del cliente, el valor que se pasó para el sexo se guardó en la variable `customer_entity` tabla.

<!-- ACP2E-1105-->

* Las direcciones agregadas durante el cierre de compra ahora mantienen el formato esperado. Anteriormente, se omitían las líneas en blanco.

<!-- ACP2E-897-->

* Al cambiar la vista de cuadrícula de columnas de la cuadrícula del producto y seleccionar nuevas columnas para una vista personalizada, ya no se déclencheur la acción Seleccionar todas las columnas de cuadrícula . Anteriormente, desaparecía el cuadro de columna y los productos de la cuadrícula se seleccionaban o no se seleccionaban. [GitHub-36302](https://github.com/magento/magento2/issues/36302)

<!-- ACP2E-1245 1405-->

* Los usuarios administradores ahora pueden borrar correctamente el registro de tareas completadas por el administrador. Anteriormente, el administrador mostraba este error: `Something went wrong`. [GitHub-36255](https://github.com/magento/magento2/issues/36255)

<!-- AC-7525-->

* Configuración del encabezado del tema `Welcome Text` ahora puede contener un solo carácter de comillas. Anteriormente, Adobe Commerce generaba este error de JavaScript: `Uncaught SyntaxError: Unable to process binding "ifnot: function(){return customer().fullname }"`.

### Reescrituras de URL

<!-- ACP2E-808-->

* Cambio de la visibilidad del producto a **[!UICONTROL Not Visible Individually]** en el ámbito de vistas de todo el almacén global ahora elimina solo las reescrituras de URL para las vistas de tienda que no hayan anulado el atributo de visibilidad. Si se cambia la visibilidad del producto de este modo, también se generan reescrituras de URL para todas las vistas de tienda, incluidas las que hayan anulado el atributo de clave de URL (pero no la configuración de visibilidad). Anteriormente, las reglas de reescritura de URL no se aplicaban cuando se cambiaba la configuración de visibilidad.

### Comerciante visual

<!-- ACP2E-1084-->

* Ya no puede cambiar manualmente las posiciones de los productos en los listados de categorías de Visual Marketing cuando los productos coinciden con la regla.

<!-- ACP2E-985-->

* Los usuarios administradores con acceso restringido a una sola tienda ya no pueden arrastrar y soltar productos dentro de una categoría en Visual Marketing. Ahora pueden usar la variable **[!UICONTROL Position]** para reorganizar la posición del producto. Anteriormente, estos usuarios solo podían cambiar la posición del producto dentro de una categoría arrastrando y soltando.

<!-- ACP2E-953-->

* La sección Productos en la categoría de la página de edición de categorías ahora muestra la cantidad correcta de productos configurables. La columna de tabla correcta ahora se utiliza para recuperar la cantidad de productos configurables.

### Marco de API web

<!-- ACP2E-1207-->

* La API de REST `DELETE /rest/V1/products/:sku/media/:entryId` ahora devuelve un mensaje de error si la imagen no se elimina del producto porque está asignada a una función en otras vistas de tienda. Anteriormente, la API devolvía una respuesta correcta incluso cuando la imagen no se eliminaba correctamente.

<!-- ACP2E-1155-->

* Los comerciantes ahora pueden usar la API de REST para crear una nota de crédito para un pedido con un total general cero. Anteriormente, Adobe Commerce mostraba este error: `The order does not allow a credit memo to be created. The credit memo's total must be positive. We can't create a credit memo for the invoice/order`.

<!-- ACP2E-1136-->

* La página de edición del producto del administrador ahora refleja con precisión las asignaciones de un producto después de que la asignación del sitio web del producto se haya cambiado mediante la API de REST. [GitHub-36281](https://github.com/magento/magento2/issues/36281)

<!-- ACP2E-863-->

* Ya no se pueden incluir ID de opción duplicados para atributos de selección múltiple durante solicitudes de API de REST masivas para actualizar productos. Anteriormente, se podían configurar ID de opciones duplicadas para atributos de selección múltiple al enviar una solicitud de API masiva para actualizar un producto. Cuando ese atributo de selección múltiple se configuró para su inclusión en la navegación en capas, la indexación de EAV falló con un `Duplicate entry` error.

<!-- ACP2E-778-->

* Los nombres de producto en los carros de compras ahora utilizan los valores de la vista de tienda especificados como se espera. Anteriormente, los nombres de producto en el carro siempre devolvían el valor de vista de tienda predeterminado en las respuestas del carro de la API de REST.

<!-- AC-5986-->

* Los valores de opción personalizados del elemento del carro de compras ahora se pueden actualizar mediante la API de REST. [GitHub-35768](https://github.com/magento/magento2/issues/35768)

<!-- AC-1330-->

* Solicitudes de API masivas para más de 20 `sourceItems` ahora se completa correctamente en implementaciones donde Inventario está habilitado.

<!-- ACP2E-1044-->

* El servicio Fixer currency funciona ahora como se espera con las claves generadas mediante ApiLayer y las tasas de cambio se exportan correctamente. Anteriormente, Adobe Commerce generaba un error cuando un comerciante intentaba importar las tasas de cambio a través del Administrador.

<!-- ACP2E-726-->

* Ahora puede utilizar la API de REST `/rest/V1/bulk?searchCriteria[filter_groups]` solicitud para consultar operaciones masivas por criterios de búsqueda. Anteriormente, se devolvía el siguiente error: `report.CRITICAL: Report ID: webapi-624bbb1db96c4; Message: Item (Magento\AsynchronousOperations\Model\Operation) with the same ID "0" already exists.`

<!-- magento/magento2/pull/36147-->

* Los precios del producto ahora se actualizan correctamente en las páginas de búsqueda del catálogo de administración y tienda mediante la API Administrar precio base. [GitHub-33767](https://github.com/magento/magento2/issues/33767)


### Lista de deseos

<!-- ACP2E-1013-->

* Los compradores ahora pueden añadir productos a su lista de deseos después de iniciar sesión. Anteriormente, debido a problemas con la validación de claves de formulario tras el inicio de sesión, la clave de formulario enviada con la solicitud de inclusión en la lista se invalidó.

<!-- ACP2E-341-->

* Los productos ahora se agregan a la lista de deseos desde la lista de productos y ven las páginas después de que un cliente invitado confirme su cuenta a partir de un correo electrónico de confirmación. Anteriormente, los productos no se agregaban a la lista de deseos después de la confirmación de la cuenta.

<!-- ACP2E-1175-->

* La variable `addProductsToWishlist` La consulta ahora devuelve un mensaje de error informativo cuando un comprador intenta agregar un elemento a una lista de deseos con un valor no válido para el producto `select` personalizada. Anteriormente, faltaba la validación del servidor para el valor de opción personalizado desplegable, lo que producía un valor no válido en la base de datos. Como resultado, el punto final devolvió este error de servidor interno: `GraphQL endpoint returns Internal server error with "Call`.

## Problema conocido

**Problema**: No se puede crear una nota de abono cuando el envío gratuito está habilitado (**[!UICONTROL Stores]** > **[!UICONTROL Configuration]** > **[!UICONTROL Sales]** > **[!UICONTROL Delivery Methods]**) y el precio de envío mostrado incluye impuestos. Cuando intenta crear una nota de crédito, Adobe Commerce lanza esta excepción: `"Division by zero".vendor/magento/module-sales/Model/Order/Creditmemo/Total/Tax.phpLine 139`. [GitHub-36800](https://github.com/magento/magento2/issues/36800)

**Solución alternativa**: Ya está disponible una corrección para este problema. Vaya a [Herramienta Parches de Calidad: Buscar parches](https://experienceleague.adobe.com/tools/commerce-quality-patches/index.html) y busque el parche ACSD-50814.

### Contribuciones de socios

En el siguiente cuadro se destacan las contribuciones realizadas por los Asociados. En esta tabla se muestra el Partner que contribuyó a la solicitud de extracción, el número de solicitud de extracción externa y el número de problema de GitHub asociado a ella (si está disponible).

{{$include /help/_includes/release-notes/engcomm-2-4-6-partner.md}}

### Contribuciones de colaborador individual

La siguiente tabla identifica las contribuciones de los miembros de nuestra comunidad. En esta tabla se muestra el miembro de la comunidad que contribuyó a la solicitud de extracción, el número de solicitud de extracción externa y el número de problema de GitHub asociado a ella (si está disponible).

{{$include /help/_includes/release-notes/engcomm-2-4-6-issues.md}}

## Requisitos del sistema

Nuestra pila de tecnología está construida en PHP y MySQL. Para obtener más información, consulte [Requisitos del sistema](https://experienceleague.adobe.com/docs/commerce-operations/installation-guide/system-requirements.html).

## Instrucciones de instalación y actualización

Puede instalar Adobe Commerce 2.4.6 utilizando [Compositor](https://experienceleague.adobe.com/docs/commerce-operations/installation-guide/composer.html).
