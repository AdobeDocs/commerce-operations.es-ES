---
title: Notas de la versión de Adobe Commerce 2.4.1
description: Obtenga información sobre las nuevas funciones, mejoras, correcciones de errores y problemas conocidos de la versión 2.4.1 de Adobe Commerce.
exl-id: 230df894-2347-4d68-8386-d0f0e40c2659
source-git-commit: 2e62c49dd0c338f0913ce5f725f396c2cfa95122
workflow-type: tm+mt
source-wordcount: '15023'
ht-degree: 0%

---

# Notas de la versión de Adobe Commerce 2.4.1

Adobe Commerce 2.4.1 introduce mejoras en el rendimiento y la seguridad, además de importantes adiciones al conjunto de funciones B2B. Las mejoras de seguridad incluyen la compatibilidad con el atributo `SameSite` para las cookies y la adición de la protección CAPTCHA para los extremos de API relacionados con pagos y pedidos, así como la página de la tienda Colocar pedido. Las mejoras de B2B se centran en el proceso de aprobación de pedidos, los métodos de envío B2B, el registro ampliado de acciones de administración y la seguridad mejorada en la tienda.

Esta versión incluye todas las mejoras en la calidad principal incluidas en la versión 2.4.0, más de 150 nuevas correcciones en el código principal y más de 15 mejoras de seguridad. Incluye la resolución de casi 300 problemas de GitHub por parte de los miembros de nuestra comunidad. Estas contribuciones de la comunidad van desde una limpieza menor del código principal hasta mejoras significativas en GraphQL.

Todos los problemas conocidos identificados en 2.4.0 se han corregido en esta versión.

{{bics}}

## Aplique AC-3022.patch para seguir ofreciendo DHL como transportista

DHL ha introducido la versión de esquema 6.2 y dejará de utilizar la versión de esquema 6.0 en un futuro próximo. Adobe Commerce 2.4.4 y las versiones anteriores compatibles con la integración de DHL solo admiten la versión 6.0. Los comerciantes que implementen estas versiones deben aplicar `AC-3022.patch` lo antes posible para seguir ofreciendo DHL como transportista. Consulte el artículo de la base de conocimiento [Aplicar un parche para seguir ofreciendo DHL como transportista](https://support.magento.com/hc/en-us/articles/7707818131597-Apply-a-patch-to-continue-offering-DHL-as-shipping-carrier) para obtener información sobre cómo descargar e instalar el parche.

## Parche de seguridad disponible

Los comerciantes ahora pueden instalar correcciones de seguridad urgentes sin aplicar los cientos de correcciones y mejoras funcionales que ofrece una versión trimestral completa (por ejemplo, 2.4.0-p1). El parche 2.4.0.1 (Composer package 2.4.0-p1) es un parche de seguridad que proporciona correcciones para vulnerabilidades que se han identificado en nuestra versión trimestral anterior, 2.4.0. Todas las correcciones rápidas aplicadas a la versión 2.4.0 se incluyen en este parche de seguridad. (Una *corrección rápida* proporciona una corrección de una versión publicada que soluciona un problema o error específico).

Para obtener información general acerca de los parches de seguridad, consulte [Presentación de la nueva versión de parches de seguridad](https://community.magento.com/t5/Magento-DevBlog/Introducing-the-New-Security-Patch-Release/ba-p/141287). Para obtener instrucciones sobre cómo descargar y aplicar parches de seguridad (incluido el parche 2.3.5-p2), consulte [Instalación rápida local](../../../installation/composer.md). Los parches de seguridad solo incluyen correcciones de errores de seguridad, no las mejoras de seguridad adicionales que se incluyen en el parche completo.

## Otra información de la versión

Aunque el código de estas funciones se incluye con versiones trimestrales , varios de estos proyectos (por ejemplo, B2B, Page Builder y Progressive Web Applications (PWA) Studio) también se publican de forma independiente. Las correcciones de errores para estos proyectos se documentan en la información de versión independiente y específica del proyecto que está disponible en la documentación de cada proyecto.

## Características destacadas

Busque los siguientes aspectos destacados en esta versión.

### Mejoras sustanciales de seguridad

Esta versión incluye más de 15 correcciones de seguridad y mejoras de seguridad de la plataforma. Todas las correcciones de seguridad se han trasladado a 2.4.0-p1 y 2.3.6.

#### Más de 15 mejoras de seguridad que ayudan a cerrar las vulnerabilidades de ejecución de código remoto (RCE) y ejecución de scripts en sitios múltiples (XSS)

Hasta la fecha no se han producido ataques confirmados relacionados con estos problemas. Sin embargo, es posible que se aprovechen ciertas vulnerabilidades para acceder a la información de los clientes o hacerse cargo de las sesiones de administrador. La mayoría de estos problemas requieren que un atacante obtenga acceso primero al administrador. Como resultado, le recordamos que tome todas las medidas necesarias para proteger a su administrador, entre las que se incluyen, entre otras, las siguientes: inclusión en la lista de permitidos de IP, [autenticación de doble factor](https://developer.adobe.com/commerce/testing/functional-testing-framework/two-factor-authentication/), uso de una VPN, uso de una ubicación única en lugar de `/admin` y buena higiene de la contraseña. Consulte [Actualizaciones de seguridad disponibles para Magento](https://helpx.adobe.com/security/products/magento/apsb20-59.html) para ver un análisis de estos problemas corregidos.

#### Mejoras de seguridad adicionales

Las mejoras de seguridad para esta versión incluyen:

* Se ha agregado la protección **CAPTCHA** a las siguientes áreas de producto:

   * Página de ubicación de la tienda de pedidos y puntos finales de REST y GraphQL <!-- MC-36067-->
   * Puntos finales de REST y GraphQL relacionados con el pago.<!-- MC-36064-->

  La protección CAPTCHA para estas páginas adicionales está desactivada de forma predeterminada. Puede habilitarse en el administrador del mismo modo que otras páginas cubiertas por CAPTCHA. Esta protección se ha añadido como mecanismo de fuerza antibruta para proteger las tiendas contra ataques de carding. Ver [CAPTCHA](https://experienceleague.adobe.com/en/docs/commerce-admin/systems/security/captcha/security-captcha).

* **Compatibilidad con el atributo SameSite para las cookies**. Para admitir la aplicación Chrome de Google del nuevo sistema de clasificación de cookies, se han actualizado las clases de aplicación que administran cookies para admitir el atributo de cookie `SameSite`. Este atributo está establecido en `Lax` de manera predeterminada, pero se puede anular explícitamente. <!-- MC-35389-->

* **Herramienta de análisis de seguridad mejorada**. Adobe se ha asociado con [Sanguine Security](https://sansec.io/), líder en la prevención del robo digital, para integrar su base de datos de más de 8700 firmas de amenazas en el Escáner de seguridad. Esta asociación permitirá a los comerciantes obtener información en tiempo real sobre el estado de seguridad de su sitio a través de la detección proactiva de malware y la reducción de falsos positivos. Los comerciantes pueden registrarse en la herramienta visitando `https://account.magento.com/scanner`. Para obtener más información, consulta la publicación de blog [Proteger tu tienda con la herramienta de análisis de seguridad mejorada](https://magento.com/blog/magento-news/secure-your-storefront-enhanced-magento-security-scan-tool).

{{cve-notice}}

### Mejoras de infraestructura

Esta versión incluye mejoras en la calidad principal, que mejoran la calidad del marco de trabajo y estas áreas funcionales: Cuenta de cliente, Catálogo, CMS, OMS, Importar/Exportar, Promociones y objetivos, Carro y cierre de compra, B2B y Ensayo y vista previa.

* **Integración de la herramienta de análisis en todo el sitio con el administrador**. La [herramienta](https://experienceleague.adobe.com/en/docs/commerce-operations/tools/site-wide-analysis-tool/access) proporciona información e instrumentación del sistema para Adobe en instalaciones de infraestructura en la nube con supervisión de rendimiento en tiempo real, informes y recomendaciones de autoservicio las 24 horas del día, los 7 días de la semana. Los comerciantes pueden usar el nuevo [recurso de rol](https://experienceleague.adobe.com/en/docs/commerce-admin/systems/user-accounts/permissions-user-roles#role-resources) de administrador para acceder de forma segura a sus páginas de detalles del cliente a través del administrador. Consulte las [preguntas frecuentes](https://support.magento.com/hc/en-us/articles/360048646671) para obtener una descripción general. <!-- SWAT-807-->

### Mejoras de rendimiento

* **Reducción del tamaño de las transferencias de red entre Redis y Magento**. La configuración de la lista de complementos ahora se genera durante la ejecución del comando `bin/magento di:compile`. Esta información de configuración se escribe en carpetas de metadatos generadas en función del ámbito. Anteriormente, esta información se almacenaba en la caché. Las mejoras de rendimiento resultantes incluyen una disminución en el tamaño de la caché de red y el tiempo de ejecución para muchos escenarios.<!-- MC-31617-->

* **Rendimiento mejorado del consumidor de la cola de mensajes**. Tres nuevos ajustes de configuración admiten una reducción en el consumo de CPU en cola de consumidor. Estos parámetros opcionales proporcionan un mayor control sobre los consumidores y ahorran recursos de servidor. Consulte [Configurar colas de mensajes](https://developer.adobe.com/commerce/php/development/components/message-queues/configuration/) para obtener una descripción de los parámetros `maxIdleTime`, `sleep` y `onlySpawnWhenMessageAvailable`.

* **Tiempo de ejecución mejorado** para `bin/magento` comandos.

### Integración de Adobe Stock

Esta versión incluye Adobe Stock Integration v2.1.0.

### Galería de medios nuevos

La Galería de nuevos medios ahora está habilitada de forma predeterminada en el Administrador. Los comerciantes ahora pueden realizar estas acciones en las imágenes de la Galería multimedia:

* Eliminar imágenes de forma masiva
* Optimice el almacenamiento de medios identificando imágenes duplicadas e imágenes que no se usan en la tienda
* Filtre imágenes por el área de tienda en la que se utilizan, incluido el contenido de productos y categorías y los bloques de CMS
* Trabajo con metadatos de imagen
   * Ver metadatos de las imágenes cargadas en la Galería multimedia
   * Editar metadatos de imagen (título, descripción y palabras clave)
   * Buscar imágenes según sus metadatos

### Page Builder

Page Builder ahora es compatible con el modo de pantalla completa, que facilita la edición del contenido y proporciona una experiencia coherente al editar contenido en todo el administrador. Ver [Workspace](https://experienceleague.adobe.com/en/docs/commerce-admin/page-builder/walkthrough/3-catalog-content). <!-- PB-543-->

### GraphQL

Esta versión añade cobertura de GraphQL para las siguientes funciones:

* **Críticas de productos**. Los clientes y los huéspedes pueden escribir comentarios sobre los productos. Los clientes pueden recuperar sus historiales de críticas de productos. Consulte [Crear una revisión de producto](https://developer.adobe.com/commerce/webapi/graphql/schema/products/mutations/create-review/) y [productReviewRatingsMetadata query](https://developer.adobe.com/commerce/webapi/graphql/schema/products/queries/product-review-ratings-metadata/) para obtener información sobre cómo recuperar información sobre la infraestructura de revisiones.<!-- MC-32349-->

* **Opciones de regalo**. Todos los clientes e invitados pueden agregar un mensaje de regalo a su pedido. En las instalaciones de Adobe Commerce, también puede agregar envoltorios para regalos, recibos de regalos y tarjetas impresas al pedido. Ver [`setGiftOptionsOnCart` mutación](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/set-gift-options/) y [`updateCartItems` mutación](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/update-items/) <!-- MC-32345-->

* **Puntos de recompensa**. Los clientes pueden aplicar o eliminar puntos de recompensa a sus carros de compras. También pueden ver el historial de puntos de recompensa. Consulte [`applyRewardPointsToCart`](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/apply-reward-points/) y [`removeRewardPointsFromCart`](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/remove-reward-points/) para ver una discusión sobre la administración de puntos de recompensa dentro de un carro de compras.<!-- MC-23366-->

* **Historial de pedidos**. Todos los clientes pueden ver los detalles de sus historiales de pedidos, incluidas las facturas, los envíos y los reembolsos.<!-- MC-20635-->

* **Agregar al carro**. La mutación [`addProductsToCart` &#x200B;](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/add-products/) le permite agregar cualquier tipo de producto al carro de compras activo. Se recomienda usar esta mutación en lugar de mutaciones de un solo propósito como `addSimpleProductsToCart`. _Corrección enviada por Yaroslav Rogoza en la solicitud de extracción [27914](https://github.com/magento/magento2/pull/27914)_. [GitHub-28524](https://github.com/magento/magento2/issues/28524) <!-- MC-21513-->

* **Métodos de pago almacenados**. Los clientes que iniciaron sesión ahora pueden almacenar los datos de pago (incluidas la tarjeta de crédito de Braintree y Braintree con PayPal) en Mi cuenta. <!-- MC-32348 35945 35946-->

* **Compatibilidad con listas de deseos en Magento Open Source**.  Puede [agregar elementos](https://developer.adobe.com/commerce/webapi/graphql/schema/wishlist/mutations/add-products/) a, [actualizar elementos](https://developer.adobe.com/commerce/webapi/graphql/schema/wishlist/mutations/update-products/) en y [quitar elementos](https://developer.adobe.com/commerce/webapi/graphql/schema/wishlist/mutations/remove-products/) de una lista de artículos deseados.

* **Se mejoró la administración de cuentas de clientes**. Hemos agregado las mutaciones [`createCustomerV2`](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/create-v2/) y [`updateCustomerV2`](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/update-v2/) para administrar las cuentas de cliente. Estas nuevas mutaciones requieren objetos de entrada diferentes a las mutaciones `createCustomer` y `updateCustomer`. Para cambiar la dirección de correo electrónico de un cliente, use la nueva mutación [`updateCustomerEmail`](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/update-email/).

* **Soporte para Payflow Pro Vault**. Se ha agregado compatibilidad con GraphQL Vault para el método de pago [Payflow Pro Vault](https://developer.adobe.com/commerce/webapi/graphql/payment-methods/payflow-pro-vault/). _Corrección enviada por Oleh Usik en la solicitud de extracción [28821](https://github.com/magento/magento2/pull/28821)_. [GitHub-28520](https://github.com/magento/magento2/issues/28520)

* Se ha actualizado la consulta [`storeConfig` &#x200B;](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/store-config/) de GraphQL para incluir nuevas opciones de configuración de cliente. _Corrección enviada por Oleh Usik en la solicitud de extracción [27876](https://github.com/magento/magento2/pull/27876)_. [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* Se agregó la mutación [`requestPasswordResetEmail` &#x200B;](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/request-password-reset-email/), que almacena en déclencheur el correo electrónico de restablecimiento de contraseña para la dirección de correo electrónico proporcionada. _Corrección enviada por Oleh Usik en la solicitud de extracción [27876](https://github.com/magento/magento2/pull/27876)_. [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* **Klarna GraphQL**. Se agregaron o actualizaron temas sobre Klarna GraphQL en [método de pago de Klarna](https://developer.adobe.com/commerce/webapi/graphql/payment-methods/klarna/) y [`createKlarnaPaymentsSession`](https://developer.adobe.com/commerce/webapi/graphql/schema/checkout/mutations/create-klarna-payments-session/)

Consulte la [Guía para desarrolladores de GraphQL](https://developer.adobe.com/commerce/webapi/graphql/) para obtener más información sobre estas mejoras.

### PWA Studio

La versión 8.0.0 de PWA Studio presenta nuevas funciones y mejoras:

* Actualizaciones a la guía de estilo de Venia que se aplican a tokens de diseño, tipografía, colores, componentes principales y diseños de página <!-- PWA-519 419-->

* Mejoras en la experiencia del minicarrito de Venia <!-- PWA-236-->

* Compatibilidad inicial con varias configuraciones regionales y contenido localizado en la tienda Venia <!-- PWA-295-->

* Numerosas mejoras en la experiencia MyAccount de la tienda Venia <!-- PWA-247-->

Consulte [compatibilidad](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) para obtener una lista de versiones de PWA Studio y sus versiones compatibles. Para obtener información acerca de mejoras y correcciones de errores, consulte [Versiones de PWA Studio](https://github.com/magento/pwa-studio/releases).

### B2B

La versión 2.4.1 presenta B2B v1.3.0. Esta versión incluye mejoras en las aprobaciones de pedidos, los métodos de envío, el carro de compras y el registro de acciones del administrador.

#### Mejoras en las aprobaciones de pedidos

Las aprobaciones de pedidos B2B se han mejorado para mejorar la capacidad de uso y permitir acciones masivas en pedidos de compra.
Las mejoras para la aprobación y el rechazo de pedidos son las siguientes:

* **Nueva página de reglas de vista para usuarios sin privilegios de edición**. Los compradores de B2B ahora pueden ver las reglas que se aplican a su compañía en la nueva página Ver regla cuando no tienen permiso para editarlas. <!-- BUNDLE-104 -->

* **Contar icono de alerta en la ficha Requiere mi aprobación**. La pestaña Requiere mi aprobación de la vista Mis pedidos de compra ahora muestra un contador que indica el número de acciones de aprobación pendientes. <!-- BUNDLE-102 -->

* **Aprobaciones y rechazos de pedidos masivos**. Los administradores de B2B y de la compañía ahora pueden realizar rechazos y aprobaciones masivos de pedidos de compra. Estos cambios permiten a los aprobadores aprobar o rechazar varios pedidos de compra en una sola acción. <!-- BUNDLE-140 128 111 153 -->

* Los comerciantes ahora pueden buscar en los campos **Se aplica a** y **Requiere aprobación de** de la vista Mis pedidos de compra y puede seleccionar varios roles de usuario durante la creación de la regla. <!-- BUNDLE-105 106-->

* Se proporcionan ejemplos de cómo configurar las reglas de aprobación de pedidos en la página Configuración de reglas. <!-- BUNDLE-103 -->

Ver [reglas de aprobación](https://experienceleague.adobe.com/en/docs/commerce-admin/b2b/purchase-orders/account-dashboard-approval-rules)

#### Mejoras en los métodos de envío B2B

Los comerciantes B2B ahora pueden controlar los métodos de envío que se ofrecen a cada Compañía. Los comerciantes pueden configurar lo siguiente desde el administrador:<!-- BUNDLE-160 161 162 -->

* Un conjunto específico de métodos de envío para cuentas de compañía B2B
* El uso de todos los métodos de envío específicos de B2B para cada cuenta de compañía
* Una lista específica de métodos de envío B2B para cada cuenta de compañía.

#### Mejoras del carro de compras

* Los comerciantes ahora pueden permitir a los usuarios borrar el contenido de su carro de compras en una sola acción y pueden configurar esta capacidad de forma independiente en cada sitio web. <!-- BUNDLE-108 -->

* Los compradores de B2B ahora pueden añadir artículos individuales o todo el contenido de su carro de compras directamente a una lista de solicitudes. <!-- BUNDLE-145 144-->

#### Nuevas funciones de administración

* Los comerciantes B2B pueden crear pedidos desde el administrador en nombre de los clientes utilizando Pago a cuenta como método de pago. <!-- BUNDLE-166 178-->
* Los comerciantes ahora pueden ver directamente todas las ofertas asociadas con un usuario desde la página de detalles del cliente. <!-- BUNDLE-139 -->
* Los comerciantes ahora pueden filtrar la cuadrícula Clientes ahora en línea por Compañía. <!-- BUNDLE-137 -->
* Los administradores ahora pueden filtrar clientes en Admin por representante de ventas <!-- BUNDLE-110 -->

Ver [Características B2B](https://experienceleague.adobe.com/en/docs/commerce-admin/config/general/b2b-features).

#### Seguridad mejorada en la tienda

Para reducir la creación de cuentas fraudulentas o de correo no deseado, los comerciantes ahora pueden habilitar Google reCAPTCHA en el formulario de nueva solicitud de la empresa de la tienda. Ver [reCAPTCHA](https://experienceleague.adobe.com/en/docs/commerce-admin/config/security/google-recaptcha-storefront).<!-- BUNDLE-154 -->

#### Registro ampliado de acciones de administración

Las acciones de administrador realizadas en los módulos de Compañía ahora se registran en el Registro de acciones de administración. Las acciones se registran desde todos los módulos relevantes de la compañía: `Company`, `NegotiableQuote`, `CompanyCredit`, `SharedCatalog`.
<!-- BUNDLE-180 181 182 183 -->

Esta versión también incluye varias correcciones de errores. Ver [Notas de la versión B2B](https://experienceleague.adobe.com/docs/commerce-admin/b2b/release-notes.html).

### Marco de prueba funcional (MFTF)

MFTF 3.1.0 ya está disponible. Consulte [Registro de cambios del marco de prueba funcional](https://github.com/magento/magento2-functional-testing-framework/blob/develop/CHANGELOG.md).

### Extensiones desarrolladas por el proveedor

Consulte los siguientes artículos para obtener actualizaciones sobre las funciones y los cambios de esta versión:

* [Amazon Pay](https://marketplace.magento.com/amzn-amazon-pay-magento-2-module.html)

* [Braintree](https://experienceleague.adobe.com/docs/commerce-admin/stores-sales/payments/braintree.html)

* [dotdigital Engagement Cloud](https://marketplace.magento.com/dotdigital-dotdigital-magento2-os-package.html)

* [Klarna](https://marketplace.magento.com/klarna-m2-klarna.html)

* [Nube de vértices](https://marketplace.magento.com/vertexinc-vertex-tax-module.html)

* [Reseñas de productos Yotpo](https://marketplace.magento.com/yotpo-module-yotpo.html)

## Problemas solucionados

Hemos corregido cientos de problemas en el código principal 2.4.1.

### Instalación, actualización e implementación

<!-- MC-36113-->

* La instalación con extensiones de terceros que dependen de las API para el módulo Almacenar en comandos CLI ya no falla. Anteriormente, la aplicación mostraba este mensaje de error: `The default website isn't defined. Set the website and try again`. Este era un problema conocido en 2.4.0.

<!-- MC-33273-->

* `bin/magento setup:di:compile` ya no genera un error irrecuperable. Anteriormente, la aplicación generaba un error la primera vez que se ejecutaba este comando, pero la segunda ejecución resultaba en una compilación correcta.

<!-- MC-34429-->

* La actualización ya no falla cuando se declara un complemento en `Magento\Framework\Encryption\Encryptor`.

<!-- MC-36231-->

* La aplicación ahora muestra un mensaje de error informativo cuando algunos temas no se implementan después de ejecutar `bin/magento setup:static-content:deploy`. Anteriormente, cuando la implementación se completaba correctamente pero no se implementaban todos los paquetes, la aplicación no mostraba un error. Cuando este comando se ejecuta con un procesamiento paralelo habilitado y cada tema requiere más tiempo para implementarse que el tiempo de ejecución máximo especificado, este comando puede finalizar correctamente, aunque los temas no se implementan.

<!-- MC-35001-->

* La casilla de verificación **Usar valor predeterminado** para los pagos de Klarna (**Tiendas** > **Configuración** > **Ventas** > **Métodos de pago** > **Klarna**) ahora permanece activada como se espera cuando cambia el ámbito del sitio web.

<!-- MC-17959 ENGCOM-7629-->

* La ejecución de `/bin/magento config:show vendor_module/general/value` ahora devuelve `0` o una cadena vacía como se esperaba. Anteriormente, devolvió `Configuration for path: "vendor_module/general/value" doesn't exist`. _Corrección enviada por Vadim Malesh en la solicitud de extracción [28549](https://github.com/magento/magento2/pull/28549)._ [GitHub-23290](https://github.com/magento/magento2/issues/23290)

<!-- MC-33788-->

* La actualización ya no provoca el fallo repentino del clúster de Galera. Anteriormente, el clúster de Galera se cerraba abruptamente tras la reindexación inmediatamente después de la actualización. Durante una actualización, las tablas de índice se modifican y el motor se cambia de `MEMORY` a `InnoDB`. En este punto, el contenido de estas tablas se desincronizó entre los nodos del clúster de Galera. [GitHub-25334](https://github.com/magento/magento2/issues/25334)

<!-- MC-34254-->

* La desactivación del módulo PageBuilder ya no afecta a la representación de la página del producto. Anteriormente, los diseños personalizados de la página de producto desaparecían cuando se deshabilitaba el módulo y la aplicación mostraba una página en blanco.

<!-- ENGCOM-7219-->

* Ahora puede usar `bin/magento sampledata:deploy` para implementar datos de ejemplo como se espera después de instalar Adobe Commerce usando Composer. Anteriormente, la aplicación arrojó este error: `Git installations must deploy sample data from GitHub; see https://experienceleague.adobe.com/en/docs/commerce-operations/installation-guide/next-steps/sample-data/git-repositories for more information`. _Corrección enviada por Andrii Beziazychnyi en la solicitud de extracción [27481](https://github.com/magento/magento2/pull/27481)_. [GitHub-19481](https://github.com/magento/magento2/issues/19481)

<!-- ENGCOM-7459-->

* El rendimiento de la tienda ha mejorado al eliminar la carga innecesaria del componente `Datepicker`. _Corrección enviada por Mateusz Krzeszowiak en la solicitud de extracción [27860](https://github.com/magento/magento2/pull/27860)_. [GitHub-28823](https://github.com/magento/magento2/issues/28823)

<!-- ENGCOM-7265-->

* La ejecución de `bin/magento setup:upgrade` ahora se completa según lo esperado. Anteriormente, la aplicación mostraba contenido de matriz impreso para las memorias caché. _Corrección enviada por Sathish Subramanian en la solicitud de extracción [27567](https://github.com/magento/magento2/pull/27567)_. [GitHub-27091](https://github.com/magento/magento2/issues/27091)

<!-- ENGCOM-7853-->

* `bin/magento setup:static-content:deploy --language=all` ahora implementa todos los idiomas que se usan en la tienda y todos los idiomas configurados por los usuarios administradores cuando no se establece ningún parámetro de idioma. (`en_US` siempre se implementa de forma predeterminada). _Corrección enviada por Anton Evers en la solicitud de extracción [28922](https://github.com/magento/magento2/pull/28922)_. [GitHub-29218](https://github.com/magento/magento2/issues/29218)

<!-- ENGCOM-7883-->

* La aplicación ya no muestra el menú Copia de seguridad cuando la función Copia de seguridad está desactivada. _Corrección enviada por Eden Duong en la solicitud de extracción [29222](https://github.com/magento/magento2/pull/29222)_. [GitHub-29280](https://github.com/magento/magento2/issues/29280)

<!-- ENGCOM-7987-->

* La inicialización del asistente de imagen de catálogo ahora utiliza el modelo de producto en lugar de `DataObject`. _Corrección enviada por jmonteros422 en la solicitud de extracción [29435](https://github.com/magento/magento2/pull/29435)_. [GitHub-1711](https://github.com/magento/adobe-stock-integration/issues/1711)

<!-- MC-37226-->

* Los usuarios administradores ahora pueden guardar un campo vacío de **Duración del token del cliente (horas)** (Administradores **Tiendas** > **Configuraciones** > **Servicios** > **OAuth** > **Caducidad del token de acceso**). [GitHub-29502](https://github.com/magento/magento2/issues/29502)

<!-- ENGCOM-7724 -->

* La configuración **Crear redireccionamiento permanente para la URL antigua** ahora está deshabilitada de manera predeterminada para las categorías. _Corrección enviada por Vadim Malesh en la solicitud de extracción [28752](https://github.com/magento/magento2/pull/28752)_. [GitHub-24922](https://github.com/magento/magento2/issues/24922)

### AdminGWS

<!-- MC-36164-->

* La aplicación ya no muestra el botón **Agregar atributo** (**Almacenes** > **Atributos** o el botón **Agregar conjunto de atributos** (**Almacenes** > **Atributos** > **Cliente**) cuando el administrador que ha iniciado sesión carece de los permisos adecuados para crear estas entidades. Anteriormente, la aplicación arrojaba un error 404 cuando un administrador de sitio web que no tenía los permisos adecuados intentaba crear un **Conjunto de atributos** o un atributo **Cliente**.

<!-- MC-36230-->

* La aplicación ya no genera un error cuando un administrador con funciones restringidas para sitios web específicos intenta crear una subcategoría a partir del administrador.

### Integración de Adobe Stock

<!-- ENGCOM-7776-->

* Las imágenes de la cuadrícula de imágenes de Adobe Stock ahora se alinean correctamente después de borrar los filtros. _Corrección enviada por Nazar Klovanych en la solicitud de extracción [28366](https://github.com/magento/magento2/pull/28366)_. [GitHub-824](https://github.com/magento/adobe-stock-integration/issues/824), [GitHub-972](https://github.com/magento/adobe-stock-integration/issues/972)

<!-- ENGCOM-7709 -->

* La sección **Utilizada en** de la página de detalles de imagen de la galería de Adobe Stock ahora identifica con precisión si la imagen está asociada a un producto. _Corrección enviada por Nazar Klovanych en la solicitud de extracción [28798](https://github.com/magento/magento2/pull/28798)_. [GitHub-1474](https://github.com/magento/adobe-stock-integration/issues/1474)

<!-- ENGCOM-7873 -->

* `\Magento\MediaGallery\Model\ResourceModel\Keyword\SaveAssetsKeywords::execute` ahora elimina los vínculos a las palabras clave que no se especifican en los parámetros e inserta las nuevas al eliminar etiquetas de palabra clave al editar detalles de imagen. _Corrección enviada por jmonteros422 en la solicitud de extracción [29207](https://github.com/magento/magento2/pull/29207)_. [GitHub-1391](https://github.com/magento/adobe-stock-integration/issues/1391)

<!-- ENGCOM-7981 -->

* El mensaje `Login failed` que muestra la aplicación cuando un comerciante hace clic en **Licencia** para una imagen de Adobe Stock guardada anteriormente sin licencia ya no contiene etiquetas de HTML. _Corrección enviada por Yolouiese en la solicitud de extracción [29398](https://github.com/magento/magento2/pull/29398)_. [GitHub-1684](https://github.com/magento/adobe-stock-integration/issues/1684)

<!-- ENGCOM-7976 -->

* Al hacer clic en los vínculos en la sección **Utilizado en** de la página Detalles de la imagen, ahora se muestra una cuadrícula que muestra todas las entidades filtradas por la imagen. El filtro de recursos también está configurado y se muestra correctamente. Anteriormente, la aplicación no mostraba el título del recurso en la sección **Filtros aplicados**. _Corrección enviada por Nazar Klovanych en la solicitud de extracción [29367](https://github.com/magento/magento2/pull/29367)_. [GitHub-1694](https://github.com/magento/adobe-stock-integration/issues/1694)

<!-- ENGCOM-7976 -->

* La aplicación ya no muestra la sección **Used in** de la página de detalles de la imagen cuando la imagen no está en uso. _Corrección enviada por Nazar Klovanych en la solicitud de extracción [29367](https://github.com/magento/magento2/pull/29367)_. [GitHub-1699](https://github.com/magento/adobe-stock-integration/issues/1699)

<!-- ENGCOM-7976 -->

* Se han corregido problemas de visualización al añadir una nueva etiqueta de imagen que supera el número máximo de caracteres. _Corrección enviada por Nazar Klovanych en la solicitud de extracción [29367](https://github.com/magento/magento2/pull/29367)_. [GitHub-1702](https://github.com/magento/adobe-stock-integration/issues/1702)

<!-- ENGCOM-7976 -->

* Assets ahora se puede comprobar según lo esperado usando el filtro de recursos en la sección Detalles de la imagen **Utilizada en**. _Corrección enviada por Nazar Klovanych en la solicitud de extracción [29367](https://github.com/magento/magento2/pull/29367)_. [GitHub-1704](https://github.com/magento/adobe-stock-integration/issues/1704)

<!-- ENGCOM-7976 -->

* La información acerca de las imágenes que utilizan diferentes entidades (por ejemplo, `page` y `category`) ahora aparece corregida en la página Detalles de la imagen. _Corrección enviada por Nazar Klovanych en la solicitud de extracción [29367](https://github.com/magento/magento2/pull/29367)_. [GitHub-1747](https://github.com/magento/adobe-stock-integration/issues/1747)

<!-- ENGCOM-7778-->

* Ahora puede usar el nuevo componente `UrlFilterApplier` para aplicar filtros a las cuadrículas del producto `cms_page` y `cms_block` mediante el parámetro de dirección URL de GET. _Corrección enviada por Gabriel da Gama en la solicitud de extracción [28932](https://github.com/magento/magento2/pull/28932)_. [GitHub-1501](https://github.com/magento/adobe-stock-integration/issues/1501)

<!-- ENGCOM-8019-->

* Al hacer clic en los vínculos de la sección **Utilizada en** para una imagen de la Galería multimedia, ahora se abre la cuadrícula de entidades que la imagen filtra según lo esperado. Anteriormente, el título de la imagen no se mostraba en la sección de filtros aplicados de la cuadrícula. _Corrección enviada por Nazar Klovanych en la solicitud de extracción [29429](https://github.com/magento/magento2/pull/29429)_. [GitHub-1694](https://github.com/magento/adobe-stock-integration/issues/1694)

<!-- ENGCOM-8019-->

* La aplicación ahora agrega etiquetas correctamente cuando edita varias imágenes sucesivamente en la Galería multimedia. _Corrección enviada por Nazar Klovanych en la solicitud de extracción [29429](https://github.com/magento/magento2/pull/29429)_. [GitHub-1755](https://github.com/magento/adobe-stock-integration/issues/1755)

<!-- ENGCOM-8015-->

* La aplicación ahora elimina las etiquetas de las imágenes de Adobe Stock después de que un comerciante las elimine y guarde los detalles de la imagen. Anteriormente, las etiquetas no se eliminaban hasta que se actualizaba la página. _Corrección enviada por Honeymay Louiese Ignacio en la solicitud de extracción [29400](https://github.com/magento/magento2/pull/29400)_. [GitHub-1703](https://github.com/magento/adobe-stock-integration/issues/1703)

### Amazon Pay

* Amazon Pay ahora comprueba si un usuario ya ha iniciado sesión antes de procesar las opciones de pago.

* Se han resuelto los problemas con la autenticación de varios factores y los carros de compras abandonados.

* Amazon Pay ahora rellena correctamente `store name` en correos electrónicos y otras ubicaciones mostradas. Si el campo **Store Name** de la configuración de Amazon Pay está vacío, la extensión recupera el nombre predeterminado de la tienda (es decir, el nombre que le des a tu tienda en el Admin).

* Se han abordado los problemas de localización y traducción para los escenarios de rechazo. El texto mostrado ya no está siempre en inglés.

### Analytics

<!-- MC-33314-->

* Los administradores con los permisos correctos ahora pueden acceder a los informes avanzados y a los informes de segmentos.

<!-- MC-34352-->

* Adobe Commerce genera correctamente archivos de datos de informes avanzados y los envía según lo esperado a Oracle Inventory en implementaciones con bases de datos divididas. Anteriormente, la aplicación no generaba ni enviaba el archivo `quotes.csv` a Inventario y, como resultado, Inventario no generaba los informes esperados.

### Braintree

* Braintree ahora envía la cantidad correcta a PayPal cuando se aplica un código de promoción en la página de pago.

* Apple Pay funciona ahora según lo esperado cuando los Términos y condiciones están activados en la página de pago.

* Los errores del explorador ya no se producen durante la desprotección en dispositivos de escritorio cuando Venmo está habilitado desde el Administrador.

* El cierre de compra ya no falla cuando el comprador introduce caracteres especiales en los campos **Name** del flujo de trabajo de cierre de compra. Anteriormente, la autenticación fallaba porque la API de Braintree 3DS no admitía caracteres que no fueran ASCII.

* La aplicación ahora muestra el nombre de destinatario correcto en la sección de envío del flujo de trabajo de pago al realizar un pedido con PayPal.

* La aplicación actualiza ahora la página de revisión de pedidos como se espera cuando un comprador cambia el método de envío más de una vez durante el cierre de compra.

### Paquete de productos

<!-- MC-36281-->

* La aplicación ya no genera una excepción cuando intenta crear un producto en una implementación en la que está instalado Inventory pero el módulo `Magento_InventoryBundleProduct` está deshabilitado.

<!-- MC-34261-->

* La aplicación ahora calcula correctamente los reembolsos sin conexión para pedidos que contienen productos agrupados.

<!-- MC-24363-->

* El minicarrito ahora muestra los precios correctos para los productos agrupados cuando los precios de nivel también se asignan para productos simples. [GitHub-22807](https://github.com/magento/magento2/issues/22807)

<!-- ENGCOM-7499-->

* Los comerciantes ahora pueden crear una nota de crédito para los productos agrupados que proporcione un reembolso sin requerir la devolución del producto. Anteriormente, la aplicación arrojaba un error. _Corrección enviada por Dzung Nguyen en la solicitud de extracción [27455](https://github.com/magento/magento2/pull/27455)_. [GitHub-23440](https://github.com/magento/magento2/issues/23440)

<!-- ENGCOM-7655-->

* La aplicación ya no muestra mensajes de validación redundantes cuando un comprador agrega un paquete de producto al carro de compras sin seleccionar una opción requerida. _Corrección enviada por Dzung Nguyen en la solicitud de extracción [27455](https://github.com/magento/magento2/pull/27455)_. [GitHub-23440](https://github.com/magento/magento2/issues/23440)

<!-- ENGCOM-7985 MC-29908-->

* GraphQL ahora admite la realización de un pedido de un producto agrupado con el tipo de opción `radio` y `dropdown` con varias opciones. Anteriormente, la aplicación mostraba un mensaje sobre la entrada no válida para `BundleItem.type: radio/dropdown`. _Corrección enviada por Michał Derlatka en la solicitud de extracción [29256](https://github.com/magento/magento2/pull/29256)_. [GitHub-26110](https://github.com/magento/magento2/issues/26110)

### Caché

<!-- MC-36096-->

* El almacenamiento de caché local ahora se conserva durante el período de tiempo establecido en **Almacenes** > **Configuración** > **General** > **Web** > **Configuración de cookies predeterminada**. Anteriormente, la fecha de caducidad de las cookies estaba codificada en un día, lo que la desincronizaba con esta configuración. Como resultado, los mensajes de bienvenida no conservaban la información del cliente que devolvía durante el tiempo esperado.

<!-- ENGCOM-7780-->

* Se ha reducido el número de llamadas a la caché de página `config`. _Corrección enviada por Lukasz Bajsarowicz en la solicitud de extracción [28992](https://github.com/magento/magento2/pull/28992)_. [GitHub-29159](https://github.com/magento/magento2/issues/29159)

<!-- ENGCOM-7073-->

* Varnish ya no genera un error `Connection reset by peer` cuando se reindexa un catálogo grande según lo programado. _Corrección enviada por Matthew O&#39;Loughlin en la solicitud de extracción [26256](https://github.com/magento/magento2/pull/8815)_. [GitHub-26255](https://github.com/magento/magento2/issues/8815)

<!-- MC-29069-->

* La caché de la página completa ya no se borra para los productos no relacionados cuando se edita un producto en el Administrador. [GitHub-25670](https://github.com/magento/magento2/issues/25670)

### Carro y cierre de compra

<!-- ENGCOM-7950-->

* Las consultas SQL directas se han reemplazado por el proveedor de datos, que ha mejorado el rendimiento de desprotección. _Corrección enviada por Lukasz Bajsarowicz en la solicitud de extracción [29376](https://github.com/magento/magento2/pull/29376)_. [GitHub-29453](https://github.com/magento/magento2/issues/29453)

<!-- MC-36252-->

* Ahora, las listas Productos en la comparación y Productos comparados recientemente funcionan según lo esperado. Anteriormente, cuando se expandía la lista de comparación, la aplicación no mostraba productos, aunque en la sección se indicaba que la lista contenía productos.

<!-- MC-35329-->

* El botón **Eliminar** de la sección **Agregar al carro de compras por SKU** de la página **Administrar carro de compras** de un cliente ahora funciona como se espera cuando se seleccionan varias filas.

<!-- MC-34999-->

* La aplicación ya no genera un error cuando intenta solicitar un producto por SKU cuando los dígitos introducidos coinciden con un SKU válido, pero el caso de estos dígitos difiere. Anteriormente, al escribir un SKU en **Mi cuenta** > **Pedido por SKU** que no coincidía exactamente con un SKU válido, la aplicación arrojó un error.

<!-- MC-25042-->

* Ahora, la dirección de envío de un cliente se selecciona de forma predeterminada al cerrar la compra, cuando la dirección se encuentra en el país identificado en la lista Permitir países y esa lista incluye únicamente ese país. Anteriormente, la aplicación no seleccionaba la dirección como predeterminada y mostraba este mensaje de error: `Please specify a regionId in shipping address`.

<!-- MC-24043-->

* Los comerciantes ahora pueden habilitar **Aplicar al importe de envío** en la pestaña Acción de **Marketing** > **Reglas de precio del carro de compras** > **Agregar nueva regla** cuando se aplique **Descuento de cantidad fija para todo el carro de compras**. [GitHub-24422](https://github.com/magento/magento2/issues/24422)

<!-- MC-23992-->

* La aplicación ya no genera una excepción cuando un comprador intenta anular la configuración de la cookie de persistencia después de comenzar la compra y luego navegar a la página principal de la tienda. Anteriormente, cuando el comprador hacía clic en **¿No es usted?** vínculo en la página principal, la aplicación produjo esta excepción: `The shipping address is missing. Set the address and try again`. [GitHub-24218](https://github.com/magento/magento2/issues/24218)

<!-- MC-33899-->

* La aplicación ahora muestra un mensaje de éxito del complemento al carro de compras cuando un cliente agrega un producto agotado al carro de compras. Anteriormente, el producto se agregaba, pero la aplicación no mostraba un mensaje de éxito.

<!-- MC-35989-->

* Los atributos de dirección personalizados ahora se incluyen según lo esperado en el formulario que se muestra para el paso de pago en el flujo de trabajo de cierre de compra.

<!-- MC-36060-->

* El cuadro de entrada **Estado/Provincia/Región** ahora está habilitado según lo esperado en **Mi cuenta** > **Libreta de direcciones** > **Agregar nueva dirección**.

<!-- ENGCOM-7746-->

* Los descuentos ahora se aplican según lo esperado a los gastos de envío cuando **Aplicar al importe de envío** está habilitado. _Corrección enviada por Andrii Kalinich en la solicitud de extracción [28839](https://github.com/magento/magento2/pull/28839)_. [GitHub-26723](https://github.com/magento/magento2/issues/26723)

<!-- ENGCOM-7752-->

* El código que admite el cierre del minicarrito se ha refactorizado para quitar la función `closeSidebar`. Se ha agregado el enlace de clic correspondiente al elemento `[data-action="close"]`. _Corrección enviada por lumnn en la solicitud de extracción [28906](https://github.com/magento/magento2/pull/28906)_. [GitHub-29161](https://github.com/magento/magento2/issues/29161)

<!-- ENGCOM-7585-->

* El nuevo botón **Mostrar &quot;Borrar carro de compras&quot; en la página del carro de compras** proporciona control para mostrar el botón **Borrar carro** en la página de vista del carro de compras. Esta configuración está deshabilitada de forma predeterminada. _Corrección enviada por Pavlo Sydorenko en la solicitud de extracción [27917](https://github.com/magento/magento2/pull/27917)_. [GitHub-28705](https://github.com/magento/magento2/issues/28705)

<!-- ENGCOM-7457-->

* La validación se ha agregado al campo de teléfono del flujo de trabajo de cierre de compra. _Corrección enviada por Oleh Usik en la solicitud de extracción [27537](https://github.com/magento/magento2/pull/27537)_. [GitHub-28800](https://github.com/magento/magento2/issues/28800)

<!-- ENGCOM-5629-->

* La desprotección de invitados ahora está deshabilitada como se espera cuando un carro de compras contiene productos descargables cuando la configuración **Compartible** y **Deshabilitar la desprotección de invitados si el carro de compras contiene elementos descargables** está deshabilitada. _Corrección enviada por Rani Priya en la solicitud de extracción [23972](https://github.com/magento/magento2/pull/23972)_. [GitHub-23971](https://github.com/magento/magento2/issues/23971)

<!-- ENGCOM-7949-->

* El mensaje de éxito que muestra la aplicación cuando un comprador agrega un producto al carro de compras desde la barra lateral de la cuenta del cliente ahora contiene un vínculo al carro de compras del comprador. _Corrección enviada por Ajith en la solicitud de extracción [27977](https://github.com/magento/magento2/pull/27977)_. [GitHub-29097](https://github.com/magento/magento2/issues/29097)

<!-- ENGCOM-7825-->

* La aplicación ahora selecciona un valor vacío de forma predeterminada para el menú desplegable de opciones de prefijo del flujo de trabajo de cierre de compra. _Corrección enviada por Vadim Malesh en la solicitud de extracción [28238](https://github.com/magento/magento2/pull/28238)_. [GitHub-18823](https://github.com/magento/magento2/issues/18823)

<!-- ENGCOM-8004-->

* El mensaje emergente que la aplicación muestra al eliminar varios elementos de un carro de compras ahora describe con precisión la cantidad y el tipo de entidades que ha seleccionado para la eliminación. _Corrección enviada por Nazar Klovanych en la solicitud de extracción [29490](https://github.com/magento/magento2/pull/29490)_. [GitHub-1749](https://github.com/magento/adobe-stock-integration/issues/1749)

<!-- MC-36418-->

* La aplicación ahora muestra un formulario de registro de cliente cuando un usuario invitado completa el cierre de compra.

<!-- MC-35607-->

* Los campos de atributos de dirección de cliente personalizados ahora se muestran según lo esperado en el flujo de trabajo de cierre de compra de la tienda.

<!-- ENGCOM-7793-->

* La aplicación ahora recupera el grupo de clientes actual para una oferta activa durante el cierre de compra. Anteriormente, la aplicación utilizaba el grupo de clientes activo cuando el producto se agregaba al carro de compras por primera vez y, si ese grupo de clientes se eliminaba antes del cierre de compra, la aplicación generaba un error. _Corrección enviada por Konstantin en la solicitud de extracción [28902](https://github.com/magento/magento2/pull/28902)_. [GitHub-29327](https://github.com/magento/magento2/issues/29327)

### Catálogo

<!-- MC-31068-->

* La aplicación ahora elimina los productos desactivados del carro de compras antes del cierre de compra. Anteriormente, cuando un comprador agregaba un producto al carro que estaba deshabilitado antes de que se completara el cierre de compra, la aplicación eliminaba el producto deshabilitado del carro, pero el producto permanecía en la cotización y el comprador no podía cerrar la compra. [GitHub-26680](https://github.com/magento/magento2/issues/26680)

<!-- MC-30624-->

* La aplicación clasifica ahora los productos más vendidos según lo esperado. Anteriormente, tanto el recuento de productos como la paginación de los resultados de ordenación eran incorrectos. [GitHub-25955](https://github.com/magento/magento2/issues/25955)

<!-- ENGCOM-7292-->

* Los compradores ahora pueden abrir la página de detalles de un producto haciendo clic en el nombre del producto en la barra lateral de comparación de productos. _Corrección enviada por Eduard Chitoraga en la solicitud de extracción [27451](https://github.com/magento/magento2/pull/27451)_. [GitHub-21101](https://github.com/magento/magento2/issues/21101)

<!-- ENGCOM-7513-->

* Los valores de `children_count` ahora permanecen positivos cuando un administrador elimina categorías. Anteriormente, cuando un administrador eliminaba categorías, el valor de `children_count` para las categorías restantes era negativo. _Corrección enviada por Vitaliy Prokopov en la solicitud de extracción [28044](https://github.com/magento/magento2/pull/28044)_. [GitHub-27969](https://github.com/magento/magento2/issues/27969)

<!-- MC-34314-->

* La aplicación ahora usa la opción predeterminada (**Configuración** > **Web** > **Diseños predeterminados** > **Diseño de producto predeterminado**) que seleccionó para el atributo `page_layout` al crear un nuevo producto. Anteriormente, el valor predeterminado seleccionado no se aplicaba.

<!-- MC-34258-->

* Ahora puede realizar correctamente acciones masivas en stock de productos de inventario. Anteriormente, cuando se intentaba realizar una acción masiva en el inventario de existencias de productos, la aplicación mostraba una página en blanco. Si realizó esta acción con la aplicación en modo de desarrollador, la aplicación generó este error: `Notice: Undefined offset: 32000 in /Users/kodithuw/sites/m23inventory/inventory/InventoryCatalogAdminUi/view/adminhtml/templates/catalog/product/edit/action/inventory.phtml on line 24`

<!-- MC-32552-->

* El recuento total de registros que se muestra al hacer clic en **Agregar productos** en la ficha Productos al agregar productos a una categoría de catálogo ya no cambia según el criterio de ordenación de productos.

<!-- ENGCOM-7854 -->

* La consulta `{products(filter: {sku: {eq: "some sku"}}) {…}` ahora devuelve valores que se han convertido a la moneda esperada. Anteriormente, `price_tiers.final_price.value` mostraba precios especiales en la moneda base. _Corrección enviada por Petkovski Marjan en la solicitud de extracción [28890](https://github.com/magento/magento2/pull/28890)_. [GitHub-26121](https://github.com/magento/magento2/issues/26121)

### Regla de catálogo

<!-- MC-33487-->

* La aplicación ya no genera un error grave al guardar una regla de catálogo con las siguientes condiciones: `If ALL of these conditions are FALSE:, If ALL of these conditions are TRUE:, Attribute set is default`

### Cleanup

<!-- ENGCOM-7281-->

* Se ha corregido la desalineación de la casilla de verificación de cuadrícula Administrador de pedidos de ventas. _Corrección enviada por Tu Nguyen en la solicitud de extracción [27642](https://github.com/magento/magento2/pull/27642)_. [GitHub-27633](https://github.com/magento/magento2/issues/27633)

<!-- ENGCOM-7723-->

* Se ha corregido un error ortográfico en el captador de ID de dirección de envío en el controlador de guardado de dirección de pedido de ventas. _Corrección enviada por Konstantin en la solicitud de extracción [28810](https://github.com/magento/magento2/pull/28810)_. [GitHub-28982](https://github.com/magento/magento2/issues/28982)

<!-- ENGCOM-7745-->

* Se corrigió el nombre de método `getRegionNameExpresion` en `getRegionNameExpression`. _Corrección enviada por Pierre Grimaud en la solicitud de extracción [28832](https://github.com/magento/magento2/pull/28832)_. [GitHub-28829](https://github.com/magento/magento2/issues/28829)

<!-- ENGCOM-7657-->

* Se ha quitado un método redundante `init` de `app/code/Magento/AdvancedPricingImportExport/Model/Import/AdvancedPricing/Validator/Website.php` y `app/code/Magento/AdvancedPricingImportExport/Model/Import/AdvancedPricing/Validator/TierPriceType.php`. _Corrección enviada por Oleh Usik en la solicitud de extracción [28650](https://github.com/magento/magento2/pull/28650)_. [GitHub-29009](https://github.com/magento/magento2/issues/29009)

<!-- ENGCOM-7698-->

* `localStorage` polyfill se ha movido de `base` a `frontend`. _Corrección enviada por Ihor Sviziev en la solicitud de extracción [28749](https://github.com/magento/magento2/pull/28749)_. [GitHub-28900](https://github.com/magento/magento2/issues/28900)

<!-- ENGCOM-7753-->

* Se ha actualizado el logotipo de Adobe Commerce y se han eliminado los espacios superfluos del archivo LÉAME. _Corrección enviada por Rafael Corr̻êa Gomes en la solicitud de extracción [28891](https://github.com/magento/magento2/pull/28891)_. [GitHub-29056](https://github.com/magento/magento2/issues/29056)

<!-- ENGCOM-7771-->

* La clase `overflowed` innecesaria se ha eliminado del widget de barra lateral del minicarrito. _Corrección enviada por lumnn en la solicitud de extracción [28963](https://github.com/magento/magento2/pull/28963)_. [GitHub-29160](https://github.com/magento/magento2/issues/29160)

<!-- ENGCOM-7658-->

* Se ha corregido un selector CSS incorrecto en la página Envío. _Corrección enviada por Tu Nguyen en la solicitud de extracción [28639](https://github.com/magento/magento2/pull/28639)_. [GitHub-29261](https://github.com/magento/magento2/issues/29261)

<!-- ENGCOM-7680-->

* El archivo `lib/internal/Magento/Framework/App/Request/Http.php` se ha simplificado optimizando la lógica, eliminando las asignaciones de variables redundantes y el uso excesivo de los retornos dentro de una función. _Corrección enviada por Chris Snedaker en la solicitud de extracción [28608](https://github.com/magento/magento2/pull/28608)_. [GitHub-29381](https://github.com/magento/magento2/issues/29381)

<!-- ENGCOM-7925-->

* El comando `bin/magento module:status` ahora acepta varios nombres de módulo como argumentos. _Corrección enviada por Chandru Rajendran en la solicitud de extracción [28250](https://github.com/magento/magento2/pull/28250)_. [GitHub-29344](https://github.com/magento/magento2/issues/29344)

<!-- ENGCOM-7983-->

* Se corrigió un error tipográfico en la descripción de clase de `\Magento\Downloadable\Block\Sales\Order\Email\Items\Downloadable`. _Corrección enviada por Benjamin Rosenberger en la solicitud de extracción [29451](https://github.com/magento/magento2/pull/29451)_. [GitHub-29470](https://github.com/magento/magento2/issues/29470)

<!-- ENGCOM-7993-->

* La clase `TierPriceManagement` se ha refactorizado para quitar el código redundante. _Corrección enviada por Lukasz Bajsarowicz en la solicitud de extracción [29202](https://github.com/magento/magento2/pull/29202)_. [GitHub-29477](https://github.com/magento/magento2/issues/29477)

<!-- ENGCOM-7830-->

* `autoload.php` se ha refactorizado para mejorar la legibilidad y la velocidad de retorno. _Corrección enviada por Vitaliy Ryaboy en la solicitud de extracción [28923](https://github.com/magento/magento2/pull/28923)_. [GitHub-29527](https://github.com/magento/magento2/issues/29527)

### Contenido de CMS

<!-- MC-35971-->

* La pestaña Jerarquía de una vista de tienda predeterminada seleccionada ahora muestra la página principal seleccionada según lo esperado.

<!-- ENGCOM-7602-->

* La aplicación ya no genera un error durante la creación de la vista de tienda cuando la nueva vista de tienda contiene una página de CMS con la misma clave de URL que una página en una vista de tienda diferente. _Corrección enviada por Vadim Malesh en la solicitud de extracción [28421](https://github.com/magento/magento2/pull/28421)_. [GitHub-28357](https://github.com/magento/magento2/issues/28357)

<!-- MC-35480-->

* La aplicación ahora genera un error cuando un comerciante crea una página de CMS con la misma dirección URL que la página de estructura de la empresa. Anteriormente, la aplicación mostraba la página de CMS en lugar de la página Estructura de la empresa.

### Productos configurables

<!-- MC-33523-->

* Se han corregido los problemas de paginación con la lista Variaciones actuales de edición de productos configurables.

<!-- MC-33406-->

* La aplicación ya no actualiza el cuadro de precio Productos relacionados cada vez que un comprador selecciona opciones para un producto configurable. Anteriormente, la aplicación actualizaba la caja de precios cada vez que un comprador seleccionaba una opción para un producto configurable.

<!-- MC-29882-->

* La aplicación ahora muestra el precio correcto para los productos configurables con opciones personalizables en la página Administrador Crear Pedido. Como se espera, el precio mostrado es una suma del precio del producto secundario y del precio de la opción personalizada. Anteriormente, la aplicación solo mostraba el precio de opción personalizado. [GitHub-25766](https://github.com/magento/magento2/issues/25766)

<!-- MC-33745-->

* El resumen del pedido ahora muestra el importe de descuento correcto cuando se ha aplicado una regla de precio del carro de compras. Anteriormente, la regla no redondeaba correctamente los importes al calcular los descuentos de envío.

<!-- MC-33765-->

* Las cuentas de usuario administrador creadas a partir de una cuenta de administrador con un ámbito restringido ahora pueden crear un producto configurable con atributos según lo esperado. Anteriormente, la aplicación arrojó este error: `Notice: Undefined index: value_index in 23develop/app/code/Magento/ConfigurableProduct/Helper/Product/Options/Factory.php on line 101`.

<!-- ENGCOM-7787-->

* La aplicación ya no genera un error de validación cuando se usa POST `/V1/products` en un producto configurable con un valor `int` de 0. Anteriormente, la aplicación arrojaba este error: `Product with id "%1" does not contain required attribute "%2"."` _Corrección enviada por Vadim Malesh en la solicitud de extracción [29001](https://github.com/magento/magento2/pull/29001)_. [GitHub-13210](https://github.com/magento/magento2/issues/13210)

<!-- ENGCOM-7214-->

* El atributo de opciones de configuración de un producto principal ya no se asigna al atributo `size` de un nuevo producto configurable. _Corrección enviada por Abel Truong en la solicitud de extracción [27339](https://github.com/magento/magento2/pull/27339)_. [GitHub-26449](https://github.com/magento/magento2/issues/26449)

### Cookies

<!-- ENGCOM-7156-->

* La aplicación ahora crea un máximo de una cookie `mage-translation-file-version` y `mage-translation-storage` por sesión. _Corrección enviada por Ihor Sviziev en la solicitud de extracción [27364](https://github.com/magento/magento2/pull/27364)_. [GitHub-27355](https://github.com/magento/magento2/issues/27355)

### cron

<!-- MC-35884-->

* La configuración del consumidor de colas de mensajes se ha ampliado con nuevos parámetros que ayudan a controlar a los consumidores y a ahorrar recursos del servidor, y que potencialmente reducen el consumo de CPU de colas de consumidores. Consulte [Configurar colas de mensajes](https://developer.adobe.com/commerce/php/development/components/message-queues/configuration/) para obtener una descripción de los parámetros `maxIdleTime`, `sleep` y `onlySpawnWhenMessageAvailable`.

<!-- ENGCOM-7863-->

* `cron` expresiones como  `3/10 * * * *` se han programado según lo esperado. _Corrección enviada por Anton Evers en la solicitud de extracción [28930](https://github.com/magento/magento2/pull/28930)_. [GitHub-29240](https://github.com/magento/magento2/issues/29240)

<!-- ENGCOM-7193-->

* `sales_clean_quotes` ya no carga todas las ofertas caducadas a la vez. Anteriormente, la aplicación fallaba con este error irrecuperable porque todas las comillas caducadas se cargaban simultáneamente: `PHP Fatal error: Allowed memory size of 2147483648 bytes exhausted (tried to allocate 20480 bytes) in /path/to/magento2/vendor/magento/framework/Model/AbstractModel.php on line 359`,

### CSS

<!-- ENGCOM-7678-->

* La aplicación ya no duplica CSS cuando **Critical CSS** está habilitado. _Corrección enviada por Tu Nguyen en la solicitud de extracción [28480](https://github.com/magento/magento2/pull/28480)_. [GitHub-26498](https://github.com/magento/magento2/issues/26498)

<!-- MC-24981-->

* El compilador LESS del lado del servidor ahora importa todos los archivos CSS remotos como se espera cuando se ejecuta `bin/magento setup:static-content:deploy -f`. Anteriormente, la aplicación no importaba los archivos remotos y generaba un error. [GitHub-25119](https://github.com/magento/magento2/issues/25119)

### Atributos del cliente personalizados

<!-- MC-36387-->

* Se han corregido problemas de alineación para el texto explicativo sobre contraseñas y el campo **Puesto** en la página Cliente: Editar información de cuenta.

<!-- MC-33645-->

* CAPTCHA ahora funciona como se espera cuando un nuevo cliente hace clic en el botón **Crear una cuenta** en la página de registro de clientes de la tienda. Anteriormente, la aplicación no creaba la cuenta de cliente y mostraba un error cuando el cliente hacía clic en el botón.

<!-- MC-34024-->

* El flujo de trabajo de cierre de compra ya no muestra valores de atributo de dirección del cliente personalizados cuando el cliente no ha introducido ningún dato.

### Cliente

<!-- MC-33679-->

* Los nombres de las regiones en las direcciones de los clientes de administración ahora se traducen según lo esperado.

<!-- MC-36226-->

* Los campos **Estado/Provincia** ahora se rellenan según lo esperado en la página Editar dirección (**Mi cuenta** > **Libreta de direcciones**).

<!-- MC-34655-->

* La aplicación ya no genera un error cuando un cliente hace clic en el botón **Enviar** varias veces en formularios en toda la tienda para los que se ha habilitado el reCAPTCHA invisible. Anteriormente, si se hacía clic en este botón varias veces, se producía un error interno similar al siguiente: `Internal error: Make sure you are using reCaptcha V3 api keys`.

<!-- MC-33522-->

* Guardar un cliente eliminado del administrador ahora solo genera un mensaje de error. Anteriormente, la aplicación mostraba una página en blanco y generaba un informe que contenía esta cadena: `"0":"No such entity with customerId = 3","1":"#1 Magento\\Customer\\Model CustomerRegistry->retrieve() called at [app\/code\/Magento\/Customer\/Model\/ResourceModel\/CustomerRepository.php:340"`.

<!-- MC-33357-->

* La aplicación ahora muestra un mensaje de error como se espera cuando un administrador intenta guardar una dirección para un cliente cuya cuenta acaba de ser eliminada. Anteriormente, la aplicación mostraba un cuadro de mensaje en blanco.

<!-- MC-33150-->

* Las etiquetas de los campos de dirección del flujo de trabajo de cierre de compra y de la libreta de direcciones se han editado para mantener la coherencia.

<!-- ENGCOM-7244 -->

* Las etiquetas de front-end ahora vuelven a almacenar las etiquetas si sus valores no son nulos. Anteriormente, los atributos del cliente utilizaban las etiquetas de front-end predeterminadas. _Corrección enviada por Toan Nguyen en la solicitud de extracción [27064](https://github.com/magento/magento2/pull/27064)_. [GitHub-27063](https://github.com/magento/magento2/issues/27063)

<!-- ENGCOM-7147 -->

* Se ha corregido el número `sortOrder`de vínculos en el XML de diseño. Anteriormente, este orden se invertía y se utilizaba en orden descendente. _Corrección enviada por Tu Nguyen en la solicitud de extracción [27340](https://github.com/magento/magento2/pull/27340)_. [GitHub-27162](https://github.com/magento/magento2/issues/27162)

### Segmento de cliente

<!-- MC-33184-->

* Las operaciones masivas se han refactorizado para guardar y actualizar los segmentos de clientes de forma asíncrona, lo que ha mejorado el rendimiento de estas tareas para implementaciones que incluyen a muchos clientes (más de 3 000 000).

<!-- MC-36224-->

* Las condiciones de los segmentos de clientes ahora funcionan según lo esperado en una implementación de base de datos dividida. Anteriormente, la aplicación generaba un error al intentar editar un segmento de cliente agregando una condición: `SQLSTATE[42S02]: Base table or view not found`.

### Directorio

<!-- MC-32271-->

* El formato del menú desplegable Estado/Provincia ahora es coherente en toda la administración.

### dotdigital

* La sincronización de pedidos ya no falla cuando un pedido contiene SKU de producto que ya no existen en el catálogo.

* Las categorías de productos vacías ya no se incluyen en los datos de insight web.

* El seguimiento del comportamiento web ahora funciona para comerciantes con determinadas configuraciones de temas. Un nuevo selector de reserva resuelve esto.

* El campo de datos de estado del suscriptor ya no incluye valores vacíos cuando la sincronización de clientes se ejecutó mediante cron. (La emulación de la aplicación soluciona este problema).

* La asignación de libreta de direcciones funciona ahora según lo esperado cuando una cuenta dotdigital está habilitada en el nivel predeterminado pero deshabilitada para el sitio web principal.

* Ahora se generan cupones (mediante la URL de contenido dinámico externo para la generación de cupones) para direcciones de correo electrónico que contienen signos más (&quot;+&quot;).

* Los contactos ya no se vuelven a suscribir cuando su valor `last_subscribed_at` es nulo.

* Se han resuelto los errores de actualización (que datan de la versión 4.5.2) que afectaban a versiones anteriores.

* Se ha corregido un problema de regresión introducido en la versión 4.5.3 que afectaba al uso de un método para obtener el estado de suscriptor al preparar la exportación del suscriptor.

* La cifra total de suscriptores sincronizados (presentada en los registros y en la pantalla) ahora se calcula correctamente.

### Descargable

<!-- MC-35026-->

* El área Mis productos descargables ahora muestra vínculos a productos descargables comprados que forman parte de un producto agrupado según lo esperado.

<!-- MC-34262-->

* Al hacer clic en el botón **Muestra** de un producto descargable de la página de producto Administrador, ahora se descarga una muestra según lo esperado. Anteriormente, al hacer clic en **Ejemplo**, la aplicación mostraba este error: `The product that was requested doesn't exist. Verify the product and try again`.

<!-- ENGCOM-7757-->

* Los compradores ahora pueden descargar muestras de productos descargables que están agotados. Anteriormente, cuando un comprador intentaba descargar una muestra, la aplicación abría una pestaña nueva, pero no mostraba un mensaje informativo ni iniciaba el proceso de descarga. _Corrección enviada por Vadim Malesh en la solicitud de extracción [28898](https://github.com/magento/magento2/pull/28898)_. [GitHub-23638](https://github.com/magento/magento2/issues/23638)

<!-- ENGCOM-7796-->

* Se ha mejorado el mensaje de excepción que la aplicación muestra cuando un comprador intenta establecer una dirección de envío para un producto descargable. _Corrección enviada por Michał Derlatka en la solicitud de extracción [28904](https://github.com/magento/magento2/pull/28904)_. [GitHub-26107](https://github.com/magento/magento2/issues/26107)

<!-- ENGCOM-7715 -->

* Los datos de `stock_item` de un producto se actualizan y los vínculos de productos descargables y las muestras se conservan según lo esperado cuando se utiliza una llamada de PUT REST para actualizar los valores de `stock_item`. Anteriormente, después de la actualización del producto, el producto ya no contenía vínculos para descargar contenido. _Corrección enviada por Vadim Malesh en la solicitud de extracción [28799](https://github.com/magento/magento2/pull/28799)_. [GitHub-21811](https://github.com/magento/magento2/issues/21811)

<!-- MC-29905-->

* La aplicación ahora muestra un mensaje más informativo cuando un cliente establece la dirección de envío de un pedido que solo contiene productos descargables.

### Bloque dinámico (anteriormente banner)

<!-- MC-33266-->

* El título de la tabla ahora coincide con la tabla de datos (según lo esperado) al crear un bloque dinámico y añadir una regla de precios de catálogo relacionada.

### Correo electrónico

<!-- MC-32789-->

* La aplicación ahora envía notificaciones por correo electrónico sobre cambios en el pedido al correo electrónico del cliente correcto si el correo electrónico del cliente se ha cambiado después de crear el pedido.

<!-- MC-36015-->

* Los correos electrónicos de actualización de pedidos que se envían a los clientes ahora incluyen el estado de pedido correcto. Anteriormente, si un estado de pedido cambiaba de `processing` a otro estado, el correo electrónico de pedido no reflejaba el cambio de estado.

<!-- MC-34107-->

* La aplicación ya no muestra mensajes engañosos sobre cuentas existentes durante el cierre de compra de invitados. Anteriormente, cuando un invitado navegaba a la página de cierre de compra y luego regresaba a la página de envío, la aplicación mostraba este error: `You already have an account with us. Sign in or continue as guest`.

<!-- MC-33905-->

* Las plantillas de correo electrónico personalizadas ahora cargan los mismos elementos que las plantillas de correo electrónico predeterminadas nativas. Anteriormente faltaban algunos elementos, incluidos los valores de variables.

<!-- MC-33700-->

* Ahora puede crear una plantilla de correo electrónico que envíe correo electrónico con `Content-Type: "text/plain"`. Anteriormente, la aplicación ignoraba el tipo de contenido especificado en la plantilla. _Corrección enviada por twoonesixdigital en la solicitud de extracción [26474](https://github.com/magento/magento2/pull/26474)_. [GitHub-26471](https://github.com/magento/magento2/issues/26471)

<!-- ENGCOM-7576-->

* Se ha eliminado CSS innecesario de la plantilla de vista previa de correo electrónico. _Corrección enviada por Tu Nguyen en la solicitud de extracción [27828](https://github.com/magento/magento2/pull/27828)_. [GitHub-27543](https://github.com/magento/magento2/issues/27543)

<!-- ENGCOM-7177-->

* Se ha eliminado el texto de la plantilla de correo electrónico que duplica el texto que ya se muestra en el pie de página. _Corrección enviada por Paweł Tylek en la solicitud de extracción [27356](https://github.com/magento/magento2/pull/27356)_. [GitHub-28433](https://github.com/magento/magento2/issues/28433)

<!-- ENGCOM-7506-->

* Los correos electrónicos de alerta de producto ahora se envían desde el almacén desde el que se suscribe la alerta. Anteriormente, este correo electrónico siempre se enviaba desde el almacén predeterminado. _Corrección enviada por Maciej Pawłowski en la solicitud de extracción [26534](https://github.com/magento/magento2/pull/26534)_. [GitHub-28968](https://github.com/magento/magento2/issues/28968)

<!-- ENGCOM-7815-->

* Se ha eliminado una variable `customer.name` duplicada de la plantilla de correo electrónico. _Corrección enviada por Paweł Tylek en la solicitud de extracción [29054](https://github.com/magento/magento2/pull/29054)_. [GitHub-29087](https://github.com/magento/magento2/issues/29087)

<!-- MC-33232-->

* Los correos electrónicos de notificación que se envían a los representantes de ventas asignados a una empresa ahora incluyen el logotipo corporativo asignado. Anteriormente, el correo electrónico de notificación incluía el logotipo de LUMA predeterminado, no el correo electrónico del logotipo corporativo cargado.

### Marcos

<!-- MC-35893-->

* El campo **Hora del día para enviar datos** de la página Administrador **Tiendas** > **Configuración** > GENERAL > **Informes avanzados** ahora se muestra correctamente.

<!-- MC-34153-->

* Los compradores ahora pueden cambiar el número de pedidos que se muestran por página cuando la lista Pedidos abarca varias páginas. Anteriormente, la aplicación mostraba este mensaje cuando se navegaba hasta la última página de pedidos y se intentaba cambiar el número de pedidos mostrados por página: `You have placed no orders`. Este era un problema conocido de la versión 2.4.0.

<!-- MC-35020-->

* Ahora puede añadir productos a una categoría al implementar la caché de nivel 2.

<!-- MC-29755-->

* `X-Magento-Tags` encabezados ya no superan el tamaño permitido por la especificación HTTP. Anteriormente, las páginas de categoría que contenían muchos productos devolvían un encabezado `X-Magento-Tag` que generaba un error 503.

<!-- MC-34257-->

* `sales_order_shipment_track_save_commit_after` ahora se activa según lo esperado cuando utilizó la API de REST para crear un envío.

<!-- MC-33898-->

* La aplicación ahora muestra un mensaje de error informativo cuando un `di compile` falla debido a una dependencia inexistente. Anteriormente, el mensaje mostrado no identificaba la clase en la que se producía la excepción.

<!-- MC-32929-->

* La aplicación ya no genera el siguiente error irrecuperable cuando Redis utiliza toda la memoria permitida: `report.CRITICAL: OOM command not allowed when used memory > 'maxmemory'`.

<!-- MC-18021-->

* Los compradores ahora pueden agregar varios productos al carro de compras cuando el módulo `Persistent` está deshabilitado. [GitHub-14486](https://github.com/magento/magento2/issues/14486)

### Correcciones generales

<!-- MC-36048-->

* Al ordenar productos en el Administrador (**Tiendas** > **Atributos** > **Productos**), ahora se muestran todos los productos que cumplen con los criterios de búsqueda. Anteriormente, la aplicación no mostraba registros y para ordenarlos había que ir a la primera página de resultados de búsqueda.

<!-- MC-36343-->

* Se han quitado las comillas innecesarias y el escape alrededor de una dirección URL en `tracking.phtml`.

<!-- MC-35998-->

* El `var/log/system.log` muestra ahora un mensaje más preciso cuando un usuario intenta obtener acceso a un archivo de recursos no existente en el directorio estático y el modo de producción y SCD OnDemand están habilitados. La aplicación ahora registra un error 404. Anteriormente, la aplicación registraba el mismo mensaje que se registra cuando el error se produce en el modo de desarrollador.

<!-- ENGCOM-7286-->

* La minificación de JavaScript ahora funciona correctamente. El solucionador de archivos de minificación ya no filtra variables al ámbito global. Anteriormente, se filtraron las variables `ctx`, `origNameToUrl` y `baseUrl` en window. _Corrección enviada por Mateusz Krzeszowiak en la solicitud de extracción [27622](https://github.com/magento/magento2/pull/27622)_. [GitHub-28110](https://github.com/magento/magento2/issues/28110)

<!-- ENGCOM-7532-->

* Cuando se depura un error que impide la creación de objetos, la aplicación ahora imprime y registra el mensaje de excepción original. Anteriormente, el mensaje solo se registraba. _Corrección enviada por Marvin Hinz en la solicitud de extracción [26572](https://github.com/magento/magento2/pull/26572)_. [GitHub-26550](https://github.com/magento/magento2/issues/26550)

<!-- ENGCOM-7577-->

* Se ha mejorado la ejecución de devoluciones de llamada después de confirmar los cambios en la base de datos. Anteriormente, si una llamada de retorno fallaba con una excepción, todas las llamadas de retorno fallaban. _Corrección enviada por Alok Patel en la solicitud de extracción [27134](https://github.com/magento/magento2/pull/27134)_. [GitHub-28167](https://github.com/magento/magento2/issues/28167)

<!-- ENGCOM-7447-->

* Los mixins para módulos sin dependencias definidas ya no generan este error: `TypeError: Cannot read property 'map' of null`. _Corrección enviada por Mateusz Krzeszowiak en la solicitud de extracción [27690](https://github.com/magento/magento2/pull/27690)_. [GitHub-28340](https://github.com/magento/magento2/issues/28340)

<!-- ENGCOM-7299-->

* El polyfill de almacenamiento ahora se carga y aplica solamente cuando `localStorage` o `sessionStorage` no están disponibles. _Corrección enviada por Mateusz Krzeszowiak en la solicitud de extracción [27619](https://github.com/magento/magento2/pull/27619)_. [GitHub-28381](https://github.com/magento/magento2/issues/28381)

<!-- ENGCOM-7610-->

* Las listas de pedidos de tiendas de varias páginas ahora se comportan como se espera cuando un comprador cambia el número de resultados mostrados por página desde la segunda página o desde una página de resultados posterior. Anteriormente, la aplicación mostraba este error cuando un comprador cambiaba el número de resultados de búsqueda mostrados en la lista **Mi cuenta** > **Mis pedidos**: `You have placed no orders`. _Corrección enviada por Vadim Malesh en la solicitud de extracción [28417](https://github.com/magento/magento2/pull/28417)_. [GitHub-28488](https://github.com/magento/magento2/issues/28488)

<!-- ENGCOM-7565-->

* El método `addWarning` obsoleto se ha reemplazado con el método `addWarningMessage` en el módulo de seguridad. _Corrección enviada por kishorekumarkesavan en la solicitud de extracción [28264](https://github.com/magento/magento2/pull/28264)_. [GitHub-28308](https://github.com/magento/magento2/issues/28308)

<!-- ENGCOM-7588-->

* El código generado mediante los comandos de línea de comandos `bin/magento` ahora es coherente con los requisitos y los estándares de codificación. _Corrección enviada por Lukasz Bajsarowicz en la solicitud de extracción [28351](https://github.com/magento/magento2/pull/28351)_. [GitHub-28376](https://github.com/magento/magento2/issues/28376)

<!-- MC-33744-->

* La aplicación ya no muestra una página CMS más de una vez en la jerarquía del sitio si la página está asignada a varias vistas de tienda.

<!-- ENGCOM-7511-->

* Al guardar un atributo con `backend_type = static`, ya no se quita el contenido del campo `frontend_class`. _Corrección enviada por jiten-patel en la solicitud de extracción [27369](https://github.com/magento/magento2/pull/27369)_. [GitHub-27051](https://github.com/magento/magento2/issues/27051)

<!-- ENGCOM-7462-->

* Código innecesario y `responsive.js` se han eliminado de los archivos cargados por las temáticas. _Corrección enviada por Mateusz Krzeszowiak en la solicitud de extracción [27617](https://github.com/magento/magento2/pull/27617)_. [GitHub-28811](https://github.com/magento/magento2/issues/28811)

<!-- ENGCOM-7856-->

* La validación se ha agregado al campo **Número de símbolos** de la página de configuración de Admin CAPTCHA. _Corrección enviada por Eden Duong en la solicitud de extracción [29199](https://github.com/magento/magento2/pull/29199)_. [GitHub-29198](https://github.com/magento/magento2/issues/29198)

<!-- ENGCOM-7999-->

* La fuente RSS ahora se carga correctamente. Anteriormente, la fuente no se cargaba por primera vez, aunque se cargaba según lo esperado cuando se actualizó la página. _Corrección enviada por Vadim Malesh en la solicitud de extracción [29455](https://github.com/magento/magento2/pull/29455)_. [GitHub-25211](https://github.com/magento/magento2/issues/25211)

<!-- MC-35550-->

* Una sesión persistente caducada ahora se renueva según lo esperado cuando el comprador vuelve a iniciar sesión.

<!-- MC-35230-->

* Ahora se cumple la vigencia de la contraseña establecida en **Tiendas** > **Configuración** > **Avanzado** > **Administrador**. Anteriormente, si hacía clic en **¿Olvidó la contraseña?** cuando se le pida que restablezca su contraseña, podría omitir el restablecimiento de contraseña.

<!-- MC-34369-->

* Los códigos de cupones ahora se aplican solo al producto especificado. Anteriormente, la aplicación aplicaba el código de cupón a todos los productos del carro de compras. [GitHub-28246](https://github.com/magento/magento2/issues/28246)

<!-- MC-35008-->

* La configuración de caducidad del carro de compras ya no se restablece cuando se produce una actualización de inventario o precio. Anteriormente, cuando un carro de compras estaba configurado para que caducara en 24 horas y se produjo una actualización de inventario o una actualización de precios, los indizadores rellenaban `updated_at table`, lo que restablecía la hora de caducidad.

<!-- MC-33313-->

* La aplicación ya no genera un error grave cuando un administrador asigna un cliente que tiene un carro de compras activo a un grupo de clientes.

<!-- ENGCOM-7834 -->

* Si se selecciona una opción de la barra de herramientas de **Herramientas para desarrolladores** > **Red** en una página de producto cuando se ejecuta el explorador Chrome, ya no se inicializa `toolbar.js` dos veces. _Corrección enviada por Paweł Tylek en la solicitud de extracción [28838](https://github.com/magento/magento2/pull/28838)_. [GitHub-25934](https://github.com/magento/magento2/issues/25934)

<!-- ENGCOM-7420-->

* La aplicación ahora agrega el ID de rol ACL de un usuario administrador al ID de caché del árbol de categorías de productos. Esto limitará los árboles de categorías que un administrador con ámbito limitado puede ver como se espera. _Corrección enviada por quangdo-aligent en la solicitud de extracción [27429](https://github.com/magento/magento2/pull/27429)_. [GitHub-28306](https://github.com/magento/magento2/issues/28306)

### Tarjetas de regalo

<!-- MC-36118-->

* Las cuentas de tarjetas de regalo ahora capturan los números de pedido según lo esperado. Anteriormente, el campo **Más información** de la pestaña Historial de la cuenta de regalo seleccionada no mostraba las ID de pedidos.

<!-- MC-34519-->

* El uso de una coma como separador decimal ahora funciona según lo esperado. Anteriormente, el separador de comas ignoraba los valores decimales.

<!-- MC-34469-->

* Las tarjetas de regalo ahora se muestran como se espera en el minicarrito. Anteriormente, la aplicación procesaba objetos de HTML como texto.

<!-- MC-33851-->

* Ahora, las notas de crédito reflejan correctamente el total general de los pedidos que incluían productos con descuento y que se pagaron mediante una combinación de tarjeta de regalo y crédito de la tienda.

### Google Tag Manager

<!-- MC-33729-->

* La aplicación ya no genera un error de JavaScript durante la desprotección cuando la configuración **Modo de restricción de cookies** y el Administrador de etiquetas de Google están habilitados.

### GraphQL

<!-- ENGCOM-7661 7662 7559 MC-35646 32345-->

* Los compradores pueden seleccionar el mensaje de regalo y las opciones de envoltorio durante el pago. GraphQL ahora cubre las opciones de mensajes de regalo para diferentes tipos de artículos del carro de compras. Ver [`setGiftOptionsOnCart` mutación](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/set-gift-options/) y [`updateCartItems` mutación](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/update-items/). _Corrección enviada por Oleh Usik en las solicitudes de extracción [28519](https://github.com/magento/magento2/pull/28105), [27956](https://github.com/magento/magento2/pull/27956), [28072](https://github.com/magento/magento2/pull/28072), [28072](https://github.com/magento/magento2/pull/28072) y 246 en los socios de repositorios privados-magento2ee_. [GitHub-253](https://github.com/magento/magento2/issues/28519)

<!-- ENGCOM-7508 -->

* Los clientes y los huéspedes pueden escribir comentarios sobre los productos. Los clientes también pueden recuperar sus historiales de críticas de productos. Consulte [Crear una revisión de producto](https://developer.adobe.com/commerce/webapi/graphql/schema/products/mutations/create-review/) y [productReviewRatingsMetadata query](https://developer.adobe.com/commerce/webapi/graphql/schema/products/queries/product-review-ratings-metadata/) para obtener información sobre cómo recuperar información sobre la infraestructura de revisiones. _Corrección enviada por Eduard Chitoraga en la solicitud de extracción [27882](https://github.com/magento/magento2/pull/27882)_. [GitHub-28523](https://github.com/magento/magento2/issues/28523)

<!-- ENGCOM-7800 7841-->

* Los clientes pueden aplicar o eliminar puntos de recompensa a sus carros de compras. También pueden ver el historial de puntos de recompensa. Consulte [`applyRewardPointsToCart`](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/apply-reward-points/) y [`removeRewardPointsFromCart`](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/remove-reward-points/) para ver una discusión sobre la administración de puntos de recompensa dentro de un carro de compras. _Corrección enviada por Petkovski Marjan en la solicitud de extracción 285 en los socios de repositorios privados-magento2ee y Dmitriy Gallyamov en las solicitudes de extracción 284 y 281 en los socios de repositorios privados-magento2ee_. [GitHub-28835](https://github.com/magento/magento2/issues/28835), [GitHub-28833](https://github.com/magento/magento2/issues/28833)

<!-- ENGCOM-7968 -->

* La mutación [`addProductsToCart` &#x200B;](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/add-products/) le permite agregar cualquier tipo de producto al carro de compras activo. Se recomienda usar esta mutación en lugar de mutaciones de un solo propósito como `addSimpleProductsToCart`. _Corrección enviada por Yaroslav Rogoza en la solicitud de extracción [27914](https://github.com/magento/magento2/pull/27914)_. [GitHub-28524](https://github.com/magento/magento2/issues/28524)

<!-- ENGCOM-7801 7816-->

* Las consultas de GraphQL para productos relacionados ahora devuelven valores para productos relacionados creados a partir de reglas de segmentación. Anteriormente, las consultas de productos relacionados (mejora de venta y venta cruzada) solo devolvían valores si los productos relacionados se añadían desde la configuración del producto. _Corrección enviada por Ulzii en la solicitud de extracción 288 en el repositorio privado partners-magento2ee_. [GitHub-28566](https://github.com/magento/magento2/issues/28566)

<!-- MC-34187-->

* La nueva consulta `availableStores` devuelve una lista de atributos de configuración para varias tiendas disponibles en el mismo sitio web (según la tienda actual). No expone la lista de sitios web. Ver [`availableStores` consulta](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/available-stores/). _Corrección enviada por Dmitriy Gallyamov en la solicitud de extracción [28794](https://github.com/magento/magento2/pull/28794)_. [GitHub-28569](https://github.com/magento/magento2/issues/28569)

<!-- ENGCOM-7512 -->

* Ahora, GraphQL solo utiliza un token de autorización para recuperar un tipo de usuario y su ID. Anteriormente, GraphQL utilizaba las cookies de un cliente activo para recuperar esta información cuando el token de autorización estaba vacío. _Corrección enviada por Alexander Taranovsky en la solicitud de extracción [27373](https://github.com/magento/magento2/pull/27373)_. [GitHub-28040](https://github.com/magento/magento2/issues/28040)

<!-- ENGCOM-7839 32949-->

* Hemos agregado las mutaciones [`createCustomerV2`](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/create-v2/) y [`updateCustomerV2`](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/update-v2/) para administrar las cuentas de cliente. Estas nuevas mutaciones requieren objetos de entrada diferentes a las mutaciones `createCustomer` y `updateCustomer`. Para cambiar la dirección de correo electrónico de un cliente, use la nueva mutación [`updateCustomerEmail`](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/update-email/). _Corrección enviada por Michał Derlatka en la solicitud de extracción [28888](https://github.com/magento/magento2/pull/28888)_. [GitHub-28570](https://github.com/magento/magento2/issues/28570)

<!-- ENGCOM-7750 -->

* `updateCustomer` ya no le permite establecer un valor `INT` no válido en el argumento `gender`. _Corrección enviada por Alexander Taranovsky en la solicitud de extracción [28487](https://github.com/magento/magento2/pull/28487)_. [GitHub-28481](https://github.com/magento/magento2/issues/28481)

<!-- ENGCOM-7663 -->

* Puede usar la mutación `subscribeEmailToNewsletter` para suscribir a los clientes a un boletín informativo. Ver [`subscribeEmailToNewsletter` mutación](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/subscribe-email-to-newsletter/). _Corrección enviada por Alexander Taranovsky en la solicitud de extracción [27586](https://github.com/magento/magento2/pull/27586)_. [GitHub-27337](https://github.com/magento/magento2/issues/27337)

<!-- ENGCOM-7216 -->

* Se ha eliminado la lógica redundante en la resolución de mutaciones `setShippingMethodsOnCart`. _Corrección enviada por Alexander Taranovsky en la solicitud de extracción [27349](https://github.com/magento/magento2/pull/27349)_. [GitHub-28262](https://github.com/magento/magento2/issues/28262)

<!-- ENGCOM-7638 -->

* Se agregó cobertura de prueba para el error `Please provide Email of sender` asociado con la mutación `sendEmailToFriend`. _Corrección enviada por Alexander Taranovsky en la solicitud de extracción [28034](https://github.com/magento/magento2/pull/28034)_. [GitHub-28138](https://github.com/magento/magento2/issues/28138)

<!-- ENGCOM-7743 34485-->

* La consulta `products` ahora devuelve etiquetas de opciones de atributos de producto para la vista de tienda predeterminada según lo esperado. Anteriormente, esta consulta devolvía las etiquetas de opciones de atributos de producto establecidas para el administrador. _Corrección enviada por Dmitriy Gallyamov en la solicitud de extracción [28647](https://github.com/magento/magento2/pull/28647)_. [GitHub-28568](https://github.com/magento/magento2/issues/28568)

<!-- ENGCOM-7743 -->

* Las agregaciones de atributos personalizadas ahora devuelven valores de opción específicos del almacén. _Corrección enviada por Dmitriy Gallyamov en la solicitud de extracción [28647](https://github.com/magento/magento2/pull/28647)_. [GitHub-28572](https://github.com/magento/magento2/issues/28572)

<!-- ENGCOM-7707 -->

* Los intervalos de precio que se devuelven en una agregación de producto ahora solo pueden ser numéricos (no se permiten caracteres comodín). _Corrección enviada por Dmitriy Gallyamov en la solicitud de extracción [28745](https://github.com/magento/magento2/pull/28745)_. [GitHub-28628](https://github.com/magento/magento2/issues/28628)

<!-- ENGCOM-7729 -->

* La consulta `categoryList` ahora devuelve la respuesta correcta al usar fragmentos. _Corrección enviada por Ulzii en la solicitud de extracción [28710](https://github.com/magento/magento2/pull/28710)_. [GitHub-28584](https://github.com/magento/magento2/issues/28584)

<!-- ENGCOM-7732 7733-->

* La búsqueda de productos de GraphQL ahora considera los permisos de categoría configurados. Anteriormente, la búsqueda de productos ignoraba la configuración **Enable** (**Stores** > **Configuration** > **Catalog** > **Catalog** > **Permisos de categoría**). _Corrección enviada por Petkovski Marjan en la solicitud de extracción [28757](https://github.com/magento/magento2/pull/28757) y la solicitud de extracción 271 en el repositorio privado`partners-magento2ee`_. [GitHub-28563](https://github.com/magento/magento2/issues/28563)

<!-- MC-31084-->

* Ahora puede agregar un producto a un carro de compras usando `addSimpleProductToCart` cuando otros artículos del carro de compras estén agotados. Anteriormente, la aplicación devolvió este error: `Some of the products are out of stock`. [GitHub-26683](https://github.com/magento/magento2/issues/26683)

* El método predeterminado GraphQL `Category` ahora ordena por posición de categoría según lo esperado. _Corrección enviada por Derrik Nyomo en la solicitud de extracción [29301](https://github.com/magento/magento2/pull/29301)_. [GitHub-104](https://github.com/magento/catalog-storefront/issues/104)

* Se ha añadido compatibilidad con listas de deseos en Magento Open Source. Puede [agregar elementos](https://developer.adobe.com/commerce/webapi/graphql/schema/wishlist/mutations/add-products/) a, [actualizar elementos](https://developer.adobe.com/commerce/webapi/graphql/schema/wishlist/mutations/update-products/) en y [quitar elementos](https://developer.adobe.com/commerce/webapi/graphql/schema/wishlist/mutations/remove-products/) de una lista de artículos deseados. _Corrección enviada por Eduard Chitoraga en las solicitudes de extracción [28205](https://github.com/magento/magento2/pull/28205) y 264 en los socios de repositorios privados-magento2ee_. [GitHub-28551](https://github.com/magento/magento2/issues/28551)

* La mutación [`addProductsToCart` &#x200B;](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/add-products/) le permite agregar cualquier tipo de producto al carro de compras activo. Se recomienda usar esta mutación en lugar de mutaciones de un solo propósito como `addSimpleProductsToCart`. _Corrección enviada por Yaroslav Rogoza en la solicitud de extracción [27914](https://github.com/magento/magento2/pull/27914)_. [GitHub-28524](https://github.com/magento/magento2/issues/28524)

* Se ha agregado compatibilidad con GraphQL Vault para el método de pago [Payflow Pro Vault](https://developer.adobe.com/commerce/webapi/graphql/payment-methods/payflow-pro-vault/). _Corrección enviada por Oleh Usik en la solicitud de extracción [28821](https://github.com/magento/magento2/pull/28821)_. [GitHub-28520](https://github.com/magento/magento2/issues/28520)

* Se ha actualizado la consulta [`storeConfig` &#x200B;](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/store-config/) de GraphQL para incluir nuevas opciones de configuración de cliente. _Corrección enviada por Oleh Usik en la solicitud de extracción [27876](https://github.com/magento/magento2/pull/27876)_. [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* Se agregó la mutación [`resetPassword` &#x200B;](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/reset-password/). _Corrección enviada por Oleh Usik en la solicitud de extracción [27876](https://github.com/magento/magento2/pull/27876)_. [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* Se agregó la mutación [`requestPasswordResetEmail` &#x200B;](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/request-password-reset-email/), que almacena en déclencheur el correo electrónico de restablecimiento de contraseña para la dirección de correo electrónico proporcionada. _Corrección enviada por Oleh Usik en la solicitud de extracción [27876](https://github.com/magento/magento2/pull/27876)_. [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* Se agregó una discusión sobre Klarna GraphQL en [método de pago de Klarna](https://developer.adobe.com/commerce/webapi/graphql/payment-methods/klarna/) y[`createKlarnaPaymentsSession`](https://developer.adobe.com/commerce/webapi/graphql/schema/checkout/mutations/create-klarna-payments-session/)

### Imágenes

<!-- ENGCOM-7691-->

* Se ha mejorado el marcado de HTML para imágenes en miniatura. _Corrección enviada por Tu Nguyen en la solicitud de extracción [28642](https://github.com/magento/magento2/pull/28642)_. [GitHub-29468](https://github.com/magento/magento2/issues/29468)

### Importar/exportar

<!-- MC-35479-->

* El archivo `error_report.csv` ahora se descarga con contenido y está disponible dentro del directorio `var/import_history/` según lo esperado. Anteriormente, este archivo no se generaba después de la importación.

<!-- ENGCOM-7616-->

* La importación de un producto mediante un archivo CSV ahora genera un archivo `error_report.csv` según lo esperado. Anteriormente, la aplicación generaba el archivo, pero lo quitaba después de completarse la importación. _Corrección enviada por Vadim Malesh en la solicitud de extracción [28460](https://github.com/magento/magento2/pull/28460)_. [GitHub-28420](https://github.com/magento/magento2/issues/28420)

<!-- ENGCOM-7673-->

* Se eliminaron las importaciones de clases redundantes en toda la base de código. _Corrección enviada por Oleh Usik en la solicitud de extracción [28696](https://github.com/magento/magento2/pull/28696)_. [GitHub-29012](https://github.com/magento/magento2/issues/29012)

<!-- MC-33730-->

* La aplicación ahora importa correctamente las direcciones de clientes que contienen una región para un país que no tiene regiones definidas. Anteriormente, la aplicación arrojó este error: `Please enter a valid region`.

<!-- MC-33277-->

* La aplicación ahora carga el conjunto de atributos de entidad correcto cuando un comerciante selecciona un tipo de entidad al programar una nueva exportación.

<!-- MC-32956-->

* La posición de los productos en la tabla `catalog_category_product` ahora se actualiza como se espera cuando un administrador crea un producto en el Administrador y lo asigna a una categoría. Anteriormente, a la posición de los nuevos productos siempre se le asignaba un valor 0.

<!-- MC-34939-->

* Los datos del cliente ahora se exportan correctamente desde Admin y la cuadrícula de datos de exportación muestra los datos del cliente según lo esperado. Anteriormente, se producía un error relacionado con la asignación de memoria durante la exportación.

<!-- MC-34657-->

* Los archivos CSV importados ahora capturan información de productos relacionada según lo esperado. Anteriormente, la información del producto relacionado no se cargaba de forma coherente la primera vez que se importaba el archivo CSV.

<!-- MC-37424-->

* Se eliminaron los parámetros de construcción no utilizados en `AdvancedPricing.php`. [GitHub-29531](https://github.com/magento/magento2/issues/29531)

### Índice

<!-- ENGCOM-7073-->

* `Magento_CacheInvalidate` ahora administra correctamente los patrones de etiquetas grandes al hacer `PURGE`. `sendPurgeRequest` se ha refactorizado para administrar una matriz de etiquetas en lugar de requerir que el llamador use `implode()`. _Corrección enviada por Matthew O&#39;Loughlin en la solicitud de extracción [26256](https://github.com/magento/magento2/pull/26256)_. [GitHub-26255](https://github.com/magento/magento2/issues/26255)

<!-- MC-30568-->

* Los indexadores compartidos ahora muestran un estado de **valid** después de ejecutar `bin/magento indexer:status` después de volver a indexar. Anteriormente, los indexadores compartidos tenían un estado **no válido** después de un reindexado completo.

### Infraestructura

<!-- MC-37243-->

* Ya no se producen problemas al cargar las páginas de catálogo y producto en implementaciones que ejecutan PHP 7.4.9. Anteriormente, la aplicación arrojaba este error al intentar cargar el catálogo y las páginas de producto: `There has been an error processing your request. Exception printing is disabled by default for security reasons`. [GitHub-29502](https://github.com/magento/magento2/issues/29502)

<!-- ENGCOM-7994-->

* Todas las excepciones que se producen cuando los diseños se representan en el modo de producción ahora se registran en el archivo de registro de excepciones (`var/report`). Anteriormente, la aplicación registraba estos mensajes en el registro del sistema como problemas críticos.

<!-- ENGCOM-7154-->

* Las expresiones regulares ahora funcionan correctamente en páginas grandes como resultado de un aumento de `ipcre.backtrack_limi`t y `pcre.recursion_limit` a aproximadamente 1000000. _Corrección enviada por Mateusz Krzeszowiak en la solicitud de extracción [27270](https://github.com/magento/magento2/pull/27270)_. [GitHub-26026](https://github.com/magento/magento2/issues/26026)

<!-- ENGCOM-7483-->

* Se ha mejorado la generación de interceptores. Se han quitado `} else {` instrucciones de los interceptores y `array_map` ha reemplazado a `foreach`. _Corrección enviada por Lukasz Bajsarowicz en la solicitud de extracción [27902](https://github.com/magento/magento2/pull/27902)_. [GitHub-28383](https://github.com/magento/magento2/issues/28383)

<!-- ENGCOM-7651-->

* La creación de matrices es ahora coherente en toda la clase (`app/code/Magento/Sales/Model/Order/Pdf/Items/Invoice/DefaultInvoice.php`). _Corrección enviada por Nathan de Graaf en la solicitud de extracción [28515](https://github.com/magento/magento2/pull/28515)_. [GitHub-28795](https://github.com/magento/magento2/issues/28795)

<!-- ENGCOM-7484-->

* Los complementos se han migrado fuera del marco de trabajo para seguir la práctica recomendada de prohibir complementos en el área de nombres de marco de trabajo. _Corrección enviada por Lukasz Bajsarowicz en la solicitud de extracción [27965](https://github.com/magento/magento2/pull/27965)_. [GitHub-27962](https://github.com/magento/magento2/issues/27962)

<!-- ENGCOM-7713-->

* La aplicación ya no genera un error `Undefined class constant` cuando se genera un interceptor. _Corrección enviada por Vova Yatsyuk en la solicitud de extracción [28797](https://github.com/magento/magento2/pull/28797)_. [GitHub-28981](https://github.com/magento/magento2/issues/28981)

<!-- ENGCOM-7523-->

* Los datos de formulario ahora se conservan cuando la aplicación genera una excepción de integración al guardar una integración con un nombre que ya está en uso. _Corrección enviada por Aditya Yadav en la solicitud de extracción [26660](https://github.com/magento/magento2/pull/26660)_. [GitHub-28143](https://github.com/magento/magento2/issues/28143)

<!-- ENGCOM-7756-->

* La aplicación ya no trunca los encabezados `X-Forwarded-For` a 32 caracteres. _Corrección enviada por Ihor Sviziev en la solicitud de extracción [27221](https://github.com/magento/magento2/pull/27221)_. [GitHub-28693](https://github.com/magento/magento2/issues/28693)

<!-- ENGCOM-7820-->

* La lógica que comprueba si una redirección es interna ahora funciona correctamente en el administrador al utilizar un dominio de administrador personalizado. Anteriormente, los problemas con esta lógica provocaban que muchos administradores redirigieran a la página principal del almacén predeterminado. _Corrección enviada por Vadim Malesh en la solicitud de extracción [29066](https://github.com/magento/magento2/pull/29066)_. [GitHub-28943](https://github.com/magento/magento2/issues/28943)

<!-- ENGCOM-7758-->

* Los problemas con el archivo `styles-old.less` se han eliminado y el linting ya no identifica errores. _Corrección enviada por Tu Nguyen en la solicitud de extracción [28895](https://github.com/magento/magento2/pull/28895)_. [GitHub-24004](https://github.com/magento/magento2/issues/24004)

<!-- ENGCOM-7781-->

* `NonComposerComponentRegistration.php` se ha refactorizado. _Corrección enviada por Vitaliy Ryaboy en la solicitud de extracción [28975](https://github.com/magento/magento2/pull/28975)_. [GitHub-29308](https://github.com/magento/magento2/issues/29308)

<!-- ENGCOM-7926-->

* `ResourceConnection.php` se ha refactorizado para mejorar la legibilidad de la clase. _Corrección enviada por Lukasz Bajsarowicz en la solicitud de extracción [29341](https://github.com/magento/magento2/pull/29341)_. [GitHub-29389](https://github.com/magento/magento2/issues/29389)

<!-- ENGCOM-7910-->

* El archivo LÉAME del servidor web integrado se ha actualizado para incluir todos los parámetros de Elasticsearch. _Corrección enviada por Yevhenii Dumskyi en la solicitud de extracción [29300](https://github.com/magento/magento2/pull/29300)_. [GitHub-29299](https://github.com/magento/magento2/issues/29299)

<!-- ENGCOM-7814-->

* El complemento `Magento\CmsUrlRewrite\Plugin\Cms\Model\Store\View::aftersSave` ahora devuelve un valor como se esperaba. Anteriormente, este complemento no devolvía un valor y, como resultado, al guardar una vista de tienda, se producía un error. _Corrección enviada por el host de Pieter en la solicitud de extracción [29035](https://github.com/magento/magento2/pull/29035)_. [GitHub-29034](https://github.com/magento/magento2/issues/29034)

<!-- ENGCOM-7566-->

* Se agregó la siguiente compatibilidad con métodos mágicos para `DataObject`:

   * nueva extensión que admite `get/set/has/uns` métodos mágicos (con uso de `__call`)
   * compatibilidad con SessionManager, que reenvía todas las llamadas al contenedor DataObject
   * cobertura de prueba para extensiones
   * pruebas actualizadas para la comprobación de errores filtrados
   * aumentó el nivel de comprobación de PHPStan de 0 a 1. _Corrección enviada por Oleksandr Kravchuk en la solicitud de extracción [27905](https://github.com/magento/magento2/pull/27905)_. [GitHub-28303](https://github.com/magento/magento2/issues/28303)

<!-- ENGCOM-7906-->

* `ScopeConfigInterface` ahora puede ser más que una cadena. La restricción de `magentoConfigFixture` a la cadena solamente fue el resultado involuntario de una solicitud de extracción anterior y se revirtió. _Corrección enviada por Kristof, Fooman en la solicitud de extracción [29305](https://github.com/magento/magento2/pull/29305)_. [GitHub-29345](https://github.com/magento/magento2/issues/29345)

<!-- ENGCOM-8000-->

* El método `convertConfigTimeToUtc` ya no genera un error grave debido al envío de parámetros incorrectos al constructor `Phrase`. _Corrección enviada por Kos Rafał en la solicitud de extracción [29483](https://github.com/magento/magento2/pull/29483)_. [GitHub-29525](https://github.com/magento/magento2/issues/29525)

<!-- ENGCOM-7962 -->

* Los filtros de precio ahora funcionan como se espera en los datos de cuadrícula cuando `Magento\Backend\Block\Widget\Grid\Column\Filter\Price::getCondition` y `Magento\Backend\Block\Widget\Grid\Column\Filter\Price::getValue()` devuelven una matriz con índices que contienen datos de cadena `from` o `to`. Anteriormente, la aplicación arrojó este error: `Notice: A non well formed numeric value encountered in vendor/magento/module-backend/Block/Widget/Grid/Column/Filter/Price.php on line 197`. _Corrección enviada por Nikita Sarychev en la solicitud de extracción [29214](https://github.com/magento/magento2/pull/29214)_. [GitHub-29213](https://github.com/magento/magento2/issues/29213)

<!-- ENGCOM-7911 -->

* Se ha añadido un punto de extensión para admitir la adición de HTML a la página de categoría. Esto corrige un error introducido por una solicitud de extracción anterior. _Corrección enviada por iGerchak en la solicitud de extracción [29291](https://github.com/magento/magento2/pull/29291)_. [GitHub-29286](https://github.com/magento/magento2/issues/29286)

### Inventario

<!-- ENGCOM-7979-->

* Se eliminaron comentarios de código innecesarios de `app/code/Magento/CatalogInventory/Model/StockState.php`. _Corrección enviada por Vitaliy Prokopov en la solicitud de extracción [27758](https://github.com/magento/magento2/pull/27758)_. [GitHub-26702](https://github.com/magento/magento2/issues/26702)

### Navegación por capas

<!-- MC-25043-->

* La barra lateral de navegación por capas ahora muestra atributos booleanos con opciones (**yes**/**no**) y recuentos de productos coincidentes. Anteriormente, la navegación por capas no arrojaba una opción **no** para atributos booleanos en implementaciones que usaban Elasticsearch.

<!-- ENGCOM-7493-->

* El filtro de navegación por capas de muestra ahora es coherente con los filtros estándar utilizados en Adobe Commerce. _Corrección enviada por Bartłomiej Szubert en la solicitud de extracción [28015](https://github.com/magento/magento2/pull/28015)_. [GitHub-28011](https://github.com/magento/magento2/issues/28011)

### Registro

<!-- ENGCOM-7692-->

* Todos los errores de referencia rotos ahora se registran cuando las implementaciones solo están en modo de desarrollador. Anteriormente, también se registraba un error para implementaciones en modo de producción, que inflaba los registros de errores. _Corrección enviada por Bartłomiej Szubert en la solicitud de extracción [28735](https://github.com/magento/magento2/pull/28735)_. [GitHub-26504](https://github.com/magento/magento2/issues/26504)

### Galería de medios

<!-- ENGCOM-8014-->

* La interfaz de usuario de configuración de Media Gallery (Administrador **Tiendas** > **Configuración** >   **Avanzado** > **Sistema**) se ha reorganizado. _Corrección enviada por Shankar Konar en la solicitud de extracción [29433](https://github.com/magento/magento2/pull/29433)_. [GitHub-28011](https://github.com/magento/adobe-stock-integration/issues/1738)

<!-- ENGCOM-7972 -->

* Se agregaron pruebas para cubrir los vínculos **Usados en** para una imagen en la galería multimedia. _Corrección enviada por Nazar Klovanych en la solicitud de extracción [29392](https://github.com/magento/magento2/pull/29392)_. [GitHub-1963](https://github.com/magento/adobe-stock-integration/issues/1693)

<!-- ENGCOM-8006-->

* La aplicación ya no genera una excepción cuando un comerciante intenta guardar un producto con su imagen asociada cuando Media Gallery está desactivada. _Corrección enviada por Nazar Klovanych en la solicitud de extracción [29492](https://github.com/magento/magento2/pull/29492)_. [GitHub-1750](https://github.com/magento/adobe-stock-integration/issues/1750)

### MFTF

<!-- ENGCOM-7963 -->

* `AdminSubmitAdvancedInventoryFormActionGroup`, `AdminClickOnAdvancedInventoryLinkActionGroup` y  `AdminSetStockStatusConfigActionGroup` grupos de acción ahora se utilizan en pruebas de acuerdo con las prácticas recomendadas. _Corrección enviada por Oleh USIA en la solicitud de extracción [29386](https://github.com/magento/magento2/pull/29386)_. [GitHub-29420](https://github.com/magento/magento2/issues/29420)

<!-- ENGCOM-7964 -->

* `SearchProductGridByKeywordActionGroup` ahora se usa para la búsqueda en la cuadrícula de productos. _Corrección enviada por Oleh Usik en la solicitud de extracción [29385](https://github.com/magento/magento2/pull/29385)_. [GitHub-29434](https://github.com/magento/magento2/issues/29434)

<!-- ENGCOM-7915 -->

* `AdminCategoriesClickDoneButtonOnPopupActionGroup` se usa ahora para hacer clic en **Listo** en la ventana emergente Buscar categorías. _Corrección enviada por Oleh Usik en la solicitud de extracción [28989](https://github.com/magento/magento2/pull/28989)_. [GitHub-29380](https://github.com/magento/magento2/issues/29380)

<!-- ENGCOM-7529 -->

* `LoginToStorefrontActionGroup` se usa ahora para reemplazar una secuencia de acciones que se usa para el inicio de sesión de clientes de tienda. _Corrección enviada por Sathish Subramanian en la solicitud de extracción [28113](https://github.com/magento/magento2/pull/28113)_. [GitHub-28165](https://github.com/magento/magento2/issues/28165)

<!-- ENGCOM-7590 -->

* `AdminUpdateCustomURLRewritesPermanentTest` se ha refactorizado para cumplir con las prácticas recomendadas de MFTF. _Corrección enviada por Kate Kyzyma en la solicitud de extracción [28361](https://github.com/magento/magento2/pull/28361)_. [GitHub-28393](https://github.com/magento/magento2/issues/28393)

<!-- ENGCOM-7343 -->

* Se han cambiado los nombres de las pruebas para que cumplan las convenciones MFTF. _Corrección enviada por Evgeny Levinsky en la solicitud de extracción [27839](https://github.com/magento/magento2/pull/27839)_. [GitHub-28305](https://github.com/magento/magento2/issues/28305)

#### Nuevos grupos de acción

<!-- ENGCOM-7991 -->

* `StorefrontCheckoutClickNextButtonActionGroup` _Corrección enviada por Oleh Usik en la solicitud de extracción [29472](https://github.com/magento/magento2/pull/29472)_. [GitHub-29539](https://github.com/magento/magento2/issues/29539)

<!-- ENGCOM-7857 -->

* `AdminProductFormSaveActionGroup` _Corrección enviada por Oleh Usik en la solicitud de extracción [29142](https://github.com/magento/magento2/pull/29142)_. [GitHub-29292](https://github.com/magento/magento2/issues/29292)

<!-- ENGCOM-7928 -->

* `AdminSaveCategoryActionGroup` _Corrección enviada por Oleh Usik en la solicitud de extracción [28993](https://github.com/magento/magento2/pull/28993)_. [GitHub-29388](https://github.com/magento/magento2/issues/29388)

<!-- ENGCOM-7790 -->

* `AdminProductGridSectionClickFirstRowActionGroup` _Corrección enviada por Oleh Usik en la solicitud de extracción [29000](https://github.com/magento/magento2/pull/29000)_. [GitHub-29295](https://github.com/magento/magento2/issues/29295)

<!-- ENGCOM-7591 -->

* `AdminProductFormCategoryExistInCategoryListActionGroup` y `AdminProductFormCategoryNotExistInCategoryListActionGroup` _Corrección enviada por Alexander Steshuk en la solicitud de extracción [28287](https://github.com/magento/magento2/pull/28287)_. [GitHub-28392](https://github.com/magento/magento2/issues/28392)

<!-- ENGCOM-7867 -->

* `AdminExpandCategoryTreeActionGroup` _Corrección enviada por Oleh Usik en la solicitud de extracción [29133](https://github.com/magento/magento2/pull/29133)_. [GitHub-29289](https://github.com/magento/magento2/issues/29289)

<!-- ENGCOM-7881 -->

* `AdminTaxRateGridOpenPageActionGroup` _Corrección enviada por Oleh Usik en la solicitud de extracción [29007](https://github.com/magento/magento2/pull/29007)_. [GitHub-29281](https://github.com/magento/magento2/issues/29281)

<!-- ENGCOM-7868 -->

* `AdminNavigateNewCustomerActionGroup` _Corrección enviada por Oleh Usik en la solicitud de extracción [29134](https://github.com/magento/magento2/pull/29134)_. [GitHub-29287](https://github.com/magento/magento2/issues/29287)

#### Nuevas pruebas

<!-- ENGCOM-7600 -->

* Se ha añadido la prueba para eliminar una página de CMS como usuario administrador. _Corrección enviada por Dmitry Tsymbol en la solicitud de extracción [28112](https://github.com/magento/magento2/pull/28112)_. [GitHub-28202](https://github.com/magento/magento2/issues/28202)

* Se agregó la prueba `StorefrontShareCustomerWishlistActionGroup` para el uso compartido de listas de deseos de clientes con direcciones de correo electrónico no válidas. Se ha refactorizado la prueba existente para el uso compartido de listas de deseos (`StorefrontShareWishlistEntityTest`). `StorefrontCustomerShareWishlistActionGroup` se ha desaprobado.

<!-- ENGCOM-7682 -->

* Se agregó una prueba para comprobar la implementación de la configuración **Solo X del umbral izquierdo**. _Corrección enviada por Oleh Usik en la solicitud de extracción [27549](https://github.com/magento/magento2/pull/27549)_. [GitHub-28755](https://github.com/magento/magento2/issues/28755)

### Newsletter

<!-- MC-34714-->

* Exportar la lista de suscriptores de la newsletter mediante la opción `Excel XML` ahora resulta en la exportación de todas las filas según lo esperado. Anteriormente, los datos exportados solo incluían el valor de paginación de la página, no todas las filas.

<!-- ENGCOM-7522-->

* Los correos electrónicos de suscripción a la newsletter ahora utilizan las mismas etiquetas de HTML que otros correos electrónicos relacionados con la newsletter. _Corrección enviada por Paweł Tylek en la solicitud de extracción [27357](https://github.com/magento/magento2/pull/27357)_. [GitHub-28166](https://github.com/magento/magento2/issues/28166)

<!-- ENGCOM-7788-->

* Agrega una prueba para eliminar el suscriptor del boletín informativo como usuario administrador. _Corrección enviada por Dmitry Tsymbol en la solicitud de extracción [28972](https://github.com/magento/magento2/pull/28972)_. [GitHub-29032](https://github.com/magento/magento2/issues/29032)

<!-- ENGCOM-7739-->

* Se han añadido pruebas para la suscripción al boletín informativo de los invitados con una opción no permitida en las instrucciones de configuración. Esta prueba reemplaza a `VerifyRegistredLinkDisplayedForGuestSubscriptionNoTest` y `StorefrontCreateNewSubscriberActionGroup` obsoletos. _Corrección enviada por Dmitry Tsymbol en la solicitud de extracción [28872](https://github.com/magento/magento2/pull/28872)_. [GitHub-29039](https://github.com/magento/magento2/issues/29039)

### Pedidos

<!-- ENGCOM-7858-->

* El `GetAssetIdByContentFieldInterface` y su implementación en módulos de `MediaContent` ahora permiten que la integración de Adobe Stock amplíe la funcionalidad de filtro `MediaGallery`. _Corrección enviada por Gabriel da Gama en la solicitud de extracción [29058](https://github.com/magento/magento2/pull/29058)_. [GitHub-1464](https://github.com/magento/magento2/issues/1464)

<!-- ENGCOM-7885-->

* Los valores `CustomerAddressI` de un cliente recién creado ahora se validan entre comillas. _Corrección enviada por Andrii Kalinich en la solicitud de extracción [29139](https://github.com/magento/magento2/pull/29139)_. [GitHub-28793](https://github.com/magento/magento2/issues/28793)

<!-- ENGCOM-7798-->

* El estado del pedido de una nota de abono con un total cero es ahora `Closed`. Anteriormente, la aplicación informaba de su estado de pedido como `Complete`. _Corrección enviada por Andrii Kalinich en la solicitud de extracción [29023](https://github.com/magento/magento2/pull/29023)_. [GitHub-22762](https://github.com/magento/magento2/issues/22762)

### Page Builder

<!-- ENGCOM-7918-->

* Los atributos de producto `description` y `short_description` se han reorganizado para adaptarse mejor a los cambios planificados en el ensayo de contenido de Page Builder. _Corrección enviada por Matt Walters en la solicitud de extracción [29238](https://github.com/magento/magento2/pull/29238)_. [GitHub-543](https://github.com/magento/magento2-page-builder/issues/543)

### Métodos de pago

<!-- MC-34363-->

* La aplicación ahora muestra un mensaje que te pide que introduzcas los datos obligatorios de la tarjeta de crédito al hacer clic en **Enviar** para obtener una orden de administrador sin introducir información de pago válida. Anteriormente, el validador de tarjetas de Braintree no generaba un error cuando los campos de entrada de pago no eran válidos y la página estaba inactiva.

<!-- MC-33494-->

* Ahora puede cambiar el método de envío de un pedido que cree desde el Administrador para un cliente cuya cuenta tenga una tarjeta de crédito almacenada (Braintree). Anteriormente, al seleccionar un método de envío diferente, la tarjeta almacenada no se seleccionaba y la aplicación no realizaba el pedido.

#### PayPal

<!-- MC-33879-->

* La página de revisión de pedidos del flujo de trabajo de cierre de compra ahora muestra el importe de envío correcto para PayPal a través de los pedidos de Braintree para los que se ha cambiado el método de envío durante el cierre de compra. Anteriormente, cuando un cliente cambiaba el método de envío en la página de revisión de pedidos de PayPal del flujo de trabajo de cierre de compra, la aplicación no actualizaba el total del pedido con el método correcto.

<!-- MC-34152-->

* Los comerciantes ahora pueden cancelar correctamente los pedidos autorizados mediante PayPal. Anteriormente, la aplicación no cancelaba la solicitud y mostraba este error: `Declined: 10601-Authorization has expired`.

<!-- MC-33330-->

* La aplicación ya no vacía el carro de compras cuando se cancela un pedido cerrando la ventana emergente de pago de PayPal tras completar otro pedido por primera vez.

### Rendimiento

* Tres nuevos ajustes de configuración admiten una reducción en el consumo de CPU en cola de consumidor. Estos parámetros opcionales proporcionan un mayor control sobre los consumidores y ahorran recursos de servidor. Consulte [Configurar colas de mensajes](https://developer.adobe.com/commerce/php/development/components/message-queues/configuration/) para obtener una descripción de los parámetros `maxIdleTime`, `sleep` y `onlySpawnWhenMessageAvailable`.

<!-- MC-31617-->

* La configuración de la lista de complementos ahora se genera durante la ejecución del comando `di:compile`. Esta información de configuración se escribe en carpetas de metadatos generadas en función del ámbito. Anteriormente, esta información se almacenaba en la caché. Las mejoras de rendimiento resultantes incluyen:

   * El tamaño de la caché de red ha disminuido
   * Se ha mejorado el tiempo de ejecución de muchos escenarios.

<!-- ENGCOM-7290-->

* La aplicación ahora carga el widget de deslizador adecuado bajo demanda, lo que ha mejorado la carga de páginas. La personalización del widget de deslizador táctil se ha movido a un archivo independiente para que solo se pueda cargar en dispositivos compatibles. El tipo de widget de control deslizante adecuado ahora solo se carga cuando el enlace de intervalo se utiliza realmente en la página. _Corrección enviada por Mateusz Krzeszowiak en la solicitud de extracción [27616](https://github.com/magento/magento2/pull/27616)_. [GitHub-28807](https://github.com/magento/magento2/issues/28807)

<!-- MC-33107-->

* Se ha mejorado el rendimiento del cierre de compra con varios pedidos simultáneos.

<!-- MC-25062-->

* Los interbloqueos ya no se producen cuando el proceso de importación ejecuta una inserción masiva y el proceso de reindexación ejecuta simultáneamente una inserción grande desde la selección. Anteriormente, la aplicación mostraba este error: `PDOException: SQLSTATE[40001]: Serialization failure: 1213 Deadlock found when trying to get lock`. [GitHub-8933](https://github.com/magento/magento2/issues/8933)

### Autorizaciones de devolución de mercancía (RMA)

<!-- MC-35984-->

* La página Devoluciones ahora funciona según lo esperado después de crear una etiqueta de envío para una Autorización de devolución de mercancía (RMA). Anteriormente, los comerciantes no podían interactuar con ningún elemento de página en la página Devoluciones después de crear una etiqueta de envío para una autorización de devolución de material. Este era un problema conocido de la versión 2.4.0 y `MC-35984-2.4.0-CE-composer.patch` solucionó el problema de la versión 2.4.0.

<!-- MC-35826-->

* La aplicación ahora muestra un mensaje de error informativo o todos los productos disponibles cuando un administrador con permisos restringidos intenta crear una devolución para los productos que ya no están en el ámbito del sitio web asignado. Anteriormente, la aplicación mostraba una página en blanco.

### Críticas

<!-- MC-33405-->

* Se ha agregado una clave única para `entity_pk_value-entity_type-store_id` a la tabla `review_entity_summary`, lo que impide la creación de filas duplicadas para el mismo id. de producto (`entity_pk_value`). Anteriormente, esta falta de clave única provocaba la duplicación de filas para el mismo ID de producto y errores de SQL.

### Ventas

<!-- MC-35675-->

* La aplicación ya no asigna el estado `Complete` después de la facturación a un pedido que no requiere pago alguno.

<!-- MC-35888-->

* El correo electrónico Nuevo envío generado por la API de REST ahora contiene la misma información de envío y cliente que los envíos creados manualmente desde el administrador. Anteriormente, este correo electrónico no contenía el nombre del cliente, la información de seguimiento, los productos pedidos y otra información de pedidos.

<!-- MC-35837-->

* Los nombres de usuario invitados ahora están visibles como se espera en los correos electrónicos relacionados con las facturas y los envíos cuando los correos electrónicos se cargan o personalizan desde el administrador.

<!-- MC-35707-->

* La factura de PDF ahora se traduce al idioma de la vista de tienda donde se realizó el pedido. Anteriormente, la factura de PDF se traducía al idioma del administrador.

<!-- MC-35858-->

* Ahora puede emitir un reembolso según lo esperado desde la página de nota de abono. [GitHub-29014](https://github.com/magento/magento2/issues/29014)

<!-- MC-35353-->

* Los nombres de regiones localizados que se muestran en la página de pedidos de tiendas ahora se traducen correctamente. Anteriormente, el nombre de región no se basaba en la configuración regional especificada a menos que se editara en el Administrador.

<!-- MC-35633-->

* Los envíos creados a través del extremo POST `/rest/V1/shipment` ahora actualizan correctamente los pedidos. Anteriormente, la aplicación creaba un envío, pero el estado del envío permanecía en el estado de procesamiento.

<!-- ENGCOM-7639 -->

* Ahora, las notas de abono muestran el método de pago derivado del ámbito del almacén en el que se realizó el pedido. Anteriormente, las notas de abono mostraban el nombre tal como se definía en el ámbito de almacenamiento predeterminado. _Corrección enviada por Ledian Hymetllari en la solicitud de extracción [27582](https://github.com/magento/magento2/pull/27582)_. [GitHub-27570](https://github.com/magento/magento2/issues/27570)

### Buscar {#search-heading}

<!-- MC-31304-->

* Ahora puede buscar productos por atributo desde la vista Administrador del cliente mediante QuickSearch. Anteriormente, se producía una excepción en la página de resultados de búsqueda del catálogo.

<!-- MC-32518-->

* La aplicación ahora muestra los productos configurables en la página de categoría como se espera después de agregar un atributo de producto.

<!-- MC-33952-->

* Los resultados de Elasticsearch ahora incluyen los valores correctos para las opciones de atributos de cada vista de tienda. Si un atributo de selección múltiple o desplegable tiene un valor de opción diferente en la vista de almacén no predeterminada que en la vista de almacén predeterminada, Elasticsearch ahora indexa ese valor o devuelve el producto con ese valor en los resultados. Anteriormente, Elasticsearch no indexaba ese valor ni devolvía el producto con ese valor en los resultados.

<!-- MC-35013-->

* La búsqueda por SKU ahora funciona según lo esperado en la búsqueda avanzada con Elasticsearch. Anteriormente, al intentar buscar por SKU, la aplicación mostraba este mensaje de error: `We can't find any items matching these search criteria. Modify your search`.

<!-- ENGCOM-7222-->

* La búsqueda avanzada ya no permite que los compradores filtren precios negativos. _Corrección enviada por Rohan Hapani en la solicitud de extracción [27359](https://github.com/magento/magento2/pull/27359)_. [GitHub-27358](https://github.com/magento/magento2/issues/27358)

<!-- ENGCOM-7917-->

* Los valores de ámbito ahora se restablecen según lo esperado en el formulario Nuevo grupo de sinónimos. _Corrección enviada por Sathish Subramanian en la solicitud de extracción [29206](https://github.com/magento/magento2/pull/29206)_. [GitHub-28947](https://github.com/magento/magento2/issues/28947)

### Envío

<!-- MC-34734-->

* La aplicación ahora calcula correctamente las tarifas de la tabla de envío después de la actualización. Anteriormente, las tarifas de envío se calculaban en función del precio neto, que excluía el IVA.

<!-- MC-35955-->

* Los clientes ahora pueden eliminar correctamente los puntos de recompensa en la página de revisión de pedidos del flujo de trabajo de cierre de compra al realizar el cierre de compra con varias direcciones. Anteriormente, la aplicación arrojaba un error `404 Not Found` cuando un cliente hacía clic en el botón **Quitar** para quitar puntos de cualquier dirección. Este era un problema conocido en 2.4.0.

<!-- MC-33737-->

* La aplicación ahora muestra las tarifas de envío en la moneda correcta en el flujo de trabajo de cierre de compra para pedidos que especifican FedEx como método de envío.

<!-- MC-33267-->

* Los PDF de varias páginas de etiquetas de envío para pedidos enviados por UPS ahora muestran el recuento correcto.

<!-- MC-35514-->

* Se han resuelto problemas con los componentes de JavaScript de la página Crear paquetes. Anteriormente, la aplicación no mostraba la casilla de verificación **Crear etiqueta de envío** en esta página y no se podía crear una etiqueta de envío para un pedido existente.

### Sitemap

<!-- ENGCOM-7924-->

* El mapa del sitio de `robots.txt` ahora es específico de la tienda. _Corrección enviada por Vadim Malesh en la solicitud de extracción [29331](https://github.com/magento/magento2/pull/29331)_. [GitHub-28901](https://github.com/magento/magento2/issues/28901)

<!-- MC-34617-->

* Los valores codificados ahora se escapan correctamente en el archivo `sitemap.xml`. Anteriormente, cuando se incluían caracteres codificados en el nombre de un producto o en el título de una imagen, el mapa del sitio generado no era válido.

### Ensayo

<!-- MC-36458-->

* La etiqueta de atributo **Establecer producto como nuevo** ahora aparece según lo esperado en las páginas de detalles y actualización programada de un producto.

<!-- MC-34484-->

* Ahora puede previsualizar correctamente la programación de ensayo de un bloque de CMS. Anteriormente, la aplicación arrojaba un error grave.

<!-- MC-33789-->

* Ahora puede acceder a la página Vista previa de CMS al editar una página de CMS con una actualización programada y reasignarla del almacén predeterminado a otro almacén. Anteriormente, la aplicación arrojaba un error 404 al hacer clic en el vínculo de vista previa.

<!-- MC-33572-->

* Ahora puede usar POST `/V1/products/special-price` para actualizar el precio especial de un producto sin especificar un valor de parámetro `price_to`. Anteriormente, no se pudo establecer la actualización de precios sin el parámetro `price_to` especificado.

### Almacenar

<!-- MC-35853-->

* La eliminación de una vista de almacén creada anteriormente ya no provoca un error en las implementaciones con una configuración de base de datos dividida. Anteriormente, la aplicación arrojaba una excepción.

<!-- MC-32634-->

* Ahora puede exportar `config.php` y el código de sitio web predeterminado de un sitio web para instalar y configurar la aplicación en un segundo sitio web en una implementación de varios sitios web. Anteriormente, la tienda y la vista predeterminadas desaparecían después de la exportación y se producían errores en la tienda.

### Swagger

<!-- ENGCOM-7720-->

* Ahora puede generar un token de cliente con Swagger. Anteriormente, Swagger no generaba un código de respuesta cuando se escribía información de acceso de cliente válida y la aplicación mostraba este error: `The account sign-in was incorrect or your account is disabled temporarily. Please wait and try again later`. _Corrección enviada por Vadim Malesh en la solicitud de extracción [28822](https://github.com/magento/magento2/pull/28822)_. [GitHub-27098](https://github.com/magento/magento2/issues/27098)

### Muestras

<!-- ENGCOM-7845-->

* Los productos configurables con muestras ahora muestran precios de nivel cuando un comprador hace clic en **Editar** en el carro de compras. Anteriormente, la aplicación no mostraba los precios de nivel en el carro de compras antes del cierre de compra. _Corrección enviada por Sathish Subramanian en la solicitud de extracción [29137](https://github.com/magento/magento2/pull/29137)_. [GitHub-28270](https://github.com/magento/magento2/issues/28270)

<!-- MC-33147-->

* La aplicación ahora muestra los precios de nivel según lo esperado para las variaciones de productos configurables.

### TargetRule

<!-- MC-36162-->

* Se ha mejorado el rendimiento de la página de producto en las siguientes condiciones:

   * El módulo de regla de destino está instalado
   * Se ha implementado la funcionalidad de producto vinculada (productos relacionados, de mejora de ventas y de venta cruzada)

### Impuestos

<!-- MC-36049-->

* La aplicación ya no muestra un atributo de impuesto de producto fijo en la tienda de un producto después de que un comerciante lo haya desasignado del conjunto de atributos del producto.

### Prueba

<!-- ENGCOM-7874-->

* Los errores de PHPUnit 9 se han corregido en las pruebas unitarias. _Corrección enviada por Anton Evers en la solicitud de extracción [29244](https://github.com/magento/magento2/pull/29244)_. [GitHub-29329](https://github.com/magento/magento2/issues/29329)

<!-- ENGCOM-7995-->

* Se han añadido pruebas unitarias para aprobar un pedido de compra que se ha realizado con un descuento que ha caducado desde entonces. Esto colocará un pedido en el importe total y no actualizará el total del pedido de compra. _Corrección enviada por Joan He en la solicitud de extracción [18](https://github.com/magento/partners-magento2-infrastructure/pull/18)_. [GitHub-204](https://github.com/magento/partners-magento2b2b/issues/204)

<!-- ENGCOM-8003-->

* `SynchronizeFilesInterface` ahora está cubierto por pruebas de integración. _Corrección enviada por jmonteros422 en la solicitud de extracción [29493](https://github.com/magento/magento2/pull/29493)_. [GitHub-1742](https://github.com/magento/magento2/issues/1742)

<!-- ENGCOM-8009-->

* Se ha agregado una función a `\Magento\TestFramework\TestCase\WebapiAbstract` que permite la comparación de matrices anidadas grandes de resultados esperados y reales en pruebas y permite a los probadores ignorar claves irrelevantes en el resultado real. _Corrección enviada por Jekabs en la solicitud de extracción [29458](https://github.com/magento/magento2/pull/29458)_. [GitHub-29498](https://github.com/magento/magento2/issues/29498)

<!-- ENGCOM-7887 -->

* Se corrigió la inversión del valor esperado con el valor real en `app/code/Magento/Newsletter/Test/Unit/Model/SubscriptionManagerTest.php`. _Corrección enviada por Lukasz Bajsarowicz en la solicitud de extracción [29271](https://github.com/magento/magento2/pull/29271)_. [GitHub-29283](https://github.com/magento/magento2/issues/29283)

<!-- ENGCOM-7886 -->

* Se ha reemplazado el uso de `ObjectManager` para crear instancias de clases durante la prueba por la nueva palabra clave en las pruebas unitarias. _Corrección enviada por Lukasz Bajsarowicz en la solicitud de extracción [29272](https://github.com/magento/magento2/pull/29272)_. [GitHub-29346](https://github.com/magento/magento2/issues/29346)

<!-- ENGCOM-7593 -->

* Se ha agregado cobertura de prueba para estos casos de la mutación `updateCustomer`: fecha de nacimiento no válida, dirección de correo electrónico no válida y apellidos de cliente vacío. _Corrección enviada por Alexander Taranovsky en la solicitud de extracción [28304](https://github.com/magento/magento2/pull/28304)_. [GitHub-28394](https://github.com/magento/magento2/issues/28394)

<!-- MC-30844-->

* El cliente de GraphQL `ApiFunctional TestFramework` ahora analiza correctamente los encabezados. [GitHub-26425](https://github.com/magento/magento2/issues/26425)

### Tema

<!-- MC-34397-->

* Los temas que se agregan en las reglas del agente de usuario ahora se ven afectados como se espera cuando se ejecuta `bin/magento catalog:images:resize`. Anteriormente, solo los temas asignados a las tiendas se veían afectados cuando se ejecutaba `bin/magento catalog:images:resize`.

### Traducción y configuraciones regionales

<!-- MC-20372-->

* La aplicación ya no genera un error cuando un administrador cambia el campo **Date** durante la creación del producto Administrador o lo guarda cuando la configuración regional del Administrador es china o japonesa. [GitHub-24696](https://github.com/magento/magento2/issues/24696)

<!-- ENGCOM-7829-->

* La aplicación ahora comprueba el área (front-end o `adminhtml`) antes de procesar el marcado de traducción en línea. Anteriormente, si se realizaba una llamada de API a `/rest/V1/integration/admin/token` con credenciales incorrectas mientras la traducción en línea estaba habilitada, se incluía el marcado de traducción en línea alrededor del mensaje de error en la respuesta de la API. _Corrección enviada por Zach Nanninga en la solicitud de extracción [28856](https://github.com/magento/magento2/pull/28856)_. [GitHub-28656](https://github.com/magento/magento2/issues/28656)

<!-- ENGCOM-7536-->

* Se han agregado regiones búlgaras a la tabla `directory_country_region`. _Corrección enviada por Nikola Lardev en la solicitud de extracción [27957](https://github.com/magento/magento2/pull/27957)_. [GitHub-28215](https://github.com/magento/magento2/issues/28215)

<!-- ENGCOM-7535-->

* Ahora se pueden traducir los títulos y botones de los modelos de Administración **Clientes** > **Agregar nueva dirección** y **Editar producto** > **Inventario avanzado**. _Corrección enviada por Sathish Subramanian en la solicitud de extracción [28174](https://github.com/magento/magento2/pull/28174)_. [GitHub-28201](https://github.com/magento/magento2/issues/28201)

<!-- ENGCOM-7521-->

* El término FPT ahora se puede traducir en Administradores **Tiendas** > **Configuración** > **Ventas** > **Impuestos** > **Impuestos fijos de productos**. _Corrección enviada por Vadim Malesh en la solicitud de extracción [28108](https://github.com/magento/magento2/pull/28108)_. [GitHub-5477](https://github.com/magento/magento2/issues/5477)

<!-- ENGCOM-7631 -->

* La etiqueta de botón **Enviar aquí** del modal de la dirección de envío del flujo de trabajo de cierre de compra se ha cambiado para que coincida con el caso de camello utilizado para otros botones. Este caso ahora coincide con el que se utiliza en los archivos de traducción. Anteriormente, debido a la discrepancia de mayúsculas y minúsculas, esta etiqueta no se traducía. _Corrección enviada por WK en la solicitud de extracción [28547](https://github.com/magento/magento2/pull/28547)_. [GitHub-28685](https://github.com/magento/magento2/issues/28685)

### IU

<!-- ENGCOM-7514-->

* El vínculo de política de privacidad y cookies del pie de página ahora se muestra como un vínculo activo cuando se muestra la página Política de privacidad y cookies. _Corrección enviada por Sathish Subramanian en la solicitud de extracción [28004](https://github.com/magento/magento2/pull/28004)_. [GitHub-27985](https://github.com/magento/magento2/issues/27985)

<!-- MC-36260-->

* Se ha corregido la desalineación del cursor en el área de texto Comentarios de factura de la factura asociada con un pedido que ha seleccionado de Administración **Ventas** > **Pedidos**.

<!-- MC-36044-->

* La página Crear nuevo pedido ahora muestra los botones **Agregar productos por SKU** y **Agregar productos** según lo esperado.

<!-- MC-35974-->

* La aplicación ahora muestra correctamente la página Editar revisión cuando hay una clasificación de productos disponible para el producto seleccionado.

<!-- MC-35475-->

* La aplicación ahora muestra correctamente la página de edición de administración del cliente en un iPhone que ejecuta Safari.

<!-- MC-35370-->

* Se ha corregido el desplazamiento innecesario en la página Crear nuevo pedido.

<!-- MC-35345-->

* Al hacer clic directamente en el botón **Exportar tasas de impuestos** de la página Agregar nueva regla fiscal (**Tiendas** > **Reglas fiscales**), ahora se descarga el archivo `tax_rates.csv` según lo esperado. Anteriormente, los comerciantes tenían que hacer clic en el borde del botón **Exportar tasas de impuestos**. Este era un problema conocido en 2.4.0.

<!-- MC-35313-->

* El botón **Agregar selecciones a mi carro** en la parte inferior del carro de compras ahora funciona según lo esperado. Este era un problema conocido en 2.4.0.

<!-- MC-35296-->

* El botón **Actualizar** de la sección **Productos vistos recientemente** de la página Actividades del cliente ahora funciona según lo esperado. Anteriormente, al hacer clic en **Actualizar**, la lista de productos no se actualizaba y la página se desplazaba.

<!-- MC-35412-->

* La aplicación ahora muestra correctamente el icono de calendario utilizado para seleccionar la fecha de nacimiento de un cliente en la pestaña Condiciones de **Clientes** > **Segmentos** > **Agregar segmento**.

<!-- MC-35658-->

* La sección de resumen de cierre de compra del flujo de trabajo de cierre de compra ya no parpadea cuando un comprador se desplaza por esta página en Internet Explorer 11.x.

<!-- MC-34602-->

* La aplicación ahora muestra correctamente el widget Ordenar por SKU en la página Categoría de la tienda. Anteriormente, el código HTML de este widget no se representaba y la aplicación no mostraba el vínculo **Cargar una lista de SKU**.

<!-- MC-37444-->

* Los componentes de la interfaz de usuario que se deshabilitaron usando `this.disabled(true)` ya no aparecen en la tienda. [GitHub-29098](https://github.com/magento/magento2/issues/29098)

<!-- ENGCOM-7264-->

* La aplicación ahora muestra correctamente el widget de productos vistos recientemente en la vista móvil. _Corrección enviada por Tu Nguyen en la solicitud de extracción [27572](https://github.com/magento/magento2/pull/27572)_. [GitHub-27058](https://github.com/magento/magento2/issues/27058)

<!-- ENGCOM-7575-->

* El cambio de posición de un producto respecto al administrador ahora se refleja en la posición del producto en la tienda. _Corrección enviada por Oleg Aleksin en la solicitud de extracción [28150](https://github.com/magento/magento2/pull/28150)_. [GitHub-28149](https://github.com/magento/magento2/issues/28149)

<!-- ENGCOM-7507-->

* El estilo del formulario de inicio de sesión ahora es coherente con el estilo de otros formularios de la temática En blanco. Se han eliminado estilos innecesarios que establecen el ancho de los campos de entrada de ajuste de control de contenedor. _Corrección enviada por Tu Nguyen en la solicitud de extracción [28084](https://github.com/magento/magento2/pull/28084)_. [GitHub-28059](https://github.com/magento/magento2/issues/28059)

<!-- ENGCOM-7578-->

* El botón **Aceptar** de la ventana emergente de confirmación para eliminar el producto del minicarrito ahora se comporta según lo esperado. _Corrección enviada por Tu Nguyen en la solicitud de extracción [28083](https://github.com/magento/magento2/pull/28083)_. [GitHub-27095](https://github.com/magento/magento2/issues/27095)

<!-- ENGCOM-7456-->

* Los elementos de la galería de productos ya no parpadean al cargar la página. _Corrección enviada por Mateusz Krzeszowiak en la solicitud de extracción [27871](https://github.com/magento/magento2/pull/27871)_. [GitHub-28339](https://github.com/magento/magento2/issues/28339)

<!-- ENGCOM-8007-->

* La clase CSS que controla el ancho de campo ahora se aplica como se espera para el elemento Hora de inicio en todo el administrador. _Corrección enviada por Shankar Konar en la solicitud de extracción [29511](https://github.com/magento/magento2/pull/29511)_. [GitHub-29496](https://github.com/magento/magento2/issues/29496)

<!-- ENGCOM-7992-->

* La etiqueta de texto Términos y condiciones ahora puede mostrar correctamente cadenas de texto más largas. _Corrección enviada por Bartłomiej Szubert en la solicitud de extracción [29413](https://github.com/magento/magento2/pull/29413)_. [GitHub-24060](https://github.com/magento/magento2/issues/24060)

<!-- ENGCOM-7967-->

* El título de la página de error de pedido se ha reescrito para garantizar su precisión. Anteriormente, cuando un comprador cancelaba un pedido, la aplicación mostraba una página con este título: `We received your order!`. _Corrección enviada por Angelo Romano en la solicitud de extracción [29410](https://github.com/magento/magento2/pull/29410)_. [GitHub-29416](https://github.com/magento/magento2/issues/29416)

<!-- ENGCOM-7770-->

* El número total de artículos cancelados en la página de vista de pedidos cancelados ahora se identifica correctamente en la página de vista de pedidos cancelados. Anteriormente, este campo se denominaba **Vencimiento total**. _Corrección enviada por Madhu Rajawat en la solicitud de extracción [27516](https://github.com/magento/magento2/pull/27516)_. [GitHub-26191](https://github.com/magento/magento2/issues/26191)

<!-- ENGCOM-7579 -->

* El botón de alternancia en la página Crear producto configurable ahora funciona según lo esperado. _Corrección enviada por Tu Nguyen en la solicitud de extracción [28032](https://github.com/magento/magento2/pull/28032)_. [GitHub-22702](https://github.com/magento/magento2/issues/22702)

<!-- ENGCOM-7579 -->

* El icono de bloque de propiedades de atributo avanzadas de la página Propiedades de atributo avanzadas ahora se comporta como se espera. _Corrección enviada por Tu Nguyen en la solicitud de extracción [28032](https://github.com/magento/magento2/pull/28032)_. [GitHub-26022](https://github.com/magento/magento2/issues/26022)

<!-- ENGCOM-7619 -->

* La sección Administración de la página de configuración del sistema ahora se expande para mostrar los campos obligatorios como se espera cuando intenta guardar los ajustes de configuración de un módulo nuevo. _Corrección enviada por Bartłomiej Szubert en la solicitud de extracción [28285](https://github.com/magento/magento2/pull/28285)_. [GitHub-26427](https://github.com/magento/magento2/issues/26427)

<!-- ENGCOM-7826 -->

* Se corrigió el comportamiento de la lupa cuando el modo está establecido en `inside`. _Corrección enviada por Sean van Zuidam en la solicitud de extracción [29077](https://github.com/magento/magento2/pull/29077)_. [GitHub-29076](https://github.com/magento/magento2/issues/29076)

<!-- ENGCOM-7010 -->

* Se ha corregido el ancho del campo de entrada, distraídamente largo, que se producía cuando un comprador escribía una dirección de correo electrónico no válida en el campo de suscripción del pie de página. _Corrección enviada por Dipesh Rangani en la solicitud de extracción [27106](https://github.com/magento/magento2/pull/27106)_. [GitHub-27099](https://github.com/magento/magento2/issues/27099)

<!-- ENGCOM-7972 -->

* Ya no aparece un error `Uncaught ReferenceError` en la consola de desarrollo al agregar una etiqueta nueva y mover el cursor del ratón sobre ella. _Corrección enviada por Nazar Klovanych en la solicitud de extracción [29392](https://github.com/magento/magento2/pull/29392)_. [GitHub-1700](https://github.com/magento/magento2/issues/1700)

<!-- ENGCOM-7635-->

* Se eliminó una prueba `AdminAnalytics` que no se usa (`TrackingScriptTest`). _Corrección enviada por Lukasz Bajsarowicz en la solicitud de extracción [28605](https://github.com/magento/magento2/pull/28605)_. [GitHub-28850](https://github.com/magento/magento2/issues/28850)

<!-- ENGCOM-7142 -->

* Se han resuelto los problemas con la serialización y la no serialización de propiedades estáticas al ejecutar pruebas consecutivas. _Corrección enviada por Pavel Bystritsky en la solicitud de extracción [26175](https://github.com/magento/magento2/pull/26175)_. [GitHub-28319](https://github.com/magento/magento2/issues/28319), [GitHub-29313](https://github.com/magento/magento2/issues/29313)

### Reescrituras de URL

<!-- MC-34483-->

* Al mover una vista de tienda a otro sitio web, las direcciones URL ya no se restablecen. Anteriormente, la aplicación regeneraba incorrectamente CMS y reescribía la URL del producto.

* Ahora puede previsualizar correctamente la programación de ensayo de un bloque de CMS. Anteriormente, la aplicación arrojaba un error grave.

<!-- MC-33028-->

* La aplicación ahora conserva las reescrituras de URL del catálogo existentes según lo esperado cuando se asigna una vista de tienda a una tienda diferente. Anteriormente, la aplicación eliminaba las reescrituras de URL específicas del almacén.

### Barniz

<!-- ENGCOM-7761-->

* El reinicio del barniz ya no provoca errores 503. _Corrección enviada por Ihor Sviziev en la solicitud de extracción [28137](https://github.com/magento/magento2/pull/28137)_. [GitHub-24353](https://github.com/magento/magento2/issues/24353)

### Bóveda

<!-- MC-34674-->

* La aplicación ya no guarda los números de la tarjeta de crédito cuando la casilla de verificación **Guardar para uso posterior** de la sección de pago del flujo de trabajo de pago no está seleccionada.

### Visual Merchandiser

<!-- MC-35574-->

* La aplicación ahora muestra las existencias de origen en lugar de las existencias de producto predeterminadas cuando se ordenan los productos en Visual Merchandiser y el inventario está habilitado.

### Marco de API web

<!-- MC-36084-->

* Las facturas creadas con REST ahora incluyen información de tarjeta regalo similar a las facturas creadas en el Administrador. Anteriormente, al usar POST `/V1/order/:id/invoice` para facturar el pedido, no se mostraba el código de tarjeta regalo ni el importe de tarjeta regalo aplicado.

<!-- MC-35838-->

* Los comerciantes con varios sitios web ahora pueden utilizar la API de REST para crear y actualizar productos, preservando al mismo tiempo la herencia de imágenes y funciones de imagen. Anteriormente, cuando un comerciante utilizaba la API de REST para crear y actualizar productos, y se actualizaba un producto para la vista de tienda, y las funciones de imagen predeterminadas se cargaban y guardaban para esa vista de tienda. Como resultado, las funciones de imagen de vista de tienda dejaron de heredar del ámbito predeterminado después de la actualización.

<!-- MC-36419-->

* Una cuenta de usuario de integración sin ámbito ahora puede acceder a un recurso a través de la API de REST cuando los permisos de recursos permiten el acceso.

<!-- MC-35975-->

* Los filtros de criterios de búsqueda ahora funcionan según lo esperado para los atributos de producto que se utilizan durante la creación de un producto configurable. [GitHub-29126](https://github.com/magento/magento2/issues/29126)

<!-- ENGCOM-7785 -->

* El identificador del grupo de clientes ahora se valida para las solicitudes POST `/rest/V1/customers`. Anteriormente, la aplicación no mostraba un mensaje de error cuando se usaba un `group_id` no válido en estas solicitudes. _Corrección enviada por Vadim Malesh en la solicitud de extracción [28903](https://github.com/magento/magento2/pull/28903)_. [GitHub-28064](https://github.com/magento/magento2/issues/28064)

<!-- ENGCOM-7611 -->

* Las sesiones PHP no se crean de forma predeterminada para llamadas REST anónimas. Anteriormente, las sesiones se iniciaban incluso cuando eran innecesarias. _Corrección enviada por Maciej Pawłowski en la solicitud de extracción [26032](https://github.com/magento/magento2/pull/26032)_. [GitHub-7213](https://github.com/magento/magento2/issues/7213)

<!-- ENGCOM-7612 -->

* El uso de varios extremos REST para actualizar pedidos que contienen opciones personalizadas ya no elimina la información de las opciones personalizadas. Anteriormente, los valores de `info_buyRequest` se eliminaban. _Corrección enviada por Vadim Malesh en la solicitud de extracción [28483](https://github.com/magento/magento2/pull/28483)_. [GitHub-22431](https://github.com/magento/magento2/issues/22431)

<!-- ENGCOM-7665 -->

* El uso de GET `V1/customers/me` ahora respeta la configuración de **Compartir cuentas de cliente** (Administración **Tiendas** > **Configuración** > **Clientes** > **Configuración de cliente** > **Opciones de uso compartido de cuentas**) al recuperar información de usuario. _Corrección enviada por Pavel Bystritsky en la solicitud de extracción [28213](https://github.com/magento/magento2/pull/28213)_. [GitHub-26089](https://github.com/magento/magento2/issues/26089)

<!-- ENGCOM-7563 -->

* Los atributos de extensión relacionados con la dirección se pueden establecer como matrices de datos. Anteriormente, la aplicación arrojaba un error cuando una petición POST de contenía  `extension_attributes` se envió a `estimate-shipping-methods`. Este error, introducido por una confirmación anterior, afectaba a cualquier atributo de extensión establecido en `Magento\Quote\Api\Data\AddressInterface` que no fueran objetos. _Corrección enviada por Alexander Menk en la solicitud de extracción [27338](https://github.com/magento/magento2/pull/27338)_. [GitHub-26682](https://github.com/magento/magento2/issues/26682)

<!-- ENGCOM-7618 -->

* Ahora puede especificar un solo campo al actualizar un cliente con el extremo PUT `V1/customers/:id`. Anteriormente, el punto de conexión requería que especificara el correo electrónico del cliente y otros campos necesarios para crear un cliente. _Corrección enviada por Vadim Malesh en la solicitud de extracción [28332](https://github.com/magento/magento2/pull/28332)_. [GitHub-21237](https://github.com/magento/magento2/issues/21237)

### Restricciones de sitio web

<!-- MC-32366-->

* La activación de la restricción del sitio web ya no bloquea las solicitudes de ESI de Varnish para los clientes que han iniciado sesión como invitados. Anteriormente, estos invitados no podían acceder al menú principal de la página principal.

<!-- MC-32369-->

* La aplicación ahora carga la página de inicio del producto como se espera cuando las restricciones del sitio web están habilitadas.

### Lista de deseos

<!-- MC-35810-->

* Ahora puede utilizar la función de búsqueda de listas de deseos para encontrar un producto en una lista de deseos pública en implementaciones en las que se habilita la compatibilidad con varias listas de deseos. Anteriormente, después de que un cliente usara la búsqueda en la lista de artículos deseados para encontrar un producto, seleccionarlo y hacer clic en **Agregar al carro**, la aplicación no agregó el producto al carro y mostró este error: `Invalid Form Key. Please refresh the page`.

<!-- MC-35622-->

* Los clientes ahora pueden cambiar la cantidad de un producto en una lista de artículos deseados desde la propia lista de artículos deseados. Anteriormente, la aplicación no actualizaba la cantidad del producto y no mostraba ningún mensaje.

<!-- MC-35618-->

* Los clientes ahora pueden cambiar la cantidad de un producto agrupado en una lista de artículos deseados desde la propia lista de artículos deseados. Anteriormente, la aplicación no actualizaba la cantidad del producto ni mostraba un mensaje.

<!-- MC-34408-->

* La página Categoría de la tienda ahora muestra el widget de búsqueda de la lista de deseos según lo esperado.

<!-- ENGCOM-7580 7285-->

* Los polirellenos de `Map`, `WeakMap`, `FormData` y `MutationObserver` ahora se cargan solamente según sea necesario. _Corrección enviada por Dmitry Tsymbol en la solicitud de extracción [28330](https://github.com/magento/magento2/pull/28330) y Mateusz Krzeszowiak en la solicitud de extracción [27618](https://github.com/magento/magento2/pull/27618)_. [GitHub-28377](https://github.com/magento/magento2/issues/28377), [GitHub-28382](https://github.com/magento/magento2/issues/28382)

<!-- ENGCOM-7561-->

* El proceso de actualización de la lista de artículos deseados ahora admite la actualización simultánea de un artículo de la lista de artículos deseados y su descripción. _Corrección enviada por Eduard Chitoraga en la solicitud de extracción [28222](https://github.com/magento/magento2/pull/28222)_. [GitHub-28261](https://github.com/magento/magento2/issues/28261)

<!-- ENGCOM-7564-->

* La aplicación ahora valida correctamente el máximo permitido de listas de deseos que un comprador puede crear. _Corrección enviada por Eduard Chitoraga en la solicitud de extracción 247 en el repositorio privado partners-magento2ee_.

<!-- MC-36250-->

* Los administradores ahora pueden configurar un producto configurable que un cliente haya agregado a una lista de deseos desde una tienda no predeterminada. Anteriormente, cuando el cliente también había agregado el producto configurable desde un almacén no predeterminado, la aplicación arrojaba un error.

<!-- ENGCOM-7660-->

* Se ha añadido una prueba para compartir la lista de deseos de un cliente con más correos electrónicos de los permitidos. _Corrección enviada por Dmitry Tsymbol en la solicitud de extracción [28641](https://github.com/magento/magento2/pull/28641)_. [GitHub-28720](https://github.com/magento/magento2/issues/28720)

<!-- ENGCOM-7674-->

* Se ha añadido una prueba para eliminar elementos de la lista de deseos de un cliente como usuario administrador. _Corrección enviada por Dmitry Tsymbol en la solicitud de extracción [28632](https://github.com/magento/magento2/pull/28632)_. [GitHub-28721](https://github.com/magento/magento2/issues/28721)

<!-- ENGCOM-7675-->

* Se ha añadido una prueba para deshabilitar la funcionalidad de la lista de deseos. _Corrección enviada por Dmitry Tsymbol en la solicitud de extracción [28635](https://github.com/magento/magento2/pull/28635)_. [GitHub-28744](https://github.com/magento/magento2/issues/28744)

<!-- ENGCOM-7580-->

* Se ha añadido una prueba para el uso de direcciones de correo electrónico no válidas al compartir listas de deseos de clientes. `StorefrontShareWishlistEntityTest` se ha refactorizado. `StorefrontCustomerShareWishlistActionGroup` se ha desaprobado. _Corrección enviada por Dmitry Tsymbol en la solicitud de extracción [28330](https://github.com/magento/magento2/pull/28330)_. [GitHub-28377](https://github.com/magento/magento2/issues/28377)

<!-- ENGCOM-7717-->

* Se ha añadido una prueba para compartir la lista de deseos de un cliente que supera el límite de longitud de texto permitido. _Corrección enviada por Dmitry Tsymbol en la solicitud de extracción [28812](https://github.com/magento/magento2/pull/28812)_. [GitHub-28969](https://github.com/magento/magento2/issues/28969)

## Problemas conocidos

**Problema**: La nueva característica CAPTCHA para el cierre de compra no funciona como se esperaba en la página Realizar pedido cuando se usan proveedores de pago de terceros. Los comerciantes que ejecuten 2.3.6 o 2.4.1 y que hayan habilitado la protección CAPTCHA en la página Colocar frente de tienda de pedidos verán este error al realizar la comprobación con un proveedor de pagos de terceros como PayPal: `Please provide CAPTCHA code and try again`. **Solución alternativa**: Ya está disponible una solución para este problema. Consulte el [CAPTCHA de Adobe Commerce v2.3.6/2.4.1 en el artículo de la base de conocimiento del cierre de compra no funciona](https://support.magento.com/hc/en-us/articles/360051235772). También se incluirá una corrección en nuestro próximo parche trimestral (Q12021).

**Problema**: los usuarios sin privilegios de administrador no pueden configurar actualmente su acceso personal de 2FA. 2FA incluye dos funciones ACL. Una función afecta a la configuración global del sistema y solo es necesaria al configurarlo. La segunda función ACL afecta a las cuentas 2FA de usuario individual. Un usuario administrador debe configurar este segundo tipo de ACL 2FA. **Solución alternativa**: una vez que el usuario ha iniciado sesión y ha visto la pantalla Acceso denegado, puede visitar `https://<magento store>/<admin_path>/tfa/tfa/requestconfig/` para forzar la configuración. Nota: No se recomienda deshabilitar la configuración de seguridad. Sin embargo, esta solución solo es eficaz cuando las claves secretas de URL de administración están desactivadas.

**Problema**: El botón **Crear una cuenta** de la página Crear nueva cuenta permanece deshabilitado si un comprador ha especificado datos no válidos. Esto evita que los compradores vuelvan a intentar crear una cuenta después de cometer un error. **Solución alternativa**: aplique el parche `MC-38509`. También se incluirá una corrección en nuestras próximas versiones trimestrales (2.4.2, 2.4.1-p1 y 2.3.6-p1), que se lanzarán en el primer trimestre de 2021. Consulte el artículo de la base de conocimiento [2.4.1 y 2.3.6 Crear un botón de cuenta deshabilitada revisión](https://support.magento.com/hc/en-us/articles/360051130212).  [GitHub-30513](https://github.com/magento/magento2/issues/30513)

**Problema**: los comerciantes no pueden iniciar sesión en dotdigital desde el administrador en Safari cuando dotdigital está habilitado. Ver [Es imposible iniciar sesión en dotdigital a través del panel de administración cuando la cuenta dotdigital está habilitada](https://support.magento.com/hc/en-us/articles/360050092291) Artículo de la Base de conocimiento.

**Problema**: la validación de direcciones de vértice no funciona durante el pago cuando el comprador selecciona una dirección de envío que difiere de la dirección de facturación. El problema se solucionará en la versión 2.4.2. Ver el problema conocido de [2.4.1: el mensaje de validación de direcciones de vértice no desaparece después de actualizar el artículo de Knowledge Base &#x200B;](https://support.magento.com/hc/en-us/articles/360050139631) de la dirección.

**Problema**: la aplicación muestra una página vacía cuando un comerciante guarda un formulario de Page Builder dotdigital en el explorador Safari. **Solución alternativa**: vuelva a cargar la página para aplicar los cambios. Ver el problema conocido de [2.4.1: página vacía después de guardar el formulario de dotdigital Page Builder](https://support.magento.com/hc/en-us/articles/360049819092) Artículo de la base de conocimiento.

**Problema**: En ciertas condiciones, la aplicación inicia sesión automáticamente en los clientes a cuentas de Amazon usadas anteriormente, en lugar de pedirles que inicien sesión durante el cierre de compra con Amazon Pay. Consulte el problema conocido [2.4.1: no se puede cambiar la cuenta de Amazon en el artículo de la Base de conocimiento de Google Chrome](https://support.magento.com/hc/en-us/articles/360049814152).

**Problema**: la aplicación muestra brevemente un mensaje de error en la página de facturación del flujo de trabajo de cierre de compra cuando se selecciona el pago mediante Braintree PayPal y el envío a varias direcciones. Ver el [2.4.1 problema conocido: aparece un error al cerrar la compra con PayPal Braintree](https://support.magento.com/hc/en-us/articles/360050253211) Knowledge Base.

**Problema**: la aplicación muestra un mensaje de error no informativo cuando un cliente invitado intenta realizar un pedido con PayPal a través de Braintree cuando el cierre de compra de un invitado está deshabilitado. Ver el problema conocido [2.4.1: mensaje de error no informativo durante el cierre de compra de un invitado usando Paypal a través del artículo de la Base de conocimiento de Braintree](https://support.magento.com/hc/en-us/articles/360050368111).

## Contribuciones comunitarias

Estamos agradecidos a la comunidad de Magento Open Source en general y queremos agradecer sus contribuciones a esta versión. Consulte las siguientes maneras de obtener información sobre las contribuciones de la comunidad a nuestras versiones actuales:

* Si un miembro de la comunidad ha proporcionado una corrección para esta versión, identificamos la corrección en la sección Problema corregido de estas notas con la frase &quot;*Corrección proporcionada por el miembro de la comunidad*&quot;.

* El equipo de ingeniería de la comunidad [Colaboradores de Magento](https://magento.biterg.io/app/kibana) mantiene una lista de las principales personas y socios que aportan contingentes por mes, trimestre y año. Desde esa página de colaboradores, puede seguir los vínculos a sus PR fusionadas en GitHub.

### Contribuciones de socios

En el cuadro siguiente se destacan las contribuciones de los asociados. Esta tabla enumera el socio que contribuyó con la solicitud de extracción, la solicitud de extracción externa y el número de problema de GitHub asociado a ella (si está disponible).

{{$include /help/_includes/release-notes/engcomm-2-4-1-partner.md}}

### Contribuciones de colaborador individual

La siguiente tabla identifica las contribuciones de los miembros de nuestra comunidad. En esta tabla se enumeran las solicitudes de extracción externas, el número de problema de GitHub asociado a ellas (si está disponible) y el miembro de la comunidad que contribuyó con la solicitud de extracción.

{{$include /help/_includes/release-notes/engcomm-2-4-1-issues.md}}

### Requisitos del sistema

Nuestra pila de tecnología está construida sobre PHP y MySQL. Para obtener más información, consulte [Requisitos del sistema](../../../installation/system-requirements.md).

### Instrucciones de instalación y actualización

Puede instalar Adobe Commerce 2.4.1 mediante Composer.

## Kits de herramientas de migración

La herramienta de migración de datos ayuda a transferir los datos del almacén de Magento 1.x existente a Magento 2.x. Esta interfaz de línea de comandos incluye funciones de verificación, seguimiento de progreso, registro y prueba. Para obtener instrucciones de instalación, consulte [Instalar la herramienta de migración de datos](../../../tools/data-migration-tool/install.md). Considere la posibilidad de explorar o contribuir al [repositorio de migración de datos](https://github.com/magento/data-migration-tool).

El [Kit de herramientas de migración de código](https://github.com/magento-commerce/code-migration) ayuda a transferir las extensiones y personalizaciones de almacén de Magento 1.x existentes a Magento 2.x. La interfaz de línea de comandos incluye scripts para convertir módulos y diseños de Magento 1.x.

<!-- Last updated from includes: 2022-11-04 11:49:04 -->
