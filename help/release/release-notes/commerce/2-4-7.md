---
title: Notas de la versión de Adobe Commerce 2.4.7
description: Obtenga información sobre las nuevas funciones, mejoras, correcciones de errores y problemas conocidos de la versión 2.4.7 de Adobe Commerce.
exl-id: 6ceb1d6d-5076-49a1-925f-913aa3598c90
source-git-commit: 2f8396a367cbe1191bdf67aec75bd56f64d3fda8
workflow-type: tm+mt
source-wordcount: '20153'
ht-degree: 0%

---


# Notas de la versión de Adobe Commerce 2.4.7

Adobe Commerce 2.4.7 presenta soporte para PHP 8.3. Presenta cientos de correcciones y mejoras de calidad. Las dependencias del Compositor principal y las bibliotecas de terceros se han actualizado a las versiones más recientes disponibles. Esta versión incluye mejoras de rendimiento significativas, incluida la carga más rápida de páginas de listas de productos para productos complejos con muchas opciones y mejoras para la administración de indexadores. Esta versión aumenta la cobertura de GraphQL para atributos personalizados y cachés de resolución de GraphQL. También introduce soporte para los servicios de FedEx y UPS recientemente actualizados.

{{bics}}

## Otra información de la versión

Aunque el código de estas funciones está empaquetado con versiones del código principal de Adobe Commerce, varios de estos proyectos (por ejemplo, B2B y Progressive Web Applications (PWA) Studio) también se publican de forma independiente. Las correcciones de errores para estos proyectos se documentan en la información de versión independiente y específica del proyecto que está disponible en la documentación de cada proyecto.

## Puntos destacados de Adobe Commerce 2.4.7

Busque los siguientes aspectos destacados en esta versión.

### Mejoras de seguridad

Esta versión incluye las mismas correcciones de seguridad y mejoras de seguridad de plataforma que se incluyen en Adobe Commerce 2.4.6-p5, 2.4.5-p7 y 2.4.4-p8. Consulte [Boletín de seguridad de Adobe](https://helpx.adobe.com/es/security/products/magento/apsb24-18.html) para conocer las últimas novedades sobre estos problemas corregidos.

Hasta la fecha no se han producido ataques confirmados relacionados con estos problemas. Sin embargo, es posible que se aprovechen ciertas vulnerabilidades para acceder a la información de los clientes o hacerse cargo de las sesiones de administrador. La mayoría de estos problemas requieren que un atacante obtenga acceso primero al administrador. Como resultado, le recordamos que tome todas las medidas necesarias para proteger a su administrador, incluidas, entre otras, las siguientes:

* INCLUSIÓN EN LA LISTA DE PERMITIDOS IP
* [Autenticación de doble factor](https://developer.adobe.com/commerce/testing/functional-testing-framework/two-factor-authentication/)
* Uso de una VPN
* Uso de una ubicación única en lugar de `/admin`
* Buena higiene de las contraseñas

#### Mejoras de seguridad adicionales

Las mejoras de seguridad para esta versión mejoran el cumplimiento de las prácticas recomendadas de seguridad más recientes.

* **Cambios en el comportamiento de las claves de caché no generadas**:

   * Las claves de caché no generadas para bloques ahora incluyen prefijos que difieren de los prefijos para las claves generadas automáticamente. (Las claves de caché no generadas son claves que se establecen mediante sintaxis de directiva de plantilla para los métodos `setCacheKey` o `setData`).
   * Las claves de caché no generadas para bloques ahora deben contener solo letras, dígitos, guiones (-) y caracteres de subrayado (_). <!-- AC-9831 -->

* **Limitaciones en el número de códigos de cupones generados automáticamente**. Commerce ahora limita el número de códigos de cupones que se generan automáticamente. El máximo predeterminado es 250 000. Los comerciantes pueden usar la nueva opción de configuración **[!UICONTROL Code Quantity Limit]** (**[!UICONTROL Stores]** > **[!UICONTROL Settings:Configuration]** > **[!UICONTROL Customers]** > **[!UICONTROL Promotions]**) para evitar que el sistema se vea desbordado por muchos cupones. <!-- AC-8753 -->

* **Optimización del proceso predeterminado de generación de URL de administración**. La generación de la URL de administrador predeterminada se ha optimizado para aumentar la aleatoriedad, lo que hace que las URL generadas sean menos predecibles. <!-- AC-9028 -->

* **Se agregó compatibilidad con Integridad de los subrecursos (SRI)** para cumplir con los requisitos de PCI 4.0 para la verificación de la integridad de scripts en páginas de pago. La compatibilidad con la Integridad de los subrecursos (SRI) proporciona hashes de integridad para todos los recursos de JavaScript que residen en el sistema de archivos local. La función SRI predeterminada solo se implementa en las páginas de pago de las áreas de administración y tienda. Sin embargo, los comerciantes pueden ampliar la configuración predeterminada a otras páginas. Consulte [Integridad de los subrecursos](https://developer.adobe.com/commerce/php/development/security/subresource-integrity/) en la _Guía para desarrolladores de Commerce PHP_.<!--AC-1153-->

* **Cambios en la directiva de seguridad de contenido (CSP)**: actualizaciones de configuración y mejoras en las directivas de seguridad de contenido (CSP) de Adobe Commerce para cumplir con los requisitos de PCI 4.0. Para obtener más información, consulte [Políticas de seguridad de contenido](https://developer.adobe.com/commerce/php/development/security/content-security-policies/) en la _Guía para desarrolladores de Commerce PHP_. <!--AC-11513-->

   * La configuración predeterminada de CSP para páginas de pago para áreas de administración y tienda de Commerce ahora está en modo `restrict`. Para todas las demás páginas, la configuración predeterminada es el modo `report-only`.  En las versiones anteriores a 2.4.7, el CSP se configuraba en modo `report-only` para todas las páginas.

   * Se ha agregado un proveedor nonce para permitir la ejecución de scripts en línea en un CSP. El proveedor nonce facilita la generación de cadenas nonce únicas para cada solicitud. A continuación, las cadenas se adjuntan al encabezado CSP.

   * Se han añadido opciones para configurar URI personalizados para que informen de infracciones de CSP en la página Crear pedido de la página Administrador y Cierre de compra de la tienda. Puede agregar la configuración desde el Administrador o agregando el URI al archivo `config.xml`.

     >[!NOTE]
     >
     >Si actualiza la configuración de CSP al modo `restrict`, es posible que se bloqueen los scripts en línea existentes en las páginas de pago de la administración y la tienda, lo que provoca el siguiente error del explorador al cargar una página: `Refused to execute inline script because it violates the following Content Security Policy directive: "script-src`. Corrija estos errores actualizando la configuración de la lista blanca para permitir los scripts necesarios. Consulte [Solución de problemas](https://developer.adobe.com/commerce/php/development/security/content-security-policies/#troubleshooting) en la _Guía para desarrolladores de Commerce PHP_.

* Una nueva configuración de caché de página completa puede ayudar a mitigar los riesgos asociados con el extremo HTTP `{BASE-URL}/page_cache/block/esi`. Este extremo admite fragmentos de contenido cargados dinámicamente y sin restricciones desde controladores de diseño y estructuras de bloque de Commerce. La nueva configuración **[!UICONTROL Handles params size]** establece el valor del parámetro `handles` de este extremo, que determina el número máximo permitido de identificadores por API. El valor predeterminado de esta propiedad es 100. Los comerciantes pueden cambiar este valor desde el Administrador (**[!UICONTROL Stores]** > **[!UICONTROL Settings:Configuration]** > **[!UICONTROL System]** > **[!UICONTROL Full Page Cache]** > **[!UICONTROL Handles params size]**). Vea [Configurar la aplicación Commerce para que use Barnish](https://experienceleague.adobe.com/docs/commerce-operations/configuration-guide/cache/configure-varnish-commerce.html?lang=es). <!-- AC-9113 -->

* **Límite de velocidad nativo para la información de pago transmitida a través de las API REST y GraphQL**. Los comerciantes ahora pueden [configurar la limitación de velocidad](https://experienceleague.adobe.com/es/docs/commerce-admin/config/sales/sales#rate-limiting) para la información de pago transmitida mediante REST y GraphQL. Esta capa adicional de protección apoya la prevención de ataques de tarjeta y potencialmente disminuye el volumen de ataques de tarjeta que prueban muchos números de tarjeta de crédito a la vez. Se trata de un cambio en el comportamiento predeterminado de un extremo REST existente. Consulte [Limitación de velocidad](https://developer.adobe.com/commerce/webapi/get-started/rate-limiting/).

* El comportamiento predeterminado de la consulta GraphQL [isEmailAvailable](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/queries/is-email-available/) y el extremo REST ([V1/customers/isEmailAvailable](https://adobe-commerce.redoc.ly/2.4.7-admin/tag/customersisEmailAvailable/#operation/PostV1CustomersIsEmailAvailable)) ha cambiado. De manera predeterminada, las API ahora siempre devuelven `true`. Los comerciantes pueden habilitar el comportamiento original estableciendo la opción *[Habilitar inicio de sesión de cierre de compra de invitados](https://experienceleague.adobe.com/es/docs/commerce-admin/config/sales/checkout)* en el Administrador a `yes`, pero al hacerlo se puede exponer la información del cliente a usuarios no autenticados.

### Mejoras de Platform

Las actualizaciones de plataforma para esta versión mejoran el cumplimiento de las prácticas recomendadas de seguridad más recientes.

Adobe Commerce 2.4.7 incluye las siguientes actualizaciones de plataforma:

* **Compatibilidad con PHP 8.3**. Esta versión incorpora soporte para PHP 8.3. Commerce ahora es compatible con PHP 8.3 y 8.2. PHP 8.2 será compatible hasta su fecha de fin de servicio (EOS) en diciembre de 2025. A partir de diciembre de 2025, todos los comerciantes que ejecuten implementaciones de 2.4.7 deberían migrar a PHP 8.3. <!-- AC-8988 -->

Adobe Commerce 2.4.7 sigue siendo compatible con PHP 8.1 únicamente para fines de actualización. PHP 8.1 no es compatible y no se recomienda. El código principal de Adobe Commerce 2.4.7, todas las extensiones agrupadas, y todas las extensiones propiedad de Adobe y los servicios SaaS son compatibles con PHP 8.3. <!-- AC-9668 -->

* **Compatibilidad con RabbitMQ 3.13**. Esta versión es compatible con la última versión de RabbitMQ 3.13. La compatibilidad sigue siendo con RabbitMQ 3.11 y 3.12, que es compatible hasta agosto de 2024 y diciembre de 2024 respectivamente, pero Adobe recomienda utilizar Adobe Commerce 2.4.7 solo con RabbitMQ 3.13. <!-- AC-9659 -->

* **Compositor 2.7.x**. La compatibilidad con Composer 2.2.x se mantiene. <!-- AC-9663 -->

* **Compatibilidad con caché de barniz 7.4**. Esta versión es compatible con la última versión de Varnish Cache 7.4. La compatibilidad se mantiene con las versiones 6.0.x y 7.2.x, pero recomendamos usar Adobe Commerce 2.4.7 solo con Varnish Cache versión 7.4 o versión 6.0 LTS. <!-- AC-9662 -->

* **Compatibilidad con Elasticsearch 8.11** <!-- AC-9661 -->

* Opensearch 2.12 y OpenSearch 1.3 admiten <!-- AC-9659 -->

* **Redis 7.2** <!-- AC-10811 -->

* La biblioteca `extjs` se ha reemplazado con la última versión de `jsTree`. <!-- AC-9320 -->

* Se ha quitado la biblioteca `jquery/fileUpload`. <!-- AC-10569 -->

Todas las bibliotecas de JavaScript y dependencias NPM del código principal de Adobe Commerce se han actualizado a las últimas versiones disponibles. Todas las dependencias de la biblioteca Laminas se han actualizado a la última versión que es compatible con PHP 8.3. <!-- AC-9667 9665 -->

#### Actualizaciones adicionales

* **Compatibilidad con varios cupones por pedido**. Los comerciantes ahora pueden [configurar el número máximo de cupones](https://experienceleague.adobe.com/es/docs/commerce-admin/config/sales/sales#multicoupon-settings) que se pueden aplicar por pedido con la nueva opción de configuración **[!UICONTROL Maximum number of coupons per order]**. Este valor se establece en 1 de forma predeterminada. Ahora puede usar [REST](https://developer.adobe.com/commerce/webapi/rest/modules/multicoupon/) o [GraphQL](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/apply-coupons/) para aplicar varios cupones a un carro de compras.

* La puerta de enlace de la API XML de Commerce UPS se ha migrado a la nueva [API REST de Commerce UPS](https://experienceleague.adobe.com/es/docs/commerce-admin/stores-sales/delivery/shipping-carriers/ups) para admitir las actualizaciones que UPS está realizando en su [modelo de seguridad de API](https://developer.ups.com/oauth-developer-guide). (UPS está implementando un modelo de seguridad OAuth 2.0 (tokens de portador) para todas las API). Todas las API XML de UPS de Commerce anteriores se han eliminado de la base de código de Adobe Commerce 2.4.7. <!-- AC-8918 -->

* La integración de Adobe Commerce [integration](https://experienceleague.adobe.com/es/docs/commerce-admin/stores-sales/delivery/shipping-carriers/fedex) con FedEx se ha migrado de los servicios web WSDL de FedEx heredados a las API RESTful más recientes de FedEx. El seguimiento de servicios web de FedEx, la validación de direcciones y la validación de códigos postales WSDLS se retirarán en mayo de 2024. <!-- AC-1470 -->

* Se ha agregado compatibilidad con el nuevo método de envío USPS Ground Advantage. Esta es una integración lista para usar con el nuevo método de envío de USPS, USPS Ground Advantage, que se publicó en julio de 2023. Esta nueva integración se puede utilizar para recuperar las tarifas de envío y programar las entregas y devoluciones a través del servicio de envío de USPS. El método de envío USPS Ground Advantage reemplaza estos métodos de envío, que se retiraron cuando se lanzó el método de envío USPS Ground Advantage:

   * Masa para minoristas de USPS
   * Servicio de paquetes de primera clase
   * Terreno de selección de paquetes <!-- AC-9182 -->

* Los módulos de envío Temando se han eliminado de la base de código Commerce principal. Esta característica quedó obsoleta en Adobe Commerce 2.4.4. <!-- AC-8130 -->

### Mejoras de rendimiento y escalabilidad

Commerce 2.4.7 incluye las siguientes mejoras en el rendimiento y la escalabilidad de Commerce:

* Los comerciantes empresariales ahora pueden configurar hasta **un millón de reglas activas de precios de carros de compras basadas en cupones** en Adobe Commerce sin que se produzcan degradaciones significativas del rendimiento de las operaciones de carros de compras y pagos. <!-- ACPT-1198 -->

* **Administración mejorada del indizador**. El nuevo comando `indexer:set-status` admite la administración dinámica del estado del indizador. Los usuarios administradores pueden usar este comando para cambiar el estado del indizador a `suspended`, `invalid` o `valid`. Esta función es especialmente útil para administrar el rendimiento del sistema durante amplias operaciones masivas, como importaciones o actualizaciones de productos, ya que permite controlar cuándo los indexadores se activan automáticamente mediante los trabajos cron del sistema. Consulte [Administrar los indexadores](https://experienceleague.adobe.com/docs/commerce-operations/configuration-guide/cli/manage-indexers.html?lang=es).

* **Página de lista de productos para productos complejos con muchas opciones**. El tiempo de carga ha mejorado para las páginas de listas de productos que incluyen productos complejos con más de 100 opciones. También ha mejorado el rendimiento de las solicitudes de GraphQL para enumerar productos por categoría. <!-- ACPT-1683 -->

* **Ahora se admite el formato JSON para la [API de importación](https://developer.adobe.com/commerce/webapi/rest/modules/import/)** de REST. Los comerciantes ahora pueden importar hasta 100 000 registros por minuto en Adobe Commerce en formato JSON. <!-- ACPT-943 -->

* **Mejoras en el rendimiento de las reglas de ventas**. Se ha mejorado el rendimiento de las implementaciones empresariales con muchas reglas de ventas activas (aproximadamente 100 000). Las implementaciones empresariales que implementan en gran medida promociones suelen implementar muchas reglas de carro de compras activas. Estos tipos de implementaciones empresariales que ejecutan Commerce 2.4.7 no verán ninguna degradación de rendimiento relacionada con el número de reglas de precios del carro de compras configuradas durante las operaciones de cierre de compra. <!-- ACPT-1198 -->

* **Operaciones de guardado más rápidas de las configuraciones de nivel de tienda para implementaciones con muchas tiendas**. Guardar las opciones de configuración en implementaciones con más de 500 tiendas puede llevar mucho tiempo. El nuevo módulo [Async Config](../../../performance/configuration.md#asynchronous-configuration-save) habilita las operaciones asincrónicas de guardado de configuración ejecutando un trabajo cron que usa un consumidor para procesar la operación de guardado en una cola de mensajes. AsyncConfig está deshabilitado de forma predeterminada.

* **Generación más rápida de la caché de configuración para configuraciones grandes**. El comando `bin/magento cache:clean config` ahora calienta previamente la caché de configuración cuando esta está habilitada. Esto reduce el tiempo de inactividad necesario para generar la caché de configuración para configuraciones grandes. Las operaciones de guardado de configuración ya no limpian la caché de `config_scopes` antes de escribir datos en ella, lo que también reduce el tiempo que otras solicitudes están bloqueadas mientras se escriben los datos de configuración.

### GraphQL Application Server

[GraphQL Application Server](../../../performance/application-server.md) permite a Adobe Commerce mantener el estado entre las solicitudes de API de Commerce GraphQL y elimina la necesidad del arranque, lo que aumenta el rendimiento, reduce la latencia y hace que el uso de recursos sea más eficiente para todas las API de GraphQL. Al compartir el estado de la aplicación entre los procesos, las solicitudes de la API de GraphQL se vuelven mucho más eficientes y las respuestas de la API de GraphQL son un promedio un 30% más rápidas.<!-- ACPT-27 -->

GraphQL Application Server solo está disponible para Adobe Commerce. No está disponible para Magento Open Source. Debe [enviar un ticket de asistencia de Adobe Commerce](https://experienceleague.adobe.com/es/docs/commerce-knowledge-base/kb/help-center-guide/magento-help-center-user-guide) para habilitar GraphQL Application Server en proyectos Pro.

>[!NOTE]
>
>GraphQL Application Server no es compatible actualmente con [[!DNL Amazon Simple Storage Service (AWS S3)]](https://aws.amazon.com/s3/). Los clientes de Adobe Commerce en la infraestructura en la nube que actualmente usan [!DNL AWS S3] para [almacenamiento remoto](../../../configuration/remote-storage/cloud-support.md) no pueden usar GraphQL Application Server.<!-- ACPT-1840 -->

### Metpaquete de extensión de Adobe Commerce

Esta versión presenta la extensión de Adobe Commerce metapackage v2.0.0, que agrupa automáticamente las extensiones de Adobe Commerce seleccionadas con esta versión principal. Las versiones de estas extensiones que se incluyen en este metapaquete se instalan cuando se ejecuta `composer update`, lo que simplifica el proceso de actualización de estas extensiones al actualizar a la última versión principal. Estas extensiones mantienen programaciones de versiones independientes.

El metapaquete de extensión de Adobe Commerce para Adobe Commerce 2.4.7 incluye estas extensiones:

* [SDK de IU de administración de Adobe Commerce](https://developer.adobe.com/commerce/extensibility/admin-ui-sdk/)
* [Integración de Adobe Commerce con Adobe IMS](https://experienceleague.adobe.com/docs/commerce-admin/start/admin/ims/adobe-ims-integration-overview.html?lang=es)
* [Adobe I/O Events para Adobe Commerce](https://developer.adobe.com/commerce/extensibility/events/)
* [Adobe Stock](https://experienceleague.adobe.com/es/docs/commerce-admin/content-design/wysiwyg/adobe-stock/adobe-stock)
* [Braintree](https://experienceleague.adobe.com/docs/commerce-admin/stores-sales/payments/braintree.html?lang=es)
* [Servicios de pago](https://experienceleague.adobe.com/docs/commerce/payment-services/guide-overview.html?lang=es)

Las versiones futuras de este metapaquete de extensión pueden contener extensiones adicionales.

### Webhooks de Adobe Commerce

Los webhooks de Commerce (v1.2.0 ) permiten a los desarrolladores configurar la lógica sincrónica para ejecutar llamadas a sistemas externos cuando se produce un déclencheur de evento de Adobe Commerce. Las llamadas sincrónicas son necesarias cuando Commerce debe calcular o validar inmediatamente un valor como un total de pedido, impuestos o pagos mediante un punto de conexión de terceros y, a continuación, escribir el resultado de nuevo en Adobe Commerce.

Los webhooks de Commerce ahora están instalados de forma predeterminada. Ver [Información general sobre Webhooks de Adobe Commerce](https://developer.adobe.com/commerce/extensibility/webhooks/)

### Adobe Stock

El paquete de Adobe Stock (`adobe-stock-integration`) ahora está empaquetado en el metapaquete de extensiones de Commerce (`extensions-metapackage`) para admitir actualizaciones más frecuentes. <!-- CABPI-630 -->

### B2B

>[!NOTE]
>
>La versión 2.4.7 es compatible con B2B 1.4.2. Sin embargo, Adobe recomienda que los clientes esperen a la próxima versión de B2B 1.5.0 GA antes de la actualización, que incluye compatibilidad con PHP 8.3. Ver [notas de la versión B2B](https://experienceleague.adobe.com/docs/commerce-admin/b2b/release-notes.html?lang=es).

### Braintree

* **[!DNL Vaulted PayPal]y [!DNL Pay Later] cambios**: Los clientes que iniciaron sesión y que previamente han ingresado o almacenado su cuenta PayPal tienen la opción de pagar con:
   * [!DNL Pay Now] (sin tener que iniciar sesión en su cuenta de [!DNL PayPal], el usuario puede pagar con su tarjeta predeterminada)
   * Pagar con una fuente de financiación diferente
   * Paga con una cuenta diferente
   * Botón [!DNL PayPal Pay Later] o [!DNL PayPal Credit]

* **Compatibilidad con 3DS para[!DNL Google Pay]**: se ha incluido la compatibilidad con la verificación 3DS para las tarjetas sin tokenización [!DNL Google Pay]. Consulte la [documentación de Braintree](https://developer.paypal.com/braintree/docs/guides/3d-secure/client-side/android/v3#using-3d-secure-with-google-pay) para obtener más información.

* **[!DNL Vault Apple Pay Payments]**: permite que los clientes que iniciaron sesión guarden o almacenen sus pagos de [!DNL Apple Pay] en su cuenta de la tienda Commerce para usarlos en transacciones futuras. Esto reduce el número de pasos en el cierre de compra y crea una experiencia de cierre de compra más rápida para el cliente que regresa.

* **[!DNL Vault Google Pay Payments]**: permite que los clientes que iniciaron sesión guarden o almacenen sus pagos de [!DNL Google Pay] en su cuenta de la tienda Commerce para usarlos en transacciones futuras. Esto reduce el número de pasos en el cierre de compra y crea una experiencia de cierre de compra más rápida para el cliente que regresa.

* **[!DNL Vault Venmo Payments]**: permite que los clientes que iniciaron sesión almacenen sus cuentas de [!DNL Venmo] en su cuenta de la tienda Commerce para usarlas en transacciones futuras. Esto reduce el número de pasos en el cierre de compra y crea una experiencia de cierre de compra más rápida para el cliente que regresa.

* **[!DNL Vault ACH Payments]**: permite a los clientes que iniciaron sesión almacenar sus pagos ACH en su cuenta de la tienda Commerce para usarlos en transacciones futuras. Esto reduce el número de pasos en el cierre de compra y crea una experiencia de cierre de compra más rápida para el cliente que regresa.

* **[!UICONTROL Express Payment]botones en la parte superior del cierre de compra**: Para alentar una experiencia de cierre de compra más rápida, hemos introducido [!DNL Express Payment] opciones al principio del cierre de compra. Los clientes ahora pueden pagar [!DNL PayPal], [!DNL PayPal Pay Later], [!DNL Apple Pay] y [!DNL Google Pay Express] pagos.

* **[!DNL Braintree]notas de la versión y vínculos de soporte dentro de la Configuración de administración**: los comerciantes ahora pueden vincular directamente desde el administrador de Commerce al soporte de Braintree y a las notas de la versión en línea.

* **Compatibilidad de GraphQL con todos los métodos de pago de [!DNL Braintree] excepto[!DNL Venmo]**: se exponen más configuraciones en la API de GraphQL. Esto resulta especialmente útil en aplicaciones sin encabezado.

* **[!DNL Vaulting]pagos en el área de cuenta**—Los clientes que iniciaron sesión ahora pueden [guardar/almacenar](https://experienceleague.adobe.com/es/docs/commerce-admin/stores-sales/payments/braintree#step-3-complete-the-advanced-settings) nuevas tarjetas de crédito/débito y [!DNL PayPal] cuentas en el área de cuenta de cliente. Anteriormente, los clientes solo podían almacenar al guardar sus pagos para usarlos más adelante al completar una transacción en el cierre de compra, ahora pueden almacenar nuevas tarjetas de crédito/débito y cuentas de PayPal sin necesidad de crear una nueva transacción.

* **Transacciones sin complicaciones**: las transacciones sin complicaciones aceleran el proceso de pago al reducir la cantidad de clics o pasos del cliente para completar una transacción con tarjeta de crédito o débito en línea. Anteriormente (cuando se habilitaba 3DS), todos los clientes se enfrentaban a 3DS. Con la nueva función de transacciones sin fricción, los clientes solo son desafiados para 3DS cuando el banco lo solicita. Esto reduce el abandono del carro de compras, aumenta las tasas de conversión y genera más ventas.

* **Webhooks de disputas**: cuando un cliente disputa una transacción en Braintree, el estado de la disputa ahora se pasa a Commerce. Se puede buscar en la cuadrícula **[!UICONTROL Sales]** > **[!UICONTROL Order]** y se adjunta a cada pedido.

### Integración de Commerce con Adobe IMS

El paquete de integración de IMS de Adobe (`adobe-commerce/adobe-ims-metapackage`) ahora está empaquetado en el metapaquete de extensiones de Commerce (`extensions-metapackage`) para admitir actualizaciones más frecuentes. <!-- CABPI-630 -->

### GraphQL

Commerce 2.4.7 incluye capacidades mejoradas de almacenamiento en caché de GraphQL, compatibilidad con el esquema de GraphQL para atributos personalizados, compatibilidad con la cancelación de pedidos sin encabezado y almacenamiento en caché de resolución mejorado.

* **Administración más flexible del carro de compras**. La mutación `clearCart` ahora borra el contenido de un carro de compras especificado en una sola acción. Reemplaza la mutación `clearCustomerCart`, que ha quedado obsoleta. <!-- LYNX-254 -->

* **Mejoras en la creación de mutaciones de carrito**. La mutación `createGuestCart` se ha agregado para reemplazar la mutación `createEmptyCart` obsoleta. Anteriormente, si utilizaba `createEmptyCart`, no podía determinar si el carro era para un cliente invitado o con sesión iniciada. <!-- LYNX-224 -->

* **Los artículos de pedido ahora incluyen imágenes de productos**. `OrderItemInterface` expone imágenes de productos, lo que permite que las imágenes se asocien a los productos pedidos y se carguen de manera más eficiente.  [GitHub-32369](https://github.com/magento/magento2/issues/32369) <!-- AC-7918 -->

* **Se ha ampliado la compatibilidad con el almacenamiento en caché de resolución**. Los siguientes solucionadores de consultas de GraphQL ahora se pueden almacenar en caché en la caché de resultados de resolución de GraphQL, lo que mejora el rendimiento cuando se envían consultas con solicitudes POST:

   * `Magento\CustomerGraphQl\Model\Resolver\Customer::resolve`
   * `Magento\CustomerGraphQl\Model\Resolver\CustomerAddress::resolve`
   * `Magento\CustomerGraphQl\Model\Resolver\IsSubscribed::resolve` <!-- B2B-2658 -->
   * `Magento\CatalogGraphQl\Model\Resolver\Product\MediaGallery::resolve` <!-- B2B-2677 -->

* **Compatibilidad con la cancelación de pedidos**. La mutación [cancelOrder](https://developer.adobe.com/commerce/webapi/graphql/schema/orders/mutations/cancel-order/) permite a un cliente cancelar un pedido, pasando su identificador y un motivo de cancelación. <!-- LYNX-197 -->

   * Los nuevos campos de respuesta `order_cancellation_enabled` y `order_cancellation_reasons.description` en `storeConfig`
solicitudes de cancelación de pedidos iniciadas por el usuario. Ver [Consultar la configuración de cancelación de pedidos de un almacén](https://developer-stage.adobe.com/commerce/webapi/graphql/schema/store/queries/store-config/#query-a-stores-order-cancellation-configuration)

* **Compatibilidad mejorada con atributos personalizados**. La compatibilidad con atributos personalizados de GraphQL se ha mejorado mediante el enriquecimiento de los datos de API para admitir todos los tipos de atributos. El esquema de atributos EAV de GraphQL ahora admite la ampliación de atributos del cliente y objetos de dirección del cliente en el administrador y su recuperación mediante GraphQL. Algunas áreas específicas de mejora son: <!-- LYNX-61 110-->

   * compatibilidad con atributos personalizados ampliados/añadidos en áreas específicas como cliente y dirección del cliente
   * se ha agregado almacenamiento en caché para atributos personalizados
   * se ha mejorado la compatibilidad de atributos personalizados existentes con productos

* **Las capacidades mejoradas de almacenamiento en caché de GraphQL mejoran la velocidad de carga de la página**. Se ha añadido la capacidad de almacenamiento en caché a estas consultas, lo que mejora la velocidad del tiempo de carga de la página para la mayoría de las páginas de PWA:

   * [`availableStores`](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/available-stores/)
   * [`countries`](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/countries/) y [país](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/country/)
   * [`storeConfig`](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/store-config/)
   * [`currency`](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/currency/)
   * [`customAttributeMetadata`](https://developer.adobe.com/commerce/webapi/graphql-api/index.html#query-customAttributeMetadata)

* **Rendimiento mejorado del analizador de GraphQL**. Se ha mejorado el rendimiento del analizador de GraphQL al reducir el número de veces que se llama al método parse por solicitud. Ahora se llama una vez. Anteriormente, se llamaba al analizador al menos tres veces.

#### Nuevos campos para las mutaciones existentes

* Se agregó el campo `quickorder_active` a las consultas [storeConfig](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/store-config/) y [availableStores](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/available-stores/). Este campo indica si la función de orden rápido está activada.

* Se agregaron los campos siguientes a las mutaciones `setBillingAddressOnCart` y `setShippingAddressesOnCart`:

   * `fax`
   * `middlename`
   * `prefix`
   * `suffix`

#### Nuevas consultas y mutaciones

* [`attributeForms`](https://developer.adobe.com/commerce/webapi/graphql/schema/attributes/queries/attributes-form/) consulta<!-- LYNX-151 -->
* [`attributesList`](https://developer.adobe.com/commerce/webapi/graphql/schema/attributes/queries/attributes-list/) consulta<!-- LYNX-150 -->
* [`guestOrder`](https://developer.adobe.com/commerce/webapi/graphql/schema/orders/queries/guest-order/) consulta
* [`guestOrderByToken`](https://developer.adobe.com/commerce/webapi/graphql/schema/orders/queries/guest-order-by-token/) consulta
* [`recaptchaFormConfig`](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/recaptcha-form-config/) consulta
* [`cancelOrder`](https://developer.adobe.com/commerce/webapi/graphql/schema/orders/mutations/cancel-order/) mutación<!-- LYNX-172 -->
* [`customAttributeMetadataV2`](https://developer.adobe.com/commerce/webapi/graphql/schema/attributes/queries/custom-attribute-metadata-v2/) consulta
* [`applyCouponsToCart`](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/apply-coupons/) mutación
* [`clearCart`](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/clear-cart/) mutación
* [`confirmEmail`](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/confirm-email/) mutación
* [`createGuestCart`](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/create-guest-cart/) mutación
* [`estimateShippingMethods`](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/estimate-shipping-methods/) mutación
* [`estimateTotals`](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/estimate-totals/) mutación
* [`removeCouponsFromCart`](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/remove-coupons/) mutación

#### Consultas y mutaciones obsoletas

* `clearCustomerCart` mutación<!-- LYNX-254 -->
* [`createEmptyCart`](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/create-empty-cart/) mutación<!-- LYNX-224 -->
* [`attributesMetadata`](https://developer.adobe.com/commerce/webapi/graphql/schema/attributes/queries/attributes-metadata/) consulta
* [`customAttributeMetadata`](https://developer.adobe.com/commerce/webapi/graphql/schema/attributes/queries/custom-attribute-metadata/) consulta

### Inventory management

Inventory management (v1.2.7) proporciona herramientas para administrar el inventario de productos. Esta función desarrollada por la comunidad está integrada en Adobe Commerce y en el código principal de Magento Open Source.

### Pagos

* Se ha agregado compatibilidad con GraphQL para las operaciones principales de todos los métodos de pago, excepto Venmo. Los nuevos extremos de GraphQL para los servicios de pago se describen en [Cierre de compra](https://developer.adobe.com/commerce/webapi/graphql/schema/checkout/). <!-- BUNDLE-3326 -->

* El depósito de tarjetas de crédito se ha mejorado para todos los métodos de pago, excepto para Venmo. Los compradores ahora pueden Vault, o guardar, sus pagos ACH y verlos o eliminarlos de su página de cuenta. Los comerciantes pueden activar y desactivar los pagos abovedados ACH desde el administrador. <!-- BUNDLE-3324 -->

* El flujo de trabajo de pago ahora incluye una sección de pago rápido que proporciona los botones PayPal, Google Pay y Apple Pay **[!UICONTROL Express]**. <!-- BUNDLE-3322 -->

[Opciones de pago](https://experienceleague.adobe.com/docs/commerce/payment-services/payments-checkout/payments-options.html?lang=es) presenta métodos de pago compatibles.

### PWA Studio

PWA Studio v14.0 es compatible con Adobe Commerce 2.4.7. Incluye varias mejoras para mejorar la accesibilidad. Para obtener información sobre la corrección de errores, consulte [Versiones de PWA Studio](https://github.com/magento/pwa-studio/releases). Consulte [Compatibilidad de versiones](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) para obtener una lista de versiones de PWA Studio y sus versiones principales de Adobe Commerce compatibles.

### Marco de API web

**Trabajando con varios cupones por carrito**

Los nuevos extremos REST admiten la visualización, adición y eliminación de varios cupones asociados a un carro de compras.

>[!NOTE]
>
>Por primera vez, varias rutas de extremo REST contienen la cadena `V2` en lugar de `V1`. Por ejemplo, `GET /rest/default/V2/carts/{cartId}/coupons`. Para los comerciantes de Commerce, estos extremos están pensados para reemplazar las versiones `V1` de los extremos. Estos extremos sólo están disponibles en Adobe Commerce.<!-- LYNX-208 -->

Devolver todos los códigos de cupón asociados a un carro de compras:

`GET  /rest/{store_code}/V2/carts/{cartId}/coupons`
`GET  /rest/{store_code}/V2/carts/mine/coupons`

Anexe un código de cupón a un carro de compras:

`POST /rest/{store_code}/V2/carts/{cartId}/coupons/{couponCode}`
`POST /rest/{store_code}/V2/carts/mine/coupons/{couponCode}`

Reemplazar códigos de cupones en un carro de compras:

`PUT /rest/{store_code}/V2/carts/{cartId}/coupons`
`PUT /rest/{store_code}/V2/carts/mine/coupons`

Eliminar códigos de cupones de un carro de compras:

`POST /rest/{store_code}/V2/carts/{cartId}/coupons/deleteByCodes`
`POST /rest/{store_code}/V2/carts/mine/coupons/deleteByCodes`

**Puntos finales adicionales**
Esta versión introduce dos nuevos extremos de REST que proporcionan una solución para una limitación con los extremos de API de REST `GET` y `POST V1/products/attributes`. Estos extremos devuelven el mismo valor para el atributo `is_filterable` para las opciones `Filterable(with results)` y `Filterable(no results)` de la opción **[!UICONTROL Use in Layered Navigation]**. (La propiedad del atributo `is_filterable` es del tipo `Boolean`, lo que no permite establecer esta propiedad en `Filterable(no results)`.)

Se han implementado dos nuevos extremos REST como solución alternativa:

* `PUT /V1/products/attributes/{attributeCode}/is-filterable/{isFilterable}`. Parámetros de ruta de acceso: `attributeCode` (`String`) y `isFilterable` (`int` valores son: 0 es No; 1 es `Filterable (with results)`; 2 es `Filterable (no results)`).
* `GET /V1/products/attributes/{attributeCode}/is-filterable`. Parámetros de ruta de acceso: `attributeCode` (`String`).<!-- ACP2E-2275 -->

## Problemas solucionados

Hemos corregido cientos de problemas en el código principal de Adobe Commerce 2.4.7. A continuación, se describe un subconjunto de los problemas corregidos que se incluyen en esta versión. También se describen las correcciones incluidas en las versiones anteriores de Commerce 2.4.7-beta.

### Instalación, actualización e implementación

<!-- AC-10396 -->

* Se ha eliminado la manipulación de caché innecesaria del proceso de configuración. Anteriormente, Commerce escribía su configuración en el disco de forma innecesaria cuando se ejecutaba `bin/magento setup:db-data:upgrade` o `bin/magento setup:upgrade`, lo que causaba problemas con algunos módulos durante la instalación. [GitHub-38124](https://github.com/magento/magento2/issues/38124)

<!-- ACP2E-1675 -->

* Se han resuelto problemas de implementación debido a memoria insuficiente y tablas grandes. El comando `bin/magento  setup:upgrade` ya no falla debido a errores de memoria excedida relacionados con tablas MySQL grandes.

<!-- ACP2E-2198 -->

* `bin/magento setup:install` ahora se completa correctamente después de eliminar `app/etc/config.php`. Anteriormente, el archivo que faltaba no se regeneraba durante la instalación y Commerce arrojaba un error. [GitHub-37805](https://github.com/magento/magento2/issues/37805)

<!-- AC-8381 -->

* `bin/magento setup:upgrade` se ha refactorizado para ejecutarse correctamente al instalar un nuevo módulo que instala ambas tablas y los indizadores `mview` asociados. [GitHub-37304](https://github.com/magento/magento2/issues/37304)

<!-- ACP2E-1882 -->

* La restauración de la base de datos ya no falla debido a un error de delimitador. Anteriormente, Commerce arrojaba este error cuando se ejecutaba `bin/magento setup:rollback --db`: `Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near 'delimiter' at line 1, query was: delimiter ;;`.

<!-- ACP2E-1505 -->

* El comando `bin/magento setup:upgrade` ya no falla con este tipo de error relacionado con el límite de memoria MySQL: `PHP Fatal error:  Allowed memory size of 4294967296 bytes exhausted (tried to allocate 20480 bytes)`. La migración de atributos de selección múltiple se ha optimizado para que consuma menos memoria durante `setup:upgrade`.

<!-- ACP2E-1751 -->

* La generación de una copia de seguridad de la base de datos ahora funciona como se espera desde la administración y la línea de comandos. Anteriormente, Adobe Commerce arrojó este error: `Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near 'delimiter' at line 1, query was: delimiter ;;`.

<!-- ACP2E-1604 -->

* Al ejecutar `setup:config:set` sin especificar el parámetro `--lock-db-prefix`, ya no se borra el valor actual del archivo `env.php`.

<!-- ACP2E-1498 -->

* La configuración del barniz se ha actualizado para evitar que los usuarios invitados accedan al contenido almacenado en caché relacionado con otros grupos de clientes.

<!-- AC-7113 -->

* Los compradores ahora pueden realizar un pedido en una implementación que implementa la base de datos dividida cuando **[!UICONTROL Checkout Async]** está habilitado. Anteriormente, Adobe Commerce arrojó este error: `An error occurred on the server. Please try to place the order again`.

<!-- https://github.com/magento/magento2/pull/33092 -->

* `bin/magento setup:upgrade` ahora se completa correctamente al instalar un nuevo módulo que instala ambas tablas y los indizadores `mview` asociados.

<!-- ENGCOM-9243 -->

* `bin/magento setup:upgrade` muestra ahora un mensaje de error más informativo cuando un tema de la cola de mensajes no incluye un nombre de tema. [GitHub-34246](https://github.com/magento/magento2/issues/34246)

<!-- https://github.com/magento/magento2/pull/36239 -->

* `bin/magento setup:upgrade` muestra ahora un mensaje de error más informativo cuando los archivos XML combinados no son válidos. El mensaje de error ahora incluye el nombre de archivo.

### IU de administración

<!-- AC-10998 -->

* Los gráficos ahora están desactivados correctamente de forma predeterminada en el panel. [GitHub-38430](https://github.com/magento/magento2/issues/38430)

<!-- AC-9423 -->

* El menú Administración de ventas ahora muestra correctamente los submenús. Anteriormente, el salto de columna no funcionaba correctamente y algunos submenús no se mostraban. [GitHub-37812](https://github.com/magento/magento2/issues/37812)

<!-- AC-3122 -->

* Las opciones del menú desplegable **[!UICONTROL Select]** ahora están visibles en Administración **[!UICONTROL Content]** > **[!UICONTROL Pages]** cuando se seleccionan varias páginas en la cuadrícula. [GitHub-35386](https://github.com/magento/magento2/issues/35386)

<!-- AC-9209 -->

* Se corrigió la ruta de acceso al valor predeterminado de `system/dashboard/enable_charts` en las opciones de configuración. Los gráficos ahora se muestran en el Administrador según lo esperado. [GitHub-37668](https://github.com/magento/magento2/issues/37668)

<!-- AC-9632 -->

* Se ha corregido un problema de visualización con las cuadrículas de cliente de administración. Anteriormente, las columnas de cuadrícula no estaban completamente contenidas en la página mostrada.

<!-- AC-2916 -->

* Los colores de desplazamiento ahora se aplican según lo esperado en las filas de las cuadrículas estáticas de administración. [GitHub-35358](https://github.com/magento/magento2/issues/35358)

<!-- AC-7551 -->

* El flujo de trabajo de cierre de compra ya no muestra una advertencia cuando un comprador introduce un código postal para Grecia que no contiene un espacio en blanco. [GitHub-36676](https://github.com/magento/magento2/issues/36676)

<!-- AC-9357 -->

* El enlace Administrador `It's time to change your password` ahora redirige a la página Cambiar contraseña de administrador según lo esperado. [GitHub-37902](https://github.com/magento/magento2/issues/37902)

<!-- ACP2E-2460 -->

* Los títulos de submenú ahora indican cualquier elemento del mismo nivel, independientemente del nivel de acceso asignado al usuario. Anteriormente, esta información se ocultaba a los usuarios administradores con acceso limitado, incluso si existían varios grupos del mismo nivel para el submenú.

<!-- AC-9164 -->

* Los sufijos de título de página ahora se incluyen en la etiqueta `title` y en la etiqueta `meta title` para las páginas de producto. [GitHub-37680](https://github.com/magento/magento2/issues/37680)

<!-- ACP2E-2023 -->

* La condición de estado de stock de productos ahora se aplica correctamente a las reglas de productos relacionadas.

<!-- ACP2E-2083 -->

* El botón **[!UICONTROL Login as Customer]** ahora se muestra correctamente en dispositivos móviles.

<!-- ACP2E-2146 -->

* Adobe Commerce ya no muestra el botón Administrador **[!UICONTROL Add new customer group]** si el usuario administrador que ha iniciado sesión no tiene permiso para agregar un nuevo grupo de clientes.

<!-- ACP2E-2286 -->

* Un usuario administrador con permisos restringidos ahora puede guardar un producto secundario cuyo producto principal esté asignado a un ámbito diferente. Anteriormente, Commerce invalidaba la memoria caché de un producto principal que no estaba asignado al ámbito en el que se cambió el producto secundario.

<!-- ACP2E-2042 -->

* Los usuarios administradores ahora pueden cambiar correctamente entre las vistas de filtro de administración sin que se dañen o pierdan los datos de vista. [GitHub-37529](https://github.com/magento/magento2/issues/37529)

<!-- ACP2E-2068 -->

* La cuadrícula de pedidos archivada ahora se actualiza asincrónicamente con nuevos estados de pedidos según lo esperado. Un enfoque basado en eventos para actualizar el estado de los pedidos en la cuadrícula del archivo da como resultado un estado de los pedidos preciso, incluidos los reembolsos posteriores a la nota de crédito.

<!-- ACP2E-2049 -->

* Ahora, el menú desplegable de acciones de la cuadrícula de administración puede situarse, como se espera, sobre un vínculo seleccionado para **[!UICONTROL Content]** > **[!UICONTROL Pages]** (y los catálogos compartidos en el módulo B2B). Anteriormente, este menú estaba oculto y los usuarios administradores tenían que desplazarse para ver las opciones. [GitHub-36710](https://github.com/magento/magento2/issues/36710)

### Analytics

<!-- ACP2E-2266 -->

* Las propiedades de la página de detalles del producto `meta itemprop="image"` y `meta itemprop="description"` ya están disponibles para la imagen de producto principal. [GitHub-37497](https://github.com/magento/magento2/issues/37497)

<!-- ACP2E-2314 -->

* La sección Informe de la cuadrícula Productos en los carros de compras ahora muestra el precio de producto correcto cuando **[!UICONTROL Catalog Price Scope]** está establecido en **[!UICONTROL Website]**. Anteriormente, el precio del producto se mostraba como cero cuando se asignaba a un sitio web distinto del predeterminado.

<!-- AC-9275 -->

* Los informes de ingresos ahora se muestran según lo esperado en el portal de Google Analytics (GA4). [GitHub-37605](https://github.com/magento/magento2/issues/37605)

<!-- ACP2E-1880 -->

* Los valores `price` y `quantity` de la capa de datos del Administrador de etiquetas de Google ahora se envían como valores numéricos a Google Analytics según lo esperado. Anteriormente, estos valores se enviaban como cadenas.

<!-- ACP2E-2030 -->

* Se han resuelto errores en la administración de datos de encabezado al enviar datos de implementación al módulo de New Relic.

<!-- ACP2E-1833 -->

* Las etiquetas de Google Analytics 3 ahora se activan como se espera cuando las etiquetas de Google Analytics 4 están desactivadas.

### Titular

<!-- ACP2E-1818 -->

* Se ha refactorizado la forma en que se carga el contenido del banner para eliminar el exceso de consultas de base de datos, lo que mejora los tiempos de carga del carro de compras.

### Paquete de productos

<!-- ACP2E-1464 -->

* El recuento de productos de categoría ahora contabiliza correctamente los productos agrupados cuando **[!UICONTROL Display Out Of Stock*]** está habilitado.

<!-- AC-8966 -->

* La consulta `customerCart` ahora devuelve todos los descuentos aplicados en los productos agrupados según lo esperado. Anteriormente, los descuentos totales aplicados a un producto agrupado se devolvían como cero.

<!-- ACP2E-2618 -->

* Las páginas de detalles del producto ahora muestran el precio correcto para los productos agrupados para los que se ha aplicado un descuento del 100%. Anteriormente, Commerce no aplicaba un descuento del 100% a los precios de los paquetes de productos.

<!-- ACP2E-2377 -->

* Las reglas de precios del carro de compras ahora se aplican a paquetes de productos en lugar de a cada producto secundario para productos agrupados de precio dinámico.

<!-- ACP2E-1650 -->

* Se corrigió un error que se produce cuando se utiliza el extremo `POST V1/shipment` para crear un envío que contenga un producto agrupado. El extremo ahora agrega elementos según lo esperado y ya no devuelve este error: `The shipment couldn't be saved`.

<!-- ACP2E-1926 -->

* Ahora puede guardar una actualización programada de un producto del paquete que incluye un producto simple que tiene una actualización programada indefinida. Cuando se crea la instantánea del producto del paquete, los productos vinculados ahora se capturan por ID, ID de entidad y también por SKU. Anteriormente, la versión original del producto simple se comprobaba cuando se guardaba la actualización programada en el producto del paquete en lugar de la versión actual del producto simple.

<!-- ACP2E-1650 -->

* Ahora puede usar la ruta de la API `GET V1/shipment/` para crear un envío con un producto agrupado cuando el producto tenga establecido el tipo de envío **[!UICONTROL together]**. Los productos agrupados ahora también se validan en función de su propiedad de tipo de envío.

<!-- ACP2E-2038 -->

* Los compradores ahora pueden editar la cantidad de un paquete en su carro de compras de la tienda. Anteriormente, Adobe Commerce no administraba valores nulos para `ItemId` cuando los productos se editaban en el carro de compras de la tienda y mostraban un error. [GitHub-37696](https://github.com/magento/magento2/issues/37696)

<!-- ACP2E-1801 -->

* Los productos agrupados ahora se pueden agregar correctamente a un pedido del administrador usando SKU que contengan un carácter de barra diagonal (`/`). Anteriormente, los usuarios administradores no podían utilizar este método para agregar productos a un pedido de administración y Commerce arrojaba un error de JavaScript.

<!-- ACP2E-1799 -->

* Los usuarios administradores ahora pueden establecer valores predeterminados decimales para las opciones de paquete recién agregadas cuando **[!UICONTROL Qty Uses Decimal]** está habilitado para el producto simple correspondiente. Anteriormente, los valores decimales solo se podían establecer para selecciones guardadas.

<!-- ACP2E-1347 -->

* Rendimiento optimizado para guardar productos agrupados con un gran número de opciones

<!-- ACP2E-1478 -->

* Los productos agrupados ahora se importan correctamente sin duplicar SKU en las opciones de producto. Anteriormente, Adobe Commerce creaba varios SKU duplicados en las opciones de producto al importar productos agrupados con entradas duplicadas.

<!-- ACP2E-1388 -->

* El precio del producto del paquete ahora se calcula correctamente cuando uno de los productos del paquete está agotado. Anteriormente, si un producto que formaba parte del paquete estaba agotado, se eliminaba del cálculo de precios.

<!-- ACP2E-1503 -->

* Los productos agrupados ahora se muestran como agotados cuando se compra el último de sus productos secundarios requeridos. Anteriormente, los productos agrupados se mostraban como disponibles en la tienda cuando sus productos simples estaban agotados.

<!-- ACP2E-1443 -->

* Se han resuelto los problemas de rendimiento al agregar productos agrupados con opciones no requeridas al carro de compras mediante la mutación `addBundleProductsToCart`.

<!-- ACP2E-1264 -->

* La consulta `categoryList` ahora devuelve todas las opciones de paquete como se espera cuando la configuración **[!UICONTROL Show out-of-stock products]** está habilitada. Anteriormente, las opciones sin existencias no se incluían en la respuesta de consulta.

<!-- ACP2E-1345 -->

* Los productos agrupados creados con `POST V1/products` ahora se realizan correctamente cuando el ámbito del precio de catálogo se establece en `website`. Anteriormente, se producía una infracción de restricción de integridad. [GitHub-35595](https://github.com/magento/magento2/issues/35595)

### Caché

<!-- AC-11411 -->

* Las categorías ahora están visibles para los compradores en tiendas donde la caché está configurada en Fastly CDN (**[!UICONTROL Caching Application=Fastly CDN]**). Esto afectó tanto a los compradores invitados como a los clientes registrados.

<!-- ACP2E-2070 -->

* Las cookies de caché después de iniciar sesión son ahora las mismas después de navegar por el sitio web. Anteriormente, el controlador de inicio de sesión enviaba una cookie de caché incorrecta y las páginas podrían haberse almacenado en caché varias veces.

<!-- ACP2E-1840 -->

* Las respuestas de las operaciones de GraphQL GET en páginas de CMS que contienen bloques de CMS ahora se borran como se espera en la caché de Fastly. Las actualizaciones de programación posteriores ahora muestran contenido preciso y actualizado para estas páginas.

<!-- ACP2E-1524 -->

* La caché de página ahora se borra como se espera para un producto principal cuando se ha guardado uno de sus productos secundarios desde el administrador. Se ha introducido una comprobación de complemento para alcanzar la invalidación de caché para variantes configurables, similares a otros tipos de productos, independientemente del estado del indexador (programado o en tiempo real). Anteriormente, los precios no se actualizaban correctamente en la tienda después de actualizar una variación configurable desde el administrador.

<!-- ACP2E-1454 -->

* Se ha agregado un mecanismo de almacenamiento en caché para las credenciales de AWS. Un proveedor de credenciales ahora utiliza la caché de Commerce para almacenar en caché las credenciales recuperadas de AWS para la configuración EC2.

<!-- AC-7639 -->

* El complemento cuyo propósito es agregar la etiqueta de caché configurable cuando se guarda un producto simple asociado con un producto configurable ahora funciona según lo esperado. Todas las etiquetas de caché configurables relevantes se eliminan según lo esperado cuando `POST V1/products` actualiza un producto simple. Anteriormente, no todos los precios se actualizaban en la tienda y las cachés tenían que borrarse manualmente. [GitHub-36726](https://github.com/magento/magento2/issues/36726)

### Carro y cierre de compra

<!-- ACP2E-2658 -->

* Commerce ahora optimiza el rendimiento al no cargar datos de cotización específicos del usuario al generar páginas completas almacenables en caché como páginas de detalles del producto (PDP) y páginas de CMS cuando se habilita el carro de compras persistente. Anteriormente, el sistema cargaba innecesariamente datos de sesión y comillas específicos del usuario durante la generación de estas páginas, lo que afectaba al rendimiento.

<!-- ACP2E-2684 -->

* Los atributos personalizados de dirección personalizada ahora se guardan según lo esperado en la base de datos. Anteriormente, los valores de atributo guardados en la base de datos iban precedidos de código de atributo.

<!-- ACP2E-2517 -->

* Se ha mejorado la generación del texto de filtro de reglas de carro de compras para atributos de producto. Los productos individuales ya no se cargan varias veces.

<!-- AC-8920 -->

* Adobe Commerce ahora muestra un mensaje de error informativo cuando se produce un error durante el cierre de compra y ya no devuelve al comprador a un paso de cierre de compra anterior. Anteriormente, el comprador se devolvía a la página de envío.

<!-- ACP2E-2520 -->

* La consulta `cart` ya no devuelve el método y la dirección de envío de los carros de compras virtuales. Anteriormente, cuando un carro de compras contenía productos físicos y virtuales, y se eliminaban todos los productos físicos, la respuesta de consulta del carro de compras seguía incluyendo información de envío.

<!-- ACP2E-2267 -->

* Commerce ahora muestra mensajes informativos cuando se activa una acción de complemento al carro de compras. Anteriormente, `The requested qty is not available` no siempre se mostraba en la tienda como era necesario.

<!-- ACP2E-2166 -->

* Se han mejorado los tiempos de carga de las páginas de cierre de compra para los clientes con libretas de direcciones grandes. Commerce ahora procesa solamente el número de direcciones de clientes especificadas en la configuración **[!UICONTROL Customer Addresses Limit]**. Anteriormente, Commerce cargaba toda la libreta de direcciones.

<!-- ACP2E-2174 -->

* La cantidad de productos ahora se puede cambiar en el carro de compras como se espera para los artículos en stock cuando un artículo está agotado. Anteriormente, los compradores no podían cambiar la cantidad de productos de ningún artículo cuando uno estaba agotado.

<!-- ACP2E-2269 -->

* El filtro de atributos de producto `AdvancedSalesRule` ahora funciona correctamente con el tipo de backend de atributo decimal. Como resultado, las reglas del carro de compras con `Coupon Type` establecido en **[!UICONTROL No Coupon]** ahora funcionan según lo esperado.

<!-- ACP2E-2376 -->

* La cantidad total de un descuento en el carro de compras completo ahora se aplica como se espera a los carros de compras que contienen tanto paquetes como productos configurables.

<!-- ACP2E-2092 -->

* Las cookies de la sección del cliente ahora respetan la configuración del dominio de la cookie. Anteriormente, el minicarrito no se actualizaba como se esperaba en las tiendas que contenían subdominios, aunque la sesión se compartiera.

<!-- AC-9340 -->

* El envío de un pedido a varias direcciones ya no genera déclencheur de error durante el procesamiento del ID de región.

<!-- AC-8853 -->

* Los importes de descuento fijo que se aplican en el nivel de carro de compras ahora son correctos.[GitHub-37496](https://github.com/magento/magento2/issues/37496)

<!-- AC-2044 -->

* Los cupones ahora se aplican correctamente a un pedido cuando un comprador aplica el cupón después de seleccionar el método de envío de tarifa plana en el que se aplica una regla de precio del carro de compras con el método de envío establecido como condición. Anteriormente, la página de carro mostraba el error Cupón no es válido y el cupón no se aplicaba. [GitHub-34866](https://github.com/magento/magento2/issues/34866)

<!-- AC-8596 -->

* La casilla de verificación **[!UICONTROL My billing and shipping address are the same]** ahora permanece activada de forma predeterminada cuando un comprador utiliza el completado automático de Chrome para rellenar su dirección de envío y luego hace clic en **Siguiente** antes de que se vuelva a cargar el bloque de métodos de envío. [GitHub-33725](https://github.com/magento/magento2/issues/33725)

<!-- ACP2E-2005 -->

* El valor `applied_rule_ids` de la tabla `quote_item` incluye ahora una lista correcta de identificadores de regla aplicados. Anteriormente, este valor solo contenía el último ID de regla aplicado.

<!-- ACP2E-2025 -->

* Los datos del minicarrito y del cliente en el almacenamiento local ahora se restablecen cuando se elimina una sesión del servidor. Anteriormente, estos datos seguían apareciendo cuando se eliminaba el archivo de sesión.

<!-- ACP2E-1763 -->

* Los carros de compras discretos ya no se fusionan por error del Administrador cuando se habilita el carro de compras persistente.

<!-- ACP2E-1988 -->

* La dirección de envío predeterminada en el paso de envío de cierre de compra ya no se rellena con la dirección de picking en tienda seleccionada anteriormente.

<!-- ACP2E-1614 -->

* Los productos del carro de compras ya no se excluyen de las listas de productos relacionados y de ventas adicionales después de vaciar la caché.

<!-- ACP2E-1580 -->

* El estimador de impuestos y envíos del carro de compras ahora refleja con precisión la configuración de destino predeterminada. Anteriormente, al configurar la configuración predeterminada de cálculo de destino de impuestos y especificar el estado/región y el ZIP, solo se mostraba el valor ZIP en el carro de compras en **[!UICONTROL Estimate Tax and Shipping]**. Esto se debía a que Adobe Commerce establecía el ID de región en indefinido antes de invocar la afirmación condicional que establecía el ID de región predeterminado desde el administrador.

<!-- ACP2E-1547 -->

* Adobe Commerce ya no genera este error durante el cierre de compra cuando se habilita el carro de compras persistente: `Invalid state change requested`. Anteriormente, cuando se generaba este error, ocasionalmente se creaban varios pedidos con el mismo `quote_id`.

<!-- ACP2E-1456 -->

* El minicarrito ahora muestra precios de productos agrupados que reflejan los ajustes de configuración de impuestos del carrito. Anteriormente, el minicarrito siempre incluía impuestos en los precios de los productos agrupados.

<!-- ACP2E-1414 -->

* Se ha mejorado el rendimiento de las reglas de segmentos de clientes que dependen de carros de compras activos, lo que ha reducido el tiempo necesario para agregar un producto al carro de compras.

<!-- AC-7503 -->

* La estimación de envío proporcionada desde la página del carro de compras ahora es precisa. `collectShippingRates` ahora se establece solamente una vez. Anteriormente, la estimación de envío se duplicaba. [GitHub-36648](https://github.com/magento/magento2/issues/36648)

<!-- ACP2E-1417 -->

* La consulta `cart` ya no devuelve un error cuando un producto del carro de compras especificado está agotado. Anteriormente, los compradores que usaban esta consulta para realizar una compra no podían completar su compra cuando un artículo estaba agotado y la página de cierre de compra estaba en blanco.

<!-- ACP2E-1459 -->

* Las solicitudes de la API de invitado a `POST V1/guest-carts/<cartId>/shipping-information` ya no devuelven el estado `cancel` si la página se vuelve a cargar durante el inicio de sesión en un entorno móvil. Anteriormente, Adobe Commerce arrojó un error 500 y registró esta excepción: `TypeError: Argument 2 passed to Magento\CustomerCustomAttributes\Model\Plugin\ProcessCustomerShippingAddressCustomAttributes::beforeSaveAddressInformation() must be of the type string, null given`.

<!-- AC-7886 -->

* La idoneidad para el envío gratuito ahora se calcula como se espera cuando se aplica la condición **[!UICONTROL Subtotal (Excl. Tax)]** para las reglas del carro de compras. [GitHub-36760](https://github.com/magento/magento2/issues/36760)

<!-- AC-6672 -->

* La consulta `cart` ahora devuelve los precios de nivel correctos para un producto. [GitHub-29655](https://github.com/magento/magento2/issues/29655)

<!-- ACP2E-1162 -->

* Se han añadido mensajes de error informativos a la página de cierre de compra para guiar a los compradores cuando la aplicación de un cupón en la página de envío entra en conflicto con el método de envío seleccionado. Anteriormente, un mensaje indicaba a los compradores que volvieran a la página anterior.

<!-- ENGCOM-8387 -->

* La ventana emergente de autenticación ahora solo se inicializa cuando es necesaria, en lugar de cuando el cierre de compra de invitados está habilitado. Ahora se inicializa cuando el comprador invitado intenta continuar con el cierre de compra y el cierre de compra de invitado está deshabilitado. [GitHub-30672](https://github.com/magento/magento2/issues/30672)

### Regla de precio del carro

<!-- AC-2054 -->

* La condición de subselección de producto de la regla de precio de carro de compras ahora incluye la opción `total (incl.tax)` según lo esperado. [GitHub-34871](https://github.com/magento/magento2/issues/34871)

<!-- ACP2E-2029 -->

* La condición de regla de precio de catálogo `If an item is FOUND/NOT FOUND in the cart with ALL/ANY of these conditions true` ahora funciona correctamente con los atributos category y SKU. Anteriormente, esta condición no se aplicaba correctamente en la lógica de cupones de precio de carro de compras y se aplicaban cupones no válidos a los pedidos. [GitHub-37660](https://github.com/magento/magento2/issues/37660)

<!-- ACP2E-1932 -->

* Ahora puede guardar correctamente una nueva regla de precio del carro de compras con la extensión `Magento_OfflineShipping` deshabilitada. Anteriormente, Adobe Commerce arrojó este error: `report.ERROR: Warning: Undefined array key "simple_free_shipping"`. [GitHub-37580](https://github.com/magento/magento2/issues/37580)

<!-- ACP2E-1516 -->

* Las reglas de precios del carro de compras ahora se aplican según lo esperado cuando se configura una regla de precios del carro de compras relacionada con un método de envío para la tienda y este método de envío se cambia por otro durante el cierre de compra. Anteriormente, el valor `applied_rule_ids` nunca se cambiaba en la tabla `sales_order_item` y la regla de precio del carro de compras no se aplicaba al pedido.

### Catálogo

<!-- AC-10746 -->

* Al ejecutar `bin/magento cache:clean` o `bin/magento cache:flush`, ya no se vacía toda la caché integrada o de página completa de Barnish a menos que se especifique lo contrario. [GitHub-38301](https://github.com/magento/magento2/issues/38301)

<!-- ACP2E-2257 -->

* Los comerciantes ahora pueden usar el carrusel de productos para crear bloques de CMS cuando `catalog_product_price dimensions-mode` está establecido en `website`. Anteriormente, Commerce no guardó el bloque y arrojó este error SQL: `report.CRITICAL: PDOException: SQLSTATE[42S02]: Base table or view not found: 1146 Table`.

<!-- AC-6847 -->

* Commerce ya no muestra imágenes duplicadas cuando se cambia el color del producto en una página de detalles del producto.  [GitHub-36243](https://github.com/magento/magento2/issues/36243)

<!-- ACP2E-2504 -->

* Se ha optimizado el algoritmo para sincronizar valores específicos de sitios web después de agregar un nuevo almacén o cambiar uno existente en entornos grandes de varias tiendas.

<!-- ACP2E-2631 -->

* Se ha mejorado el proceso de limpieza de los archivos de imagen en caché para evitar la creación de directorios ocultos en la carpeta `pub/media/catalog/product`. Anteriormente, los directorios ocultos provocaban problemas de espacio en disco durante las operaciones de limpieza. Se pudo finalizar la operación, lo que dejó directorios ocultos temporales que nunca se eliminaron.

<!-- AC-10316 -->

* Los precios de los paquetes de productos ahora se calculan correctamente y se ha resuelto un problema con el orden de las operaciones al calcular los precios. [GitHub-35665](https://github.com/magento/magento2/issues/35665)

<!-- AC-6996 -->

* Se ha eliminado una cláusula innecesaria de `catalog_product_price` consultas de índice, lo que ha mejorado el rendimiento de este indizador en almacenes con catálogos grandes. [GitHub-32382](https://github.com/magento/magento2/issues/32382)

<!-- ACP2E-2522 -->

* Commerce ya no inserta texto de descripción de producto en el campo de la página de detalles del producto **[!UICONTROL Meta Description]** cuando este campo se ha dejado vacío. Anteriormente, cuando una descripción de producto contenía código HTML generado por Page Builder u otro editor de HTML, el HTML se mostraba en el campo Meta **[!UICONTROL Description]** y no se podía dejar vacío este campo.

<!-- ACP2E-2308 -->

* Las opciones de producto configurables en páginas de PDP de producto configurables ya no se ven afectadas por otras opciones de productos configurables de la página. Anteriormente, los productos configurables con atributos desplegables ya no déclencheur una excepción cuando hay un carrusel de productos en la página de detalles del producto. Las opciones de producto configurables no se podían seleccionar cuando había otros productos configurables con opciones de muestra en la página.

<!-- ACP2E-2260 -->

* La información de productos visualizada recientemente ahora se muestra de acuerdo con la configuración de la vista de tienda. Anteriormente, los datos de productos vistos recientemente no se actualizaban por vista de tienda, incluidos el nombre y el idioma preferido.

<!-- ACP2E-2296 -->

* Los vídeos de Vimeo ahora se reproducen como se espera en las páginas de productos en la vista móvil en navegadores web basados en Chromium.

<!-- ACP2E-1959 -->

* El comando `bin/magento catalog:images:resize` ahora genera correctamente imágenes de producto para los productos asignados a un sitio web personalizado con un tema personalizado.

<!-- ACP2E-1982 -->

* Los metadatos con valores `NULL` o `NOT NULL` ahora se guardan para el almacén predeterminado de acuerdo con la casilla de verificación **Usar valor predeterminado** según lo esperado. Anteriormente, los metadatos con el valor `NULL` no se guardaban cuando esta casilla de verificación no estaba marcada.

<!-- ACP2E-2093 -->

* Los comerciantes ahora pueden eliminar correctamente una imagen existente de la página de detalles del producto y, a continuación, cargar una nueva imagen con el mismo nombre. Anteriormente, en estas circunstancias, la página de producto de la tienda no mostraba la imagen correcta.

<!-- ACP2E-2128 -->

* La consulta `productDetail` devuelve ahora el nombre del producto en lugar de nulo cuando el atributo de la imagen de producto `alt` está establecido como vacío.

<!-- ACP2E-2215 -->

* Los pedidos que incluyen productos descargables y físicos ahora incluyen vínculos de trabajo al producto descargable en cuanto se completa el pedido. Anteriormente, los vínculos a productos descargables no estaban disponibles hasta que se enviaban los productos físicos del mismo pedido.

<!-- ACP2E-2343 -->

* Las reescrituras de URL ahora se actualizan cuando una categoría se mueve de una categoría store/root a otra categoría store/root. Las entradas de base de datos obsoletas ahora se eliminan cuando las subcategorías se transfieren a nuevas categorías principales. La base de datos ahora incluye solo las entradas relevantes. Anteriormente, `url_path` no se actualizaba con el identificador de almacén adecuado.

<!-- ACP2E-2152 -->

* El extremo REST `V1/products/<sku>/media` ahora puede procesar la carga simultánea de varias imágenes multimedia. Anteriormente, al procesar varias solicitudes simultáneamente, se creaban datos incoherentes y Commerce arrojaba un error cuando estos datos se guardaban en la base de datos.

<!-- ACP2E-2259 -->

* Los titulares de segmentos de clientes ahora se comportan como se espera cuando un comprador que está usando una cuenta de cliente recién creada cierra sesión. Anteriormente, los titulares creados para el segmento de clientes que iniciaron sesión se mostraban incluso después de que finalizara esa sesión de cuenta (es decir, el comprador registrado cerró sesión).

<!-- ACP2E-2219 -->

* Se ha mejorado el rendimiento de reindexación parcial para los indexadores de Categoría de productos y Categorías de productos. Anteriormente, el trabajo cron de `indexer_update_all_views` ejecutaba reindexadores varias veces por producto o categoría individual.

<!-- ACP2E-2043 -->

* Cuando el estado de stock del producto se actualiza automáticamente a agotado en función de la configuración de stock (cantidad), el estado de stock se actualizará posteriormente a en stock cuando se actualice la cantidad de stock. Anteriormente, la configuración `stock_status_changed_auto` se omitía cuando la configuración de existencias de un producto se actualizaba a En existencias.

<!-- AC-8904 -->

* La ordenación de la barra de herramientas ahora funciona como se espera en las páginas de búsqueda cuando la configuración **[!UICONTROL Remember Category Pagination]** está habilitada. [GitHub-33220](https://github.com/magento/magento2/issues/33220)

<!-- ACP2E-1640 -->

* Los atributos de selección múltiple ahora se guardan como se espera cuando se selecciona la casilla de verificación **[!UICONTROL Use Default Value]** en el ámbito de vista de tienda. Anteriormente, esta casilla de verificación no estaba marcada cuando se editaba el producto y se guardaba el valor predeterminado.

<!-- ACP2E-1878 -->

* Los usuarios administradores con acceso limitado a sitios web ahora pueden agregar imágenes a un producto que esté dentro de su ámbito. Si el usuario administrador no tiene derechos de acceso al producto, Commerce muestra un mensaje informativo. Anteriormente, los usuarios administradores con acceso limitado a sitios web no podían agregar imágenes a los productos a los que tenían acceso.

<!-- ACP2E-1956 -->

* Los valores `special_from_date`, `special_to_date`, `news_from_date` y `news_to_date` definidos por el usuario no se anulan cuando se edita un producto en el ámbito de vista de tienda.

<!-- AC-6761 -->

* Commerce ahora muestra el nombre correcto después de ordenar los productos por nombre en Administración > **[!UICONTROL Category]** > **[!UICONTROL Products in category]** en implementaciones de varias tiendas en las que los nombres de los productos varían según el almacén. [GitHub-36208](https://github.com/magento/magento2/issues/36208)

<!-- ACP2E-1975 -->

* La mutación `addProductsToCart` ahora devuelve opciones personalizables con datos. Anteriormente, solo devolvía opciones personalizables vacías. [GitHub-37599](https://github.com/magento/magento2/issues/37599)

<!-- ACP2E-1859 -->

* La posición del producto y la selección de ID ahora se muestran correctamente cuando un usuario administrador agrega un nuevo producto a una categoría después de borrar la caché, pero no recargando la página de categoría. Anteriormente, la posición y la selección del producto no coincidían y se mostraban incorrectamente.

<!-- ACP2E-1779 -->

* Los comerciantes ahora pueden actualizar la fecha u hora de inicio futuras de un cambio programado para un producto descargable. Anteriormente, Adobe Commerce arrojaba este error durante la actualización de la fecha u hora de inicio futuras del producto descargable: `The downloadable link isn't related to the product. Verify the link and try again`.

<!-- ACP2E-1943 -->

* El estado de producto no satisfecho ahora se muestra correctamente en la tienda. Anteriormente, los productos disponibles para el envío se identificaban incorrectamente como no pedidos.

<!-- ACP2E-1948 -->

* El acceso a productos descargables desde Admin ya no provoca un error cuando el usuario administrador cambia la vista de la tienda de la vista utilizada durante la creación del producto a otra vista de la tienda. Los precios de los productos ahora se convierten correctamente en flotantes cuando un usuario administrador cambia la vista de la tienda de todas las vistas de la tienda a la vista de la tienda predeterminada. Anteriormente, Adobe Commerce arrojaba un error. [GitHub-37519](https://github.com/magento/magento2/issues/37519)

<!-- ACP2E-1994 -->

* Los productos exportados ahora tienen el valor `manage_stock` correcto cuando el valor `use_config_manage_stock` es igual a `1`. Anteriormente, este valor predeterminado era incorrecto.

<!-- ACP2E-1479 -->

* Adobe Commerce ya no muestra un mensaje de advertencia cuando guarda un producto creado con opciones personalizadas después de eliminar su imagen.

<!-- ACP2E-1419 -->

* Las imágenes en miniatura del producto ahora se muestran según lo esperado en el correo electrónico de alerta de stock de productos que se envía cuando un producto vuelve a estar disponible. Anteriormente, esta imagen no se mostraba en el correo electrónico de alerta

<!-- AC-3003 -->

* El recuento de productos en el árbol de categorías (Administrador **[!UICONTROL Catalog]** > **[!UICONTROL Category]**) ahora es preciso. Anteriormente, no se podía recuperar el recuento de productos de categoría de la tabla `catalog_category_product_index`. Se ha corregido el error tipográfico que activaba este error. [GitHub-35417](https://github.com/magento/magento2/issues/35417)

<!-- ACP2E-1239 -->

* La imagen principal del producto en la página de detalles del producto ya no se desplaza visiblemente hacia abajo durante la carga de la página cuando `product_image_white_borders` en el tema `view.xml` está deshabilitado. Anteriormente, la imagen del producto se desplazaba visiblemente hacia abajo durante la carga de la página debido a la configuración de altura incorrecta en Fotorama JS.

<!-- ACP2E-1361 -->

* Ahora se notifica a los clientes sobre caídas en el precio del producto cuando el cliente está suscrito a las alertas de caída de precios. Anteriormente, las notificaciones de caída de precios no siempre se enviaban debido al almacenamiento en caché de nivel de aplicación.

<!-- ACP2E-1422 -->

* La validación del lado del servidor se ha añadido al proceso de creación de atributos de producto a través de la API web. No puede habilitar el campo **[!UICONTROL Use in Layered Navigation Catalog]** cuando el valor del campo **[!UICONTROL Catalog Input Type for Store Owner]** sea `Text Field`, `Text Area`, `Text Editor`, `Date` o `Date and Time`. Anteriormente, los productos se omitían de las categorías y los resultados de búsqueda.

<!-- ACP2E-1413 -->

* La página de categoría ahora se vuelve a cargar con la paginación correcta después de que un comprador abra la página, cambie la paginación, navegue a una página de producto y, a continuación, vuelva a la página de categoría. [GitHub-36563](https://github.com/magento/magento2/issues/36563)

<!-- ACP2E-1334 -->

* Los productos simples sin existencias que son opciones para un producto configurable ahora se muestran como deshabilitados en la tienda cuando **[!UICONTROL Display Out of Stock Products]** está establecido en **Sí**. Anteriormente, todas las opciones se mostraban como disponibles, a pesar de su estado y disponibilidad real.

<!-- ACP2E-1384 -->

* Al actualizar el atributo de ámbito del sitio web en una vista de almacén específica, ya no se anula el valor de ese atributo en el ámbito global. Anteriormente, al importar precios de productos cuando había varias filas disponibles con el mismo SKU y `store_view_code`, se producían precios inexactos para los ámbitos de vista predeterminado y de Todas las tiendas.

<!-- ACP2E-1632 -->

* Los comerciantes ahora pueden añadir una imagen de GIF a la galería de imágenes de un producto desde el administrador. Anteriormente, Adobe Commerce mostraba este error: `imagecolorsforindex(): Argument #2 ($color) is out of range`.

<!-- ACP2E-1709 -->

* Se han agregado comprobaciones para gestionar los errores resultantes de claves de matriz no definidas. Anteriormente, se producía un error durante la generación de la lista blanca de esquemas declarativos.

<!-- ACP2E-1749 -->

* Adobe Commerce ahora devuelve un resultado válido para la fecha personalizada `01/01/1970`. Anteriormente, el atributo personalizado devolvió este error: `Invalid input datetime format of value '1/01/1970`. [GitHub-37274](https://github.com/magento/magento2/issues/37274)

<!-- AC-6507 -->

* `routes` consultas que utilizan fragmentos ahora devuelven información de categoría según lo esperado. Anteriormente, se producía un error interno del servidor en la página de categoría. [GitHub-35906](https://github.com/magento/magento2/issues/35906)

<!-- ACP2E-1772 -->

* Se han resuelto los problemas con el proceso de reindexación parcial de `cataloginventory_stock` y ha mejorado el rendimiento del indizador. Anteriormente, las categorías de stock y producto no se actualizaban con precisión.

<!-- AC-8226 -->

* Adobe Commerce ahora genera una redirección 301 para un producto cuando la categoría a la que pertenece se ha movido a una nueva principal. [GitHub-37039](https://github.com/magento/magento2/issues/37039)

### Reglas de catálogo

<!-- ACP2E-1834 -->

* Las reglas del catálogo ahora se indexan correctamente cuando se habilitan mediante la actualización programada. Como resultado, los precios descontados ahora se generan e indexan correctamente. Anteriormente, cuando había dos reglas de catálogo disponibles y una regla se activa después de que la primera regla de la primera regla de la operación de indexación de la regla de catálogo se haya completado, no se generaban los precios de descuento de la regla de catálogo para la segunda regla de catálogo.

<!-- ACP2E-1579 -->

* Las reglas de catálogo ahora se aplican como se espera en un entorno de varios sitios web.

### Productos configurables

<!-- ACP2E-1881 -->

* Los comerciantes ahora pueden seleccionar **[!UICONTROL Skip quantity at this time]** y **[!UICONTROL Skip image uploading at this time]** al configurar un producto configurable sin afectar el origen de los productos simples asociados. Anteriormente, al seleccionar **[!UICONTROL Skip quantity at this time]**, desaparecían los orígenes del producto.

<!-- AC-7099 -->

* La etiqueta **[!UICONTROL As low as]** ya no se muestra para un precio de producto configurable cuando todas las opciones tienen el mismo precio.

<!-- ACP2E-2464 -->

* Los usuarios administradores con permisos de sitio web ahora pueden guardar un producto secundario que forme parte de un producto configurable en un contexto de tienda diferente. Los procesos de reindexación ahora omiten este tipo de producto configurable.

<!-- ACP2E-2003 -->

* Los productos configurables con dos productos secundarios ya no se marcan como agotados cuando una actualización programada desactiva un producto secundario.

<!-- AC-8060 -->

* Se ha mejorado el rendimiento de las operaciones de guardado para productos configurables con varias opciones. Anteriormente, se podían producir tiempos de espera durante las operaciones de guardado del producto. [GitHub-36928](https://github.com/magento/magento2/issues/36928)

<!-- ACP2E-1764 -->

* La visualización de la tienda de los precios de los productos configurables ahora cambia según lo esperado cuando un comprador selecciona una opción de producto. [GitHub-37378](https://github.com/magento/magento2/issues/37378)

### Cupones

<!-- ACP2E-2495 -->

* Los códigos de cupón con un número limitado de usos por cliente ahora se pueden utilizar por segunda vez cuando falla el pedido para el que se utilizaban anteriormente. Anteriormente, el código de promoción no se lanzaba cuando se cancelaba el pedido anterior.

<!-- ACP2E-2428 -->

* Los códigos de cupón que contienen caracteres de espacio ya no se invalidan. Anteriormente, si un código de cupón contenía un carácter de espacio (antes o después del código real), la validación fallaba. [GitHub-38048](https://github.com/magento/magento2/issues/38048)

<!-- ACP2E-1551 -->

* Los compradores ahora pueden utilizar dos códigos de cupón autogenerados independientes que se han generado mediante la misma regla de precio del carro de compras. El campo `Uses per Coupon` ahora está habilitado cuando el tipo de cupón seleccionado es `Auto` (similar para el tipo de cupón =`Specific Coupon`). Esto, a su vez, permite al comprador aplicar varios códigos de cupón al mismo precio del carro de compras si los códigos son diferentes.

<!-- ACP2E-1496 -->

* El valor de cupón de un solo uso de un comprador ahora se restaura según lo esperado cuando se cancela el pedido al que se aplicó.

<!-- ACP2E-1195 -->

* El extremo `GET V1/coupons/<couponId>` ahora devuelve la respuesta esperada completa para los cupones creados manualmente, tal como lo hace para los cupones generados automáticamente. Anteriormente, se omitían algunos campos (por ejemplo, `usage_limit`, `usage_per_customer` y `created_at`).

### cron

<!-- ACP2E-2457 -->

* El trabajo cron `aggregate_sales_report_bestsellers_data` ya no crea tablas temporales MySQL muy grandes y ahora se completa correctamente. Este trabajo de cron ahora inserta datos por tienda, no para todas las tiendas a la vez. Anteriormente, este trabajo cron podía provocar `No space left on device` errores.

<!-- ACP2E-2427 -->

* El número de registros pendientes en la tabla `cron_schedule` se ha reducido al evitar que los trabajos cron intenten adquirir bloqueos de trabajos cron innecesarios. Anteriormente, los trabajos cron intentaban adquirir bloqueos cuando era demasiado tarde para ejecutar el trabajo. Los trabajos cron de `cron_schedule` no se marcaron como omitidos aunque ya habían pasado la hora programada. Commerce también mostró este error repetidamente en el registro de errores: `report.WARNING: Could not acquire lock for cron job: indexer_update_all_views`.

<!-- AC-9207 -->

* Se ha corregido el error fatal de dividir por cero en expresiones cron. [GitHub-37804](https://github.com/magento/magento2/issues/37804)

<!-- ACP2E-1792 -->

* El proceso de cron `sales_clean_quotes` se ha optimizado para que se ejecute más rápido al agregar un índice compuesto en `store_id` y `updated_at columns` en la tabla de comillas. Este cambio mejora el rendimiento del trabajo cron al procesar muchas ofertas.

<!-- AC-7987 -->

* Los usuarios administradores ahora pueden ver qué tarea está realizando el proceso `bin/magento cron:run` en este momento. El título del proceso que se está ejecutando ahora enumera los nombres de grupo y trabajo. [GitHub-34321](https://github.com/magento/magento2/issues/34321)

### Cliente

<!-- AC-6748 -->

* Adobe Commerce ahora muestra los campos **[!UICONTROL Date of Birth]**, **[!UICONTROL Tax/VAT Number]**, **[!UICONTROL Gender]**, **[!UICONTROL Telephone]**, **[!UICONTROL Company]** y **[!UICONTROL Fax]** en la página Editar cliente en función de la configuración. [GitHub-36196](https://github.com/magento/magento2/issues/36196)

### Segmentos de cliente

<!-- ACP2E-2471 -->

* Las condiciones del segmento de cliente ahora cargan todos los clientes coincidentes según lo esperado. Anteriormente, la lista de clientes coincidentes con el segmento de cliente no contenía todos los clientes coincidentes.

### EAV

<!-- ACP2E-2222 -->

* El indexador EAV ya no requiere la eliminación de las entidades no visibles durante el procesamiento por lotes. De forma predeterminada, el indizador ya no agrupa productos no visibles y el rendimiento del indizador ha mejorado.

### Correo electrónico

<!-- ACP2E-2125 -->

* Los correos electrónicos que contienen diacríticos o acentos (es decir, correo electrónico utf8) ahora son compatibles para clientes y empresas, así como para la colocación de pedidos por parte de invitados y clientes registrados. Anteriormente, Commerce no guardaba los registros de clientes que contenían diacríticos y mostraba este error: `Something went wrong while saving the customer`.

<!-- ACP2E-2503 -->

* Los nombres de remitente de correo electrónico ya no pueden incluir dos caracteres. Una nueva regla de validación ahora impide guardar nombres de remitente que contienen dos puntos desde la sección Almacenar direcciones de correo electrónico de Administración **[!UICONTROL Stores]** > **[!UICONTROL General]**. Anteriormente, los comerciantes podían guardar un nombre de remitente que contuviera dos puntos, lo que daba como resultado errores del servidor de correo.

<!-- ACP2E-2018 -->

* Las opciones de imagen ya no se muestran como marcado de HTML en los correos electrónicos de los clientes de devoluciones (plantilla predeterminada) para productos con opciones de imagen personalizadas.

<!-- ACP2E-1529 -->

* Los detalles del administrador de la empresa ahora se guardan según lo esperado y se redirige correctamente a los administradores cuando los correos electrónicos de la asignación de administradores de la empresa contienen una variable `CMS Block URL`.

<!-- AC-2903 -->

* Las direcciones de correo electrónico de los clientes ahora pueden incluir diacríticos. Anteriormente, la validación del front-end prohibía la creación de un usuario con diacríticos en su dirección de correo electrónico. [GitHub-12075](https://github.com/magento/magento2/issues/12075)

<!-- ACP2E-1682 -->

* Los correos electrónicos de alerta de cotizaciones y precios ahora se traducen según el idioma configurado para la vista de tienda predeterminada del sitio web. Anteriormente, estos correos electrónicos no se traducían.

<!-- ACP2E-1571 -->

* `POST V1/order/notify-orders-are-ready-for-pickup` envía ahora un mensaje de correo electrónico para avisar a los clientes de que un pedido está listo para su recogida únicamente cuando el pedido está listo. Ahora, el correo electrónico solo se activa cuando se ha satisfecho la solicitud sin excepción.

### Marcos

<!-- AC-10873 -->

* Se ha mejorado la depuración al agregar el valor `UNCACHEABLE` al generar un encabezado HTTP con Barniz en uso. Anteriormente, solo se producían `HIT` o `MISS` valores. [GitHub-37912](https://github.com/magento/magento2/issues/37912)

<!-- AC-10884 -->

* Se ha agregado código para admitir el control predeterminado de la compresión de Barniz. [GitHub-38309](https://github.com/magento/magento2/issues/38309)

<!-- AC-8502 -->

* El comando `bin/magento varnish:vcl:generate` ahora incluye un `input-file argument`. Esto admite la adición de una VCL personalizada a un repositorio Git, en relación con la raíz de Commerce. [GitHub-37363](https://github.com/magento/magento2/issues/37363)

<!-- AC-10739 -->

* Se ha eliminado de la base de código la compatibilidad con Varnish 4.x y 5.x. [GitHub-38304](https://github.com/magento/magento2/issues/38304)

<!-- AC-8023 -->

* `phpcodesniffer-composer-installer` en `composer.json` se ha actualizado a la versión 1.0.0. [GitHub-36913](https://github.com/magento/magento2/issues/36913)

<!-- AC-10858 -->

* Los caracteres que no cumplen con [RFC3986](https://www.rfc-editor.org/rfc/rfc3986.html) se han eliminado de la base de código. [GitHub-38355](https://github.com/magento/magento2/issues/38355)

<!-- AC-10692 -->

* Se ha corregido una etiqueta doc PHP incorrecta en la clase `Magento\Reports\Block\Adminhtml\Shopcart\Product\Grid`. [GitHub-38186](https://github.com/magento/magento2/issues/38186)

<!-- AC-10865 -->

* Código refactorizado en toda la base de código que se creó cuando la práctica de codificación dictaba que cualquier sección de caché que se incluyera en el archivo `app/etc/env.php` incluiría una sección de front-end. Esta refactorización soluciona posibles problemas al actualizar las implementaciones de Commerce anteriores a la versión 2.4.4. [GitHub-38363](https://github.com/magento/magento2/issues/38363)

<!-- AC-8005 -->

* Se ha aclarado el mensaje de error asociado con `StockItemValidator.php` cuando se proporciona un identificador de stock con un valor de 0 durante una llamada de API. [GitHub-31107](https://github.com/magento/magento2/issues/31107)

<!-- AC-10583 -->

* Se agregó una matriz vacía predeterminada a `$tagGenerators` en `CompositeTagGenerator` para evitar errores durante la compilación de inyección de dependencia. Anteriormente, la ejecución del comando `bin/magento setup:upgrade` cuando los módulos `Magento_DirectoryGraphQl` y `Magento_StoreGraphQl` estaban deshabilitados generó un error. [GitHub-38165](https://github.com/magento/magento2/issues/38165)

<!-- AC-9232 -->

* La clase `AlgorithmProviderFactory` no utilizada se ha quitado, así como las dependencias de esta clase en clases como `JweAlgorithmManagerFactory.php`, `JweContentAlgorithmManagerFactory.php` y `JwsAlgorithmManagerFactory`. [GitHub-37783](https://github.com/magento/magento2/issues/37783)

<!-- AC-9776 -->

* El archivo `var/log/system.log` ya no contiene `main.INFO error` mensajes. El registro de entrada de menú se ha movido del nivel INFO a DEPURACIÓN. Anteriormente, el archivo `var/log/system.log` se inundó de mensajes como este: `Add of item with id Magento_Theme::design_config was processed … `.

<!-- AC-8809 -->

* La precarga de Redis ya no falla cuando `exec()` devuelve el valor &quot;False&quot;. Se ha agregado verificación al proceso de precarga para evitar que `array_combine` reciba `false` como segundo argumento. Como resultado, la precarga seguirá ejecutándose cuando `exec()` devuelva `false`. [GitHub-37509](https://github.com/magento/magento2/issues/37509)

<!-- AC-8220 -->

* Se refactorizó el módulo `Magento_CatalogWidget` para reemplazar `$block` funciones de escape con `$escaper` funciones de escape. [GitHub-37107](https://github.com/magento/magento2/issues/37107)

<!-- AC-9336 -->

* `Swaziland` se ha actualizado a `Eswatini` en todo el código base. [GitHub-37873](https://github.com/magento/magento2/issues/37873)

<!-- ACP2E-2638 -->

* Se ha añadido la nueva moneda nicaragüense (NIO) a la lista de monedas disponibles.

<!-- AC-10591 -->

* Se cambió el nombre de la variable `reponseBody` a `responseBody` en `app/code/Magento/CatalogRule/Controller/Adminhtml/Promo/Catalog/NewConditionHtml.php`.[GitHub-38093](https://github.com/magento/magento2/issues/38093)

<!-- AC-9221 -->

* Se han resuelto errores de redondeo de subtotales que se producían en transacciones para productos para los que se ha activado la cantidad decimal. [GitHub-37817](https://github.com/magento/magento2/issues/37817)

<!-- ACP2E-2127 -->

* El filtro de fecha para la cuadrícula de administración del cliente ahora funciona según lo esperado según la configuración regional especificada.

<!-- AC-9027 -->

* El comando `bin/magento setup:upgrade` ya no falla debido al tipo de datos de la variable `$schemaPatch`. Anteriormente, el valor de cadena se pasaba a la función `get_class`, lo que provocó el error. [GitHub-37545](https://github.com/magento/magento2/issues/37545)

<!-- ACP2E-2485 -->

* Ya no se producen errores críticos de lectura de base de datos cuando `synchronous_replication` está habilitado para conexiones esclavas en Adobe Commerce Cloud.

<!-- ACP2E-2345 -->

* La conexión con la base de datos MySQL ahora se restaura si la conexión se agota durante una transacción cuando se establece `max_messages = 0` para el consumidor. Anteriormente, la conexión se terminaba.

<!-- ACP2E-2121 -->

* El módulo principal `magento/module-release-notification` se ha marcado como obsoleto en el código de desarrollo 2.4 con este comentario: `Starting from Magento 2.4.7,  Magento_ReleaseNotification module is deprecated in favor of another in-product messaging mechanism`.

<!-- AC-9388 -->

* La generación de código proxy ahora genera archivos de proxy y de fábrica como se espera para las implementaciones que se ejecutan en el modo de producción. [GitHub-35252](https://github.com/magento/magento2/issues/35252)

<!-- AC-1477 -->

* El estado indio de Ladakh ahora aparece como una opción en los menús desplegables de la Dirección del administrador **[!UICONTROL State]**. [GitHub-33698](https://github.com/magento/magento2/issues/33698)

<!-- AC-8388 -->

* El ticker de cuenta atrás de evento ahora se muestra según lo esperado en la página de categoría.

<!-- AC-8369 8368 8365 8317 8351 8357 8377 8357 8351 8323-->

* La etiqueta `@author` prohibida se ha eliminado de la base de código, incluidos estos módulos: `Magento_user-variable-wee`, `Magento_Catalog`, y `Magento_Customer`, `Magento_Wishlist`, `Magento_Review` `Tax`, y en todo el marco de trabajo. [GitHub-37245](https://github.com/magento/magento2/issues/37245), [GitHub-37246](https://github.com/magento/magento2/issues/37246), [GitHub-37249](https://github.com/magento/magento2/issues/37249), [GitHub-37263](https://github.com/magento/magento2/issues/37263)

<!-- AC-9489 -->

* El serializador JSON del módulo `User` se ha reemplazado por un serializador nuevo y más preciso (`JsonHexTag`). Anteriormente, Commerce a veces se bloqueaba al intentar utilizar datos serializados por el serializador normal cuando contenía elementos sin escape. [GitHub-31377](https://github.com/magento/magento2/issues/31377)

<!-- ACP2E-2138 -->

* Ya no se producen errores de canalización rotos al ejecutar un reíndice completo (`bin/magento indexer:reindex`). Las conexiones AMPQ ahora se cierran antes de que el administrador de procesos ramifique los procesos.

<!-- ACP2E-2244 -->

* El validador de mensajes de cola ahora valida el subtipo de todos los elementos de la matriz. Anteriormente, Commerce arrojaba una excepción.

<!-- ACP2E-2066 -->

* La configuración de conexión de cola por tema en `app/etc/env.php` ahora funciona correctamente. Anteriormente, la cola de alertas de productos no se generaba correctamente cuando se creaba una nueva cola de mensajes con un intercambio personalizado. Si la conexión de cola de un tema se configuró en `app/etc/env.php` con un intercambio personalizado, se creó un nuevo enlace para todos los temas con ese intercambio personalizado. Los comerciantes no pudieron procesar las alertas de productos.

<!-- ACP2E-2144 -->

* Los formatos temporales marcados con un comentario `/* mariadb-5.3 */` ya no causan errores durante `bin/magento setup:install` al actualizar el servidor MariaDB a la versión 10.5.1 o superior.

<!-- ACP2E-2147 -->

* El controlador AwsS3 ahora funciona según lo esperado como reemplazo de la implementación base predeterminada de almacenamiento de archivos. Anteriormente, los datos podían dañarse cuando este controlador se configuraba para el almacenamiento de archivos. [GitHub-37844](https://github.com/magento/magento2/issues/37844)

<!-- ACP2E-1999 -->

* Los comandos `bin/magento config:show` y `set` que utilizan variables `$_ENV` ahora admiten el uso del sitio web y almacenan códigos que contienen caracteres en minúscula o en mayúscula.

<!-- AC-8923 -->

* Se agregaron clases con `!important` como se usa en Tailwind 3 para la compatibilidad con el diseño CSS. [GitHub-37568](https://github.com/magento/magento2/issues/37568)

<!-- AC-9115 -->

* Se ha agregado una dependencia `jQuery` que falta al archivo `trim-input.js`. [GitHub-37683](https://github.com/magento/magento2/issues/37683)

<!-- AC-9387 -->

* Los detalles específicos del evento ahora se pasan como un segundo atributo (`context`) del método `log`. [GitHub-37879](https://github.com/magento/magento2/issues/37879)

<!-- AC-9109 -->

* Se han añadido valores de relación de aspecto a las imágenes del catálogo y se han eliminado scripts innecesarios del marco de trabajo de la interfaz de usuario. [GitHub-37691](https://github.com/magento/magento2/issues/37691)

<!-- AC-9188 -->

* Se han revisado los mensajes de error activados por una configuración XML no válida para que sean más informativos. [GitHub-37788](https://github.com/magento/magento2/issues/37788)

<!-- AC-9335 8817-->

* Código obsoleto refactorizado relacionado con la creación de propiedades dinámicas en toda la base de código.

<!-- AC-7009 -->

* Se ha mejorado el rendimiento de los indexadores para grandes almacenes con bases de datos de productos extremadamente activas. Los indexadores ahora indexan la información del producto más reciente una vez por cada índice en lugar de varias veces. Anteriormente, los productos desaparecían del sitio web y los datos de los productos podrían no estar actualizados en el sitio web. [GitHub-30012](https://github.com/magento/magento2/issues/30012)

<!-- ACP2E-1971 -->

* El estado del registro `mview_state` ahora indica con precisión el estado basado en la actividad changelog cuando hay una conexión de base de datos esclava disponible. Anteriormente, estos registros permanecían en estado `waiting` en implementaciones de nube incluso cuando no había entradas nuevas en el registro de cambios.

<!-- ACP2E-2022 -->

* Se agregó compatibilidad con la opción `precision` para el formato de moneda a fin de conservar la paridad de características con la clase `ZendCurrency` obsoleta.

<!-- AC-8854 -->

* Los mensajes de cookies se han convertido en atributos observables y los desarrolladores ahora pueden manipular el estado, lo que puede almacenar en déclencheur los cambios en la interfaz de usuario. Anteriormente, las cookies eran de solo lectura y no se podían manipular. [GitHub-37308](https://github.com/magento/magento2/issues/37308)

<!-- AC-6325 -->

* Los usuarios administradores ahora pueden generar una factura cuando su instancia de Commerce está conectada al almacenamiento de S3. Anteriormente, Commerce mostraba este error: `Cannot create image resource. File not found`. [GitHub-35706](https://github.com/magento/magento2/issues/35706)

<!-- AC-6906 -->

* Adobe Commerce ahora registra un mensaje de excepción como se espera cuando falla la validación del número de IVA por el servicio de validación VIES. [GitHub-36065](https://github.com/magento/magento2/issues/36065)

<!-- AC-8146 -->

* El nombre `Administrators` se ha eliminado de la consulta utilizada para recuperar un rol de administrador durante la creación del rol de administrador. [GitHub-36998](https://github.com/magento/magento2/issues/36998)

<!-- AC-8607 -->

* El comando `bin/magento setup:config:set` ya no da error cuando se incluye un nombre de usuario de base de datos no válido en el archivo `app/etc/env.php`. [GitHub-37409](https://github.com/magento/magento2/issues/37409)

<!-- AC-8595 -->

* La ordenación por columna de palabras reservadas en un componente predeterminado de la IU de administración ya no provoca un error de SQL en `var/log/exception.log`. [GitHub-37423](https://github.com/magento/magento2/issues/37423)

<!-- AC-8562 -->

* Se agregó `AddDataForCostaRica.php` para proporcionar información de estado para Costa Rica. [GitHub-37382](https://github.com/magento/magento2/issues/37382).

<!-- AC-8577 -->

* Se ha mejorado el mensaje de error para el escenario en el que el usuario intenta acceder a una URL no válida desde el administrador. [GitHub-35682](https://github.com/magento/magento2/issues/35682).

<!-- ACP2E-1841 -->

* `Param $options[`position`]` para los símbolos de moneda ahora funciona según lo esperado y admite la personalización de la posición del símbolo de moneda. Anteriormente, después de migrar desde Zend Framework 1, el método `toCurrency` ignoraba el parámetro `position`. Este problema se producía en toda la interfaz de administración.

<!-- AC-8817 -->

* Código obsoleto refactorizado relacionado con la creación de propiedades dinámicas en toda la base de código.

<!-- AC-8154 -->

* Los formatos de estilo personalizados que se crearon ampliando el editor TinyMCE en las versiones de Adobe Commerce y Magento Open Source anteriores a la 2.4.6 ahora están disponibles como se espera en el tipo de contenido de Page Builder `text`. Anteriormente, el formato de estilo personalizado se ignoraba y solo se cargaban los formatos predeterminados después de actualizar a Adobe Commerce 2.4.6-p1. [GitHub-36950](https://github.com/magento/magento2/issues/36950)

<!-- AC-8576 -->

* Se agregó la siguiente nota informativa al archivo `quote.php`: `Important: This method also copies customer data to quote and removes quote addresses`. [GitHub-37400](https://github.com/magento/magento2/issues/37400)

<!-- ACP2E-1973 -->

* La creación de instancias del proveedor de bloqueo ahora pasa por la clase `\Magento\Framework\Lock\Proxy`. El proveedor de bloqueos ahora está configurado con la configuración `lock` a través del archivo `app/etc/env.php`.

<!-- ACP2E-1492 -->

* Mutex se ha implementado para pedidos que evitan condiciones de carrera durante la actualización mediante solicitudes simultáneas. Anteriormente, las solicitudes simultáneas (condiciones de carrera) para cancelaciones de pedidos provocaban entradas duplicadas en la tabla `inventory_reservation`.

<!-- ACP2E-1381 -->

* La función `populateWithArray` ahora transforma correctamente las propiedades del objeto en un caso de serpiente, lo que la hace compatible con los captadores y establecedores de `AbstractModel`. Anteriormente, el formato del caso de la serpiente era incorrecto cuando el nombre del atributo de datos contenía varias letras mayúsculas en una fila.

<!-- ACP2E-1522 -->

* El valor de incremento automático de la tabla `catalog_product_entity_varchar` ahora se incrementa correctamente después de guardar un producto. Anteriormente, este valor aumentaba en diez.

<!-- ACP2E-1701 -->

* Adobe Commerce ya no emite esta excepción del sistema de archivos cuando intenta vaciar la memoria caché de JavaScript/CSS: `No such file or directory`.

<!-- ACP2E-1358 -->

* El valor de `value_id` en `customer_entity_int` ahora se incrementa correctamente. Se ejecuta una consulta de actualización en lugar de `insert on duplicate key update` al actualizar una entidad que incorpora estos atributos. Como resultado, las columnas de incremento automático utilizadas dentro del modelo EAV ahora crecen de forma lineal. Anteriormente, el proceso de incremento automático de columnas omitía valores debido a consultas de inserción fallidas. [GitHub-28387](https://github.com/magento/magento2/issues/28387)

<!-- AC-8462 -->

* Se ha eliminado espacio en blanco innecesario de `id` atributos que no lo requieren. (Este error se introdujo mediante un cambio de código de Adobe Commerce 2.4.6).

<!-- AC-7923 -->

* Los códigos de tienda ya no aparecen en la dirección URL de la tienda cuando esta se encuentra en modo de tienda única. [GitHub-36831](https://github.com/magento/magento2/issues/36831)

<!-- AC-7988 -->

* Se han realizado actualizaciones menores en `around` complementos. [GitHub-31443](https://github.com/magento/magento2/issues/31443)

<!-- AC-7989 -->

* Las muestras `Helper` se han refactorizado para eliminar alias de importación engañosos. [GitHub-31373](https://github.com/magento/magento2/issues/31373)

<!-- AC-8708 -->

* Los usuarios administradores ahora pueden eliminar o cambiar el nombre de un archivo de `sitemap.xml` según lo esperado. Anteriormente, un usuario administrador podía eliminar el archivo del Administrador, pero permanecía en el sistema de archivos. [GitHub-37468](https://github.com/magento/magento2/issues/37468)

<!-- ACP2E-1747 -->

* Los cupones ya no se marcan como utilizados cuando falla el pago del pedido al que se han aplicado. Los mensajes en cola ahora se procesan en el orden en que se publican cuando se inicia el consumidor. Anteriormente, el primer mensaje se extraía de la cola para comprobar simplemente si los mensajes estaban en cola y se rechazaba posteriormente, lo que provocaba que el primer mensaje se procesara en último lugar.

<!-- ACP2E-1627 -->

* Adobe Commerce ya no genera una excepción en el archivo de registro cuando un usuario intenta imprimir una etiqueta de envío. Anteriormente, si una extensión modifica los encabezados de respuesta que contienen un archivo adjunto, el sistema arrojaba una excepción en el archivo de registro.

<!-- AC-7986 -->

* Se ha agregado compatibilidad con más clases de HTML a `elements.xsd`. [GitHub-36891](https://github.com/magento/magento2/issues/36891)

### Correcciones generales

<!-- AC-10591 -->

* Se cambió el nombre de la variable `reponseBody` a `responseBody` en `app/code/Magento/CatalogRule/Controller/Adminhtml/Promo/Catalog/NewConditionHtml.php`.[GitHub-38093](https://github.com/magento/magento2/issues/38093)

<!-- ACP2E-2647 -->

* La programación de actualizaciones de productos ya no borra los datos de atributos de selección múltiple. Anteriormente, cuando se programaba una actualización para un producto, los datos de atributos de selección múltiple del producto se borraban por error. [GitHub-37675](https://github.com/magento/magento2/issues/37675)

<!-- AC-2904 -->

* Guardar un producto con un ámbito de almacén no predeterminado ya no provoca que los atributos sin modificar se conviertan en ámbitos de almacén al cargarse mediante `ProductRepository`. [GitHub-8897](https://github.com/magento/magento2/issues/8897)

<!-- ACP2E-2132 -->

* Los compradores ahora pueden acceder a páginas configuradas como nodos de jerarquía cuando las restricciones de acceso están habilitadas. Anteriormente, se producía un bucle de redirección infinito y el explorador arrojaba este error: `ERR_TOO_MANY_REDIRECTS`.

<!-- ACP2E-2404 -->

* Se han añadido mensajes de error informativos a la validación de campos personalizados en las páginas de detalles del producto. [GitHub-38006](https://github.com/magento/magento2/issues/38006)

<!-- ACP2E-2511 -->

* Ahora se pueden utilizar caracteres especiales en los campos de nombre. Anteriormente, el carácter de Y comercial (&amp;) estaba restringido en el validador de nombres, que bloqueaba las operaciones de adición o edición de clientes cuando el nombre del cliente contenía un Y comercial. [GitHub-38080](https://github.com/magento/magento2/issues/38080)

<!-- ACP2E-2469 -->

* Los usuarios administradores con acceso restringido a un almacén específico ahora pueden utilizar una acción de actualización masiva para actualizar las revisiones de producto. Anteriormente, Commerce arrojaba esta excepción: `report.CRITICAL: TypeError: array_intersect(): Argument #1 ($array) must be of type array, null given in app/code/Magento/AdminGws/Model/Models.php:439`.

<!-- AC-8600 -->

* La funcionalidad Mostrar contraseña de la página de inicio de sesión en tienda ahora muestra las contraseñas según lo esperado. Anteriormente, las contraseñas no se mostraban. [GitHub-37432](https://github.com/magento/magento2/issues/37432)

<!-- ACP2E-2062 -->

* La lista de comparación de productos ahora siempre es específica del sitio web para los compradores invitados y no contiene productos que se añadieron desde otros sitios web, incluidos productos asignados a ambos sitios web.

<!-- ACP2E-2087 -->

* Los bloques de contenido de CMS que contienen emojis ya no se truncan después del emoji cuando se guardan en la base de datos. Anteriormente, el contenido se truncaba después del emoji porque la configuración predeterminada de la base de datos no admitía caracteres de cuatro bytes.

<!-- ACP2E-2154 -->

* La condición **Is one of** de la regla de producto relacionada ahora funciona correctamente cuando se configura con la configuración **Productos para que coincidan con**. Anteriormente, esta regla no identificaba ningún producto.

<!-- ACP2E-2164 -->

* La cuadrícula de la página CMS ahora filtra páginas en función de la vista de tienda asignada al usuario administrador. Anteriormente, el ámbito de la función no se aplicaba.

<!-- AC-8823 -->

* Ahora las contraseñas se muestran según lo esperado cuando la casilla de verificación **[!UICONTROL Show Password]** de la página de inicio de sesión está activa.

<!-- ACP2E-2037 -->

* La validación del atributo de sistema del token de restablecimiento de contraseña de la entidad del cliente (`rp_token`) se ha eliminado de la validación de atributos durante la creación de la cuenta del cliente, y la validación de diacríticos solo se incluye en el correo electrónico del cliente resultante. Anteriormente, Commerce no guardó el registro de cliente y mostró este error: `Something went wrong while saving the customer`.

<!-- AC-8826 -->

* Ahora puede guardar correctamente las ediciones en la cuadrícula Páginas de administración y Bloques después de eliminar una columna. [GitHub-37525](https://github.com/magento/magento2/issues/37525)

<!-- ACP2E-1933 -->

* Los administradores de la empresa ahora pueden agregar usuarios de la empresa desde la tienda. Anteriormente, Commerce registraba este error cuando el usuario administrador intentaba agregar un nuevo usuario: `report.CRITICAL: Error: Call to a member function __toArray() on null in app/code/Magento/LoginAsCustomerLogging/Observer/LogSaveCustomerObserver.php:123`.

<!-- ACP2E-1972 -->

* Los clientes ahora pueden iniciar sesión correctamente con una nueva contraseña de un dispositivo después de restablecer su contraseña en otro dispositivo.

<!-- ACP2E-1609 -->

* El campo de la dirección del cliente administrador **Estado/Provincia** ahora conserva el último valor guardado según lo esperado. Anteriormente, cuando se quitaba el valor de este campo, Commerce seguía mostrando el valor eliminado en el campo **Estado/Provincia**. [GitHub-36846](https://github.com/magento/magento2/issues/36846)

<!-- ACP2E-1796 -->

* Adobe Commerce ya no genera un error de infracción de restricción cuando anula la selección por primera vez y, a continuación, selecciona una página de CMS recién creada.

<!-- ACP2E-1639 -->

* Ahora se asigna correctamente una raíz de sitio web de jerarquía a una página de CMS recién creada. Anteriormente, la selección de la raíz del sitio web de jerarquía no coincidía en las páginas de CMS recién creadas.

<!-- ACP2E-1508 -->

* Ya no se producen errores durante las solicitudes de una fuente RSS para categorías cuando **[!UICONTROL RSS Feed Top Level Category]** está habilitado. Anteriormente, al examinar la página de categoría de fuente RSS se producían errores de Elasticsearch `CRITICAL` en los archivos de registro al habilitar **[!UICONTROL RSS Feed Top Level Category]**.

<!-- ACP2E-1490 -->

* Ahora se guarda el valor correcto para `gws_store_groups` cuando se cambia el ámbito de la función durante la creación de la función del usuario. Anteriormente, cuando se seleccionaba el ámbito de rol como `All`, el valor `gws_store_groups` se guardaba como nulo durante la creación del usuario, pero no durante la edición de roles. Además, si se seleccionó el ámbito de rol como `Custom`, el valor `gws_store_groups` siempre se guardó como nulo.

<!-- ACP2E-1446 -->

* Ahora se puede acceder a la página de restablecimiento de contraseña haciendo clic en el vínculo Admin reset password de la página de inicio de sesión de Admin cuando la configuración de **[!UICONTROL Add Store Code to Urls]** esté habilitada. El vínculo Admin reset password abría anteriormente la página de inicio de sesión o la página 404.

<!-- ACP2E-1274 -->

* El intervalo de fechas del tablero de estadísticas de administración ahora se calcula en función de la zona horaria establecida en los ajustes de configuración y, a continuación, se convierte a UTC para recuperar datos de la base de datos.

<!-- ACP2E-1665 -->

* El filtro de jerarquía de CMS funciona según lo esperado después de filtrar una vista de tienda y luego hacer clic en **[!UICONTROL Save]** en Administración **[!UICONTROL Content]** > **[!UICONTROL Hierarchy]**. Anteriormente, al hacer clic en **[!UICONTROL Save]** se actualizó la página, pero se perdió el contexto y la vista de tienda seleccionada ya no se mostraba.

<!-- ACP2E-1631 -->

* Al hacer clic en el botón **[!UICONTROL Send invitation]** (Administración **[!UICONTROL Marketing]** > **[!UICONTROL Private sales]** > **[!UICONTROL Invitation]**), ahora se envía una solicitud de PUBLICACIÓN junto con la clave del formulario y se envía la invitación correctamente. Anteriormente, al hacer clic en este botón, no estaban presentes ni el método HTTP POST ni la clave del formulario.

<!-- ACP2E-1608 -->

* Los archivos de cero bytes ahora se pueden copiar correctamente en el almacenamiento remoto con AWS S3.

<!-- AC-7402 -->

* Los usuarios administradores ahora pueden añadir una nueva dirección de cliente desde el Administrador cuando el cliente se ha creado para otro sitio web cuyo ID de tienda no coincide con el ID de sitio web. Anteriormente, Adobe Commerce mostraba este mensaje emergente: `Something went wrong`. [GitHub-36582](https://github.com/magento/magento2/issues/36582)

<!-- AC-8247 -->

* La página del editor de bloques de CMS ahora muestra el valor correcto del widget `block_id`. [GitHub-29644](https://github.com/magento/magento2/issues/29644)

### Tarjetas de regalo y envoltorio

<!-- AC-7372 -->

* Los comerciantes ya no pueden crear una tarjeta regalo con un valor negativo.

<!-- ACP2E-1890 1806-->

* La mutación `setGiftOptionsOnCart` ahora elimina el envoltorio para regalos de un pedido según lo esperado. El valor de `gift_wrapping_id` ahora no se ha establecido en el nivel de carro de compras. Anteriormente, `gift_wrapping_id` se actualizaba a su valor anterior después de realizar el pedido incluso cuando este valor no estaba establecido en el nivel de carro de compras.

<!-- ACP2E-1866 -->

* Las cuentas de tarjetas de regalo ahora permanecen activas como se espera cuando se procesa el reembolso parcial de un producto simple desde el pedido al que se aplicó la tarjeta. Anteriormente, se eliminaba la cuenta de la tarjeta regalo.

<!-- ACP2E-1805 -->

* La mutación `setGiftOptionsOnCart` ahora actualiza correctamente la base de datos al eliminar un mensaje de regalo del carro de compras. Anteriormente, los detalles del mensaje no se actualizaban en la base de datos y el mensaje de regalo no se eliminaba del carro de compras.

<!-- ACP2E-1741 -->

* La etiqueta del registro de regalos `Event Information` ahora se traduce según lo esperado.

<!-- ACP2E-1586 -->

* Los subtotales ahora se calculan correctamente para las cantidades de tarjetas regalo personalizadas.

<!-- ACP2E-1350 -->

* Las tarjetas de regalo ahora se aplican correctamente durante el cierre de compra con varias direcciones. Anteriormente, las cantidades de tarjetas regalo se aplicaban incorrectamente a los envíos de varias direcciones, lo que resultaba en cantidades de tarjetas regalo no válidas.

<!-- ACP2E-1341 -->

* La emulación ahora se inicia durante las llamadas de `send()` una vez que la emulación se ha completado durante la llamada de `getInfoBlockHtml()` y no se registra ningún error. Anteriormente, el archivo `system.log` se inundó con este error: `main.ERROR: Environment emulation nesting is not allowed`. [GitHub-35603](https://github.com/magento/magento2/issues/35603)

<!-- ACP2E-1612 -->

* Ahora puede usar la mutación `updateCartItems` para actualizar una tarjeta regalo en un carro de compras. Anteriormente, solo la cantidad de la tarjeta se podía actualizar en el carro de compras mediante esta mutación.

<!-- ACP2E-1669 -->

* El envoltorio para regalos ahora se incluye como se espera en una cotización basada en carros combinados. Anteriormente, los mensajes de regalo se combinaban correctamente, pero no ajustaban las selecciones.

<!-- AC-7530 -->

* La mutación `addProductsToCart` ahora agrega correctamente una tarjeta regalo a un carro de compras. Anteriormente, esta consulta esperaba el nombre del destinatario de la tarjeta de regalo, pero en su lugar se devolvió el nombre del remitente. Adobe Commerce arrojó este error: `Please specify a recipient name`. [GitHub-36665](https://github.com/magento/magento2/issues/36665)


### Google Tag Manager

<!-- ACP2E-1520 -->

* El módulo Google Tag ahora inserta los datos correctos en la capa de datos. Anteriormente, los datos de impresiones de página no se insertaban en la capa de datos.

### GraphQL

<!-- AC-8964 -->

* La consulta `getCustomerWishlist` ya no genera un error interno del servidor al consultar listas que contienen productos configurables.

<!-- AC-8966 -->

* La consulta `customerCart` ahora devuelve todos los descuentos aplicados en los productos agrupados según lo esperado. Anteriormente, los descuentos totales aplicados a un producto agrupado se devolvían como cero.

<!-- AC-8964 -->

* La consulta `getCustomerWishlist` ya no genera un error interno del servidor al consultar listas que contienen productos configurables.

<!-- AC-9147 -->

* La declaración del indicador `is_subscribed`, su resolución, caché y pruebas asociadas se han movido del módulo `CustomerGraphQl` al módulo `NewsletterGraphQl`.

<!-- AC-9362 -->

* La mutación `addProductsToCart` ya no informa de errores no relacionados en `user_errors`. Anteriormente, los errores relacionados con el carro de compras se incluían en `user_errors` junto con los errores de operación esperados. [GitHub-37908](https://github.com/magento/magento2/issues/37908)

<!-- ACP2E-2119 -->

* El filtro de producto de consulta `products` ahora puede devolver resultados de coincidencia parciales así como coincidencias completas. El nuevo atributo `match_type` (PARCIAL, COMPLETO) admite la especificación del tipo de coincidencia. Anteriormente, la consulta solo devolvía coincidencias completas.

<!-- ACP2E-2155 -->

* Las solicitudes simultáneas han agregado la exclusión mutua a la consulta `addConfigurableProductsToCart` para evitar condiciones de carrera durante una actualización. Anteriormente, cuando un comerciante enviaba dos solicitudes paralelas para agregar el mismo producto configurable a un carro de compras, se agregaban dos artículos independientes con el mismo SKU del producto. [GitHub-37847](https://github.com/magento/magento2/issues/37847)

<!-- ACP2E-2201 -->

* La agregación de productos en las respuestas de GraphQL ahora incluye valores distintos de cero para los atributos cuando **[!UICONTROL Use in Layered Navigation]** está establecido en **[!UICONTROL Filterable (no results)]**. Anteriormente, solo se devolvían valores distintos de cero.

<!-- ACP2E-2141 -->

* Se ha mejorado el rendimiento de la consulta `setShippingAddressForEstimate` para operaciones relacionadas con el carro de compras que implican atributos de producto personalizados. Anteriormente, la consulta cargaba todos los atributos de producto cuando los parámetros se enviaban como variables.

<!-- ACP2E-2255 -->

* El campo `products` consulta `ConfigurableProduct.configurable_options` ahora devuelve solamente valores que tienen al menos un producto habilitado. Anteriormente, este campo devolvía productos simples desactivados.

<!-- ACP2E-2151 -->

* Se mejoró el rendimiento de `GetCategories query` al reducir el número de consultas SQL innecesarias que genera.

<!-- AC-8623 -->

* La gestión de errores de direcciones para los componentes de la biblioteca GraphQL ahora funciona según lo esperado.

<!-- AC-9058 -->

* La consulta `products` ahora devuelve todos los detalles de precios relevantes de la tienda cuando el precio dinámico se establece en no y se aplican descuentos. Anteriormente, no se devolvía el rango de precios de los productos. [GitHub-35649](https://github.com/magento/magento2/issues/35649)

<!-- ACP2E-1744 -->

* Los nombres de transacciones de GraphQL ahora incluyen nombres de consulta de nivel superior solo en los registros de New Relic. Anteriormente, los nombres de transacción también incluían nombres de consulta secundarios.

<!-- AC-8623 -->

* La gestión de errores de direcciones para los componentes de la biblioteca GraphQL ahora funciona según lo esperado.

<!-- AC-7430 -->

* Cuando la configuración de visibilidad de un producto está establecida en `Catalog`, las consultas de `products` sobre ese producto ahora resuelven la configuración correctamente. Anteriormente, cualquier filtro proporcionado se cambiaba a la configuración `Visibility: Catalog`. [GitHub-36591](https://github.com/magento/magento2/issues/36591)

<!-- ACP2E-1769 -->

* La consulta `customer` devuelve ahora un campo `product_sale_price` que incluye impuestos sobre pedidos cuando el precio del producto se ha configurado para incluir impuestos. [GitHub-36946](https://github.com/magento/magento2/issues/36946)

<!-- ACP2E-1584 -->

* Los atributos de producto del tipo `DateTime` ahora se asignan al filtro `FilterRangeTypeInput` en las consultas de productos. Anteriormente, estos atributos se asignaban a `FilterMatchTypeInput`. Como resultado de este cambio, el filtrado de consultas en atributos de `DateTime` requiere valores de `from` y `to` en lugar de valores de coincidencia.

<!-- ACP2E-1552 -->

* La consulta `customer` ahora devuelve solamente las críticas de clientes relacionadas con una vista de tienda específica, tal como se espera cuando se filtra por ID de tienda.

<!-- AC-7544 -->

* La consulta `categories` ya no devuelve un error cuando el valor de respuesta `items.redirect_code` contiene un valor nulo. [GitHub-36675](https://github.com/magento/magento2/issues/36675)

<!-- ACP2E-1465 -->

* Los productos relacionados basados en reglas ahora se cargan como se espera en las respuestas de GraphQL después de una limpieza completa de la caché. Anteriormente, los atributos EAV del producto responsables de las coincidencias basadas en reglas no se cargaban para la entidad solicitada, aunque se cargaban después de volver a cargar la página de producto de la tienda.

<!-- ACP2E-1486 -->

* La mutación `changeCustomerPassword` ahora almacena en déclencheur el correo electrónico como se espera después de restablecer correctamente una contraseña.

<!-- ACP2E-1494 -->

* Las consultas `urlResolver` y `route` ahora devuelven un resultado cuando el `Target Path` de reescritura de URL es una dirección URL absoluta. Anteriormente, la consulta `urlResolver` devolvía NULL cuando se utilizaba para recuperar datos de redireccionamiento.

<!-- AC-7979 -->

* La consulta `products` ahora devuelve etiquetas correctas cuando existen varias vistas de tienda. [GitHub-29635](https://github.com/magento/magento2/issues/29635)

<!-- ACP2E-1315 -->

* La consulta `categoryList` ahora devuelve una sección `product` rellenada del bloque `options` para los productos secundarios de los productos agrupados según lo esperado. Anteriormente, no se devolvía información sobre productos secundarios de paquete.

<!-- AC-7114 -->

* La consulta `route` ahora devuelve rutas para categorías y productos según lo esperado sin un error interno del servidor. [GitHub-36544](https://github.com/magento/magento2/issues/36544)

<!-- ACP2E-1652 -->

* La consulta `products` ahora obtiene `url_key` valores cuando se seleccionan varias categorías.

<!-- LYNX-1716-->

* `product` consultas ahora devuelven agregaciones solamente para los productos asignados al catálogo compartido especificado. Anteriormente, los datos de agregación de los productos no asignados a un catálogo compartido aparecían en la navegación por capas.

<!-- AC-6680 -->

* El método `get()` de clase `OptionValueProvider` ahora devuelve un valor de opción de atributo basado en el `option_id` dado según lo esperado. Anteriormente, devolvía un error. [GitHub-35910](https://github.com/magento/magento2/issues/35910)

<!-- AC-6745 -->

* La consulta `products` ahora devuelve todas las agregaciones (filtros) disponibles y sus etiquetas traducidas correctamente. Anteriormente, las etiquetas de agregación de precios y categorías no se traducían según lo esperado. [GitHub-36140](https://github.com/magento/magento2/issues/36140)

<!-- AC-6666 -->

* Ahora puede usar un fragmento `ProductCard` al consultar `related_products`, `upsell_products` y `crosssell_products` en `ProductInterface`. [GitHub-29769](https://github.com/magento/magento2/issues/29769)

<!-- AC-7014 -->

* La consulta `products` ahora devuelve productos relacionados, de venta adicional y de venta cruzada en el orden en que se guardaron. [GitHub-36461](https://github.com/magento/magento2/issues/36461)

<!-- AC-8573 -->

* Las consultas de GraphQL ahora devuelven datos de productos relacionados ordenados por posición. [GitHub-33010](https://github.com/magento/magento2/issues/33010)

<!-- AC-8542 -->

* `category_url_path` se ha agregado a `ProductAttributeFilterInput`, que admite la solicitud de todos los productos para una categoría en una sola consulta. [GitHub-32460](https://github.com/magento/magento2/issues/32460)

<!-- AC-821 -->

* Se ha corregido un error por el que el método que establece el almacén actual en una mutación de GraphQL se ejecutaba antes que el método que administra la validación. [GitHub-31336](https://github.com/magento/magento2/issues/31336)

### Imagen

<!-- ACP2E-1353 -->

* El formulario de carga de iconos favoritos de administrador ahora admite `.ico` tipos de archivos. [GitHub-34858](https://github.com/magento/magento2/issues/34858)

### Importar/exportar

<!-- ACP2E-2261 -->

* El proceso de importación de productos ahora analiza los valores con el separador correcto. Anteriormente, el proceso de importación utilizaba el operador de barra vertical (&quot;|&quot;) para analizar valores de selección múltiple hasta que el separador de valores determinado no fuera igual al valor predeterminado. El proceso de importación falló posteriormente.

<!-- ACP2E-2490 -->

* Las redirecciones 301 ahora se crean automáticamente cuando la importación CSV actualiza `URL Key` valores.

<!-- ACP2E-2129 -->

* Las tarifas de tabla de envío ahora se actualizan según lo esperado en el archivo CSV de importación de tarifas de tabla. El archivo de carga de velocidad de tabla se almacena temporalmente hasta que se ejecute el trabajo cron del procesador de configuración asincrónica. Este trabajo cron toma la nueva ubicación del archivo y la procesa en consecuencia. Anteriormente, las tasas de tabla no se actualizaban como se esperaba porque el procesador asincrónico buscaba el archivo en la ubicación incorrecta.

<!-- ACP2E-2298 -->

* La cuadrícula Exportar archivos ahora muestra todos los archivos exportados independientemente de la marca de tiempo. Anteriormente, la cuadrícula no mostraba todos los archivos exportados que tenían la misma marca de tiempo. [GitHub-36951](https://github.com/magento/magento2/issues/36951)

<!-- ACP2E-2028 -->

* Ahora, los productos con opciones personalizables se pueden importar correctamente. Anteriormente, los datos de opciones se perdían durante la importación. [GitHub-37598](https://github.com/magento/magento2/issues/37598)

<!-- ACP2E-2214 -->

* Los caracteres especiales de los archivos CSV exportados ahora se representan como se espera en Excel. [GitHub-37921](https://github.com/magento/magento2/issues/37921)

<!-- ACP2E-2301 -->

* Importando orígenes de existencias y direcciones de clientes mediante **[!UICONTROL Customers and Addresses (single file)]**  La opción ahora se completa correctamente.

<!-- ACP2E-1930 -->

* La importación de productos ya no falla debido a la falta de memoria. Anteriormente, la importación de cualquier número de productos a una base de datos que ya contiene aproximadamente diez millones de productos fallaba debido a la falta de memoria.

<!-- AC-9116 -->

* Las comprobaciones de validación ahora detienen el proceso de importación como se espera cuando no hay datos válidos para importar y Commerce muestra ahora este error: `There are no valid rows to import`. Anteriormente, la validación se realizaba bajo estas condiciones, pero el proceso de importación falló con este mensaje: `entity values are mixed`. [GitHub-32905](https://github.com/magento/magento2/issues/32905)

<!-- ACP2E-1754 -->

* La importación de claves URL con el mismo producto ya no sobrescribe ni elimina las claves de vista de tienda predeterminadas existentes. Las reescrituras de URL ahora se regeneran para vistas de tienda solo cuando no hay ningún valor `url_key` anulado. Anteriormente, al importar reescrituras de URL con la misma clave de URL, se sobrescribía la clave de URL de vista de tienda predeterminada existente. (`key_store` reescrituras de URL se eliminaron, pero la reescritura de URL en el nivel de vista de tienda predeterminado para el producto se estableció en `key_store`.)

<!-- ACP2E-1875 -->

* El recuento de productos ya no cambia inesperadamente durante la importación. El vaciado de caché ahora se pospone hasta después del proceso de importación.

<!-- ACP2E-1813 -->

* El estado de las acciones de importación programadas ahora representa con precisión el éxito o el error de la operación de importación. Anteriormente, todas las acciones se registraban como correctas.

<!-- AC-7039 -->

* Commerce ahora tiene en cuenta la configuración **[!UICONTROL Disable Automatic Group Change Based on VAT ID]** durante la importación de registros de clientes. Anteriormente, se omitía el valor `disable_auto_group_change` de los archivos de importación. [GitHub-36409](https://github.com/magento/magento2/issues/36409)

<!-- AC-965 -->

* `Magento\Framework\Convert\Excel` ahora administra correctamente los números precedidos de un espacio. El XML de Excel ahora codifica los campos como un `String`. Anteriormente, el escritor de Excel codificaba estos valores como `number`, lo que daba como resultado archivos no válidos. [GitHub-33422](https://github.com/magento/magento2/issues/33422)

<!-- ACP2E-1641 -->

* Los comerciantes ahora pueden especificar la configuración regional en la que se presentan los datos de importación y cómo deben analizarlos los validadores de datos. Si no se especifica un valor de configuración regional, Adobe Commerce utiliza la configuración regional predeterminada (no la vista de almacén predeterminada) para analizar los datos. En el Administrador, los procesos de importación y exportación siguen utilizando la configuración regional de la interfaz de usuario de administración para importar, analizar y dar formato a los datos, respectivamente.

<!-- ACP2E-1847 -->

* La importación de productos con `country_of_manufacture` atributos creados por un usuario administrador con una configuración regional diferente a la del usuario administrador que está importando los productos ya no genera un error de validación. Anteriormente, esta operación de importación podía provocar un error de validación en el atributo `country_of_manufacture`.

<!-- ACP2E-1981 -->

* El proceso de importación de tiendas importa ahora correctamente los datos de origen de stock y Commerce muestra ahora un mensaje de notificación completo cuando finaliza el proceso de importación. Anteriormente, faltaba el mensaje de notificación.

<!-- ACP2E-1889 -->

* La invalidación del indizador redundante se ha eliminado cuando los indizadores están en modo programado.

<!-- ACP2E-1994 -->

* Los productos exportados ahora tienen el valor `manage_stock` correcto cuando el valor `use_config_manage_stock` es igual a `1`. Anteriormente, este valor predeterminado era incorrecto.

<!-- ACP2E-1620 -->

* Adobe Commerce ahora muestra un mensaje de error informativo en la cuadrícula de importación programada cuando una imagen no se importa correctamente durante una operación de importación programada. Anteriormente, no se mostraba ningún mensaje de error.

<!-- ACP2E-1565 -->

* El proceso de importación de productos ya no se interrumpe cuando faltan imágenes de productos. Anteriormente, cuando faltaba una imagen de producto durante la importación de un servicio de terceros mediante un archivo CSV, Adobe Commerce mostraba este error: `Maximum error count has been reached or a system error is occurred!`.

<!-- ACP2E-1476 -->

* El rendimiento de la exportación de clientes desde la cuadrícula de clientes se ha mejorado en implementaciones en las que B2B está habilitado.

<!-- ACP2E-1391 -->

* El proceso de importación de productos ya no genera un error de validación cuando un valor de atributo de la columna `configurable_variations` contiene una coma.

<!-- ACP2E-1377 -->

* La descodificación se ha excluido del proceso de exportación. El texto del archivo de exportación CSV permanece sin cambios después de la importación. Como resultado, la descripción no cambia después de volver a importar. Anteriormente, las etiquetas de HTML se eliminaban en el editor de Page Builder después de exportar e importar el producto.

<!-- ACP2E-1451 -->

* Las configuraciones no predeterminadas (sitio web o ámbito de tienda) que se agregan como variables de entorno ya no interrumpen el proceso `app:config:import` con un error de recursión.

<!-- ACP2E-1569 -->

* La búsqueda en el catálogo y los indexadores de precios en el modo Actualizar al guardar ya no se invalidan después de la importación. Anteriormente, la versión del documento de Elasticsearch Indexer cambiaba de versión cuando se importaban productos nuevos y existentes.

<!-- ACP2E-1482 -->

* Los informes de productos ahora se exportan al directorio `var`. Anteriormente, estos informes se exportaban al directorio raíz del documento, que es un directorio de solo lectura en instancias de nube.

<!-- ACP2E-1736 -->

* Los campos de dirección de cliente de selección múltiple vacíos ya no interrumpen ni detienen el proceso de exportación.

### Índice

<!-- AC-10911 -->

* Se mejoró el rendimiento del indizador `catalogrule_product` cuando no se estableció ninguna regla de catálogo. [GitHub-34784](https://github.com/magento/magento2/issues/34784)

<!-- ACP2E-2204 -->

* Se han resuelto problemas con el rendimiento del indexador de precios. El rendimiento del indexador ya no se degrada gradualmente. El indizador se ha refactorizado para aumentar la velocidad de procesamiento del indizador al cambiar la forma en que se crean las tablas temporales. Estas tablas temporales ahora se recrean en lugar de abordarse con instrucciones de DELETE que llevan más tiempo.

<!-- ACP2E-2033 -->

* Se ha mejorado el rendimiento del indexador de precios. Se ha añadido una sugerencia de índice al indexador de precios que mejora los tiempos de ejecución de las consultas MySQL que se activan durante la indexación.

<!-- AC-9223 -->

* Ahora todos los indizadores utilizan los mismos colores para representar el estado del indizador. [GitHub-34648](https://github.com/magento/magento2/issues/34648)

<!-- ACP2E-1697 -->

* Se ha mejorado el rendimiento del indexador de producto de reglas de catálogo en implementaciones en las que las reglas no están asignadas a todos los sitios web.

<!-- ACP2E-1401 -->

* La creación de un tipo de producto personalizado cuando los indizadores están establecidos en **[!UICONTROL Update on schedule]** ya no hace que la tarea de actualización de índice `cron` falle. [GitHub-36471](https://github.com/magento/magento2/issues/36471)

<!-- ACP2E-1574 -->

* Se han resuelto los problemas de visualización en la página de detalles del producto de la tienda que se debían a la indexación de permisos de catálogo. Anteriormente, Adobe Commerce borraba primero la tabla de índice y después volvía a indexar durante un proceso de indexación completo de `catalogpermissions_product` o `catalogpermissions_category`. Los permisos del catálogo no funcionaron según lo esperado en la tienda hasta que se completó la reindexación.

<!-- AC-6816 -->

* `bin/magento indexer:reindex customer_grid` ya no falla con un error MySQL cuando la cuadrícula del cliente incluye atributos del cliente personalizados recién creados. [GitHub-36233](https://github.com/magento/magento2/issues/36233)

<!-- AC-8076 -->

* El cambio del modo de indizador para varios indizadores (es decir, un cambio del modo de indizador de acción masiva) ahora cambia el modo de un indizador solo cuando el modo actual difiere del que se está aplicando. Esto mejora el rendimiento al evitar viajes innecesarios a la base de datos. [GitHub-36823](https://github.com/magento/magento2/issues/36823)

### Infraestructura

<!-- AC-10866 -->

* Se agregó la instrucción `return` que falta al controlador de habilitación de uso de administración. Anteriormente, no había ninguna instrucción `return` y el controlador de la clase `FrontendController` se controlaba incorrectamente. [GitHub-31374](https://github.com/magento/magento2/issues/31374)

<!-- AC-9390 -->

* Se reemplazó MySQL `CREATE TEMPORARY TABLE ... LIKE` con `CREATE TEMPORARY TABLE` refactorizado para el cumplimiento con MySQL 8.x. [GitHub-37926](https://github.com/magento/magento2/issues/37926)

<!-- ACP2E-1462 -->

* Adobe Commerce ya no incluye la ruta completa a la raíz del servidor en el mensaje de error que muestra cuando se ha enviado una solicitud HTTP mal formada al servidor. Ahora solo se pasan cadenas al método `explode` como segundo argumento.

<!-- AC-8384 -->

* `restricted_classes.php` ha reemplazado a `Zend_Validate_File_Upload`. Anteriormente, el validador se bloqueaba durante la carga de un archivo de importación mayor que el valor configurado en `php.ini `. [GitHub-37281](https://github.com/magento/magento2/issues/37281)

<!-- ACP2E-1146 -->

* Las opciones de atributo proporcionadas por el modelo de fuente de datos e instaladas mediante el parche de datos de configuración (normalmente de módulos de terceros) ahora se pueden utilizar con reglas de segmentos de clientes. Anteriormente, esta combinación no devolvía la lista de clientes que coincidían con el segmento configurado.

<!-- AC-7093 -->

* El motor de plantillas de correo electrónico ahora puede procesar correctamente determinadas directivas anidadas (por ejemplo, `{{if}}{{depend}}...{{/depend}}{{/if}}`). [GitHub-36438](https://github.com/magento/magento2/issues/36438)

<!-- AC-7920 -->

* `product` consultas con datos de agregación ahora devuelven los valores de etiqueta correctos para atributos de producto de tipo booleano. [GitHub-29123](https://github.com/magento/magento2/issues/29123)

<!-- https://github.com/magento/magento2/pull/29173 -->

* Los archivos CSS ya no se dañan cuando se combinan cuando `var/tmp` y `pub/static` están en sistemas de archivos diferentes y **[!UICONTROL CSS Merging Enabled]** está habilitado. Los archivos temporales se han creado en el mismo directorio estático que el archivo de destino para garantizar que ambos archivos estén en el mismo sistema de archivos. Como resultado, la llamada para cambiarle el nombre es atómica. [GitHub-29172](https://github.com/magento/magento2/issues/29172)

<!-- https://github.com/magento/magento2/pull/36769 -->

* Se corrigió un posible error al llamar a una función de miembro `getId()` en `int`, que ocasionalmente desencadenaba una excepción cuando se veía a un cliente en el Administrador.

<!-- https://github.com/magento/magento2/pull/34092 -->

* Las comprobaciones de tipos ahora se aplican al tipo de matriz en el procesador de configuración del tema de diseño. [GitHub-34440](https://github.com/magento/magento2/issues/34440)

### Inventory management

<!-- ACP2E-1883 -->

* Los productos ahora vuelven automáticamente al estado En existencias después de una nota de abono que incluye una devolución de la cantidad del producto. Anteriormente, si un producto estaba agotado, pero una nota de crédito devolvía las existencias de este producto, los comerciantes tenían que cambiar manualmente el estado de las existencias del producto.

<!-- ACP2E-2123 -->

* Se ha mejorado el rendimiento del indexador de inventario en modo asincrónico al eliminar solicitudes redundantes para reindexar elementos de origen predeterminados.

<!-- AC-7023 -->

* Se han corregido problemas con el indexador de inventario que afectaban a la precisión del recuento de existencias de la tienda de productos configurables. [GitHub-36421](https://github.com/magento/magento2/issues/36421)

<!-- ACP2E-2082 -->

* La actualización de los elementos de origen de inventario mediante REST `V1/inventory/source-items` ahora funciona más rápido. La llamada ya no almacena en déclencheur una operación de reindexación o de limpieza de caché en productos de inventario sin modificar.

<!-- ACP2E-1842 -->

* REST `V1/products/<sku>` ahora déclencheur una reindexación automatizada de stock al actualizar el estado de stock de un producto. Anteriormente, no se activaba un reíndice de existencias para el producto que se estaba actualizando.

<!-- ACP2E-1653 -->

* El estado de existencias de productos configurables ahora se actualiza en la tienda como se espera cuando los productos secundarios se actualizan en `V1/inventory/source-items`.

<!-- ACP2E-2114 -->

* La llamada REST `POST <store_code>/V1/inventory/source-items` ahora valida la carga útil de los espacios en blanco en los elementos de origen de inventario devueltos y envía un mensaje de error sobre la validación según sea necesario.

<!-- ACP2E-2072 -->

* Los comerciantes ahora pueden notificar a los compradores que un pedido está listo para su recogida cuando la configuración **[!UICONTROL No Manage Stock]** está habilitada para un producto. Anteriormente, cuando se habilitaba esta configuración, Commerce mostraba este mensaje de error: `Your order is not ready for pickup`.

<!-- ACP2E-2227 -->

* Los comerciantes ahora pueden crear un abono para pedidos de los que se ha eliminado un producto simple asociado a un producto configurable. Anteriormente, los comerciantes no podían crear el abono y Commerce lanzó una excepción `TypeError`.

<!-- ACP2E-2310 -->

* El recuento de fuentes de cuadrícula de administración ahora devuelve registros válidos después de aplicar un filtro. Anteriormente, el método `getSourcesCount` siempre devolvía el número total de orígenes después de aplicar un filtro.

<!-- ACP2E-1364 -->

* La página Categoría ya no redirige al panel de administración al ordenar los productos mediante la opción &quot;Mover de stock a la parte inferior&quot;. El problema se ha resuelto colocando la instrucción de combinación SQL dentro de la instrucción condicional solo después de asegurarse de que ya no se incluye. Anteriormente, la página se redirigía al panel de administración con el mensaje: `Invalid security or form key. Please refresh the page`.

<!-- ACP2E-1488 -->

* `AUTO_INCREMENT` de la tabla `inventory_source_item` ya no aumenta con cada operación `UPDATE`. Anteriormente, cada actualización aumentaba el `AUTO_INCREMENT` de esta tabla, lo que finalmente provocaba que el valor `AUTO_INCREMENT` estuviera fuera del intervalo al agregar un nuevo registro a `inventory_source_item table`. Como resultado, los usuarios administradores recibieron el siguiente error cuando intentaron crear un nuevo producto desde el administrador: `Numeric value out of range...`.

<!-- ACP2E-1378 -->

* Los usuarios administradores ahora pueden agregar un producto al carro de compras de un cliente desde el Administrador para un ámbito de vista de tienda determinado con Inventory management. Anteriormente, el ID de stock no se determinaba correctamente y los usuarios administradores no podían agregar el producto al carro de compras de los clientes.

<!-- ACP2E-1399 -->

* La sincronización entre el inventario y el catálogo ya no se basa en la configuración **[!UICONTROL Synchronize with Catalog]**. Anteriormente, los productos solo se sincronizaban correctamente cuando esta configuración estaba habilitada.

<!-- ACP2E-1382 -->

* Adobe Commerce ya no genera un error después de la recarga de la página cuando un comprador deduce una cantidad de producto de un pedido que se encuentra dentro del rango de productos disponibles al seleccionar el origen de envío.

<!-- ACP2E-1259 -->

* El estado de existencias de productos configurables ahora se actualiza correctamente cuando un producto configurable y su valor de productos secundarios `Stock Availability` se actualizan mediante una actualización de inventario masivo. Anteriormente, no se podía devolver un producto configurable y sus productos secundarios a stock mediante una actualización masiva.

<!-- ACP2E-2096 -->

* El tipo de datos de los orígenes no predeterminados se ha actualizado a `DECIMAL (12, 4)` para admitir hasta ocho dígitos enteros, que es el mismo límite implementado para el stock predeterminado. Este valor ahora está sincronizado con las páginas de producto de adición y edición de administración, que admiten la validación de entrada de hasta ocho dígitos para todo tipo de orígenes de inventario. Anteriormente, la entrada del campo **[!UICONTROL Quantity]** (para orígenes no predeterminados) solo era compatible con seis dígitos.

<!-- ACP2E-2054 -->

* Tanto los orígenes predeterminados como los no predeterminados ahora muestran la información correcta para la cantidad vendible del producto cuando se procesa para su envío un origen no predeterminado que se solicitó desde la tienda. Anteriormente, Adobe Commerce mostraba un estado de existencias incorrecto para las fuentes de productos.

<!-- ACP2E-1950 -->

* `\Magento\Catalog\Model\Product::getIsSalable()` devuelve ahora el estado de existencias en función del ámbito definido en el objeto de producto (`\Magento\Catalog\Model\Product::getStoreId()`). Anteriormente, `getIsSalable()` devolvía el estado de las existencias en función del ámbito actual independientemente del objeto de producto.

### Registro

<!-- ACP2E-1788 -->

* Se ha actualizado el formato de fecha y hora en la función Informes del sistema para incluir registros de archivos de registro en los informes.

<!-- ACP2E-1385 -->

* Los usuarios administradores ahora pueden ver los registros de las acciones masivas creadas mediante integraciones en la sección Registro de acciones masivas de Admin.

### Iniciar sesión

<!-- ACP2E-1521 -->

* Restablecer una contraseña en un explorador y posteriormente iniciar sesión en otro explorador ya no genera una excepción. [GitHub-36447](https://github.com/magento/magento2/issues/36447)

<!-- ACP2E-1332 -->

* Ahora se redirige a los clientes a la página de inicio de sesión después de activar una cuenta según lo esperado. Anteriormente, la sesión de los clientes se iniciaba automáticamente.

### Galería de medios

<!-- ACP2E-2568 -->

* Los comerciantes ahora pueden cargar imágenes con el mismo nombre pero en mayúsculas y minúsculas diferentes (una combinación de caracteres en mayúsculas y minúsculas) en Media Gallery. Anteriormente, en Page Builder los nombres de archivo de imagen no distinguían entre mayúsculas y minúsculas, y los archivos con los mismos nombres que no eran mayúsculas y minúsculas se sobrescribían en el almacenamiento de medios de Commerce alojados en sistemas de archivos que distinguían entre mayúsculas y minúsculas.

### Newsletter

<!-- AC-10806 -->

* Commerce ahora comprueba si la funcionalidad de suscripción al boletín informativo está habilitada antes de aceptar nuevos suscriptores. [GitHub-33040](https://github.com/magento/magento2/issues/33040)

### Pedidos

<!-- AC-8857 -->

* Los productos movidos del carro de compras del administrador a la lista de artículos por encargar ahora se eliminan según lo esperado del carro de compras. [GitHub-37538](https://github.com/magento/magento2/issues/37538)

<!-- ACP2E-2535 -->

* Los comerciantes ahora pueden crear notas de abono según lo esperado para la devolución parcial de pedidos que se pagaron en parte mediante puntos de recompensa. Anteriormente, cuando un comerciante creaba una devolución parcial, el estado del pedido se identificaba incorrectamente como cerrado y la página Pedido del administrador no mostraba las opciones de abono.

<!-- ACP2E-2632 -->

* La rotación del registro de acciones de administración ahora funciona como se espera cuando la frecuencia de archivado del registro de rotación se establece en intervalos semanales o mensuales. Anteriormente, cuando se establecían intervalos semanales o mensuales, los registros no rotaban.

<!-- ACP2E-2583 -->

* Commerce ahora aplica el importe de descuento correcto a los pedidos parcialmente cancelados. Anteriormente, la cantidad de descuento calculada en la columna `base_discount_cancelled` se calculaba incorrectamente cuando se cambiaba un pedido. Se ha añadido compatibilidad con valores negativos a las facturas de pedidos con descuento.

<!-- ACP2E-2585 -->

* El extremo REST `V1/orders` ahora aplica tarjetas regalo como se espera al importar pedidos. Anteriormente, no se guardaban los cambios en los atributos de extensión de tarjetas regalo en este punto de conexión.

<!-- ACP2E-2412 -->

* Commerce ahora ordena los atributos de dirección del cliente personalizados en función del criterio de ordenación que se proporcionó cuando el usuario administrador creó el orden en el Administrador.

<!-- ACP2E-2400 -->

* La página Administración de cuadrícula de pedidos de ventas ahora se carga como se espera cuando un comerciante inicia una búsqueda desde esta página. Anteriormente, cuando un comerciante intentaba buscar pedidos de esta tabla, la página se bloqueaba y Commerce mostraba un error `Request-URI Too Long` en la consola del explorador.

<!-- ACP2E-2294 -->

* El estado del pedido ahora se marca como cerrado en lugar de completo cuando el importe completo del pedido se ha reembolsado con crédito de tienda más un método de pago adicional. Anteriormente, el estado del pedido se marcaba como completado porque el importe reembolsado se calculaba incorrectamente.

<!-- ACP2E-2213 -->

* Se mejoró el rendimiento del método `OrderRepository::get()` al reducir el número de veces que carga un pedido de la base de datos. Anteriormente, este método cargaba un pedido varias veces. [GitHub-36636](https://github.com/magento/magento2/issues/36636)

<!-- ACP2E-1918 -->

* Los comerciantes ahora pueden generar notas de abono para pedidos que contienen algunos artículos con un total cero cuando hay otros artículos de pedido disponibles para devolución. Anteriormente, los comerciantes no podían realizar varios reembolsos cuando un cliente tenía un descuento del 100% en algunos artículos del pedido.

<!-- AC-8254 -->

* Los vínculos entre productos secundarios y principales ahora se muestran en la página de pedidos durante la reordenación del producto secundario desde el administrador. [GitHub-37028](https://github.com/magento/magento2/issues/37028)

<!-- AC-1756 -->

* La sección de cabecera de la página de pedido ahora contiene la información esperada sobre la factura, la nota de abono y el envío enviados. [GitHub-27474](https://github.com/magento/magento2/issues/27474)

<!-- AC-7632 -->

* Las notas de abono de los pedidos que solo contienen un producto configurable ahora se generan correctamente. Anteriormente, la función `isLast()` no devolvía `true` como se esperaba. [GitHub-36722](https://github.com/magento/magento2/issues/36722)

<!-- ACP2E-1961 -->

* Se mejoró el rendimiento del trabajo cron `aggregate_sales_report_bestsellers_data` al optimizar la consulta de datos principal.

<!-- ACP2E-1962 -->

* Adobe Commerce ya no genera un error al crear una nota de abono con un reembolso sin conexión para un saldo de cliente cuando el usuario administrador no tiene permiso para acceder al sitio web del cliente. Anteriormente, Adobe Commerce arrojaba este error: `More permissions are needed to view this item`, y el usuario administrador no pudo crear un reembolso de crédito de tienda.

<!-- ACP2E-1714 -->

* El estado del pedido ahora es correcto cuando se ha realizado un reembolso parcial de un pedido que contiene productos agrupados. Anteriormente, el estado del pedido se mostraba como completo después de que se emitiera un reembolso parcial, aunque el pedido restante no estuviera completo. [GitHub-37377](https://github.com/magento/magento2/issues/37377)

<!-- ACP2E-1514 -->

* Los compradores ya no pueden solicitar un producto con un precio personalizado cuando se genera un pedido por primera vez desde el administrador utilizando el precio personalizado único. Anteriormente, si un pedido contenía un artículo con precios personalizados, este precio personalizado se aplicaba a otros pedidos realizados con la funcionalidad de repedido.

<!-- ACP2E-1421 -->

* Los compradores ya no pueden guardar estados de pedidos incorrectos en la página de pedidos. El estado del pedido ya no cambia de Completado a Procesando cuando se envía un artículo. Anteriormente, Adobe Commerce no comprobaba el estado actual del pedido antes de guardarlo después de que un comprador escribiera un comentario. [GitHub-36562](https://github.com/magento/magento2/issues/36562)

<!-- ACP2E-1387 -->

* Adobe Commerce ya no genera un error en la página de devolución del pedido de la tienda cuando se elimina el producto configurable que se devuelve. Anteriormente, Adobe Commerce registró este error: `report.CRITICAL: Error: Call to a member function getShipmentType() on null in magento2ee/app/code/Magento/Rma/view/frontend/templates/return/create.phtml:52`.

<!-- ACP2E-1367 -->

* La cuadrícula de pedidos de venta ahora se sincroniza asincrónicamente con todos los pedidos según lo esperado. [GitHub-36562](https://github.com/magento/magento2/issues/36562)

<!-- ACP2E-1197 -->

* La funcionalidad de filtrar por fecha de compra en la sección de pedidos del cliente de la página de pedidos ahora funciona según lo esperado. Anteriormente, se producía un error de JavaScript cuando la lógica de conversión de huso horario arrojaba un error cuando se proporcionaba la misma zona horaria al método.

<!-- ACP2E-1294 -->

* El panel de Adobe Commerce ahora muestra las estadísticas de pedidos correctas en la primera carga. Anteriormente, el panel mostraba información de pedidos incorrecta, pero mostraba la información correcta una vez actualizado el periodo de tiempo.

<!-- ACP2E-1762 -->

* Los usuarios administradores ahora se redirigen según lo esperado a la página de pedidos después de seleccionar una vista de tienda durante la creación de nuevos pedidos desde el Administrador.

<!-- ACP2E-1418 -->

* El extremo `GET V1/orders/<OrderID>` ahora devuelve información sobre los productos configurables y simples en el orden, independientemente del estado de stock de los productos simples. Los usuarios administradores ahora solo pueden realizar pedidos si los artículos seleccionados (productos) están en stock o son vendibles. Anteriormente, esta API solo devolvía información sobre los productos que estaban en stock.

<!-- AC-7901 -->

* La página de nota de abono ya no se bloquea cuando el envío gratuito está activado cuando el precio de envío incluye impuestos y los cálculos de impuestos se aplican después de los descuentos. Anteriormente, Adobe Commerce arrojaba una excepción `Division by zero`. [GitHub-36800](https://github.com/magento/magento2/issues/36800)

<!-- AC-1342 -->

* El uso del extremo `rest/V1/orders/{id}/comments` para publicar un comentario sobre un pedido sin proporcionar el estado del pedido ya no afecta a la visualización del pedido. Anteriormente, el estado de los pedidos se registraba como NULL en las tablas `sales_order` y `sales_order_grid`, y ni la página Mis pedidos ni la cuadrícula de pedidos del administrador mostraban el pedido. [GitHub-34180](https://github.com/magento/magento2/issues/34180)

<!-- ACP2E-1597 -->

* Ahora, las facturas, los envíos y los abonos se pueden mover correctamente de nuevo del archivo junto con sus pedidos asociados cuando los ID que incluyen difieren de los ID de pedido. Anteriormente, si un pedido se movía al archivo y luego se restauraba, entonces faltaban registros de factura, envío y nota de abono en ese pedido si los números de ID no coincidían. [GitHub-36847](https://github.com/magento/magento2/issues/36847)

### Page Builder

<!-- AC-8777 -->

* Las imágenes ahora mantienen la proporción de aspecto correcta cuando se cambia el tamaño en Page Builder. [GitHub-37493](https://github.com/magento/magento2/issues/37493)

<!-- AC-10919 -->

* Page Builder ahora muestra mensajes de error según sea necesario cuando intenta cargar una imagen con un tamaño de archivo superior al tamaño máximo especificado. Anteriormente, Commerce mostraba un mensaje emergente de alerta para los archivos de imagen cargados que eran menores que el máximo especificado.

<!-- ACP2E-1992 -->

* Los reguladores de producto de páginas de CMS ahora incluyen los productos principales de cualquier producto secundario que se haya seleccionado para su inclusión en el regulador. Anteriormente, los productos principales se excluían del control deslizante.

<!-- ACP2E-2115 -->

* El contenido convertido a HTML ahora se muestra en plantillas de correo electrónico como se espera cuando el módulo `Magento_AsyncConfig` está deshabilitado. Anteriormente, las plantillas de correo electrónico solo contenían HTML sin procesar.

<!-- AC-9128 -->

* Se ha mejorado el rendimiento de las operaciones de guardado de Page Builder en el explorador Chrome.

<!-- ACP2E-1954 -->

* Ahora puede usar la opción Page Builder en Administración > **[!UICONTROL Content]** > **[!UICONTROL Pages]** para insertar texto copiado en todos los estilos usando el elemento `text`. Anteriormente, Page Builder solo mostraba texto sin formato y no guardaba estilos.

<!-- ACP2E-1646 -->

* Los errores CORS ya no aparecen durante la edición del contenido del producto con Page Builder cuando el usuario administrador tiene una ACL específica. El usuario administrador ahora puede guardar el producto. Anteriormente, Page Builder no guardaba el producto y el proceso de guardado se bloqueaba.

<!-- ACP2E-1852 -->

* La información precisa del tamaño del archivo ahora se incluye en la vista previa de imágenes para las imágenes cargadas en Page Builder.

<!-- ACP2E-2016 -->

* Los elementos de página de Page Builder ahora se representan a una velocidad aceptable en el explorador Chrome (v112). Anteriormente, guardar contenido con Page Builder ejecutado en el explorador Chrome era lento y Commerce registró este error en la consola del explorador: `[ERROR] Page Builder was rendering for 5 seconds without releasing locks`.

<!-- ACP2E-1654 -->

* La reproducción automática de elementos de vídeo de Page Builder ahora funciona como se espera en los navegadores móviles Safari en iOS cuando el elemento está vinculado directamente a un archivo de vídeo remoto. Anteriormente, no se mostraba ninguna imagen de vista previa.

<!-- ACP2E-1974 -->

* Page Builder ahora funciona como se espera en el navegador Chrome. Anteriormente, los cambios de contenido realizados en ese explorador no siempre se guardaban.

<!-- ACP2E-2086 -->

* Al cargar una página de edición de producto de administración en un producto, ya no se genera un error intermitente de JavaScript `Uncaught TypeError`.

<!-- ACP2E-1886 -->

* Las imágenes que se han cargado mediante el editor de Page Builder ahora están etiquetadas como utilizadas en **[!UICONTROL Content]** > **[!UICONTROL Media Gallery]**. Anteriormente, estas imágenes estaban marcadas como **no utilizadas en ninguna parte** de la Galería multimedia.

<!-- ACP2E-1564 -->

* Al añadir un producto a un carro de compras desde el carrusel de Page Builder, ya no se duplica la cantidad de artículos de páginas con dos widgets diferentes que muestran los mismos productos.

<!-- ACP2E-1542 -->

* Page Builder ya no agrega el atributo HTML `tabindex` a las etiquetas de hipervínculo `a` cuando edita un hipervínculo y, a continuación, guarda una plantilla.

<!-- ACP2E-1444 -->

* El widget de productos y la vista previa del Page Builder ahora administran correctamente los caracteres especiales de HTML. Anteriormente, el widget de productos no mostraba correctamente las SKU que contenían el carácter `&`.

<!-- ACP2E-1441 -->

* El contenido del elemento de texto de Page Builder ahora se actualiza según lo esperado al seleccionar y actualizar el bloque de contenido completo en el modo de vista previa.

<!-- ACP2E-1362 -->

* Copiar y pegar texto de un editor de texto de Page Builder a otro ahora funciona según lo esperado. Anteriormente, la página en la que intentó pegar texto no se podía guardar y Adobe Commerce mostraba este error de consola: `[ERROR] Page Builder was rendering for 5 seconds without releasing locks.`.

<!-- ACP2E-1568 -->

* El tipo de contenido de Page Builder `column-block` creado en versiones anteriores de Page Builder ahora se muestra correctamente.

<!-- ACP2E-1234 -->

* Se ha mejorado el filtrado de la descripción de metadatos del producto durante la creación del producto desde Admin. Anteriormente, si Page Builder estaba habilitado, la descripción de los metadatos del producto se generaba en función de la máscara predeterminada ` {{name}} {{description}}`. La máscara de metadescripción de producto predeterminada ahora está compuesta por `{{name}}`. [GitHub-36107](https://github.com/magento/magento2/issues/36107)

<!-- ACP2E-1758 -->

* Añadir un bloque dinámico sin contenido ya no genera déclencheur de error.

### Pago

<!-- ACP2E-2533 -->

* Commerce ahora gestiona correctamente los errores 502 de PayPal al evitar la creación de pedidos cuando se produce este error. Anteriormente, los pedidos se seguían creando a pesar de un error 502 de PayPal, que provocaba incoherencias entre los registros de Commerce y los de PayPal.

<!-- AC-9142 -->

* Las transacciones de Pago y envío de PayPal Express ahora incluyen SKU de productos secundarios y títulos de productos completos. El archivo `Magento/Paypal/Model/Cart.php` ahora recopila SKU de productos secundarios con el título del producto principal para identificar el título del producto con el SKU secundario. [GitHub-36808](https://github.com/magento/magento2/issues/36808)

<!-- ACP2E-1964 -->

* La configuración de **[!UICONTROL Card Security Code Does Not Match]** ahora se procesa según lo esperado durante el proceso de pago de Payflow Pro. Anteriormente, este proceso de evaluación nunca se completaba, lo que bloqueaba el cierre de compra.

<!-- ACP2E-1215 -->

* La opción de método de pago Vault ya no aparece en el flujo de trabajo de cierre de compra del administrador cuando el comprador no tiene un token de Vault. [GitHub-36273](https://github.com/magento/magento2/issues/36273)

<!-- ACP2E-1303 -->

* El botón **[!UICONTROL Venmo]** ahora se puede ocultar cuando los botones de PayPal están activados. Anteriormente, el botón **[!UICONTROL Venmo]** no se podía eliminar del carro de compras, el minicarrito, los detalles del producto o las páginas de cierre de compra.

<!-- BUNDLE-3313 -->

* Los compradores ahora pueden seleccionar un método de envío al aplicar el código de cupón durante el cierre de compra. Anteriormente, en estas condiciones, Commerce arrojaba un error y asignaba un envío de tarifa plana al pedido.

<!-- BUNDLE-3310 -->

* Se han resuelto los problemas con el procesamiento de la tienda de los métodos de pago de crédito de PayPal y PayPal.

<!-- BUNDLE-3273 -->

* Se han resuelto problemas con URL de reserva para pedidos pagados con mediante pagos ideales cuando el pago local está habilitado.

<!-- BUNDLE-3253 -->

* Los compradores ya no pueden crear un pedido de PayPal sin añadir un apellido.

#### Braintree

<!-- AC-2901 -->

* La información de pago de Braintree ahora se guarda por tienda y los compradores ahora solo ven la información de la tarjeta que se ha guardado en la tienda en la que están comprando. Anteriormente, los compradores podían ver la información de la tarjeta almacenada de todas las tiendas durante el cierre de compra. [GitHub-34253](https://github.com/magento/magento2/issues/34253)

<!-- BUNDLE-3304 -->

* Los compradores ahora pueden retirar un pedido que se envía a varias direcciones mediante un método de pago Braintree cuando la caja fuerte para pagos con tarjeta está desactivada. [GitHub-37615](https://github.com/magento/magento2/issues/37615)

<!-- BUNDLE-3244 -->

* Los pedidos parcialmente facturados ahora se capturan como se espera en la cuenta correcta en implementaciones en las que los comerciantes tienen dos ID de cuenta de comerciante diferentes para la misma divisa en su cuenta de Braintree.

<!-- BUNDLE-3250 -->

* Adobe Commerce ya no genera un error al crear una segunda factura parcial para un pedido pagado por Braintree cuando **[!UICONTROL Enable Vault for Card Payments]** está habilitado. Anteriormente, cuando un comerciante intentaba crear una segunda factura, Adobe Commerce arrojaba este error: `Your payment could not be taken. Please try again or use a different payment method. Payment method token is invalid`.

<!-- ACP2E-1229 -->

* La opción de método de pago Braintree Vault ya no se anula automáticamente en el flujo de trabajo de cierre de compra cuando un comprador actualiza su dirección de facturación. Anteriormente, el método de pago se anulaba cuando el comprador anulaba la selección del botón **[!UICONTROL My billing and shipping address are the same]**.

<!-- BUNDLE-3248 -->

* Se han resuelto problemas con el cierre de compra con PayPal a través de Braintree después de actualizar desde Adobe Commerce 2.4.5-p2. [GitHub-37242](https://github.com/magento/magento2/issues/37242)

<!-- BUNDLE-3257 -->

* Los números de teléfono ahora se representan según lo esperado con las direcciones en los campos de dirección de envío emergente de Google Pay. Anteriormente, faltaban números de teléfono.

<!-- BUNDLE-3228 -->

* Los pedidos ahora se realizan correctamente con Braintree cuando la respuesta de Braintree incluye un valor vacío para `threeDSecureInfo/eciFlag`. Anteriormente, se producía un error de PHP durante el cierre de compra cuando este valor estaba vacío.

<!-- BUNDLE-3243 -->

* Adobe Commerce ya no genera un error cuando un comprador aplica un cupón en la página de revisión de pedidos al cerrar la compra con Google Pay desde el minicarrito. Anteriormente, se redirigía a los compradores a una página 404.

<!-- BUNDLE-3245 -->

* Los compradores ahora pueden completar el pago y envío con Braintree Payments y Adobe Commerce 2.4.6 con ReCAPTCHA v2 o v3 invisible. [GitHub-37241](https://github.com/magento/magento2/issues/37241)

<!-- BUNDLE-3241 -->

* Los compradores ya no pueden hacer clic en el botón **[!UICONTROL PayPal]** para comprar un producto configurable sin seleccionar primero las opciones requeridas. Anteriormente, los compradores podían hacer clic en el botón **[!UICONTROL PayPal]** y posteriormente se les redirigía de nuevo a la página del producto con un error:

<!-- BUNDLE-3148 -->

* El botón **[!UICONTROL PayPal]** ahora se muestra como se espera en las páginas del carro de compras y del minicarrito. Anteriormente, este botón no se mostraba en la página del carro de compras y se duplicaba en la página del minicarrito.

### Rendimiento

<!-- AC-9753 -->

* Varios clics en el menú desplegable de acción masiva de la página **Ventas** > **Pedidos** ya no generan varias solicitudes POST.  [GitHub-37997](https://github.com/magento/magento2/issues/37997)

<!-- AC-10944 -->

* Solo las respuestas `200` o `404` se almacenan en caché cuando un comprador navega a una página que almacena en déclencheur una redirección 301 a menos que el encabezado Cache-Control de la página contenga `private `. Anteriormente, se almacenaba en caché un estado HTTP 200 con `private` en el encabezado Cache-Control y se almacenaba en caché un estado HTTP 301 a menos que contuviera `private` en el encabezado Cache-Control. [GitHub-36492](https://github.com/magento/magento2/issues/36492)

<!-- AC-9302 -->

* Se eliminó el(la) `Magento\Catalog\Controller\Adminhtml\Product\Initialization\Helper` sin usar de `Magento\Catalog\Model\ProductRepository`. Anteriormente, `ProductRepository` cargó este asistente, que es un controlador de `Adminhtml`. [GitHub-37864](https://github.com/magento/magento2/issues/37864)

<!-- AC-9127 -->

* Se ha mejorado el rendimiento de la velocidad de carga de la página cuando se añaden muchas opciones a los productos agrupados. [GitHub-29409](https://github.com/magento/magento2/issues/29409)

<!-- ACP2E-2069 -->

* Se ha optimizado el proceso de asignación de productos a categorías desde la ficha **[!UICONTROL Products in Category]**. Los botones **[!UICONTROL Assign]** y **[!UICONTROL Remove]** de la ficha **[!UICONTROL Add Product by SKU]** ahora están deshabilitados hasta que los productos se carguen completamente en la cuadrícula. Anteriormente, los usuarios administradores no podían agregar productos por SKU en catálogos que contenían millones de productos registrados.

<!-- ACP2E-2098 -->

* Se ha mejorado el rendimiento de la mutación `addProductToCart` al ejecutar con muchos atributos de producto personalizados. Anteriormente, cuando esta mutación se ejecutaba con muchos atributos de producto ( aproximadamente 1000), Commerce intentaba cargar todos los atributos de producto.

<!-- ACP2E-1965 -->

* Se han resuelto los problemas de rendimiento al cargar atributos de producto utilizados por reglas del carro de compras. Ahora solo se cargan los atributos de producto para las reglas de carro de compras activas.

<!-- ACP2E-1864 -->

* El comando `bin/magento setup:perf:generate-fixtures setup/performance-toolkit/profiles/ee/small.xml` ahora se ejecuta correctamente cuando se ejecuta varias veces. Anteriormente, generaba este error cuando se ejecutaba más de una vez: `Coupon with the same code already exists`.

### Promoción

<!-- ACP2E-1290 -->

* Los efectos de la regla de precio **[!UICONTROL Fixed amount discount for whole cart]**, cuando se aplica con la regla **[!UICONTROL Apply to shipping amount]**, ahora se distribuyen proporcionalmente según lo esperado entre los productos y los importes de envío. Anteriormente, los cálculos de descuento eran incorrectos.

<!-- ACP2E-1300 -->

* La configuración **[!UICONTROL Discard Subsequent Rules]** ahora se aplica según lo esperado. Cuando esta configuración está habilitada, otras reglas con prioridad baja solo se pueden aplicar a un producto diferente. [GitHub-35707](https://github.com/magento/magento2/issues/35707)

### reCAPTCHA

<!-- ACP2E-2509 -->

* reCAPTCHA v3 invisible ahora funciona como se espera para el botón de página de cierre de compra **[!UICONTROL Sign in]**. Anteriormente, los compradores no podían iniciar sesión y Commerce arrojaba errores de JavaScript.

<!-- ACP2E-1539 -->

* Google reCAPTCHA en el flujo de trabajo de cierre de compra ahora funciona como se espera para cheques, giros postales y métodos de pago personalizados.

<!-- ACP2E-1311 -->

* Los formularios Adobe Commerce ya no se pueden enviar antes de que se cargue la casilla de verificación Google ReCAPTCHA.

<!-- ACP2E-1338 -->

* El widget reCAPTCHA ahora precede al botón **[!UICONTROL Place Order]** de la página de pago. Anteriormente, el widget se mostraba en la parte superior de la página.

### Informes

<!-- ACP2E-1541 -->

* El informe Pedidos (**[!UICONTROL REPORTS]** > **[!UICONTROL Sales]** > **[!UICONTROL Orders]**) ahora incluye valores de pedidos correctos cuando los pedidos son generados por tiendas que utilizan monedas no predeterminadas. Anteriormente, este informe incluía valores incorrectos. [GitHub-36742](https://github.com/magento/magento2/issues/36742)

<!-- ACP2E-1477 -->

* Se ha revisado la información engañosa en el formulario de informe de pedido de ventas para mayor claridad.

<!-- ACP2E-1435 -->

* Los usuarios administradores ahora pueden buscar registros con correos electrónicos que contengan signos de `+` (más) de la página Informe de carros abandonados. [GitHub-36560](https://github.com/magento/magento2/issues/36560)

<!-- AC-7394 -->

* Los nombres de las transacciones de GraphQL ahora se muestran correctamente después de que New Relic se deshabilite del administrador de Commerce. [GitHub-36112](https://github.com/magento/magento2/issues/36112)

### Críticas

<!-- ACP2E-1998 -->

* Los compradores ya no pueden enviar rápidamente críticas de productos duplicados cuando Invisible reCAPTCHA v3 está habilitado.

### Recompensas

<!-- ACP2E-2099 -->

* Los correos electrónicos de caducidad de puntos de recompensa ya no se envían después de que hayan caducado los puntos. Las tareas cron `magento_reward_balance_warning_notification` y `magento_reward_expire_points` se han refactorizado para aumentar la flexibilidad y la capacidad de envío de correo electrónico. Anteriormente, los comerciantes no podían enviar muchos correos electrónicos generados por estas tareas cron en un corto período de tiempo. Esto podría haber causado retrasos en la entrega de notificaciones con distinción de tiempo.

<!-- ACP2E-2283 -->

* Los puntos de recompensa vencidos ahora se restan del saldo actual de puntos de recompensa del comprador, según lo esperado.

<!-- ACP2E-1473 -->

* La notificación por correo electrónico de actualización del balance de puntos de recompensa ahora tiene en cuenta el contexto actual de la tienda. Anteriormente, el correo electrónico de actualización del balance de puntos de recompensa utilizaba los ajustes de configuración de la tienda predeterminada.

<!-- ACP2E-1329 -->

* Los puntos de recompensa ahora se pueden reembolsar después de la creación de una nota de crédito. Anteriormente, los comerciantes no podían reembolsar puntos de recompensa después de crear una nota de crédito y el estado del pedido permanecía `Completed`, no `Closed`.

### RMA

<!-- ACP2E-2246 -->

* La solicitud REST `POST /V1/returns` ahora crea un RMA por producto. Anteriormente, esta solicitud podía omitir la validación y devolver varias RMA por producto.

<!-- ACP2E-2450 -->

* Los atributos de RMA ahora se agregan automáticamente al formulario EAV predeterminado cuando el atributo RMA **[!UICONTROL Show on Storefront]** está establecido en **no**. Anteriormente, la ventana emergente de detalles del elemento RMA estaba en blanco cuando se creó un atributo de devolución personalizado y el atributo RMA **[!UICONTROL Show on Storefront]** se estableció en **no**.

<!-- ACP2E-2211 -->

* El valor del atributo **[!UICONTROL Enable RMA]** coincide ahora con el valor especificado en la configuración cuando la casilla de verificación **[!UICONTROL Use Config]** de la página de edición del producto está habilitada.

<!-- ACP2E-1230 -->

* El atributo **[!UICONTROL Enable RMA]** en el nivel de producto individual ahora respeta la configuración de la RMA de la tienda. Anteriormente, esta opción se desactivaba de forma predeterminada al agregar un producto, independientemente de los ajustes de configuración de la tienda.

### Buscar {#search-heading}

<!-- ACP2E-2272 -->

* Las sugerencias de búsqueda de autocompletar en el front-end de búsqueda mini del encabezado ahora funcionan según lo esperado. Anteriormente, el completado automático no rellenaba este campo cuando esta característica estaba habilitada. [GitHub-37557](https://github.com/magento/magento2/issues/37557)

<!-- ACP2E-2101 -->

* El rendimiento de las consultas realizadas desde la barra de búsqueda de Administración se ha mejorado mediante la adición de un indexador. Anteriormente, cuanto más grande era la tabla `search_query`, más tardaba la consulta en completarse.

<!-- ACP2E-2279 -->

* La ordenación alfabética de productos por nombre ahora funciona correctamente para nombres que contienen caracteres turcos.

<!-- ACP2E-1854 -->

* La propiedad de atributo de producto **[!UICONTROL Use in Search Results Layered Navigation]** ahora solo se muestra cuando el valor **[!UICONTROL Use in Search]** está establecido en **[!UICONTROL Yes]**.

<!-- ACP2E-1870 -->

* Los filtros de SKU y precio de búsqueda avanzada ahora funcionan correctamente cuando se aplican juntos en una búsqueda avanzada. [GitHub-37581](https://github.com/magento/magento2/issues/37581)

<!-- ACP2E-1787 -->

* Ya no se realizan búsquedas en campos de búsqueda vacíos. Esto reduce el tamaño de la tabla `search_query`. Anteriormente, las consultas incorrectas o las consultas en campos de búsqueda vacíos devolvían un conjunto de datos enorme, lo que aumentaba el tamaño de la tabla `search_query` y provocaba problemas con `/tmp`.

<!-- ACP2E-1916 -->

* Los filtros de tienda ahora funcionan según lo esperado al ordenar las entradas de catálogo con atributos personalizados desplegables.

<!-- ACP2E-1499 -->

* Los resultados de búsqueda ahora muestran los resultados relevantes en función de la ponderación de búsqueda de los atributos según lo esperado.

<!-- AC-7505 -->

* El texto informativo bajo el campo de entrada `Storefront Properties` del atributo `Search Weight` en Administración **[!UICONTROL Stores]** > **[!UICONTROL Attributes]** > **[!UICONTROL Product]** ahora describe posibles valores. [GitHub-36646](https://github.com/magento/magento2/issues/36675)

### Envío

<!-- ACP2E-2515 -->

* Las reglas de precios del carro de compras ahora funcionan como se espera cuando se agrega un producto agrupado al carro de compras cuando se desactivan los atributos de precios dinámicos. El envío gratuito y la tarifa de tabla correcta se aplican independientemente de si el atributo dinámico está habilitado o deshabilitado. Anteriormente, el envío gratuito no se aplicaba según lo esperado.

<!-- AC-9729 -->

* Commerce ahora cambia a una nueva página de envío como se espera después de crear un envío parcial para un pedido. Anteriormente, después de crear un envío parcial, Commerce no creaba una página de envío completa para los productos restantes del pedido. [GitHub-38063](https://github.com/magento/magento2/issues/38063)

<!-- AC-8795 -->

* La cantidad total para enviar un pedido a varias direcciones ahora se calcula correctamente. Anteriormente, cuando una oferta contenía más de una dirección de envío, el recolector total actualizaba el importe de envío de la dirección indicada en `$quote->getShippingAddress()` en lugar de pasarla en `$shippingAssignment` como se esperaba. [GitHub-37283](https://github.com/magento/magento2/issues/37283)

<!-- ACP2E-2459 -->

* Commerce ya no emite una excepción durante el cierre de compra con varias direcciones de envío cuando el usuario administrador ha utilizado la función Iniciar sesión como cliente.

<!-- ACP2E-2258 -->

* Ahora, los productos aparecen correctamente en la cuadrícula Productos de la página Crear paquetes cuando se añaden productos a un paquete después de crear la etiqueta de envío.

<!-- ACP2E-2044 -->

* La consulta `cart` ahora devuelve descuentos de envío discretos como descuentos de envío independientes con etiquetas de descuento únicas. La nueva propiedad de descuento `applied_to` admite la diferenciación entre descuentos aplicados a un elemento del carro de compras. Anteriormente, todos los descuentos de envío se combinaban en un valor **[!UICONTROL Shipping Discount]** codificado.

<!-- ACP2E-1826 -->

* Cuando un usuario administrador crea un nuevo pedido, las direcciones de facturación y envío del pedido inicial rellenan automáticamente los campos relevantes cuando el usuario administrador hace clic en el botón **[!UICONTROL Reorder]** (Administración **[!UICONTROL Sales]** > **[!UICONTROL Orders]** > **[!UICONTROL View]** ). Si se guardan las mismas direcciones en la libreta de direcciones del comprador, el nuevo pedido siempre incorporará una versión actualizada de estas direcciones. Anteriormente, el campo de dirección de envío se rellenaba previamente con los datos actualizados, pero no así el campo de dirección de facturación.

<!-- AC-7003 -->

* El cuadro de texto **[!UICONTROL Shipping Policy]** ahora está visible en el ámbito de la vista de la Tienda de administración cuando **[!UICONTROL Apply custom Shipping Policy]** está habilitado y hay disponible una directiva de envío personalizada. [GitHub-36425](https://github.com/magento/magento2/issues/36425)

<!-- AC-7550 -->

* La consulta `cart` devuelve ahora un valor `selected_shipping_method` que coincide con uno de los códigos de método y operador `available_shipping_methods`. Anteriormente, cuando uno de los métodos de envío seleccionados contenía un guion bajo, estos códigos de operador/método no coincidían. [GitHub-36606](https://github.com/magento/magento2/issues/36606)

<!-- AC-2556 -->

* La mutación `setShippingAddressesOnCart` ya no genera un error cuando el segundo valor de la matriz de la calle es nulo. Anteriormente, se produjo esta excepción: `The address failed to save. Verify the address and try again`. [GitHub-35160](https://github.com/magento/magento2/issues/35160)

### Sitemap

<!-- AC-2465 -->

* El mapa del sitio XML ahora funciona como se espera en una implementación de varios pisos. Anteriormente, los mapas del sitio no contenían las páginas predeterminadas asignadas para cada tienda. [GitHub-35001](https://github.com/magento/magento2/issues/35001)

<!-- AC-2267 -->

* Los comerciantes ahora pueden crear y guardar un producto cuando el sitio web `id != 1` y el modo de tienda única están habilitados. Anteriormente, se produjo un error en la acción de guardar con este mensaje: `SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails`. [GitHub-35009](https://github.com/magento/magento2/issues/35009)

### Ensayo

<!-- ACP2E-2665 -->

* Las actualizaciones de ensayo para reglas de ventas ya no están duplicadas en el panel de ensayo.

<!-- ACP2E-2173 -->

* Los productos agrupados ahora se actualizan correctamente si un comprador los agrega al carro de compras cuando se está realizando una actualización de programación. Anteriormente, si se agregaba un producto agrupado con opciones al carro de compras cuando una tarea de programación estaba en proceso, Commerce arrojaba esta excepción: `Some of the products below do not have all the required options. Please select all required options`.

<!-- ACP2E-2252 -->

* Las actualizaciones programadas ahora mantienen los precios correctos para las opciones de paquete. Anteriormente, estos precios se cambiaban a cero para vistas específicas de sitios web o tiendas.

<!-- ACP2E-2150 -->

* Al actualizar una actualización programada ya no se elimina la versión anterior del elemento ensayado si no se especifica una fecha de finalización. Anteriormente, cuando se actualizaba un elemento almacenado en zona intermedia, la versión de rollback del elemento se eliminaba si no se especificaba una fecha de finalización. Commerce no produjo un error ni advirtió a los usuarios administradores antes de la eliminación.

<!-- ACP2E-1923 -->

* Los valores de etiquetas de vista de tienda ya no se borran después de una actualización programada de las reglas de precios del carro de compras. Anteriormente, estas etiquetas se borraban incluso si no se especificaban en la actualización.

<!-- ACP2E-1803 -->

* Las vistas previas de ensayo de contenido ahora funcionan correctamente para las páginas vinculadas. Anteriormente, no se podía navegar a páginas vinculadas en la vista previa de ensayo, sino que se le dirigía incorrectamente a páginas de tienda.

<!-- ACP2E-1876 -->

* СCambiar una actualización de ensayo ya no implica eliminar las actualizaciones programadas que tienen asignada una fecha posterior.

<!-- ACP2E-1501 -->

* Los errores de JavaScript ya no se producen cuando se añaden o editan actualizaciones programadas para categorías cuando Experimentos de contenido de Google Analytics está habilitado.

<!-- ACP2E-1344 -->

* Los comerciantes ahora pueden guardar correctamente una actualización de programación existente para una categoría después de verla o editarla. Anteriormente, Adobe Commerce arrojó un error en `system.log`.

<!-- ACP2E-1596 -->

* Los vínculos descargables ahora se conservan según lo esperado cuando se aplica una actualización programada mientras los productos añadidos anteriormente están en el carro de compras. Anteriormente, los vínculos descargables desaparecían de la página Mi cuenta (Mis productos descargables) del cliente y de la página de vista de pedidos del administrador.

<!-- ACP2E-1458 -->

* Los productos ahora están visibles en la tienda, tal como se espera después de una actualización de ensayo que habilita la aplicación del producto. Anteriormente, el producto estaba habilitado en el Administrador, pero no era visible en la categoría de tienda cuando el modo de indizador del inventario de catálogo se establecía en Actualizar según lo programado. Un reindexado completo ha corregido el problema.

<!-- ACP2E-1647 -->

* La cola de consumidores `staging.synchronize_entity_period` de la tabla `magento_bulk` ya no aumenta cuando no hay actualizaciones de ensayo que procesar. Anteriormente, cuando se configuraba `cron` para que se ejecutara cada minuto, se agregaba cada minuto a esta tabla un nuevo registro relacionado con el consumidor `staging.synchronize_entity_period`.

<!-- ACP2E-1415 -->

* Adobe Commerce ya no genera un error SQL al crear un cambio de programación para un producto mientras se guarda otro. Anteriormente, Adobe Commerce mostraba este error: `The product with the SKU "%1" couldn't be added to the current update`.

### Reglas de destino

<!-- ACP2E-1438 -->

* Las reglas de Target ahora funcionan correctamente con diferentes vistas de tienda. Anteriormente, los problemas con la caché de reglas de productos relacionados impedían la visualización de los productos recomendados en implementaciones de varias tiendas.

### Impuestos

<!-- ACP2E-2651 -->

* Las facturas ahora muestran el subtotal correcto cuando se configuran los impuestos y se activa el FTP.

<!-- ACP2E-2245 -->

* Commerce ahora muestra el valor correcto para el valor **[!UICONTROL Regular Price]** cuando se selecciona una opción personalizada para un producto que tiene un valor **[!UICONTROL Special Price]** cuando **[!UICONTROL Price Display Settings]** está establecido para incluir impuestos.

<!-- ACP2E-2303 -->

* Ahora, los impuestos se incluyen según lo esperado en el precio de envío del flujo de trabajo de cierre de compra, tal como especifican los ajustes de configuración.

<!-- AC-9758 -->

* El valor de respuesta `cart` consulta `applied_taxes` ahora incluye todas las reglas de impuestos individuales según lo esperado. Anteriormente, devolvía el valor fiscal total cuando se configuraban varias reglas fiscales.

<!-- ACP2E-2247 -->

* El icono de contraer o expandir de la sección **[!UICONTROL Additional Settings]** durante la creación de la regla fiscal ahora funciona según lo esperado. Anteriormente, solo funcionaba el icono de expansión. [GitHub-37922](https://github.com/magento/magento2/issues/37922)

<!-- ACP2E-1527 -->

* Ahora puede editar el valor de País y Región de Tipo Impositivo desde la página de edición de Regla Fiscal según lo esperado. Anteriormente, las ediciones realizadas desde esa página no se guardaban.

<!-- ACP2E-1143 -->

* El importe de impuestos en el área de estimación del carro de compras ahora se actualiza según lo esperado cuando se actualiza el método de envío. Anteriormente, la tasa impositiva no se actualizaba después de que un comprador cambiara de país durante el registro de salida.

<!-- AC-8227 -->

* El valor `tax class` de los productos simples recién creados ahora se establece en el valor del producto principal al crear nuevas variaciones de un producto configurable existente en el ámbito de la vista de tienda. Anteriormente, este valor se establecía en ninguno. Como resultado, no se añadió ningún impuesto a estos productos en el carro de compras y los clientes recibieron un impuesto inferior al cobrado. [GitHub-37180](https://github.com/magento/magento2/issues/37180)

### Prueba

<!-- ACP2E-2501 -->

* Se mejoró la prueba `AdminCreateOrderWithVirtualProductFromDefaultSourceWithBackorders` para eliminar los errores causados por la finalización prematura del campo de correo electrónico.

<!-- AC-10863 -->

* `StorefrontVerifyProductAfterPartialReindexOnSeveralWebsitesTest` se ha refactorizado para mejorar la confiabilidad. [GitHub-38359](https://github.com/magento/magento2/issues/38359)

<!-- ACP2E-2501 -->

* Se ha corregido la prueba `AdminSimpleProductwithTextandVisualSwatch` mediante la introducción de un paso adicional que establecía explícitamente los atributos que se usarían en la búsqueda.

<!-- AC-9194 -->

* Se corrigió el error tipográfico en la prueba unitaria de `SortbyTest`. [GitHub-37792](https://github.com/magento/magento2/issues/37792)

<!-- AC-9035 -->

* Se eliminaron las referencias a clases inexistentes en las pruebas unitarias. [GitHub-37636](https://github.com/magento/magento2/issues/37636)

<!-- ACP2E-2604 -->

* Se mejoró la prueba `AdminCreateOrderWithVirtualProductFromDefaultSourceWithBackorders` para eliminar los errores causados por la finalización prematura del campo de correo electrónico.

<!-- ACP2E-2202 -->

* Se refactorizó la prueba `Magento\GraphQl\Catalog\ProductSearchTest::testFilterProductsBySingleCategoryId` para controlar el orden aleatorio de categorías en las respuestas de consulta `products`.

<!-- AC-7098 -->

* Se han resuelto los problemas de rendimiento con matrices grandes en `TableNameSniff`.

<!-- ACP2E-1690 -->

* Las pruebas de integración para la funcionalidad de edición del registro de regalos ya no dependen de los ID de entidad existentes. Todos los datos necesarios ahora se obtienen mediante accesorios. Anteriormente, `\Magento\GiftRegistry\Controller\Index\EditPostTest` fallaba.

<!-- ACP2E-1748 -->

* `CollectionTest::testGetDateRangeFirstPart()` ahora cuenta para el horario de verano.

<!-- ACP2E-1824 -->

* Se corrigió el aviso de desuso de `StorefrontDeleteItemFromRequisitionListPrintView`.

### Marco de IU

<!-- AC-9604 -->

* El cargador de imágenes ahora funciona como se espera en las filas dinámicas. Las imágenes ahora se cargan correctamente cuando se envían como una matriz multinacional. [GitHub-37957](https://github.com/magento/magento2/issues/37957)

<!-- AC-10877 -->

* Los estilos de carga de archivos ya no están duplicados en la temática de Luma. [GitHub-32373](https://github.com/magento/magento2/issues/32373)

<!-- AC-9984 -->

* Los campos de la calle en el formulario de edición de cuenta de cliente del campo de la calle ahora se guardan correctamente. Estos campos ahora están ordenados correctamente por las claves dadas en el formulario. [GitHub-37973](https://github.com/magento/magento2/issues/37973)

<!-- AC-9107 -->

* Se corrigió el comportamiento del cursor en el campo de texto del Registro de regalos **[!UICONTROL Message]**.

<!-- AC-3001 -->

* Los valores de Desplazamiento de diseño acumulativo (CLS) han mejorado en las páginas de detalles del producto. (Esta métrica cuantifica la estabilidad visual de los diseños de página).[GitHub-35410](https://github.com/magento/magento2/issues/35410)

<!-- AC-10567 -->

* Se ha mejorado la mensajería de errores que se producen durante el procesamiento de la plantilla. Commerce ahora muestra un mensaje informativo. Anteriormente, Commerce mostraba fugas de HTML cuando se producía un error de PHP.

<!-- ACP2E-2595 -->

* Los atributos personalizados del cliente (tipo `File attached`) ahora funcionan correctamente con imágenes que se eliminaron y luego se cargaron. Anteriormente, los atributos personalizados cargados, eliminados y cargados de nuevo no se podían guardar desde la tienda.

<!-- AC-9125 -->

* Se ha corregido un error de sintaxis en el archivo de plantilla de calendario. [GitHub-37725](https://github.com/magento/magento2/issues/37725)

<!-- AC-6445 -->

* Los usuarios administradores ahora pueden cambiar el logotipo de la tienda cuando el modo de tienda única está activado. Anteriormente, Commerce mostraba el logotipo de reserva predeterminado. [GitHub-35952](https://github.com/magento/magento2/issues/35952)

<!-- ACP2E-2045 -->

* Los valores de configuración de los mixins ya no están vacíos y los mixins de jQuery ahora funcionan independientemente de la posición de carga. Anteriormente, los mixins de jQuery no se cargaban de forma coherente en los exploradores.

<!-- AC-8823 -->

* Ahora las contraseñas se muestran según lo esperado cuando la casilla de verificación **[!UICONTROL Show Password]** de la página de inicio de sesión está activa.

<!-- ACP2E-2034 -->

* Adobe Commerce ahora muestra los precios correctos de los productos de paquete fijo con precios especiales.

<!-- AC-8285 -->

* Se ha actualizado el vínculo a la página de lista Problemas de GitHub en el archivo de plantilla de pie de página de la tienda. [GitHub-37214](https://github.com/magento/magento2/issues/37214)

<!-- AC-6282 -->

* El widget Vistos recientemente ahora muestra la cantidad correcta de impuestos en los precios de productos agrupados. [GitHub-35881](https://github.com/magento/magento2/issues/35881)

<!-- AC-6636 -->

* Los usuarios administradores ahora pueden arrastrar y soltar las opciones personalizables creadas para el producto simple según lo esperado. [GitHub-36051](https://github.com/magento/magento2/issues/36051)

<!-- AC-8345 -->

* El orden de los tipos de atributos desplegables del producto ahora coincide con el orden de las imágenes en la página de producto configurable. [GitHub-37285](https://github.com/magento/magento2/issues/37285)

<!-- ACP2E-1969 -->

* Los mensajes del sistema ahora se cargan más rápido. Solo se cargan los mensajes que se muestran. Anteriormente, todos los mensajes se cargaban desde la base de datos, lo que llevaba mucho tiempo.

<!-- ACP2E-1804 -->

* Si se quita el nodo de rutas de exploración estableciendo `remove=true` a través del XML de diseño, ya no se eliminará el título de página de la categoría. Anteriormente, al eliminar las rutas de exploración de esta manera se quitaba el título de página de la página de categoría.

<!-- ACP2E-1717 -->

* El formulario de registro de cliente ahora se carga según lo esperado cuando incluye atributos del cliente de selección múltiple. Anteriormente, Adobe Commerce arrojaba esta excepción: `[2023-03-05T05:57:40.032602+00:00] report.CRITICAL: Exception: Deprecated Functionality: explode(): Passing null to parameter #2 ($string) of type string is deprecated in /magento2ee/app/code/Magento/CustomAttributeManagement/Block/Form/Renderer/Multiselect.php on line 53 in /lib/internal/Magento/Framework/App/ErrorHandler.php:62`. [GitHub-37189](https://github.com/magento/magento2/issues/37189)

<!-- ACP2E-1602 -->

* Los mensajes de bienvenida que contienen comillas simples ahora se representan correctamente en la tienda sin errores de consola. Anteriormente, si un mensaje de bienvenida contenía una comilla simple, el mensaje de bienvenida no se cargaba durante la representación de la tienda. Adobe Commerce también mostraba errores de consola.

<!-- ACP2E-1369 -->

* Adobe Commerce ya no genera un error cuando intenta cambiar rápidamente la vista entre el historial de comentarios y Devoluciones en la página Orden de administración. Anteriormente, Adobe Commerce mostraba este error genérico: `A technical problem with the server created an error`.

<!-- ACP2E-1374 -->

* Los usuarios administradores con privilegios restringidos a un sitio web ahora pueden actualizar los atributos de producto específicos del sitio web establecidos en un ámbito `all stores view`.

<!-- ACP2E-1648 -->

* El widget de lupa ahora se carga según lo esperado en la página del producto.

<!-- ACP2E-1216 -->

* Las opciones personalizables de varias líneas ahora se representan correctamente en los documentos de PDF de factura, envío y nota de abono. Anteriormente, el texto multilínea iba precedido de un salto de página inesperado y, si el texto superaba la página, se truncaba.

<!-- AC-7402 -->

* Los usuarios administradores ahora pueden añadir una nueva dirección de cliente desde el Administrador cuando el cliente se ha creado para otro sitio web cuyo ID de tienda no coincide con el ID de sitio web. Anteriormente, Adobe Commerce mostraba este mensaje emergente: `Something went wrong`. [GitHub-36582](https://github.com/magento/magento2/issues/36582)

<!-- ACP2E-1529 -->

* Los detalles del administrador de la empresa ahora se guardan según lo esperado y se redirige correctamente a los administradores cuando los correos electrónicos de la asignación de administradores de la empresa contienen una variable `CMS Block URL`.

<!-- ACP2E-1775 -->

* Los mensajes de error asociados con el envío de comentarios en la página de detalles del pedido ahora son más informativos. Anteriormente, cuando un comprador hacía clic en **[!UICONTROL Submit comment]** sin cambiar el estado del pedido ni escribir texto en el área de comentarios, Adobe Commerce mostraba este mensaje: `The comment is missing. Enter and try again`.

<!-- ACP2E-1659 -->

* El icono de calendario ahora se muestra según lo esperado en los campos de intervalo de fechas en Administración **[!UICONTROL Marketing]** > **[!UICONTROL Cart Price Rules]** después de seleccionar una fecha para un campo. Anteriormente, después de seleccionar una fecha para un campo, el icono del calendario ya no se mostraba en otros campos y Adobe Commerce mostraba el texto del marcador de posición. [GitHub-36499](https://github.com/magento/magento2/issues/36499)

<!-- ACP2E-1717 -->

* Los formularios de registro de cliente que incluyen campos de selección múltiple ahora se cargan correctamente. Anteriormente, este formulario no se cargaba cuando contenía campos de selección múltiple y se activó el siguiente error: `report.CRITICAL: Exception: Deprecated Functionality: explode(): Passing null to parameter #2 ($string) of type string is deprecated in /magento2ee/app/code/Magento/CustomAttributeManagement/Block/Form/Renderer/Multiselect.php on line 53 in /lib/internal/Magento/Framework/App/ErrorHandler.php:62`. [GitHub-37189](https://github.com/magento/magento2/issues/37189)

<!-- AC-7092 -->

* Al hacer clic en una miniatura de vídeo en el modo de pantalla completa de la galería de productos, ahora el vídeo se muestra según lo esperado. Anteriormente, el vídeo no se mostraba y la consola del explorador mostraba un error de JavaScript. [GitHub-36456](https://github.com/magento/magento2/issues/36456)

<!-- AC-7806 -->

* Se ha agregado una variable a la línea de copyright que se actualiza automáticamente cada año. [GitHub-36776](https://github.com/magento/magento2/issues/36776)

<!-- AC-8441 -->

* El regulador de imagen de la página de producto ahora funciona como se espera en la vista móvil. Anteriormente, solo se mostraba correctamente la primera imagen. [GitHub-37232](https://github.com/magento/magento2/issues/37232)

### Reescrituras de URL

<!-- AC-8039 -->

* El atributo `crossorigin` se ha agregado a `linkTypes` para `HEAD` elementos.[GitHub-32509](https://github.com/magento/magento2/issues/32509)

<!-- ACP2E-2549 -->

* Las reescrituras de URL ahora se generan en función de la configuración de visibilidad en el nivel de tienda en implementaciones de varias tiendas. Anteriormente, no se generaban reescrituras de URL para tiendas no predeterminadas cuando la visibilidad del producto se establecía en **no visible** en el ámbito de tienda predeterminado.

<!-- AC-10464 -->

* `Category::getUrl()` ya no obtiene una redirección 301. [GitHub-38152](https://github.com/magento/magento2/issues/38152)

<!-- ACP2E-2629 -->

* Commerce ya no genera reescrituras de URL de producto para categorías raíz y para productos que se establecen en **[!UICONTROL Not Visible Individually]** en configuraciones de varias tiendas al generar reescrituras de URL que faltan para tiendas personalizadas.

<!-- ACP2E-2481 -->

* Las etiquetas de URL canónicas ahora reflejan los cambios según lo esperado después de actualizar la propiedad de clave de URL de categoría. Anteriormente, se utilizaba la URL de categoría obsoleta, que activaba inmediatamente la redirección a la nueva URL.

<!-- AC-6728 -->

* Las reescrituras de URL de producto de categoría ahora se generan según lo esperado para todas las vistas de tienda cuando se agrega un producto a una categoría. [GitHub-32910](https://github.com/magento/magento2/issues/32910)

<!-- ACP2E-1783 -->

* Commerce ya no genera un error cuando intenta crear una redirección 301/302 para una dirección URL de producto cuando **Generar reescrituras de categoría/dirección URL de producto** está habilitado. Cuando se crea un producto y se asigna a una categoría, se crean reescrituras de URL automatizadas: una para la URL directa y otra para el producto a través de la ruta de la categoría. Cuando se crea una nueva reescritura de URL de producto, se comprueban las correlaciones entre el producto, la categoría y la tienda. Esta comprobación ahora se basa en las propiedades de entidad correlacionadas (categoría y producto). Anteriormente, esta comprobación se realizaba en reescrituras de URL preexistentes.

<!-- ACP2E-1737 -->

* Las reescrituras de URL de categorías ahora se generan para todas las vistas de tiendas cuando se importa una nueva categoría desde un archivo CSV.

<!-- ACP2E-1700 -->

* Las configuraciones de sufijo de URL de producto y sufijo de URL de categoría ahora coinciden con los sufijos de la tabla `url_rewrite`. Anteriormente, se producían condiciones de carrera al actualizar configuraciones de sufijos de URL, y los sufijos de URL configurados y la tabla `url_rewrite` no coincidían.

<!-- ACP2E-1703 -->

* Adobe Commerce ahora procesa el árbol de categorías en todos los niveles al crear reescrituras de URL de categoría. Anteriormente, solo se mostraban los tres primeros niveles de categorías. [GitHub-36973](https://github.com/magento/magento2/issues/36973)

<!-- ACP2E-1644 -->

* Las páginas de CMS recién creadas con un nodo secundario ahora se incluyen en la cuadrícula de filtros de marketing (**[!UICONTROL Marketing]** > **[!UICONTROL URL rewrites]**). Anteriormente, no se creaban reescrituras de URL para esas páginas de CMS.

<!-- ACP2E-1737 -->

* Las reescrituras de URL de categorías ahora están presentes en el archivo CSV durante la importación de una nueva categoría.

<!-- ACP2E-1668 -->

* Las páginas de CMS de varias tiendas sin reescrituras de URL ahora se reenvían según lo esperado. Anteriormente, las páginas de CMS solicitadas de varias tiendas sin reescrituras de URL se redirigían a la página principal de la tienda, pero no a las páginas originales de CMS.

### Visual Merchandiser

<!-- ACP2E-1363 -->

* Ahora puede usar el atributo `Categories` para las reglas de Visual Merchandiser. Anteriormente, Adobe Commerce arrojaba esta excepción: `Something went wrong while saving the category`.

### Marco de API web

<!-- AC-6980 -->

* Commerce ya no muestra una advertencia `Integration not secure` en Administración **[!UICONTROL System]** > **[!UICONTROL Extensions]** > **[!UICONTROL Integrations]** cuando los campos **[!UICONTROL Callback URL]** y **[!UICONTROL Identity link URL]** están vacíos. [GitHub-36407](https://github.com/magento/magento2/issues/36407)

<!-- ACP2E-2483 -->

* Se agregaron los atributos de extensión `taxes`, `itemized_taxes` y `additional_itemized_taxes` a  `Magento\Sales\Api\Data\OrderInterface`. Estos atributos le permiten guardar los impuestos aplicados con llamadas REST de pedidos.

<!-- ACP2E-2610 -->

* La API de REST de precios de nivel ahora admite cantidades decimales. Anteriormente, esta API no permitía cantidades decimales aunque la configuración **[!UICONTROL Use Decimal Quantity]** estuviera habilitada.

<!-- AC-8998 -->

* El extremo REST `V1/orders/{id}/comments` ya no cambia el estado de un pedido al intentar agregar un comentario al estado de un pedido pendiente. Ahora se muestra un error informativo. Anteriormente, este punto final cambiaba el estado del pedido al agregar un comentario.

<!-- ACP2E-2275 -->

* El extremo de la API de REST `GET` y `POST V1/products/attributes` ya no devuelve el mismo valor para el atributo `is_filterable` para las opciones `Filterable(with results)` y `Filterable(no results)` de la opción **[!UICONTROL Use in Layered Navigation]**. Anteriormente, este extremo devolvía el mismo valor porque la propiedad del atributo `is_filterable` era del tipo `Boolean`, que no permitía establecer esta propiedad en `Filterable(no results)`. [GitHub-37979](https://github.com/magento/magento2/issues/37979)

<!-- AC-9117 -->

* El campo `media_gallery_entries` que falta se ha agregado al extremo REST `V1/configurable-products/sku/children`. Anteriormente, a esta función le faltaba el código necesario para almacenar y mostrar `media_gallery_entries`. [GitHub-37607](https://github.com/magento/magento2/issues/37607)

<!-- ACP2E-1986 -->

* El método REST `V1/carts/mine/estimate-shipping-methods` ahora valida todos los niveles de datos de campo de carga útil y devuelve un código HTTP 400 para datos no válidos. Anteriormente, solo se validaba el primer nivel de carga útil de API y, si se devolvían datos no válidos en niveles no validados de la carga útil, Commerce devolvía un código de estado 500.

<!-- ACP2E-2053 -->

* Las operaciones asíncronas masivas de la API de REST para actualizar productos con precios de nivel y diferentes conjuntos de atributos ahora se completan correctamente. Anteriormente, los productos con diferentes conjuntos de atributos no se podían actualizar de esta manera y Commerce mostraba este error: `The product was unable to be saved. Please try again`.

<!-- AC-7002 -->

* El extremo `POST /V1/products/tier-prices` devuelve ahora un mensaje de error más informativo cuando se utiliza un nombre de grupo de clientes no válido durante la creación del precio de nivel. Anteriormente, Adobe Commerce devolvía un error como este: `Notice: Undefined index: XXXXX in ~/public_html/vendor/magento/module-catalog/Model/Product/Price/Validation/TierPriceValidator.php on line 474"`. [GitHub-36431](https://github.com/magento/magento2/issues/36431)

<!-- ACP2E-1776 -->

* Ahora puede ejecutar una solicitud de API asíncrona masiva autorizada para crear clientes con un ID de grupo no predeterminado. Anteriormente, estas solicitudes restablecían el ID de grupo al valor predeterminado.

<!-- ACP2E-1543 -->

* Los clientes creados con la API por lotes ahora reciben correos electrónicos de registro de clientes en el idioma configurado en el sitio web asignado. Anteriormente, todos los correos electrónicos se enviaban a la configuración regional predeterminada, no a la configuración regional del sitio web al que está asignado el cliente.

<!-- ACP2E-1339 AC-7577-->

* La llamada `POST V1/guest-carts` ya no envía pedidos de invitado cuando **[!UICONTROL Allow Guest Checkout]** está deshabilitado.

<!-- ACP2E-1336 -->

* Ahora puede abrir un pedido del administrador con el estado `Received` cuando `AsyncOrder` no esté habilitado. Anteriormente, no se podía abrir la página de detalles del pedido desde el Administrador cuando `POST V1/orders` cambió el estado del pedido.

<!-- ACP2E-1526 -->

* Adobe Commerce ahora devuelve correctamente el atributo `content` (código de imagen base64) en `GET V1/products/sku/media` respuestas de API de medios del producto. El atributo `content` no aparecía anteriormente en la respuesta.

### Lista de deseos

<!-- ACP2E-1784 -->

* Commerce ahora muestra un mensaje que indica que ya se ha añadido un artículo a una lista de deseos cuando un comprador intenta añadir el mismo artículo a una lista de deseos varias veces. Anteriormente, en estas condiciones, Commerce aumentaba la cantidad de productos en la lista de deseos.

<!-- AC-8610 -->

* Adobe Commerce ahora agrega correctamente a la lista de deseos productos con los archivos de opciones personalizables cargados necesarios. Anteriormente, Commerce agregaba dos productos a la lista de deseos, no uno. [GitHub-37437](https://github.com/magento/magento2/issues/37437)


## Requisitos del sistema

Nuestra pila de tecnología está construida sobre PHP y MySQL. Para obtener más información, consulte [Requisitos del sistema](https://experienceleague.adobe.com/docs/commerce-operations/installation-guide/system-requirements.html?lang=es).

## Instrucciones de instalación y actualización

Puede instalar Adobe Commerce 2.4.7 con [Composer](https://experienceleague.adobe.com/docs/commerce-operations/installation-guide/composer.html?lang=es).
