---
title: Notas de la versión de Adobe Commerce 2.4.2
description: Obtenga información sobre las nuevas funciones, mejoras, correcciones de errores y problemas conocidos de la versión 2.4.2 de Adobe Commerce.
source-git-commit: 065c56f20ba5b1eef8c331c5c2f5649902f1442b
workflow-type: tm+mt
source-wordcount: '16459'
ht-degree: 0%

---


# Notas de la versión de Adobe Commerce 2.4.2

Adobe Commerce 2.4.2 presenta mejoras en el rendimiento y la seguridad, además de mejoras significativas en la plataforma. Las mejoras de seguridad incluyen la ampliación de la compatibilidad con el `SameSite` para todas las cookies. Las mejoras B2B se centran en el apoyo a los pagos en línea para órdenes de compra. Ahora se admiten Elasticsearch 7.9.x y Redis 6.x.

Esta versión incluye más de 280 correcciones nuevas en el código principal y 35 mejoras de seguridad. Incluye la resolución de casi 290 problemas de GitHub por parte de los miembros de nuestra comunidad. Estas contribuciones de la comunidad van desde una pequeña limpieza del código principal hasta mejoras significativas en GraphQL.

Todos los problemas conocidos identificados en la versión 2.4.1 se han corregido en esta versión.

{{bics}}

## Aplicar `AC-3022.patch` seguir ofreciendo DHL como transportista marítimo

DHL ha introducido la versión de esquema 6.2 y dejará de utilizar la versión de esquema 6.0 en un futuro próximo. Adobe Commerce 2.4.4 y versiones anteriores compatibles con la integración de DHL solo admiten la versión 6.0. Los comerciantes que implementen estas versiones deben aplicar `AC-3022.patch` lo antes posible para seguir ofreciendo DHL como transportista marítimo. Consulte la [Aplique un parche para seguir ofreciendo DHL como transportista de envío](https://support.magento.com/hc/en-us/articles/7707818131597-Apply-a-patch-to-continue-offering-DHL-as-shipping-carrier) Artículo de la Base de conocimiento para obtener información sobre cómo descargar e instalar el parche.

## Parche de seguridad disponible

Los comerciantes ahora pueden instalar correcciones de seguridad que distinguen el tiempo sin aplicar los cientos de correcciones funcionales y mejoras que proporciona una versión trimestral completa (por ejemplo, 2.4.1-p1). El parche 2.4.0.12 (paquete Composer 2.4.1-p1) es un parche de seguridad que proporciona correcciones para vulnerabilidades que se han identificado en nuestra versión trimestral anterior, 2.4.1. Todos los hot fixes que se aplicaron a la versión 2.4.1 se incluyen en este parche de seguridad. A *hot fix* proporciona una corrección a una versión publicada que aborda un problema o error específico).

Para obtener información general sobre los parches de seguridad, consulte [Presentación de la nueva versión de parches de seguridad](https://community.magento.com/t5/Magento-DevBlog/Introducing-the-New-Security-Patch-Release/ba-p/141287). Para obtener instrucciones sobre cómo descargar y aplicar parches de seguridad (incluido el parche 2.4.1-p1), consulte [Instalación local de inicio rápido](../../../installation/composer.md). Los parches de seguridad incluyen correcciones de errores de seguridad únicamente, no las mejoras de seguridad adicionales que se incluyen en el parche completo.

## Otra información de la versión

Aunque el código de estas funciones está empaquetado con versiones trimestrales , varios de estos proyectos (por ejemplo, B2B, Page Builder y Progressive Web Application (PWA) Studio) también se publican de forma independiente. Las correcciones de errores de estos proyectos se documentan en la información de versión específica del proyecto que está disponible en la documentación de cada proyecto.

## Puntos destacados

Busque los siguientes aspectos destacados en esta versión.

### Mejoras sustanciales de seguridad

Esta versión incluye más de 35 correcciones de seguridad y mejoras de seguridad de la plataforma. Todas las correcciones de seguridad se han backportado a 2.4.1-p1 y 2.3.6-p1.

#### Más de 35 mejoras de seguridad que ayudan a cerrar las vulnerabilidades de ejecución de código remoto (RCE) y scripts entre sitios (XSS)

Hasta la fecha no se han producido ataques confirmados relacionados con estos problemas. Sin embargo, algunas vulnerabilidades se pueden aprovechar para acceder a la información del cliente o para hacerse cargo de las sesiones del administrador. La mayoría de estos problemas requieren que un atacante obtenga primero acceso al administrador. Como resultado, le recordamos que siga todos los pasos necesarios para proteger a su administrador, incluidos, entre otros, estos esfuerzos: INCLUSIÓN EN LA LISTA DE PERMITIDOS IP, [autenticación de dos factores](https://devdocs.magento.com/guides/v2.4/security/two-factor-authentication.html), el uso de una VPN, el uso de una ubicación única en lugar de `/admin`, y buena higiene de las contraseñas. Consulte [Boletín de seguridad de Adobe](https://helpx.adobe.com/security/products/magento/apsb21-08.html) para debatir estas cuestiones fijas.

#### Mejoras de seguridad adicionales

Las mejoras de seguridad para esta versión incluyen:

* Todas las cookies principales ahora admiten la variable `SameSite` atributo.

* La aplicación ahora muestra mensajes que identifican contenido potencialmente malicioso en los campos de descripción de productos y categorías cuando el usuario intenta guardar valores en estos campos.

* Las operaciones del sistema de archivos en los componentes se han estandarizado y endurecido para evitar cargas malintencionadas.

* Se han corregido las infracciones de la Política de seguridad de contenido principal (CSP).

{{cve-notice}}

### Mejoras en la infraestructura

Esta versión contiene mejoras en la calidad del núcleo, que mejoran la calidad del marco y de estas áreas funcionales: Cuenta del cliente, Catálogo, CMS, OMS, Importar/Exportar, Promociones y Segmentación, Carro y cierre de compra, B2B, Ensayo y vista previa.

### Mejoras en la plataforma

* [**Ahora se admite el Elasticsearch 7.9.x**](../../../installation/system-requirements.md). Aunque se recomienda ejecutar Elasticsearch 7.9.x, la versión 2.4.x sigue siendo compatible con Elasticsearch 7.4.x. <!-- MC-36867-->

* 2.4.2 se ha probado con [Varniz 6.4](../../../installation/system-requirements.md). La versión 2.4.x sigue siendo compatible con Varnish 6.x.

* [**Ahora se admite Redis 6.x**](../../../installation/system-requirements.md). La versión 2.4.x sigue siendo compatible con Redis 5.x. <!-- MC-34853-->

* 2.4.2 ahora es compatible con **Compositor 2.x**. Se recomienda que los comerciantes migren al Compositor 2.x. Aunque puede instalar esta versión con Composer 1.x, el Compositor 1.x pronto llegará al final de su vida útil. Para obtener una descripción general de las funciones de Composer 2.x, consulte [Ya está disponible el Compositor 2.0.](https://blog.packagist.com/composer-2-0-is-now-available/)

La capacidad de configurar una instalación para utilizar una base de datos dividida ha quedado obsoleta en esta versión. Los comerciantes que actualmente utilizan una base de datos dividida deberían empezar a planificar la vuelta a una base de datos única o la migración a ella, o bien utilizar un método alternativo. Consulte la [Obsolescencia de la funcionalidad dividida de la base de datos en Adobe Commerce](https://community.magento.com/t5/Magento-DevBlog/Deprecation-of-Split-Database-in-Magento-Commerce/ba-p/465187) Publicación de DevBlog para obtener una descripción general de este problema.  Consulte [Revertir de una base de datos dividida a una única base de datos](../../../configuration/storage/revert-split-database.md) para obtener instrucciones de migración.

### Mejoras de rendimiento

Esta versión incluye mejoras en el código que mejoran el rendimiento de la API y el tiempo de respuesta del administrador para implementaciones con catálogos grandes. Las múltiples mejoras de escalabilidad permiten que la versión 2.4.2 admita de forma nativa catálogos complejos hasta 20 veces más grandes que en versiones anteriores.

### GraphQL

Esta versión incorpora la cobertura de GraphQL para las siguientes funciones:

* Se ha agregado compatibilidad con varias listas de deseos. Puede usar GraphQL para [crear](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-wishlist.html), [delete](https://devdocs.magento.com/guides/v2.4/graphql/mutations/delete-wishlist.html)y [cambiar nombre](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-wishlist.html) listas de deseos , así como [move](https://devdocs.magento.com/guides/v2.4/graphql/mutations/move-products-between-wishlists.html) o [copy](https://devdocs.magento.com/guides/v2.4/graphql/mutations/copy-products-between-wishlists.html) elementos entre ellos. <!-- MC-32356-->

* Se ha agregado compatibilidad con las autorizaciones de comercialización devueltas (RMA). Los compradores pueden [solicitar una devolución](https://devdocs.magento.com/guides/v2.4/graphql/mutations/request-return.html). Si el comerciante acepta la solicitud, el comprador puede realizar tareas como [adición de un comentario](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-return-comment.html) y [agregar información de seguimiento](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-return-tracking.html). <!-- MC-34596-->

* Se ha agregado compatibilidad con las siguientes funciones B2B:
   * Compañías. Puede agregar una empresa [administradores](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-company.html), [usuarios](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-company-user.html), [roles](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-company-role.html)y [equipos](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-company-team.html). <!-- MC-33861-->
   * Crédito de la empresa. La variable [consulta de empresa](https://devdocs.magento.com/guides/v2.4/graphql/queries/company.html) incluye detalles sobre el historial de crédito de la empresa. <!-- MC-33862-->
   * Listas de solicitudes. Puede [crear](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-requisition-list.html), [delete](https://devdocs.magento.com/guides/v2.4/graphql/mutations/delete-requisition-list.html)y [actualizar](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-requisition-list.html) listas de solicitudes. La compatibilidad también incluye la capacidad de [add](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-products-to-requisition-list.html), [actualizar](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-products-in-wishlist.html), [delete](https://devdocs.magento.com/guides/v2.4/graphql/mutations/delete-requisition-list-items.html), [copy](https://devdocs.magento.com/guides/v2.4/graphql/mutations/copy-items-between-requisition-lists.html)y [move](https://devdocs.magento.com/guides/v2.4/graphql/mutations/move-items-between-requisition-lists.html) artículos dentro de una lista de solicitudes, así como agregar artículos de lista de solicitudes [en el carro de compras](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-requisition-list-items-to-cart.html). <!-- MC-34312-->

* Se ha agregado compatibilidad con los sindicatos en GraphQL. [GitHub-29425](https://github.com/magento/magento2/issues/29425) <!-- ENGCOM-8291 -->

* Se ha agregado compatibilidad con [listas de comparación](https://devdocs.magento.com/guides/v2.4/graphql/queries/compare-list.html). Los compradores pueden [crear](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-compare-list.html) y [delete](https://devdocs.magento.com/guides/v2.4/graphql/mutations/delete-compare-list.html) listas de comparación y [add](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-products-to-compare-list.html) y [remove](https://devdocs.magento.com/guides/v2.4/graphql/mutations/remove-products-from-compare-list.html) elementos de las listas de comparación. Además, los compradores que crean una lista de comparación como invitados pueden iniciar sesión como clientes y [conservar](https://devdocs.magento.com/guides/v2.4/graphql/mutations/assign-compare-list-to-customer.html) sus listas de comparación.

* Se ha añadido la variable [`generateCustomerTokenAsAdmin`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/generate-customer-token-as-admin.html) la mutación y la actualización del `Customer` para admitir la asistencia de compras remotas.

* Se ha agregado compatibilidad con la localización entre tiendas para admitir tareas como cambiar idiomas, carros de compras y monedas. <!-- MC-37801-->

* El esquema de GraphQL se ha mejorado para optimizar la recuperación de datos del producto para productos configurables con muchas variantes. <!-- MC-36138-->

* Los ID de objeto de tipo entero se han desaprobado en favor de `uid` atributos de tipo ID. <!-- MC-36346-->

* Se ha añadido la variable `staging` a la variable [`ProductInterface`](https://devdocs.magento.com/guides/v2.4/graphql/interfaces/product-interface.html) y [`CategoryInterface`](https://devdocs.magento.com/guides/v2.4/graphql/interfaces/category-interface.html) para determinar si un producto está en fase de ensayo y para ver la información de campaña asociada. <!-- MC-33897-->

Consulte la [Guía para desarrolladores de GraphQL](https://devdocs.magento.com/guides/v2.4/graphql/) para obtener más información sobre estas mejoras.

### B2B

2.4.2 presenta B2B v1.3.1. Esta versión incluye compatibilidad con pagos en línea para pedidos de compra, así como varias correcciones de errores.

**Las órdenes de compra ahora se pueden completar mediante métodos de pago en línea**. A los compradores B2B se les pide que seleccionen su método de pago preferido para cada [orden de compra](https://docs.magento.com/user-guide/stores/b2b-purchase-order-flow.html) durante el cierre de compra inicial. Una vez aprobada la orden de compra, se solicita a los compradores que introduzcan los detalles de pago para convertir la orden de compra en una orden final.

Para admitir un flujo de trabajo completo para aceptar pagos en línea, esta función también:

* Anula las plantillas de método de pago existentes durante el cierre de compra inicial para mantener el cumplimiento de PCI.

* Mantiene la compatibilidad con métodos de pago de terceros, personalizados y desarrollados por la comunidad.

* Notifica a los compradores por correo electrónico cuando necesitan añadir detalles de pago a una orden de compra aprobada.

* Permite la personalización de correos electrónicos desde el administrador, lo que permite a los comerciantes utilizar plantillas coherentes con su marca.

* Presenta un `Approved – Pending Payment` para que las órdenes de compra muestren claramente cuándo se requiere una acción.

* Evita que los códigos de descuento se agreguen o eliminen en el paso de pago final, lo que garantiza que el importe total del pedido permanezca sin cambios en los pedidos de compra aprobados.

* Permite a los compradores cambiar el método de pago durante el último paso de pago para mantener la flexibilidad y aumentar la conversión.

Esta versión también incluye varias correcciones de errores. Consulte [Notas de la versión B2B](https://experienceleague.adobe.com/docs/commerce-admin/b2b/release-notes.html).

### PWA Studio

Esta versión de PWA Studio incluye:

* Internacionalización y localización. Venia ahora es compatible con varios idiomas y monedas.

* Se ha mejorado el marco de extensibilidad para admitir cambios en el código mediante extensiones.

* Componentes iniciales de las funciones relacionadas con Mi cuenta, como Lista de deseos, Pagos guardados, Libreta de direcciones e Historial de pedidos.

* Varias optimizaciones de rendimiento y correcciones de errores.

Para obtener información sobre las mejoras y correcciones de errores, consulte [Versiones de PWA Studio](https://github.com/magento/pwa-studio/releases). Consulte [compatibilidad](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) para obtener una lista de versiones de PWA Studio y sus versiones compatibles.

### Page Builder

Esta versión incluye mejoras en la migración de contenido del Creador de páginas y en la personalización de CSS del Creador de páginas:

* Los desarrolladores ahora pueden aplicar un estilo a la salida de tipo de contenido de forma diferente por ventanilla sin usar la variable `!important` directiva.

* El contenido migrado a Page Builder ya no se rellena con estilo en línea predeterminado.

* El Creador de páginas ya no requiere que todos los tipos de contenido se coloquen en una fila. La variable [Fase del Creador de páginas](https://docs.magento.com/user-guide/cms/page-builder-workspace.html#stage) ahora está inicialmente en blanco y admite la adición de los siguientes tipos de contenido directamente al escenario: Filas, Columnas, Pestañas, Código HTML, Bloques, Bloques Dinámicos.

* Los márgenes predefinidos y las asignaciones ya no son necesarios para los tipos de contenido.

* El nuevo móvil [conmutador viewport](https://docs.magento.com/user-guide/cms/page-builder-workspace.html#viewports) y el ámbito de ventanilla móvil para valores de campo de formulario permite a los usuarios y desarrolladores realizar las siguientes acciones:

   * Vea el contenido en diferentes puertos de vista durante la creación.

   * Optimice el parámetro de campo de altura mínima en diferentes tipos de contenido para cada ventanilla. (Solo se admite un parámetro (altura mínima) de forma predeterminada. Desarrollo personalizado necesario para habilitar la optimización móvil para otros parámetros de contenido).

   * Agregue el ámbito de campo a campos personalizados y conjuntos de campos (desarrolladores).

### Guía interactiva en el producto

La guía interactiva en el producto proporciona a los comerciantes consejos de uso e información desde el administrador sobre los anuncios de nuevas funciones, las guías de introducción, la información sobre el embarque y la información sobre herramientas.  **Los administradores deben incluirse en Admin para recibir directrices internas del producto si esta función no está habilitada**. Consulte [Recopilación de datos de uso](https://docs.magento.com/user-guide/stores/admin.html) y [Uso del administrador](https://docs.magento.com/user-guide/configuration/advanced/admin.html#admin-usage).

### Integración de Adobe Stock

Esta versión incluye Adobe Stock Integration v2.1.1.

### Galería de medios

**Nuevos recursos de rol para la Galería de medios**. Esta versión proporciona a los comerciantes la capacidad de limitar el acceso de administrador solo a la galería de medios y de controlar quién puede realizar estas acciones:

* Insertar recursos de medios en el contenido

* Cargar recursos

* Editar detalles de recursos

* Eliminar recursos de la Galería multimedia

* Administrar estructura de carpetas.

**Imágenes optimizadas para web en contenido**. Los comerciantes ahora pueden utilizar [representación de imágenes optimizada para la web](https://docs.magento.com/user-guide/cms/media-gallery-image-optimization.html) en contenido en lugar de imágenes de alta resolución. La imagen original permanece sin modificar en la Galería multimedia y la representación de la imagen se genera de forma dinámica cuando se inserta la imagen en el contenido.

### Mejoras de soporte de AWS S3

El soporte de Amazon Simple Storage Service (AWS S3) se ha mejorado para incluir soporte para:

* Almacenamiento de objetos y futura extensibilidad

* [Almacenamiento de archivos multimedia](../../../configuration/remote-storage/remote-storage.md) en AWS S3

Se ha añadido la compatibilidad con AWS S3 a todos los módulos, incluidos B2B, PageBuilder e Integración con Adobe Stock.

### Marco de pruebas funcionales (MFTF)

MFTF 3.2.1 ya está disponible. Esta versión introduce tolerancia a errores en las pruebas y en la generación de grupos de pruebas. En la sección [Registro de cambios del marco de pruebas funcionales](https://github.com/magento/magento2-functional-testing-framework/blob/develop/CHANGELOG.md).

### Sistema de Gestión de Pedidos (OMS)

El conector MCOM es totalmente compatible con la versión 2.4.2. Las correcciones de errores y mejoras en el conector se describen en [Notas de la versión del conector](https://omsdocs.magento.com/release-notes/connector/index.html). Esta versión incluye mejoras en la interfaz de línea de comandos de OMS, que ahora proporciona información detallada que los socios y equipos de asistencia pueden utilizar para solucionar problemas `retry`, `queue_prune`, `order_sync`, `message process`y `catalog export` procesos.

### Extensiones desarrolladas por proveedores

Consulte los siguientes artículos para estar al día de las últimas funciones y cambios de esta versión:

* [Amazon Pay](https://docs.magento.com/user-guide/payment/amazon-pay.html). Amazon Pay se ha desaprobado en esta versión y se eliminará en Magento 2.5.0. La versión 2.4.3 y posteriores solo contendrán actualizaciones de compatibilidad y correcciones para errores importantes.

* [Braintree](https://docs.magento.com/user-guide/payment/braintree.html)

* [dotdigital Engagement Cloud](https://docs.magento.com/user-guide/marketing/dotdigital/engagement-cloud.html)

* [Klarna](https://docs.magento.com/user-guide/payment/klarna.html)

* [Vertex Cloud](https://docs.magento.com/user-guide/tax/vertex.html)

* [Revisiones del producto Yotpo](../../../upgrade/modules/upgrade.md)

## Problemas solucionados

Hemos corregido cientos de problemas en el código principal de 2.4.2.

### Instalación, actualización, implementación

<!-- MC-38429-->

* La capacidad de configurar una instalación para utilizar una base de datos dividida ha quedado obsoleta en esta versión. Consulte la [Obsolescencia de la funcionalidad dividida de la base de datos en Adobe Commerce](https://community.magento.com/t5/Magento-DevBlog/Deprecation-of-Split-Database-in-Magento-Commerce/ba-p/465187) DevBlog.

<!-- MC-36472-->

* Los comerciantes ahora pueden actualizar correctamente una implementación de código abierto que ejecute MySQL 8.x a una implementación de comercio. Anteriormente, la aplicación generaba una excepción cuando `AUTO_INCREMENT` los valores se vuelven a los valores iniciales de todas las tablas donde `row_id` se agregó durante la actualización.

<!-- ENGCOM-7280 -->

* La aplicación ahora muestra un mensaje de error que identifica la ruta que se utilizó para crear el parche si se produce un error al ejecutar `bin/magento/setup:db:generate-patch`. [GitHub-27523](https://github.com/magento/magento2/issues/27523)

<!-- ENGCOM-8029 -->

* `block_html`, `full_page`y `layout` las cachés ahora se desactivan como se espera después de `bin/magento/setup:upgrade` ejecución. [GitHub-28186](https://github.com/magento/magento2/issues/28186)

<!-- ENGCOM-8184 -->

* La versión de PHP mínima requerida en `bootstrap.php` se ha actualizado. [GitHub-30004](https://github.com/magento/magento2/issues/30004)

<!-- MC-38788-->

* Ahora puede ejecutar `bin/magento/setup:upgrade` después de instalar los datos de ejemplo. Anteriormente, cuando intentaba ejecutar `bin/magento/setup:upgrade`, la aplicación mostraba este error: `unable to apply data patch magento\catalogrulesampledata\setup\patch\data\installcatalogrulesampledata for module magento_catalogrulesampledata`. La aplicación también mostraba este error en el registro del sistema: `main.ERROR: Sample Data error: Unable to unserialize value. Error: Syntax error`. [GitHub-30685](https://github.com/magento/magento2/issues/30685)

<!-- MC-36785-->

* Ahora puede establecer una clave de API de YouTube desde la línea de comandos como se espera. Anteriormente, la aplicación devolvía este error cuando intentaba ejecutar `bin/magento config:sensitive:set catalog/product_video/youtube_api_key`: `There are no sensitive configurations to fill`.

<!-- ENGCOM-8163 -->

* La aplicación ahora respeta el `maxMessages` valores que se definen en `queue_consumer.xml`. Anteriormente, la aplicación solo utilizaba los valores de configuración de implementación. [GitHub-29522](https://github.com/magento/magento2/issues/29522)

<!-- ENGCOM-8243 -->

* La generación de URL para una nueva tienda ahora funciona según lo esperado cuando se crea la tienda con `bin/magento setup:config:import`. Anteriormente, las reescrituras de URL no se generaban en entornos de producción. [GitHub-30025](https://github.com/magento/magento2/issues/30025)

<!-- ENGCOM-8230 -->

* La aplicación ya no muestra esta pregunta al ejecutar `bin/magento setup:install` para conectarse a la base de datos existente: `Overwrite the existing configuration for db-ssl-verify?[Y/n]`. [GitHub-29612](https://github.com/magento/magento2/issues/29612)

### AdminGWS

<!-- MC-37040-->

* La variable **Agregar nueva clasificación** y **Guardar**, **Eliminar**, **Restablecer** ya no están disponibles en la **Almacenes** > **Atributo** > **Clasificación** para un administrador con permisos restringidos.

<!-- MC-35804-->

* El administrador ahora solo muestra los datos de los sitios web a los que el administrador que ha iniciado sesión tiene permisos. Anteriormente, el administrador mostraba datos de todos los sitios web de la implementación.

<!-- MC-35027-->

* Todos los sitios web seleccionados ahora se almacenan en `gws_websites` independientemente del tamaño del ID del sitio web. Anteriormente, los ID de sitio web se truncaban y la lista de sitios web seleccionados no se almacenaba en la base de datos. Las funciones de usuario no se guardaban correctamente y la aplicación mostraba este error cuando un comerciante intentaba cambiar y guardar una función: `The "X" store ID is incorrect. Verify the store ID and try again`.

<!-- MC-37223-->

* La aplicación ahora muestra el recuento de elementos correcto en las cuadrículas de administración para los usuarios administradores restringidos. Anteriormente, los recuentos mostrados para estas cuadrículas reflejaban datos para todos los países, mientras que las cuadrículas mismas mostraban datos de países específicos solamente. (Esta corrección corrige un problema con los segmentos de clientes, las reglas de precios del catálogo, las reglas de precios del carro de compras, todos los usuarios, los usuarios bloqueados y las cuadrículas de funciones de usuario).

<!-- MC-34156-->

* Administradores cuyos permisos excluyen `Magento_Catalog::edit_product_design` (Editar diseño de producto) ahora puede crear un nuevo producto guardando un producto existente con un nuevo nombre en la vista de tienda seleccionada. Anteriormente, la aplicación mostraba este error:  `Not allowed to edit the product's design attributes`. [GitHub-28106 ](https://github.com/magento/magento2/issues/28106)

<!-- MC-36406-->

* La aplicación ya no muestra la variable **Añadir atributo** botón en páginas debajo de **Almacenes** > Atributos cuando un administrador carece de los permisos adecuados para crear estas entidades. Anteriormente, la aplicación generaba un error 404 cuando un administrador de un sitio web que no tenía los permisos adecuados intentaba crear un **Conjunto de atributos** o **Cliente** atributo.

<!-- ENGCOM-8230 -->

* La aplicación ya no genera un error al intentar cambiar `backend-frontname` usando la variable `ssh` después de instalar Adobe Commerce. [GitHub-26762](https://github.com/magento/magento2/issues/26762)

### Integración de Adobe Stock

<!-- ENGCOM-8020-->

* Se agregó compatibilidad con la lectura `exif_image.png` o `exif-image.jpeg` metadatos. [GitHub-1449](https://github.com/magento/adobe-stock-integration/issues/1449)

<!-- ENGCOM-8194 8094 8147 -->

* El contenido que se muestra al hacer clic en el marcador Vista predeterminada de la Galería de medios ya no se filtra. Anteriormente, la vista predeterminada contenía un filtro que se aplicaba desde `url-filter` aplicador. [GitHub-1813](https://github.com/magento/adobe-stock-integration/issues/1813), [GitHub-1789](https://github.com/magento/adobe-stock-integration/issues/1789), [GitHub-1780](https://github.com/magento/adobe-stock-integration/issues/1780)

<!-- ENGCOM-8070 -->

* La lógica se ha eliminado del controlador WYSIWYG OnInsert (`Magento\Cms\Controller\Adminhtml\Wysiwyg\Images\OnInsert::execute()`) y se ha agregado a la variable `Model\Wysiwyg\Images\PrepareImage::execute()` modelo. [GitHub-1504](https://github.com/magento/adobe-stock-integration/issues/1504)

<!-- ENGCOM-8081 -->

* La emulación de área se ha eliminado de la función `media-content:sync` comando (`\Magento\MediaContentSynchronization\Console\Command\Synchronize::execute`). [GitHub-1784](https://github.com/magento/adobe-stock-integration/issues/1784)

### Analytics

<!-- MC-37137-->

* Informes avanzados ahora funciona como se espera para varios entornos en el mismo dominio. Anteriormente, los archivos CSV generados por los informes avanzados fallaban porque las comillas dobles se escapaban con barras invertidas en lugar de con otras comillas dobles, como requería el estándar CSV RFC4180.

<!-- MC-35996-->

* La variable `analytics_collect_data` El trabajo ahora se ejecuta correctamente al utilizar el puerto predeterminado o no predeterminado para conectarse a MySQL en `env.php`. Anteriormente, `analytics_collect_data` se producía un error cuando se utilizaba el puerto no predeterminado.

<!-- MC-35407-->

* Archivos CSV que genera `analytics_collect_data` ahora se escapan correctamente. Anteriormente, estos archivos no se generaban con el escape correcto, lo que impedía la generación de informes de inventario.

### Braintree

* Los compradores ahora pueden usar Apple Pay para realizar correctamente un pedido de productos virtuales. Anteriormente, la aplicación generaba este error:  `There are no shipping methods available for you right now. Please try again or use an alternative payment method`.

* El método de pago predeterminado PayPal Express Checkout funciona ahora como se espera con el método de pago de la tarjeta de crédito del Braintree. Anteriormente, la aplicación no mostraba la variable **PayPal** cuando se activó el método de pago de la tarjeta de crédito del Braintree.

### Paquete de productos

<!-- MC-34063-->

* La aplicación ya no establece precios para artículos secundarios de producto de paquete de precio fijo entre comillas.

<!-- MC-38050-->

* La ordenación de precios ahora funciona como se espera cuando los productos del paquete incluyen productos fuera de existencias. Anteriormente, al ordenar el precio en orden descendente, no se mostraban los productos en orden descendente.

<!-- MC-38576-->

* La aplicación ahora aplica automáticamente una cantidad predeterminada de 1 para las opciones de producto del paquete cuando existen muchas opciones. Anteriormente, los comerciantes tenían que asignar manualmente una cantidad predeterminada a cada opción.

<!-- ENGCOM-8159 -->

* La página de creación de facturas de pedido ahora muestra los productos secundarios para los productos del paquete como se espera. [GitHub-27350](https://github.com/magento/magento2/issues/27350)

<!-- MC-38460 -->

* La aplicación ahora asigna precios de producto correctos cuando vuelve a ordenar productos simples que forman parte de un paquete de productos con un precio personalizado. Anteriormente, la configuración de un precio personalizado en un paquete de productos daba como resultado precios incorrectos en los productos simples adjuntos cuando se reordenaban. [GitHub-30343](https://github.com/magento/magento2/issues/30343)

<!-- MC-30348 -->

* Llamar al POST `/V1/order/{orderId}/ship` para enviar un pedido que contenga un producto de paquete, ahora marca el pedido como se esperaba. Anteriormente, la aplicación mostraba este mensaje de error: `You can't create a shipment without products`. [GitHub-9762](https://github.com/magento/magento2/issues/9762)

### Carro de compras y cierre de compra

<!-- MC-34264-->

* El estimador del método de envío ahora funciona según lo esperado cuando hay atributos de dirección personalizados presentes en el paso de envío del flujo de trabajo de cierre de compra. Anteriormente, la aplicación mostraba este mensaje de error: `{"message":"Error occurred during \"custom_attributes\" processing. A custom attribute is specified with a missing attribute code. Verify the code and try again."}` [GitHub-27505](https://github.com/magento/magento2/issues/27505)

<!-- MC-35783-->

* La aplicación ahora muestra la variable `You have no items in your shopping cart` en el minicarro como se espera cuando un comprador elimina el único elemento del carro de compras. Anteriormente, los datos del carro de compras no se actualizaban para `checkout/cart/removeFailed` cuando un comprador quitaba el elemento único, y la aplicación mostraba este mensaje: `1 product requires your attention`.

<!-- MC-36088-->

* La aplicación ya no muestra el coste de envío de un pedido para un método de envío no aplicable. Anteriormente, la aplicación mostraba un precio de 0 para un método de envío no aplicable en el flujo de trabajo de cierre de compra.

<!-- MC-36598-->

* Ahora se selecciona la dirección de facturación predeterminada de un cliente cuando el **Mi dirección de facturación y envío es la misma** en el flujo de trabajo de cierre de compra no está seleccionada.

<!-- MC-36685-->

* Los administradores pueden agregar un producto a un carro de compras por SKU desde el administrador sin que se les redirija fuera del administrador. El administrador ya no se redirige a una página de tienda y la aplicación muestra el producto en la sección Elementos del carro de compras del administrador como se esperaba.

<!-- MC-36750-->

* La aplicación ahora muestra mensajes de error informativos al cargar un archivo CSV que contiene varios tipos de errores al agregar productos al carro por SKU. Anteriormente, la aplicación mostraba una página en blanco y un mensaje de error genérico al hacer clic en ella **Elegir archivo** en **Administrar carro de compras** > **Agregar al carro de compras por SKU**.

<!-- MC-37351-->

* El contenido del carro de compras ya no se pierde cuando un comprador cambia de un almacén a otro en un dominio diferente.

<!-- MC-38000-->

* Los compradores ahora pueden completar correctamente un pedido utilizando Extraer con varias direcciones cuando utilizan varios métodos de envío. Anteriormente, la aplicación mostraba este error: `There has been an error processing your request`. [GitHub-30197](https://github.com/magento/magento2/issues/30197)

<!-- MC-38048-->

* La aplicación ahora muestra el país predeterminado correcto en la página de envío del flujo de trabajo de cierre de compra cuando el comprador cambia la vista de tienda del carro de compras.

<!-- MC-38309-->

* La aplicación ahora excluye la sesión actual al limpiar sesiones de clientes después de restablecer la contraseña después del cierre de sesión cuando un comprador invitado ha iniciado sesión. Anteriormente, la aplicación vaciaba el carro de compras cuando el comprador restablecía su contraseña.

<!-- MC-36884-->

* La aplicación ahora muestra el país predeterminado correcto para una vista de tienda cuando un comprador cambia la vista de tienda en el carro de compras. Anteriormente, cuando la vista de la tienda se cambiaba en el carro, el país predeterminado era incorrecto.

<!-- MC-38723-->

* La secuencia en la que se configuran los permisos de catálogo ya no impide que los administradores con los permisos correctos agreguen productos al carro de compras. Anteriormente, la aplicación no verificaba la variable `addToCart` configuración para el grupo de clientes actual. Como resultado, cuando un administrador intentaba añadir un producto al carro de compras, la aplicación generaba un error.

<!-- MC-38746-->

* Llamadas redundantes al `/rest/V1/guest-carts/cart_id/totals-information` se ha eliminado el punto final del carro de compras, lo que ha mejorado el rendimiento del carro de compras. Anteriormente, cuando un comprador añadía un producto al carro de compras y luego lo visualizaba, la aplicación llamaba a la variable `collectAddressTotals` varias veces.

<!-- MC-38833-->

* La aplicación ya no muestra la variable **Región** para un país en el flujo de trabajo de cierre de compra cuando la variable **Permitir la selección de estado si es opcional para el país** está desactivado. [GitHub-30747](https://github.com/magento/magento2/issues/30747)

<!-- MC-38813-->

* La aplicación ya no repite una dirección de envío en el flujo de trabajo de cierre de compra de tienda cuando se reordena un pedido desde el administrador.

<!-- MC-38814-->

* Se corrigieron problemas con el diseño de `AdminMediaGalleryInsertLargeImageFileSizeTest`.

<!-- MC-37321-->

* Todos los registros nuevos de `quote` para los invitados, ahora se asigna un valor de 1 en la variable `customer_is_guest field`. Anteriormente, para cada nuevo invitado que agregaba un producto al carro de compras, se asignaba al registro un 0 en la variable`quote.customer_is_guest` campo .

<!-- ENGCOM-8091 -->

* La variable **Submit** en la sección Revisión y pagos del flujo de trabajo de cierre de compra se ha movido al interior `<form id="purchaseorder-form"...></form>`, lo que hace posible el envío implícito de formularios sin alterar ningún JavaScript. [GitHub-27925](https://github.com/magento/magento2/issues/27925)

<!-- ENGCOM-8428 -->

* La aplicación ya no muestra la variable **Región** en el flujo de trabajo de cierre de compra cuando **Permitir la selección de estado si es opcional para el país** está desactivado. [GitHub-30747](https://github.com/magento/magento2/issues/30747)

<!-- ENGCOM-8442 -->

* La aplicación ahora actualiza correctamente el subtotal de un artículo del carro de compras cuando un comprador hace clic en **Actualizar carro de compras** al extraer con varias direcciones. [GitHub-30408](https://github.com/magento/magento2/issues/30408)

<!-- ENGCOM-8283 -->

* La aplicación ya no genera una excepción cuando `config.xml` existen nodos para métodos de pago que no están instalados actualmente. Anteriormente, la aplicación generaba una excepción durante el cierre de compra. [GitHub-29555](https://github.com/magento/magento2/issues/29555)

<!-- ENGCOM-8215 -->

* La aplicación ahora procesa los nombres de producto que contienen caracteres especiales correctamente en el minicarro. [GitHub-29075](https://github.com/magento/magento2/issues/29075)

<!-- ENGCOM-8308 -->

* La aplicación ahora establece el paquete de descuento correcto para la tasa de tabla. Anteriormente, la aplicación no aplicaba una regla de carro de compras que estableciera un descuento en el carro de compras cuando calculaba la tasa de la tabla. [GitHub-30169](https://github.com/magento/magento2/issues/30169)

### Regla de precios del carro de compras

* Las reglas de precios del carro de compras ahora se aplican según lo esperado cuando los subtotales del pedido se calculan sin incorporar impuestos. El nuevo `Subtotal (Incl. Tax)` se ha añadido como condición de regla de precio del carro de compras.

<!-- MC-37884-->

* Ahora, la aplicación de una regla de precio con un cupón mediante GraphQL funciona según lo esperado cuando la variable **Descuento de cantidad fija para todo el carro** se utiliza.

### Catálogo

<!-- MC-34100-->

* La aplicación ahora muestra todos los productos reactivados en la tienda como se espera. Anteriormente, cuando un producto se deshabilitaba y luego se volvía a habilitar, la aplicación no mostraba el producto hasta que se borraba la caché de la página de Varnish o se reindexaba porque la caché de la página no se invalidaba después de volver a habilitar un producto.

<!-- MC-37745-->

* La reindexación parcial de catálogos grandes ahora funciona según lo esperado. Anteriormente, los productos desaparecían aleatoriamente de la página de categoría de tienda durante la reindexación con la variable `catalogsearch_fulltext` indizador parcial.

<!-- MC-35123-->

* Los compradores ahora pueden volver a ordenar un pedido facturado de un producto con opciones personalizables según lo esperado. Anteriormente, la aplicación generaba este error cuando un comprador intentaba realizar un nuevo pedido: `{"0":"The product's required option(s) weren't entered. Make sure the options are entered and try again`.

<!-- MC-35212-->

* Ahora puede establecer correctamente la variable **Diseño** configurar en la página Diseño de categoría para **Sin actualizaciones de diseño**. Anteriormente, la aplicación volvía a **Categoría - Ancho completo** al asignar la variable **Sin actualizaciones de diseño** valor.

<!-- MC-35490-->

* Se han resuelto los problemas con el criterio de clasificación del producto en la tienda. Anteriormente, cuando la aplicación indexaba los precios de los productos, ocasionalmente establecía el valor de `min_price` y `max_price` a 0 en la variable `catalog_product_index_price` , que afectaba al orden de precios en la tienda.

<!-- MC-35608-->

* La aplicación ahora actualiza correctamente los atributos etiquetados `Product Type`. Anteriormente, porque la variable `product_type` se reservó en el código, la aplicación mostraba este mensaje cuando intentaba actualizar un `Product Type` atributo: `An attribute with the same code (product_type) already exists.`

<!-- MC-36214-->

* La aplicación ya no cambia la posición de un vídeo cargado en la sección Imágenes y vídeos de la página de detalles del producto al guardar el producto. Anteriormente, a la nueva posición de la imagen se le asignaba un valor de índice (posición en la lista) y si las posiciones de la imagen existente no estaban alineadas con los valores de sus índices, la nueva imagen se colocaba incorrectamente en la lista.

<!-- MC-36548-->

* La variable **Agregar al carro** ahora funciona según lo esperado cada vez que se llama a la función **Agregar al carro** está disponible para hacer clic. Anteriormente, si hacía clic en este botón varias veces mientras esperaba que se cargara una página de producto, la aplicación generaba este error: `Invalid Form Key. Please refresh the page`.

<!-- MC-37006 36835-->

* La aplicación ya no descarga la caché de categorías cuando un comerciante agrega o elimina productos deshabilitados de una categoría o de otra. Anteriormente, la aplicación vaciaba la caché para categorías relacionadas a pesar del estado del producto. Las categorías tampoco estaban asignadas cuando se guardaba una categoría, lo que provocaba que se vaciara la caché de categorías.

<!-- MC-37347-->

* Filtrado de productos del catálogo dentro de la variable **Todas las vistas de tiendas** ahora el ámbito funciona correctamente. Anteriormente, los productos con un estado de: `Enabled` o `Disabled` se mostraban en la cuadrícula al filtrar solo productos habilitados o deshabilitados.

<!-- MC-38038-->

* La reindexación parcial ya no provoca la pérdida de productos y categorías vacías.

<!-- MC-38315-->

* El reorden ahora funciona según lo esperado cuando **Usar calendario de JavaScript** está habilitado (**Almacenes** > **Configuración** > **Catálogo** > **Opciones personalizadas de fecha y hora**). Anteriormente, cuando esta configuración estaba habilitada, la aplicación mostraba este error cuando intentaba volver a ordenar el pedido previamente desde el administrador: `Please specify date required option(s)`.

<!-- MC-38719-->

* La aplicación ahora muestra la moneda correcta en las implementaciones de varios sitios durante la creación del precio del nivel.

<!-- MC-38914-->

* Los atributos personalizados de imagen del producto ahora se escapan correctamente. La variable `data-src` tiene el mismo valor que `src` como se espera. Anteriormente, se omitían símbolos especiales de URL.

<!-- MC-37665-->

* Al actualizar una categoría a través de la API de REST ya no se desactiva la variable **Usar valor predeterminado** en los atributos Activar categoría, Incluir en menú y Clave de URL.

<!-- MC-36832-->

* Al habilitar los permisos de categoría desde Administración ya no se produce un error al almacenar en caché las páginas de categoría en la caché de página completa durante las visitas repetidas a la página de categoría. Anteriormente, las visitas posteriores a la página no se servían desde la caché como se esperaba, y el rendimiento se degradaba.

<!-- MC-35363-->

* Al guardar una categoría, ahora solo se vacía la caché de bloque relacionada con esta categoría. Anteriormente, la aplicación vaciaba la caché para todos los bloques de categoría.

<!-- MC-30626-->

* El precio de una opción personalizada con un precio porcentual ahora se convierte según lo esperado en la moneda base del almacén activo en implementaciones de varias tiendas. Anteriormente, el precio de una opción personalizada con un precio porcentual se convertía incorrectamente. [GitHub-26432](https://github.com/magento/magento2/issues/26432)

<!-- MC-38890-->

* La aplicación vuelve a crear imágenes correctamente y estas imágenes son visibles en el administrador tal como se espera cada vez que un comerciante envía datos de la galería de medios mediante el POST `rest/all/V1/products`. Anteriormente, la aplicación recreaba las imágenes, pero las eliminaba cuando un comerciante enviaba datos de galería de medios a través del POST `rest/all/V1/products` si las imágenes se eliminaron en `pub/media` pero todavía había registros en los medios que aún contenían registros para estas imágenes. Como resultado, el comerciante solo vio marcadores de posición en el administrador porque las imágenes se crearon y eliminaron durante el proceso de actualización.

<!-- MC-36903-->

* Los registros ahora se eliminan del modo esperado cuando se desasigna un elemento de un sitio web. Anteriormente, las imágenes se duplicaban cuando el POST `rest/all/V1/products` se ha ejecutado.

<!-- MC-38413-->

* La variable `/V1/categories/{categoryId}/products` llamada ahora devuelve una lista de todos los productos que pertenecen a la categoría principal como se esperaba. Anteriormente, si un producto pertenecía a más de una subcategoría de la categoría principal, la aplicación generaba este tipo de error: `Internal Error. Details are available in the application log file. Report ID: webapi-5f8579e37db54`.  [GitHub-30461](https://github.com/magento/magento2/issues/30461)

<!-- MC-32996-->

* La variable `/V1/products/attributes/:attributeCode/options` El extremo REST ahora admite la actualización de una opción de atributo existente.

<!-- MC-30626 ENGCOM-8475-->

* El precio de una opción personalizada con un precio porcentual ahora se convierte según lo esperado en la moneda base del almacén activo en implementaciones de varias tiendas. Anteriormente, el precio de una opción personalizada con un precio porcentual se convertía incorrectamente. [GitHub-26432](https://github.com/magento/magento2/issues/26432)

<!-- ENGCOM-8395 -->

* Los comerciantes ahora pueden guardar correctamente un nuevo atributo durante la creación del producto. Anteriormente, la aplicación no guardaba el atributo y redirigía al comerciante a la página de inicio de la vista de tienda cuando intentaba guardar el atributo. [GitHub-30362](https://github.com/magento/magento2/issues/30362)

<!-- ENGCOM-7997 -->

* Las cuadrículas de productos en la variable **Ventas** > **Pedidos** y **Catálogo** > **Productos** las páginas ahora enumeran todas las tiendas relevantes, no solo la tienda creada más recientemente. [GitHub-29267](https://github.com/magento/magento2/issues/29267)

<!-- ENGCOM-6698 -->

* El repositorio de productos ahora utiliza `store_id` cuando esté disponible, guarde los valores de atributo de un producto existente.  Anteriormente, la clase del repositorio de productos superaba el ID del almacén de productos y siempre asignaba el ID de almacén predeterminado. [GitHub-29933](https://github.com/magento/magento2/issues/29933)

### Regla del catálogo

<!-- MC-35065-->

* Las reglas de precios del catálogo ahora funcionan según lo esperado con opciones personalizadas en páginas de detalles del producto. Anteriormente, los precios de los productos en esa página no reflejaban las reglas de precios de catálogo aplicables. [GitHub-22856](https://github.com/magento/magento2/issues/22856)

<!-- MC-34265-->

* Las cachés de productos y catálogos ahora caducan según lo programado. Anteriormente, las cachés caducaban diariamente porque `сron` ejecute el `catalogrule_apply_all` una vez al día, que reindexaba todas las reglas de catálogo y los indexadores dependientes, y borraba la caché para todos los productos y categorías.

### Limpieza

#### Limpieza de tipografía y gramática

<!-- ENGCOM-7967 -->

* Se ha revisado la precisión del título de la página Error de pedido. Anteriormente, esta página tenía el título: **¡Recibimos su pedido!**.  [GitHub-29416](https://github.com/magento/magento2/issues/29416)

<!-- ENGCOM-8101 -->

* Se han eliminado los espacios innecesarios en `app/code/Magento/Contact/view/frontend/templates/form.phtml`. [GitHub-29779](https://github.com/magento/magento2/issues/29779)

<!-- ENGCOM-7716 -->

* Se ha corregido un error tipográfico en el mensaje de ayuda para la variable `bin/magento/setup:config:set` subcomando. [GitHub-28802](https://github.com/magento/magento2/issues/28802)

<!-- ENGCOM-8058 -->

* Se ha corregido la gramática en el PHPDoc para la variable `framework/Registry.php` archivo. [GitHub-29661](https://github.com/magento/magento2/issues/29661)

<!-- ENGCOM-8273 -->

* Se ha eliminado el espacio en blanco superfluo de `app/code/Magento/Catalog/Helper/Product/View.php`. [GitHub-30601](https://github.com/magento/magento2/issues/30601)

<!-- ENGCOM-8181 -->

* Se ha corregido un error tipográfico en un nombre de función en `app/code/Magento/Ui/view/base/web/js/form/element/ui-select.js`. [GitHub-29987](https://github.com/magento/magento2/issues/29987)

<!-- ENGCOM-8478 -->

* Se ha corregido la pluralización de &quot;elemento&quot; en el minicarro y el resumen del pedido de cierre de compra. [GitHub-29920](https://github.com/magento/magento2/issues/29920)

<!-- ENGCOM-8309 -->

* Se han eliminado los espacios en blanco en los elementos en línea de los filtros de navegación con capas de marcado. [GitHub-30448](https://github.com/magento/magento2/issues/30448)

<!-- ENGCOM-8056 -->

* `rl` se ha corregido a `url` en  `\Magento\Framework\Filter\Template\Tokenizer\Parameter`.  [GitHub-29185 ](https://github.com/magento/magento2/issues/29185)

#### Limpieza de código

<!-- MC-37922-->

* Un HTML superfluo `<br>` se ha eliminado del área de mensaje Comprobar datos del  **Sistema**  >  **Importar** página.

<!-- ENGCOM-8028 -->

* `ChangeQuoteControl` se ha refactorizado. [GitHub-29673](https://github.com/magento/magento2/issues/29673)

<!-- ENGCOM-8027 -->

* `AccessChangeQuoteControl` y se han refactorizado sus pruebas unitarias. [GitHub-29672](https://github.com/magento/magento2/issues/29672)

<!-- ENGCOM-8053 -->

* Se ha corregido el estilo de código de la declaración de tipo de retorno en `app/code/Magento/Captcha/CustomerData/Captcha.php`. [GitHub-29712](https://github.com/magento/magento2/issues/29712)

<!-- ENGCOM-8288 -->

* Se ha corregido la posición de la lista de botones en la página Nuevo atributo .

<!-- ENGCOM-8315 -->

* Se ha añadido la clase de bloque correcta para el front-end `viewModel` ejemplo de referencia para la variable `\Magento\Framework\View\Element\Template` Clase . [GitHub-30450](https://github.com/magento/magento2/issues/30450)

<!-- ENGCOM-8090 -->

* Se ha eliminado un conjunto de campos redundante en el formulario Regla de venta . [GitHub-29599](https://github.com/magento/magento2/issues/29599)

<!-- ENGCOM-8448 -->

* Se ha eliminado el código innecesario del `hierarchy/edit.phtml` plantilla.

<!-- ENGCOM-8446 -->

* Se ha corregido el comentario de PHPdoc en `app/code/Magento/CatalogImportExport/Model/Export/Product.php`. [GitHub-30833](https://github.com/magento/magento2/issues/30833)

<!-- ENGCOM-8277 -->

* Anotación de bloque de documentos para la variable `PublisherInterface` se ha corregido. [GitHub-30190](https://github.com/magento/magento2/issues/30190)

<!-- ENGCOM-8264 -->

* Argumentos corregidos en la variable `getStatusByState` método. [GitHub-30173](https://github.com/magento/magento2/issues/30173)

<!-- ENGCOM-8235 -->

* Se ha corregido la descripción del método en `app/code/Magento/Quote/Model/Cart/Totals/ItemConverter.php`. [GitHub-30125](https://github.com/magento/magento2/issues/30125)

<!-- ENGCOM-8242 -->

* Se han eliminado asignaciones de variables redundantes en la misma línea en varios archivos. [GitHub-30133](https://github.com/magento/magento2/issues/30133)

<!-- ENGCOM-8263 -->

* Modificado `@param string $attribute` a `@param AbstractAttribute|string[]|string $attribute` en `EntityAbstract.php`. [GitHub-30191](https://github.com/magento/magento2/issues/30191)

<!-- ENGCOM-8142 -->

* Etiquetas no válidas (por ejemplo, `@package` y `@subpackage`) se han eliminado de los bloques de documentos en toda la base de código. [GitHub-30061](https://github.com/magento/magento2/issues/30061)

<!-- ENGCOM-8117 -->

* Parámetros no utilizados en la construcción de la variable `AdvancedPricing` se han eliminado. [GitHub-29531](https://github.com/magento/magento2/issues/29531)

### Productos configurables

<!-- MC-35016-->

* Filtrar los productos configurables fuera de existencias por precio ahora muestra los resultados dentro del rango de precios correcto.

<!-- MC-38930-->

* Un producto virtual ya no cambia de tipo cuando su estado cambia de activado a desactivado (o viceversa). Anteriormente, la aplicación cambiaba el tipo de producto de virtual a simple cuando cambiaba su estado.

<!-- MC-38197-->

* La variable `getValue()` ya no se déclencheur un error fatal al actualizar los carros de compras.

<!-- MC-34444-->

* Los productos configurables que están disponibles en varios sitios web ya no muestran productos secundarios simples que no están asignados al sitio web específico. [GitHub-28291](https://github.com/magento/magento2/issues/28291)

<!-- ENGCOM-8202 -->

* Las páginas de productos de tienda ahora muestran los precios de nivel sin impuestos como se espera. [GitHub-12225](https://github.com/magento/magento2/issues/12225)

<!-- ENGCOM-8134 8174-->

* Los precios MSRP para productos configurables ahora se convierten correctamente a la moneda elegida. Anteriormente, la aplicación mostraba los precios en la moneda incorrecta y generaba este error:  `Call to a member function setAppliedTaxes() on null`. [GitHub-26526](https://github.com/magento/magento2/issues/26526), [GitHub-29603](https://github.com/magento/magento2/issues/29603)

<!-- ENGCOM-8234 -->

* Los comerciantes ahora pueden guardar una etiqueta de opción de atributo de muestra de texto específica del almacén con un valor de 0 (cero). Anteriormente, un valor de 0 se sustituía por el valor de opción Etiqueta de administración . [GitHub-30073](https://github.com/magento/magento2/issues/30073)

<!-- ENGCOM-8117 -->

* Parámetros no utilizados en la construcción de la variable `AdvancedPricing` se han eliminado. [GitHub-29531](https://github.com/magento/magento2/issues/29531)

### cron

<!-- MC-37712-->

* La lista de mensajes del sistema ahora refleja de forma precisa las actualizaciones de productos después de `cron` se ha ejecutado y la aplicación ha actualizado los productos según lo programado.

<!-- ENGCOM-8164 -->

* Un índice basado en `schedule_id` y `status` se ha añadido a la variable `cron_schedule` tabla. [GitHub-29601](https://github.com/magento/magento2/issues/29601)

### Atributos del cliente personalizados

<!-- MC-23545-->

* La aplicación ahora muestra los atributos de cliente del tipo `file` en la página Información de la cuenta después de la creación. Anteriormente, al intentar guardar un nuevo atributo de este tipo, la aplicación mostraba los siguientes errores: `The "newAttribute" attribute value is empty. Set the attribute and try again` y `Validation is failed`.

<!-- MC-23544-->

* La aplicación ahora muestra correctamente los valores de atributos del cliente personalizados multilínea. Anteriormente, no se mostraban todos los datos.

<!-- MC-36978-->

* La aplicación ahora alerta a los compradores cuando especifican una fecha de nacimiento no válida al crear una cuenta. Anteriormente, el validador ignoraba la configuración regional y los compradores se redirigían a la página Crear nueva cuenta de cliente con un error de fecha no válida.

<!-- MC-38846-->

* Los atributos de dirección personalizados ahora se incluyen según lo esperado en el paso Pago del flujo de trabajo de cierre de compra.

<!-- MC-38114-->

* Los atributos de selección múltiple de direcciones personalizadas ahora se muestran correctamente durante el cierre de compra de invitado y en la página de detalles de pedidos Administrador y Mi cuenta .

<!-- MC-37581-->

* Los atributos de dirección personalizados ahora se muestran correctamente en el área Mi cuenta y en la página Detalles del pedido de administrador .

<!-- MC-37101-->

* Ahora puede eliminar un cero inicial en un atributo de cliente personalizado cuando `Input Type` está configurado como `Text` y `Input Validation` está configurado como `Numeric Only`.

<!-- MC-36721-->

* La aplicación ahora exporta correctamente datos de clientes que incluyen un valor de atributo de sexo personalizado.

<!-- MC-34650-->

* La aplicación ahora guarda los valores de atributos del cliente personalizados para los usuarios B2B como se espera. Anteriormente, los atributos de cliente personalizados creados para agregar o editar usuarios de la empresa no estaban enlazados con el formulario Agregar nuevo usuario y, como resultado, los valores de atributo no se guardaban. Además, el atributo de fecha personalizado se derivó de la base de datos como una cadena y no se convirtió al formato de fecha adecuado para la visualización de tienda.

### Cliente

<!-- MC-35771-->

* El widget de calendario para el campo fecha de nacimiento de la página de cuenta de cliente de tienda ahora utiliza la configuración regional designada para la tienda.

<!-- MC-38498-->

* La aplicación ya no guarda entradas duplicadas de una dirección de cliente durante la finalización de un pedido de nuevo para un cliente existente del administrador.

<!-- MC-37393-->

* Al eliminar todas las direcciones de varios clientes del Administrador, ahora se eliminan todas las direcciones de la lista de direcciones de cliente y se eliminan las direcciones de envío y facturación predeterminadas. Anteriormente, la aplicación eliminaba la dirección de la lista de direcciones del cliente, pero no eliminaba las direcciones de facturación y envío predeterminadas.

<!-- MC-37377-->

* La pestaña Admin customer address ahora muestra correctamente el recuento de direcciones después de que un administrador haya realizado una eliminación masiva de direcciones. Anteriormente, la aplicación incluía direcciones eliminadas en su recuento.

<!-- MC-36718-->

* El formato DateTime para la variable **Fecha de nacimiento** se ha corregido. Anteriormente, faltaba el cero inicial que precedía a un día de un solo dígito.

<!-- MC-36024-->

* Validación del formato de fecha para la variable **Fecha de nacimiento** ahora funciona antes de que el comprador haga clic en el **Crear una cuenta** botón. Anteriormente, un comprador podía introducir un valor en un formato no válido y, cuando hacía clic en el **Crear una cuenta** , el comprador se redirigió a la página Crear nueva cuenta de cliente con un error de fecha no válida.

<!-- MC-33867-->

* La aplicación ya no genera un error grave cuando un administrador intenta guardar una nueva cuenta de cliente que contiene datos no válidos para un atributo.

<!-- MC-36258-->

* La aplicación ya no genera un error 400 cuando un cliente intenta acceder a su carro de compras en una implementación en la que Magento Shipping estaba instalado anteriormente y el tema predeterminado de Luma está implementado actualmente. Anteriormente, la aplicación no filtraba los nombres de sección creados por módulos instalados o habilitados previamente que no eran compatibles con el administrador antes de enviar solicitudes al servidor, lo que generaba errores.

<!-- MC-35812-->

* La aplicación ahora muestra un mensaje como se espera cuando un comprador crea una cuenta de invitado cuando el **Requerir confirmación de correo electrónico** está activada y `Magento\Customer\Controller\Account\CreatePost` se ha anulado. Anteriormente, la aplicación no permitía este tipo de personalización del proceso de registro de usuario y, en estas condiciones, el estado de confirmación de correo electrónico de un usuario se consideraba completo, el usuario nuevo se iniciaba sesión automáticamente y no se mostraba ningún mensaje de error.

<!-- ENGCOM-8039 -->

* La aplicación ahora asigna un comprador al grupo de clientes correcto cuando el comprador realiza un pedido con un grupo de clientes no predeterminado en una tienda donde **Habilitar la asignación automática para el grupo de clientes** está activada. [GitHub-26976](https://github.com/magento/magento2/issues/26976)

<!-- MC-39783-->

* La cuadrícula de clientes administradores ahora está disponible según lo esperado cuando el sitio web no predeterminado se elimina en una implementación multisitio cuando los índices están establecidos en **Actualizar por programación**. Anteriormente, la aplicación no mostraba la cuadrícula y generaba este error:  `[2020-12-09 11:31:54] report.CRITICAL: The website with id 2 that was requested wasn't found. Verify the website and try again. \{"exception":"[object] (Magento\\Framework\\Exception\\NoSuchEntityException(code: 0): The website with id 2 that was requested wasn't found. Verify the website and try again. at /var/www/html/magento24ee/vendor/magento/module-store/Model/WebsiteRepository.php:110)"}`

### dotdigital

* Se ha mejorado la administración de errores al recuperar listas de programas de dotdigital Engagement Cloud.

* El valor que se sincroniza en la columna de nombre de almacén durante la sincronización de invitados es ahora el nombre de vista de almacén como se espera. Anteriormente, el nombre del sitio web se incluía en esta columna.

* Se ha añadido una comprobación de matriz antes de realizar un bucle en las automatizaciones de estado de pedido después de guardar un pedido.

* Se han resuelto problemas con las actualizaciones del Compositor que eran el resultado de la dependencia del módulo digital de `magento/module-authorization`.

### Descargable

<!-- ENGCOM-7679 -->

* La aplicación ya no enumera un producto descargable en la pestaña Mis productos de descarga después de que el producto descargable se haya reembolsado parcialmente. [GitHub-28388](https://github.com/magento/magento2/issues/28388)

### Bloque dinámico (anteriormente banner)

<!-- MC-23938-->

* La aplicación ya no muestra un bloque dinámico en la tienda después de haber eliminado el segmento de cliente asociado al bloque.

<!-- MC-37322-->

* La aplicación ahora tiene correctamente en cuenta las reglas de precios del catálogo al determinar si se debe mostrar un bloque dinámico.

### EAV

<!-- MC-35934-->

* Atributos personalizados que utilizan `\Magento\Eav\Model\Entity\Attribute\Backend\ArrayBackend` ahora utilice valores predeterminados si no se proporciona ningún valor en la carga útil cuando se crea un producto mediante una llamada de API.

### Correo electrónico

<!-- ENGCOM-7961 -->

* `\Magento\Config\Model\Config\Source\Email\Template::toOptionArray` ya no genera un error cuando `setPath()` no se llama antes de `toOptionArray()`. [GitHub-29315](https://github.com/magento/magento2/issues/29315)

<!-- MC-36777-->

* La aplicación ahora convierte correctamente el texto sin formato en HTML al hacer clic en **Devolver Versión Html** al cargar una plantilla de correo electrónico.

<!-- MC-34803-->

* El correo electrónico enviado a los clientes que contienen facturas parciales ahora incluye subtotales de artículos precisos. Anteriormente, el subtotal de este correo electrónico era el total de la cantidad solicitada, no la cantidad total de la cantidad facturada.

<!-- MC-38337-->

* La aplicación ahora envía recordatorios de correo electrónico a todos los clientes relevantes con direcciones de correo electrónico válidas. Anteriormente, la aplicación dejaba de enviar correos electrónicos recordatorios a los clientes después de encontrar una dirección no válida.

<!-- ENGCOM-7517 -->

* El envío de correo electrónico de ventas en modo asíncrono ahora funciona según lo esperado después de eliminar un producto de un catálogo. Anteriormente, se bloqueaba el envío asincrónico de correo electrónico y la aplicación mostraba este error:  `main.ERROR: Cron Job sales_send_order_invoice_emails has an error: Call to a member function getData() on null. Statistics: {"sum":0,"count":1,"realmem":0,"emalloc":0,"realmem_start":73400320,"emalloc_start":37177640} [] []main.CRITICAL: Error when running a cron job {"exception":"[object] (RuntimeException(code: 0): Error when running a cron job at /var/www/html/vendor/magento/module-cron/Observer/ProcessCronQueueObserver.php:327, Error(code: 0): Call to a member function getData() on null at /var/www/html/vendor/magento/module-catalog/Helper/Image.php:502)"} []`. [GitHub-26878](https://github.com/magento/magento2/issues/26878)

<!-- ENGCOM-8381 -->

* La aplicación ya no copia un cliente en el correo electrónico de confirmación de pedido cuando `sales_email/order_comment/enabled` está desactivado y `sales_email/order_comment/copy_method` está configurado como `bcc`. [GitHub-29915](https://github.com/magento/magento2/issues/29915)

### Marcos

<!-- MC-24195-->

* Los grupos de filtros personalizados ahora se aplican correctamente al buscar clientes. Anteriormente, la variable `afterSearch` no realizó los filtros OR como se esperaba. [GitHub-24576](https://github.com/magento/magento2/issues/24576)

<!-- MC-36942-->

* Las imágenes de la página principal de una tienda ahora se representan correctamente. Anteriormente, el HTML de origen de la página estaba dañado porque las tres barras diagonales consecutivas del código base64 de la imagen se malinterpretaron como un comentario.

<!-- MC-37369-->

* DatePicker ahora funciona correctamente al filtrar los pedidos de la lista de pedidos administrativos de las tiendas que usan la configuración regional en árabe (`ar_SA - Saudi Arabia`).

<!-- MC-38344-->

* DatePicker ahora muestra la fecha correcta después de que un comerciante guarde una regla de precio del carro de compras en una implementación. [GitHub-30382](https://github.com/magento/magento2/issues/30382)

<!-- MC-31085-->

* La aplicación ahora representa correctamente la agrupación de miles árabes y los símbolos de separador decimal árabes. Anteriormente, se recortaban los símbolos árabes. [GitHub-26676](https://github.com/magento/magento2/issues/26676)

<!-- MC-30631-->

* La aplicación ahora elimina las sesiones de base de datos caducadas de la base de datos `session` como se espera.

### Correcciones generales

<!-- MC-38105-->

* Ahora puede configurar un controlador de sesión nativo que difiera del controlador definido en `php.ini`. Anteriormente, `SessionManager` no estableció la memoria caché como `save_handler`, pero en su lugar usaba el `session_handler`. la aplicación generó este error: `main.CRITICAL: Warning: SessionHandler::read(): open(127.0.0.1:11211/sess_0imeeaqmnvemdg4e3h57tat0ik, O_RDWR) failed: No such file or directory (2) in../vendor/magento/framework/Session/SaveHandler/Native.php on line 22 {"exception":"[object] (Exception(code: 0): Warning: SessionHandler::read(): open(127.0.0.1:11211/sess_0imeeaqmnvemdg4e3h57tat0ik, O_RDWR) failed: No such file or directory (2) in ../vendor/magento/framework/Session/SaveHandler/Native.php on line 22 at ../vendor/magento/framework/App/ErrorHandler.php:61)"}`. [GitHub-24717](https://github.com/magento/magento2/issues/24717)

<!-- ENGCOM-8052 -->

* Se han realizado las siguientes mejoras en el `LoginAsCustomer` módulos:

   * Se ha sustituido la variable `around` complemento con `after`

   * Se ha eliminado el código redundante

   * Reemplazado `(bool)->getValue()` con `isSetFlag`. [GitHub-29689](https://github.com/magento/magento2/issues/29689)

<!-- ENGCOM-8093 -->

* La recarga de todas las secciones de datos del cliente por comodín (*) ya no hace que las solicitudes se realicen `customer/section/load` para generar un error 400. [GitHub-28154](https://github.com/magento/magento2/issues/28154)

<!-- ENGCOM-7994 -->

* La aplicación ahora pasa las excepciones que se producen cuando se procesa un diseño en modo de producción a `var/report`. [GitHub-29606](https://github.com/magento/magento2/issues/29606)

<!-- MC-38587-->

* La aplicación ya no redirige a los clientes a la página de inicio al cambiar la vista de la tienda. La variable `\Magento\VersionsCmsUrlRewrite\Model\StoreSwitcher::switch()` ahora, el método redirige a los compradores a la página principal solo cuando `$urlPath` no se encuentra para la segunda vista de tienda.

<!-- ENGCOM-7527 -->

* La aplicación ahora genera una excepción cuando un cliente que no existe solicita un restablecimiento de contraseña. [GitHub-26288](https://github.com/magento/magento2/issues/26288)

<!-- MC-33687 ENGCOM-8497-->

* La aplicación ahora muestra un mensaje de error informativo cuando un administrador intenta guardar una cuenta de cliente que contiene un valor no válido para un atributo del cliente al cargar un archivo que este valor de atributo. Anteriormente, la aplicación generaba un error grave. [GitHub-30295](https://github.com/magento/magento2/issues/30295)

<!-- ENGCOM-8400 -->

* La aplicación ahora aplica la variable **Logotipo para vista de impresión del HTML** configuración para almacenar los PDF de facturas según lo esperado. [GitHub-24730](https://github.com/magento/magento2/issues/24730)

<!-- ENGCOM-8425 -->

* `static::` se ha reemplazado por `self::` en toda la base de código para acceder a constantes privadas. [GitHub-30781](https://github.com/magento/magento2/issues/30781)

<!-- ENGCOM-8395 -->

* La aplicación ahora abre la página Nuevo atributo como se espera cuando un comerciante hace clic en el botón **Crear nuevo atributo** dos veces durante la creación del producto. Anteriormente, la aplicación mostraba una página vacía y generaba un error. [GitHub-30361](https://github.com/magento/magento2/issues/30361)

<!-- ENGCOM-8426 -->

* La aplicación ya no muestra la variable `The coupon code has been accepted` después de eliminar un cupón. [GitHub-30255](https://github.com/magento/magento2/issues/30255)

<!-- ENGCOM-8396 -->

* Los administradores ahora pueden asignar utilidades a categorías específicas. [GitHub-30009](https://github.com/magento/magento2/issues/30009)

<!-- ENGCOM-8216 -->

* Selector de atributos `input[type=datetime]` se ha sustituido por un selector de tipo de entrada menos específico. [GitHub-30064](https://github.com/magento/magento2/issues/30064)

<!-- ENGCOM-8282 -->

* La aplicación ahora muestra los valores específicos de la tienda que están asociados a atributos de categoría personalizados según lo esperado. [GitHub-13440](https://github.com/magento/magento2/issues/13440)

<!-- ENGCOM-8287 -->

* La aplicación ahora muestra un mensaje preguntando si se debe cambiar el grupo de clientes al hacer clic en el botón **Validar número de IVA** en la página de creación de pedidos cuando la dirección de tienda y el destino de envío pertenecen a diferentes países de la UE. [GitHub-29652](https://github.com/magento/magento2/issues/29652)

<!-- ENGCOM-8031 -->

* La variable `\Magento\Catalog\Model\ImageUploader` se ha refactorizado para usar la nueva `moveFileFromTmp`  método. [GitHub-29598](https://github.com/magento/magento2/issues/29598)

<!-- ENGCOM-8178 -->

* La aplicación ahora muestra un mensaje de error más informativo cuando un comerciante intenta crear un atributo de producto con `product_type` y `type_id` para que sean más descriptivos. [GitHub-28479](https://github.com/magento/magento2/issues/28479)

<!-- ENGCOM-8135 -->

* Se ha corregido la lógica de validación de la variable **Duración del token del cliente (horas)**  y **Duración del token de administrador (horas)** campos en el Administrador **Almacenes**  >  **Configuraciones** >  **Servicios**  > **OAuth** página. [GitHub-29502](https://github.com/magento/magento2/issues/29502)

<!-- ENGCOM-8132 -->

* La aplicación ahora analiza correctamente el texto que contiene `}}` en el campo de contenido del widget. [GitHub-12087](https://github.com/magento/magento2/issues/12087)

<!-- ENGCOM-8098 -->

* Ahora puede eliminar un filtro de la página Categorías de productos . Anteriormente, al intentar eliminar el filtro, la aplicación no permitía eliminar el filtro y mostraba este error:  `Something went wrong`. [GitHub-8538](https://github.com/magento/magento2/issues/8538)

<!-- ENGCOM-8050 -->

* `Magento\Framework\MessageQueue\ConfigInterface` ahora se puede crear una instancia de cuando el módulo opcional `Magento_MessageQueue` está desactivado. Anteriormente, la aplicación generaba este error: `PHP Fatal error:  Uncaught Error: Cannot instantiate interface Magento\Framework\MessageQueue\ConfigInterface in /var/www/magento2/magento2/lib/internal/Magento/Framework/ObjectManager/Factory/AbstractFactory.php:121`. [GitHub-26080](https://github.com/magento/magento2/issues/26080)

<!-- ENGCOM-7312 -->

* Se ha mejorado la lógica que determina cuándo la aplicación puede recuperar el valor del correo electrónico del almacenamiento persistente. Anteriormente, la aplicación mostraba campos de contraseña rellenados en la página de cierre de compra cuando un usuario no registrado regresaba a la página de cierre de compra después de completar por primera vez el campo de correo electrónico. [GitHub-26903](https://github.com/magento/magento2/issues/26903)

<!-- ENGCOM-7777 -->

* Falta `aclResource` se ha agregado al encabezado Administración `AdminNotification` bloque de la barra de herramientas. Anteriormente, la entrada de la barra de herramientas Notificación de administración estaba visible incluso cuando el usuario administrador no tiene permisos de recursos de rol para verla. [GitHub-29067](https://github.com/magento/magento2/issues/29067)

<!-- ENGCOM-8022 -->

* La variable `framework/database/select` `where` ahora gestiona las funciones `type` correctamente. [GitHub-29590](https://github.com/magento/magento2/issues/29590)

<!-- ENGCOM-8260 -->

* Uso ineficiente de `array_merge` se han mejorado los bucles in a través de la base de código, lo que ha mejorado el rendimiento en varios lugares, incluido el proceso de implementación de contenido estático. [GitHub-30183](https://github.com/magento/magento2/issues/30183)

<!-- ENGCOM-8445 -->

* La duración predeterminada de la sesión de administración se ha movido del módulo de cifrado al módulo de seguridad. [GitHub-30859](https://github.com/magento/magento2/issues/30859)

<!-- ENGCOM-8425 -->

* La aplicación ahora comprueba las constantes privadas de una clase y muestra una advertencia si hay alguna `static::` a ellos. Anteriormente, la aplicación generaba este error: `Undefined class constant`.

<!-- ENGCOM-8219 -->

* Se agregaron reglas a `editorconfig` para admitir la sangría de archivos JSON y YAML, dos espacios. [GitHub-30066](https://github.com/magento/magento2/issues/30066), [GitHub-30063](https://github.com/magento/magento2/issues/30063)

<!-- ENGCOM-8079 -->

* La variable `FlushCacheByTags` se ha actualizado para que utilice complementos posteriores en lugar de complementos cercanos. [GitHub-29558](https://github.com/magento/magento2/issues/29558)

<!-- ENGCOM-8358 -->

* `MessageValidator` ya no falla en matrices hash que no incluyen un `0` elemento. [GitHub-30563](https://github.com/magento/magento2/issues/30563)

<!-- ENGCOM-8370 -->

* El código de la variable `checkout_index_index.xml` se ha mejorado con la eliminación de `sortOrder` from `messages`, `authentication`, `progressBar`, `estimation`y `sidebar checkout` componentes. [GitHub-30550](https://github.com/magento/magento2/issues/30550)

<!-- ENGCOM-8379 -->

* Contenido en `calc` ahora se escapa, lo que da como resultado una corrección `calc` en el archivo de salida CSS. Anteriormente, la aplicación devolvía un error `calc` valor. [GitHub-30542](https://github.com/magento/magento2/issues/30542)

<!-- ENGCOM-8030 -->

* El generador de reescritura de URL ahora establece el objeto de categoría `url_key`, `url_path`y  `store_id` en valores de almacenamiento predeterminados al guardar reescrituras de URL de categoría para el ámbito global. Anteriormente, se guardaba `url_key`, `url_path`y `store_id` con los valores del último ID de almacén procesado. [GitHub-29585](https://github.com/magento/magento2/issues/29585)

<!-- ENGCOM-8250 -->

* `\Magento\Widget\Controller\Adminhtml\Widget\Instance\Validate` ahora reconoce un valor de resultado de frase como un mensaje de error y lo envía al usuario durante la validación del widget. [GitHub-27397](https://github.com/magento/magento2/issues/27397)

<!-- ENGCOM-8311 -->

* La lista codificada de atributos de categoría en  `Magento\Catalog\Model\Category\DataProvider::getFieldsMap()` se ha sustituido por una lista de atributos que se generan a partir de la caché. [GitHub-13440](https://github.com/magento/magento2/issues/13440)

<!-- ENGCOM-7759 -->

* Hashing redundante de `req.http.host/client.ip` se ha eliminado y el hashing lo gestiona la VCL integrada de Varnish. [GitHub-29988](https://github.com/magento/magento2/issues/29988)

<!-- ENGCOM-8302 -->

* Se ha añadido una llamada de retorno de error a la variable `Magento_Ui` cargador de archivos. [GitHub-29557](https://github.com/magento/magento2/issues/29557)

<!-- ENGCOM-8405 -->

* Un `acl.xml` incoherencia que se produjo al `Magento_LoginAsCustomerAssistance` se habilitó pero `Magento_LoginAsCustomerAdminUi` o `Magento_LoginAsCustomerLog` se ha corregido el error que se ha corregido. Anteriormente, cuando el administrador con estas credenciales intentaba iniciar sesión en el administrador, la aplicación mostraba una página en blanco y generaba este error cuando:  `Exception #0 (LogicException): Could not create an acl object: Invalid Document Element 'resource': The attribute 'title' is required but missing. Line: 13`. [GitHub-30680](https://github.com/magento/magento2/issues/30680)

<!-- ENGCOM-8157 -->

* La aplicación ya no genera un `Undefined class constant` cuando se produce un error `Interceptor` se genera durante la creación del complemento. [GitHub-28981](https://github.com/magento/magento2/issues/28981), [GitHub-29879](https://github.com/magento/magento2/issues/29879)

<!-- ENGCOM-8108 -->

* La aplicación ahora gestiona correctamente los mensajes y el registro para las operaciones masivas asincrónicas. Anteriormente, aunque se actualizaban los productos, la variable `magento_operation` y `queue_message_status` las tablas no se actualizaban correctamente y los mensajes del sistema eran incorrectos. [GitHub-29718](https://github.com/magento/magento2/issues/29718)

<!-- ENGCOM-8388 -->

* Ahora se redirige a un comprador a la página Establecer una nueva contraseña como se espera cuando hace clic en **Establecer una nueva contraseña** en el correo electrónico Restablecer contraseña cuando **Requerir confirmación de correo electrónico** está habilitado para la tienda. Anteriormente, el comprador se redirigía de nuevo al **Olvidó su contraseña** en la página de inicio de sesión. [GitHub-27954](https://github.com/magento/magento2/issues/27954)

<!-- ENGCOM-8337 -->

* Se corrigió el error de conversión de matriz a cadena al guardar la configuración del sistema de filas con valores predeterminados. [GitHub-30314](https://github.com/magento/magento2/issues/30314)

<!-- ENGCOM-8440 -->

* Ahora puede establecer argumentos para colas de mensajes. [GitHub-30216](https://github.com/magento/magento2/issues/30216)

<!-- ENGCOM-8384 -->

* El recolector de archivos base ahora respeta `AppState->emulateAreaCode()`. [GitHub-39656](https://github.com/magento/magento2/issues/29656)

<!-- ENGCOM-8441 -->

* El nuevo `BlockByIdentifier` permite recuperar un bloque de diseño basado en el identificador de bloque de CMS. Como resultado, cuando se elimina un bloque CMS de la caché, la aplicación también borra la caché del bloque de diseño. [GitHub-28309](https://github.com/magento/magento2/issues/28309)

<!-- ENGCOM-8385 -->

* Se han corregido problemas con la conversión de argumentos numéricos en las colas. Anteriormente, al declarar una cola con valores numéricos `type` los argumentos de `queue_topology.xml`, el valor del argumento se convirtió en cadena. [GitHub-29615](https://github.com/magento/magento2/issues/29615)

## Tarjetas de regalo

<!-- MC-38989-->

* Los correos electrónicos que contienen un código de tarjeta de regalo ahora solo se envían después de que el pedido se haya guardado correctamente cuando el **Crear una cuenta de tarjeta de regalo cuando se solicite un artículo de pedido** está habilitado. Anteriormente, se reutilizaba un código de tarjeta de regalo y se enviaba a distintos clientes si se generaba una cuenta de tarjeta de regalo cuando se realizaban pedidos de artículos, pero se producía una excepción después de enviar la tarjeta de regalo virtual.

<!-- MC-36496-->

* La aplicación ya no duplica los pedidos de tarjetas de regalo. Anteriormente, cuando un comprador pedía una tarjeta de regalo, la aplicación entregaba dos códigos de regalo. Esto ocurrió porque `cron` trabajos llamados `\Magento\GiftCard\Observer\GenerateGiftCardAccountsInvoice::execute()`, y este método no comprobaba si los códigos de tarjeta regalo ya se habían generado durante la creación de la factura.

<!-- MC-35058-->

* Los comerciantes ahora pueden anular la asignación de productos de categorías como se espera. Anteriormente, la aplicación generaba un error similar al siguiente: `Could not save product "4" with position 0 to category 3`.

<!-- ENGCOM-8326 -->

* Se ha añadido compatibilidad con el enlace simbólico `root` en páginas de errores y modo de mantenimiento. Anteriormente, si la variable `root` o `magento/pub` se han vinculado simbólicamente a un directorio diferente, el procesador de errores (`Magento\Framework\Error\Processor`) no generó una dirección URL de archivo de vista correcta. [GitHub-30296](https://github.com/magento/magento2/issues/30296)

<!-- ENGCOM-8087 -->

* Se ha añadido la ausencia `order_data` array to `EmailSender` clases . Esto hace que estas clases estén alineadas con la recomendación de Magento de usar variables escalares en lugar de objetos dentro de las plantillas de correo electrónico. [GitHub-29604](https://github.com/magento/magento2/issues/29604)

### Administrador de etiquetas de Google

<!-- MC-34818-->

* Administrador de etiquetas de Google `productClick` ahora funciona según lo esperado. Anteriormente, `productClick` no se activó en los productos en las páginas de listas y Google Tag Manager no pudo capturar ese evento.

<!-- MC-38781-->

* Las opciones de producto configurables del Administrador de etiquetas de Google ahora se actualizan según lo esperado en la capa de datos después de editar las opciones de producto configurables en el carro de compras. Anteriormente, los datos de la variable `removeFromCart` se reescribió incorrectamente cuando se cambió la opción del producto y la cantidad se mantuvo igual.

### GraphQL

<!-- MC-37615-->

* La variable `urlResolver` ahora gestiona correctamente los parámetros de consulta.

<!-- ENGCOM-8422 -->

* La variable `urlResolver` query ya no devuelve NULL cuando se especifica un nodo y una página personalizados de CMS como entrada. [GitHub-30474](https://github.com/magento/magento2/issues/30474)

<!-- MC-38209 ENGCOM-8386-->

* La variable `category` query ya no devuelve categorías secundarias de una categoría principal que se ha deshabilitado. [GitHub-30468](https://github.com/magento/magento2/issues/30468)

<!-- MC-38407-->

* La variable `category` query ahora devuelve la ruta correcta de una imagen de categoría cuando las reescrituras de URL están deshabilitadas.

<!-- MC-36648 8321-->

* La variable `resetPassword` la mutación ahora devuelve un mensaje más informativo cuando se produce un error. [GitHub-30179](https://github.com/magento/magento2/issues/30179)

<!-- MC-38078 ENGCOM-8504-->

* Resultados almacenados en caché del `products` se invalidan como se espera cuando cambian las posiciones del producto. [GitHub-30467](https://github.com/magento/magento2/issues/30467)

<!-- MC-35355 ENGCOM-8404-->

* La variable `products` La consulta ahora devuelve los resultados esperados cuando la variable `category_id` se especifica con la variable `in` palabra clave. [GitHub-30349](https://github.com/magento/magento2/issues/30349)

<!-- ENGCOM-8373 -->

* La variable `categories` y `categoryList` las consultas ahora consideran la disponibilidad de la categoría en función de la configuración de permisos de la categoría y el ID de categoría principal. [GitHub-29880](https://github.com/magento/magento2/issues/29880), [GitHub-30624](https://github.com/magento/magento2/issues/30624)

<!-- MC-37603-->

* La variable `updateProductsInWishList` la mutación ahora valida correctamente los elementos de la lista de deseos. [GitHub-30467](https://github.com/magento/magento2/issues/30467)

<!-- ENGCOM-8430 PWA-1107-->

* En desuso, varios atributos de la variable `ProductInterface` y `CategoryInterface` para evitar su uso en la tienda. [GitHub-30625](https://github.com/magento/magento2/issues/30625)

* Los precios ahora se ocultan de los resultados de la consulta de productos cuando los permisos de categoría están establecidos para ocultarlos. [GitHub-29926](https://github.com/magento/magento2/issues/29926)

<!-- MC-36898 PWA-1299-->

* Ahora puede usar la variable `addProductsToWishList` mutación para agregar un producto de paquete con una cantidad definida por el usuario a una lista de deseos.

<!-- MC-36648 -->

* Las mutaciones que agregan productos a un carro ahora respetan los permisos de catálogo. [GitHub-30179](https://github.com/magento/magento2/issues/30179)

<!-- MC-36946 -->

* Se ha mejorado el tiempo de respuesta de GraphQL para operaciones de adición al carro de compras.

<!-- ENGCOM-8099 -->

* La variable `products` query ahora devuelve los valores de precio de nivel como se espera. [GitHub-29168](https://github.com/magento/magento2/issues/29168)

<!-- ENGCOM-7528 -->

* Se ha eliminado un redundante `getMappedNums` desde un bucle en `lib/internal/Magento/Framework/GraphQl/Query/EnumLookup.php`. [GitHub-30031](https://github.com/magento/magento2/issues/30031)

<!-- ENGCOM-8172 -->

* La variable `products` La consulta ya no devuelve un error cuando el producto consultado tiene un producto relacionado deshabilitado. [GitHub-28892](https://github.com/magento/magento2/issues/28892)

<!-- MC-37395 -->

* La variable `cart` query ahora devuelve los precios que se han convertido a la moneda correcta (la moneda de visualización predeterminada). Anteriormente, la consulta devolvía el valor de precio del artículo en la moneda base y el código de moneda se devolvía como moneda de visualización predeterminada.

<!-- MC-37388-->

* GraphQL ahora respeta los permisos de catálogo. La aplicación restringe los elementos que se devuelven para un `products` consulta basada en el grupo de clientes del comprador.

<!-- MC-39690-->

* Se ha añadido la variable `customizable_option` a varios tipos de datos que implementan la variable `CartItemInterface`.

<!-- MC-39744-->

* Se agregaron atributos para la variable `storeConfig` consulta para devolver información de tienda, grupo de tiendas y sitio web.

<!-- MC-37414-->

* Se ha restablecido el `SelectedCustomizableOption.type` atributo. Además, la variable `customizable_options` dentro de varias implementaciones de `CartItemInterface` ahora no son nulos.

<!-- MC-23860-->

* La funcionalidad de búsqueda de la variable `products` query ya no devuelve elementos en los que se han habilitado los permisos de categoría.

<!-- MC-37726-->

* La variable `products` query devuelve la moneda correcta para las vistas de tienda que tienen varias monedas.

<!-- MC-37727-->

* Etiquetas para `products` los filtros de consulta ahora devuelven valores traducidos, cuando se aplican a vistas de tienda no predeterminadas.

<!-- MC-37728-->

* Se corrigieron las cantidades de moneda de la tienda en las tarjetas de regalo del carro de compras.

<!-- MC-38443-->

* Se ha añadido la variable `ConfigurableProductOptionsSelection` tipo de datos, que contiene metadatos correspondientes a las opciones configurables seleccionables para un producto. Utilice este objeto en un `products` para minimizar el número de elementos de la galería de medios que se muestran a medida que el comprador selecciona las opciones de producto configurables.

### Productos agrupados

<!-- MC-35361-->

* La consulta de productos ahora devuelve todos los datos esperados para los productos agrupados. Anteriormente, `product_links` era una matriz vacía.

<!-- MC-37718-->

* Un producto agrupado aparece ahora como no disponible en la página de edición del producto cuando todos los productos simples secundarios no están en existencias.

<!-- MC-37249-->

* El estado de un producto agrupado ahora se actualiza correctamente en la página de edición del producto cuando el estado de sus productos simples secundarios cambia a sin existencias. Anteriormente, el artículo de inventario del artículo principal del producto agrupado no se actualizaba después de que sus elementos secundarios cambiaran el estado de existencias.

### Imágenes

<!-- MC-36942-->

* Las imágenes de la página principal de una tienda ahora se representan correctamente. Anteriormente, el HTML de origen de la página estaba dañado porque las tres barras diagonales consecutivas del código base64 de la imagen se malinterpretaron como un comentario.

<!-- ENGCOM-8116 -->

* La dependencia de `fileinfo` se ha eliminado del módulo CMS. Anteriormente, la aplicación generaba un error al intentar cargar una imagen mediante el cargador de imágenes, que se iniciaba al hacer clic en el botón **Insertar imagen** al añadir contenido. [GitHub-24332](https://github.com/magento/magento2/issues/24332), [GitHub-16531](https://github.com/magento/magento2/issues/16531), [GitHub-29852](https://github.com/magento/magento2/issues/29852)

<!-- ENGCOM-8020 -->

* Se agregó compatibilidad con la lectura `exif_image.png` o `exif-image.jpeg` metadatos. [GitHub-1449](https://github.com/magento/adobe-stock-integration/issues/1449)

<!-- MC-37042-->

* El widget Carrusel de eventos del catálogo ahora muestra las imágenes después de la carga según lo esperado. Anteriormente, la variable `catalog_event_status_checker` el trabajo de cron eliminó las imágenes cargadas.

<!-- ENGCOM-8296 -->

* Los colores de las imágenes CMYK ahora se representan correctamente. Cuando el adaptador de imagen ahora detecta que una imagen abierta tiene un espacio de color CMYK, el espacio de color se convierte a SRGB. Anteriormente, estas imágenes se representaban con colores invertidos. [GitHub-22375](https://github.com/magento/magento2/issues/22375)

<!-- ENGCOM-8251 -->

* Los valores booleanos ya no se establecen para `image_with_border.phtml`. Redundante `max-width` y `height` se han eliminado de `.product-image-photo`. (Estos valores ya se han establecido globalmente en la imagen mediante los estilos de restablecimiento). [GitHub-30186](https://github.com/magento/magento2/issues/30186)

### Importar/exportar

<!-- MC-35081-->

* Dirección del cliente `region_id` ya no se le asigna un `NULL` al importar direcciones de clientes mediante un archivo CSV (`entity type = "customer address"` y `import behavior = "add/update"`) desde el que se han eliminado ciertos valores de campo.

<!-- MC-35295-->

* Ahora puede ocultar imágenes de productos en la tienda durante la importación.

<!-- MC-35395-->

* Un proceso de importación de producto programado ahora actualiza los productos con campos de datos correctos cuando el archivo CSV también contiene entradas incorrectas. Anteriormente, no se actualizaba ninguna entrada si el archivo CSV incluía entradas incorrectas al **Error en: Continuar con el procesamiento** se habilitó.

<!-- MC-35836-->

* Cuando un producto importado tiene `qty` se establece en 0 pero `is_in_stock set` a 1 en el archivo CSV, el producto no aparece en la página de categorías y la página de detalles del producto lo identifica como no disponible. Anteriormente, los productos con estos valores eran visibles en la tienda después de la importación.

<!-- MC-38433-->

* La importación de CSV ya no ignora la variable `dropdown` y `textarea` para atributos adicionales. Anteriormente, estos valores de atributo no se actualizaban durante la importación.

<!-- MC-37933-->

* El archivo CSV de exportación de producto ahora aparece en la lista de administración de archivos CSV de exportación como se espera. Anteriormente, la aplicación generaba un error al ejecutar este comando: `bin/magento queue:consumers:start exportProcessor --single-thread --max-messages=10000`.

<!-- MC-37672-->

* La aplicación ya no genera un error al importar datos CSV que incluyan caracteres alfabéticos bengalíes (bengalíes).

<!-- MC-36410-->

* La aplicación ahora muestra un mensaje de error informativo cuando un administrador hace clic en **Comprobar datos** durante la importación de un archivo que se ha cambiado desde la exportación al trabajar en Chrome. Anteriormente, la aplicación mostraba un error de consola, pero no le indicaba al usuario cómo proceder.

<!-- ENGCOM-8252 -->

* La aplicación ya no duplica imágenes de producto al importar los mismos datos CSV de producto más de una vez. [GitHub-21885](https://github.com/magento/magento2/issues/21885)

<!-- ENGCOM-8262 -->

* El límite de 90 caracteres para los nombres de archivo de imagen en `vendor/magento/framework/File/Uploader.php` se ha eliminado.  Anteriormente, la longitud del directorio y del nombre del archivo no podía exceder los 255 caracteres. La aplicación importó productos con imágenes cuyo nombre de archivo superaba este límite, pero no importó el archivo de imagen. [GitHub-29377](https://github.com/magento/magento2/issues/29377)

<!-- ENGCOM-8153 -->

* Los códigos de cupón ahora se pueden exportar correctamente a CSV o XML. Anteriormente, la aplicación mostraba un error 404 al hacer clic en **Exportar CSV** o **Exportar XML** cuando intentó exportar cupones. [GitHub-29277](https://github.com/magento/magento2/issues/29277)

<!-- ENGCOM-8252 -->

* Las imágenes de producto duplicadas ahora se eliminan tras importar un archivo CSV que contiene imágenes. [GitHub-14398](https://github.com/magento/magento2/issues/14398), [GitHub-21885](https://github.com/magento/magento2/issues/21885)

## Índice

<!-- MC-38003-->

* Hemos mejorado el rendimiento del indizador parcial. La aplicación ahora borra los ID de caché que se han cambiado para cada iteración por lotes de 1000 ID. El contexto de caché ya no acumula ID. Anteriormente, el contexto de caché acumulaba los ID de caché para cada iteración de lote de 1000 ID y borraba el mismo conjunto de ID en cada iteración.

<!-- ENGCOM-7929 -->

* Se han corregido las incoherencias entre el sistema de reindexación parcial y el sistema de reindexación completo. Ambos sistemas de indexación ahora utilizan el mismo código, que funciona correctamente. Anteriormente, ambos sistemas de indexación utilizaban una lógica diferente con respecto a los indexadores compartidos, lo que potencialmente provocaba que los indexadores se invalidaran después de cada ejecución del sistema de reindexación parcial. [GitHub-29478](https://github.com/magento/magento2/issues/29478), [GitHub-29297](https://github.com/magento/magento2/issues/29297)

<!-- MC-38168-->

* Hemos resuelto problemas con el indizador manual que habían resultado en páginas de categoría vacías o en un recuento reducido de productos en páginas de categoría. Se produjeron problemas con páginas de categoría o recuento de productos incompletos al:

   * el `catalogsearch_fulltext` y `catalog_product_price` los indexadores parciales se ejecutaron en un catálogo grande hasta que estos indexadores completaron la ejecución.

   * el indizador parcial se ejecutó en `catalog_category_product` o `catalog_product_category` y, al mismo tiempo, se ejecutó un reíndice completo en uno de esos índices. Estos dos procesos de indexación podrían entrar en conflicto, lo que provocaba que faltaran productos en las páginas de categoría.

   * `bin/magento indexer:reindex inventory` se ejecutó en un catálogo grande. Los productos faltaban en las páginas de categorías hasta que el `catalogsearch_fulltext` ejecución completada del indizador parcial.

<!-- MC-39700-->

* Se ha añadido un indizador a la variable `Magento_Bulk` La tabla MySQL, que ha mejorado el rendimiento de las operaciones masivas.

<!-- MC-38806-->

* Los comentarios de las tablas de la base de datos ahora reflejan con precisión el estado de la tabla después de la reindexación (`bin/magento indexer:reindex`). Anteriormente, los comentarios de la tabla después de la reindexación contenían los mismos valores que los comentarios contenidos después de una nueva instalación.

<!-- ENGCOM-7542 -->

* La variable `SELECT entity_id IN` se ha mejorado en implementaciones que implementan MariaDB v.10.3.18, lo que ha mejorado el rendimiento de la indexación de categorías de catálogo. [GitHub-25199](https://github.com/magento/magento2/issues/25199)

<!-- ENGCOM-8237 -->

* Adobe Commerce ha mejorado el rendimiento de la caché al eliminar el vaciado de etiquetas varias veces por cada instancia de indexador. [GitHub-29890](https://github.com/magento/magento2/issues/29890)

### Infraestructura

<!-- MC-34353-->

* Ahora puede usar `app/etc/env.php` para cambiar el agente de mensajes de MYSQL a AMQP.

<!-- MC-38242-->

* Los problemas con el cálculo de los residuos para valores decimales de las cantidades de producto se han corregido en la biblioteca de JavaScript correspondiente. La aplicación calculaba anteriormente fracciones decimales de más de dos dígitos incorrectamente y, a continuación, mostraba un mensaje incorrecto.

<!-- MC-38993 ENGCOM-8473-->

* La variable `\Magento\Authorization\Model\Rules::update` ha quedado obsoleto. [GitHub-29128](https://github.com/magento/magento2/issues/29128)

<!-- ENGCOM-8000 -->

* La aplicación ya no genera un error fatal al convertir un objeto de fecha de UTC. Anteriormente, en determinadas condiciones, la variable `convertConfigTimeToUtc` el método lanzó una excepción. [GitHub-29525](https://github.com/magento/magento2/issues/29525)

<!-- ENGCOM-7987 -->

* `DataObject` se ha reemplazado por el modelo de producto en `\Magento\MediaGalleryCatalogUi\Ui\Component\Listing\Columns\Thumbnail::prepareDataSource`.[GitHub-1711](https://github.com/magento/adobe-stock-integration/issues/1711)

<!-- ENGCOM-7914 -->

* La variable `RequireJS` resolver ya no falla en la detección de recursos bloqueados. Anteriormente, la resolución no detectaba correctamente si todos los recursos de una página se cargaban o gestionaban correctamente, y la página se seguía cargando. [GitHub-28116](https://github.com/magento/magento2/issues/28116)

<!-- ENGCOM-8229 -->

* La validación del código del repositorio de atributos ahora se respeta `Magento\Eav\Model\Entity\Attribute::ATTRIBUTE_CODE_MAX_LENGTH` en lugar de un valor codificado. [GitHub-29017](https://github.com/magento/magento2/issues/29017)

<!-- MC-35699-->

* La minificación del HTML ya no elimina las barras triples (//) de las cadenas de HTML de los archivos PHTML. Anteriormente, las barras triples se interpretaban como comentarios durante la minificación y el resto de la línea se eliminaba completamente del archivo PHTML generado tras la implementación.

<!-- MC-38201-->

* Los comerciantes ahora pueden configurar suscripciones de indexador en el nivel de columna de tabla en lugar de en el nivel de tabla. Se ha añadido un nuevo argumento a `\Magento\Framework\Mview\View\Subscription` para permitir que se ignoren las columnas para una vista específica o una combinación de tablas. [GitHub-30243](https://github.com/magento/magento2/issues/30243)

<!-- MC-30171-->

* Al hacer clic en **Agregar al carro** antes de que la página del producto JavaScript se haya inicializado completamente, ya no se duplica `form_key` valores. Anteriormente, se podía agregar un producto al carro de compras con una caché `form_key` que activó una excepción. When **Agregar al carro** se hizo clic antes de que el JavaScript se inicializara completamente y, a continuación, se hizo clic en la variable `form_key` el valor enviado en los datos del formulario no coincide con la sesión de los usuarios y el producto no se agregó al carro de compras. [GitHub-13746](https://github.com/magento/magento2/issues/13746)

<!-- ENGCOM-8107 -->

* El cliente cURL actual ahora respeta los nombres de encabezado que no distinguen entre mayúsculas y minúsculas. Anteriormente, la variable `Set-Cookie` la comparación distingue entre mayúsculas y minúsculas, lo que podría causar problemas con algunos servidores HTTP. [GitHub-29524](https://github.com/magento/magento2/issues/29524)

<!-- ENGCOM-8360 -->

* Formato XSD URN actualizado en `api-functional` y archivos XML de caso de prueba. [GitHub-30552](https://github.com/magento/magento2/issues/30552)

<!-- ENGCOM-8295 -->

* Se ha añadido un prefijo de evento y un objeto de evento a la colección de valores de opción de producto del catálogo para mejorar la personalización de la carga de recopilación de `\Magento\Catalog\Model\ResourceModel\Product\Option\Value\Collection`. [GitHub-29621](https://github.com/magento/magento2/issues/29621)

<!-- ENGCOM-8261 -->

* Todas las ocurrencias de `array_merge` se han refactorizado para utilizar el formato recomendado en el estándar de codificación. [GitHub-30005](https://github.com/magento/magento2/issues/30005)

<!-- ENGCOM-7718 -->

* A `head.additional` bloque de tipo `\Magento\Framework\View\Element\Text\ListText` se ha añadido a la variable `adminhtml` `default` diseño (por `magento2/module-base`). [GitHub-29165](https://github.com/magento/magento2/issues/29165)

<!-- ENGCOM-8312 -->

* Se ha agregado el método de URL de escape que faltaba al widget del módulo de plantillas de diseño. [GitHub-30036](https://github.com/magento/magento2/issues/30036)

<!-- ENGCOM-8127 -->

* La variable `\Magento\Framework\Filesystem\Io\File::read()` ahora es compatible con `\Magento\Framework\Filesystem\Io\IoInterface::read()`. [GitHub-27866](https://github.com/magento/magento2/issues/27866)

### Klarna

* Se ha eliminado la dependencia del módulo PayPal. [GitHub-29421](https://github.com/magento/magento2/issues/29421)

### Registro

<!-- ENGCOM-8443 -->

* La variable `Magento_Logging` ahora registra correctamente los nuevos valores, así como los valores que los preceden. Anteriormente, los valores de la columna Valor antes del cambio mostraban valores de N/A independientemente de si este era el primer cambio o el siguiente o de si se devolvía el valor predeterminado. [GitHub-26943](https://github.com/magento/magento2/issues/26943)

### Galería de medios

<!-- ENGCOM-8014 -->

* El administrador **Almacenes**  >  **Configuración**  >  **Avanzadas**  >  **Sistema** se ha actualizado para mostrar el nombre de producto correcto (Galería multimedia). Se han incluido pequeños rediseños en la interfaz de usuario. [GitHub-1738](https://github.com/magento/adobe-stock-integration/issues/1738)

<!-- ENGCOM-8019 -->

* Los vínculos de la sección Utilizado en de las descripciones de imágenes de la Galería de medios ahora muestran una cuadrícula que la imagen seleccionada ha filtrado según lo esperado. Anteriormente, la cuadrícula mostrada no tenía los títulos correctos y las entradas de la lista no eran precisas. [GitHub-1694](https://github.com/magento/adobe-stock-integration/issues/1694)

<!-- ENGCOM-8019 -->

* Ahora puede editar varias imágenes correctamente en la Galería multimedia. Anteriormente, no se podían agregar etiquetas a una segunda imagen después de agregar etiquetas a una imagen. [GitHub-1755](https://github.com/magento/adobe-stock-integration/issues/1755)

<!-- ENGCOM-8015 -->

* El menú desplegable Etiquetas ahora está vacío como se espera después de eliminar etiquetas de una imagen en la Galería multimedia. [GitHub-1703](https://github.com/magento/adobe-stock-integration/issues/1703)

<!-- ENGCOM-8146 -->

* Ahora se admite el procesamiento por lotes de mensajes de cola de sincronización de la Galería de medios. [GitHub-1724](https://github.com/magento/adobe-stock-integration/issues/1724)

<!-- ENGCOM-8064 -->

* La aplicación ahora muestra una página 404 como se espera cuando intenta abrir la Galería multimedia cuando **Galería de medios mejorada** está desactivado.  [GitHub-1760](https://github.com/magento/adobe-stock-integration/issues/1760)

<!-- ENGCOM-8072 -->

* `MediaGalleryMetadata` ahora omite el lector de segmentos si se produce una excepción y, en su lugar, analiza y muestra los metadatos de imagen según lo esperado. Anteriormente, los metadatos de la imagen estaban vacíos debido a una excepción de la función `exif_read_data` lector de segmentos. [GitHub-1782](https://github.com/magento/adobe-stock-integration/issues/1782)

<!-- ENGCOM-8069 -->

* La longitud del nombre de la carpeta ya no impide que una imagen se cargue en la Galería de medios. Galería multimedia ahora establece la columna de ruta como tipo `text`. [GitHub-1778](https://github.com/magento/adobe-stock-integration/issues/1778)

<!-- ENGCOM-8217 -->

* El cargador de imágenes ahora muestra el tamaño de imagen correcto cuando se inserta una representación desde la Galería multimedia. [GitHub-1806](https://github.com/magento/adobe-stock-integration/issues/1806)

<!-- ENGCOM-8467 -->

* Se ha agregado la verificación de ruta al `Mediagallery` cargador. Anteriormente, la validación fallaba y la aplicación no importaba productos cuando **Habilitar galería de medios antigua** se ha desactivado. [GitHub-30649](https://github.com/magento/magento2/issues/30649)

<!-- ENGCOM-8057 -->

* `Magento_Cms::media_gallery` Se han agregado y reforzado subrecursos ACL para la nueva Galería de medios para admitir permisos configurados para las siguientes operaciones discretas:

   * Cargar recursos
   * Insertar recursos en el contenido
   * Eliminar recursos
   * Crear carpetas
   * Eliminar carpetas. [GitHub-1487](https://github.com/magento/adobe-stock-integration/issues/1487)

<!-- ENGCOM-8047 -->

* Las cadenas de texto y los nombres de carpeta de la Galería de medios largos ya no se recortan. Anteriormente, la aplicación mostraba texto recortado e imágenes y mostraba este mensaje:  `We couldn't find any records`. [GitHub-1763 ](https://github.com/magento/adobe-stock-integration/issues/1763), [GitHub-1758 ](https://github.com/magento/adobe-stock-integration/issues/1758)

<!-- ENGCOM-8042 -->

* La aplicación ya no muestra la variable **Agregar selección** cuando no se seleccionan imágenes mientras se edita contenido para una página nueva. [GitHub-1769](https://github.com/magento/adobe-stock-integration/issues/1769)

<!-- ENGCOM-8047 -->

* Los filtros ahora se aplican según lo esperado en la variable **Contenido**  >  **Galería de medios** Cuadrícula de categoría. [GitHub-1763 ](https://github.com/magento/adobe-stock-integration/issues/1763)

<!-- ENGCOM-8183 -->

* La configuración de opciones de puntos de interrupción múltiples de la galería ahora funciona según lo esperado. Anteriormente, la configuración de las opciones de punto de interrupción no funcionaba correctamente porque `mediaCheck` se activó la función exit media query al cargar la página. [GitHub-29933](https://github.com/magento/magento2/issues/29933)

### MFTF

<!-- ENGCOM-8359 -->

* Se han reemplazado las acciones repetitivas por grupos de acciones en `CheckStaticBlocksTest`. [GitHub-30561](https://github.com/magento/magento2/issues/30561)

<!-- ENGCOM-8267 -->

* `AdminUpdateCategoryAndMakeInactiveTest` y `VerifyChildCategoriesShouldNotIncludeInMenuTest` se han refactorizado para cumplir con las prácticas recomendadas de MFTF. [GitHub-30058](https://github.com/magento/magento2/issues/30058)

<!-- ENGCOM-8458 -->

* Eliminado duplicado `AdminOpenCMSBlocksGridActionGroup`. [GitHub-30896](https://github.com/magento/magento2/issues/30896)

<!-- ENGCOM-8156 -->

* Reemplazado `AdminOpentCmsBlockActionGroup` con AdminOpenCmsBlockActionGroup. [GitHub-29839](https://github.com/magento/magento2/issues/29839)

<!-- ENGCOM-8226 -->

* Obsoleto `GoToAttributeGridPageActionGroup`. [GitHub-30103](https://github.com/magento/magento2/issues/30103)

<!-- ENGCOM-8061 -->

* Se agregaron grupos de acciones a la variable `Analytics` módulo. [GitHub-29500](https://github.com/magento/magento2/issues/29500)

<!-- ENGCOM-7334 -->

* Actualizado `CheckCheckoutSuccessPageAsRegisterCustomerTest` y `CheckCheckoutSuccessPageAsGuestTest` para cancelar los pedidos creados después de ejecutar las pruebas. [GitHub-28324](https://github.com/magento/magento2/issues/28324)

<!-- ENGCOM-8214 -->

* Eliminado `AdminNavigateToPageGridActionGroup` debido a la redundancia. [GitHub-29838](https://github.com/magento/magento2/issues/29838)

<!-- ENGCOM-8280 -->

* Un problema con `StorefrontProductListWidgetWithSharedCatalogTest` que provocaba que se omitiera la prueba se ha resuelto. [GitHub-322](https://github.com/magento/partners-magento2b2b/issues/322)

<!-- ENGCOM-8122 -->

* Implementado `ActionGroup` para desplazarse a la página de cierre de compra. [GitHub-29843](https://github.com/magento/magento2/issues/29843)

<!-- ENGCOM-8124 -->

* Implementado `AdminOpenCreateNewCMSPageActionGroup` para navegar y crear una nueva página de CMS. [GitHub-29824](https://github.com/magento/magento2/issues/29824)

<!-- ENGCOM-8268 -->

* Se corrigieron problemas con la omisión en pruebas MFTF para la página CMS de la Galería multimedia. [GitHub-30164](https://github.com/magento/magento2/issues/30164)

<!-- B2B-831 -->

* Se han añadido títulos y descripciones significativos a las pruebas de MFTF para la variable `Company`, `CompanyCredit`, `CompanyPayment`, `CompanyShipping`y `ConfigurableSharedCatalog` módulos. [GitHub-30164](https://github.com/magento/magento2/issues/30164)

#### Nuevas pruebas

<!-- ENGCOM-7804 -->

* Se ha añadido una prueba para habilitar el correo electrónico para un amigo en el Administrador. [GitHub-29145](https://github.com/magento/magento2/issues/29145)

<!-- ENGCOM-8316 -->

* Se ha añadido una prueba para eliminar un bloque CMS de una cuadrícula por parte de un administrador. [GitHub-30372](https://github.com/magento/magento2/issues/30372)

<!-- ENGCOM-7933 -->

* Se ha agregado una prueba para aplicar una regla de carro de compras a un solo artículo de paquete. [GitHub-28921](https://github.com/magento/magento2/issues/28921)

<!-- ENGCOM-8075 -->

* Se agregaron pruebas para comprobar si **Se usa en** la información de una imagen de la Galería multimedia se muestra después de eliminar la entidad. [GitHub-1774](https://github.com/magento/adobe-stock-integration/issues/1774)

#### Nuevos grupos de acciones

* `AssertStorefrontCustomerLogoutSuccessPageActionGroup`. [GitHub-29841](https://github.com/magento/magento2/issues/29841) <!-- ENGCOM-8121 -->

* `AdminOpenConfigurationStoresPageActionGroup`. [GitHub-29848](https://github.com/magento/magento2/issues/29848) <!-- ENGCOM-8259 -->

* `ReloadPageActionGroup`. [GitHub-30683](https://github.com/magento/magento2/issues/30683) <!-- ENGCOM-8394 -->

* `StorefrontClickRefundTabCustomerOrderViewActionGroup`. [GitHub-30032](https://github.com/magento/magento2/issues/30032) <!-- ENGCOM-8203 -->

* `AdminOpenAdminThreeDSecurePageActionGroup`. [GitHub-29845](https://github.com/magento/magento2/issues/29845) <!-- ENGCOM-8115 -->

* `AdminCustomerClickFirstRowEditLinkActionGroup`.  [GitHub-29501](https://github.com/magento/magento2/issues/29501) <!-- ENGCOM-8043 -->

* `StorefrontClickAddToCartButtonActionGroup`. [GitHub-29823](https://github.com/magento/magento2/issues/29823) <!-- ENGCOM-8113 -->

* `AdminDeleteTaxRateActionGroup`. [GitHub-29940](https://github.com/magento/magento2/issues/29940) <!-- ENGCOM-8192 -->

* `AdminOpenWebConfigurationPageActionGroup`. [GitHub-29846](https://github.com/magento/magento2/issues/29846) <!-- ENGCOM-8126 -->

* `AdminOpenGeneralConfigurationPageActionGroup`. [GitHub-29847](https://github.com/magento/magento2/issues/29847) <!-- ENGCOM-8114 -->

* `AdminOrderClickSubmitOrderActionGroup`. [GitHub-29649](https://github.com/magento/magento2/issues/29649) <!-- ENGCOM-8023 -->

* `AdminOpenCatalogProductPageActionGroup`. [GitHub-29941](https://github.com/magento/magento2/issues/29941) <!-- ENGCOM-8209 -->

* `AdminClickInvoiceButtonIntoOrderActionGroup`. [GitHub-25399](https://github.com/magento/magento2/issues/25399) <!-- ENGCOM-8210 -->

* `AdminGridBulkActionGroup`. [GitHub-28324](https://github.com/magento/magento2/issues/28324)<!-- ENGCOM-7334 -->

* `AdminGridColumnShowActionGroup`. [GitHub-28324](https://github.com/magento/magento2/issues/28324)<!-- ENGCOM-7334 -->

* `AdminOpenIndexManagementPageActionGroup`. [GitHub-29825](https://github.com/magento/magento2/issues/29825) <!-- ENGCOM-8123 -->

* `AdminOpenCatalogSearchTermIndexPageActionGroup`. [GitHub-29844](https://github.com/magento/magento2/issues/29844) <!-- ENGCOM-8128 -->

* `AdminClickAddProductToggleAndSelectProductTypeActionGroup`. [GitHub-30917](https://github.com/magento/magento2/issues/30917) <!-- ENGCOM-8439 -->

* `StorefrontCheckoutClickSaveAddressButtonActionGroup`. [GitHub-30916](https://github.com/magento/magento2/issues/30916) <!-- ENGCOM-8454 -->

* `AdminOpenCurrencyRatesPageActionGroup`. [GitHub-30783](https://github.com/magento/magento2/issues/30783) <!-- ENGCOM-8432 -->

* `AdminClickGetShippingMethodsAndRatesActionGroup`. [GitHub-30782](https://github.com/magento/magento2/issues/30782) <!-- ENGCOM-8436 -->

* `AdminSelectFixedShippingMethodActionGroup`. [GitHub-30782](https://github.com/magento/magento2/issues/30782) <!-- ENGCOM-8436 -->

* `StorefrontClickProceedToCheckoutActionGroup`. [GitHub-30926](https://github.com/magento/magento2/issues/30926) <!-- ENGCOM-8438 -->

* `StorefrontOpenMyAccountPageActionGroup`. [GitHub-29842](https://github.com/magento/magento2/issues/29842) <!-- ENGCOM-8143 -->

### Newsletter

<!-- MC-38789-->

* Los usuarios administradores ahora pueden editar una cuenta de cliente como se espera cuando el cliente está suscrito a un boletín en cola. [GitHub-30645](https://github.com/magento/magento2/issues/30645)

<!-- ENGCOM-8034 -->

* La aplicación ahora vuelve a enviar la confirmación de suscripción al boletín si el comprador no confirma su suscripción al mismo. [GitHub-28422](https://github.com/magento/magento2/issues/28422)

<!-- ENGCOM-8429 -->

* Ahora puede editar una cuenta de cliente como se espera cuando el cliente está suscrito a un boletín en cola. [GitHub-30645](https://github.com/magento/magento2/issues/30645)

### Métodos de pago

<!-- MC-35161-->

* Los métodos de pago ahora se cargan en Admin para todos los sitios web como se espera en una implementación de varias tiendas.

<!-- MC-36954-->

* La aplicación ya no muestra la variable `Purchase Order number is a required field` mensaje sobre el campo de código de cupón antes de que el comprador introduzca información en implementaciones en las que Orden de compra se haya configurado como la única opción de pago disponible.

<!-- MC-35152-->

* La aplicación ahora completa los pagos de Payflow Pro correctamente cuando el nombre del comprador contiene letras acentuadas. Anteriormente, el pago no se completó y la aplicación registró este error: `report.CRITICAL: String to be escaped was not valid UTF-8 or could not be converted`.

<!-- ENGCOM-8173 -->

* Los compradores invitados ahora pueden realizar pedidos de PayPal cuando **Asignación automática al grupo de clientes** está activada. El pago se procesa en la puerta de enlace de PayPal, el pedido se crea en Magento y el comprador ve la página de agradecimiento del pedido. Anteriormente, el pedido se procesaba correctamente en la puerta de enlace de PayPal, pero no se creó en Adobe Commerce. En su lugar, el comprador fue redirigido a la página de revisión de pedidos, donde la aplicación mostraba este error: `Failed address validation: %1" error`. [GitHub-25399](https://github.com/magento/magento2/issues/25399)

#### PayPal

<!-- MC-35692-->

* Los comerciantes ahora pueden realizar correctamente un pedido desde el administrador después de cambiar de un método de pago que utiliza una tarjeta de crédito a un método de pago que no es de tarjeta de crédito. Anteriormente, cuando un comerciante hacía clic en la variable **Enviar pedido** , el proceso de carga se inició pero nunca se completó y el pedido no se colocó.

<!-- MC-37649-->

* La aplicación ya no crea pedidos duplicados cuando se realiza un pedido con PayPal Express. Anteriormente, cuando un comprador intentaba pagar un pedido con PayPal Express pero PayPal devolvía un error, la aplicación seguía creando el pedido. Esto resultaba en pedidos duplicados en el sitio del comerciante. [GitHub-13952](https://github.com/magento/magento2/issues/13952)

<!-- MC-38829-->

* Los informes de liquidación de PayPal ya están disponibles en **Informes** > **Ventas** > **Liquidación de PayPal** según lo esperado. Anteriormente, la aplicación no enumeraba estos informes en la cuadrícula del informe de liquidación de PayPal y mostraba este mensaje: `We couldn't find any records`.

<!-- MC-39442-->

* Al hacer clic en **PayPal** durante el cierre de compra, ya no se déclencheur un `web-api` llamada a . Anteriormente, se activaban dos solicitudes, lo que duplicaba la carga del producto.

### Rendimiento

<!-- MC-37705-->

* Problemas de rendimiento en `module-catalog-import-export/Model/Import/Product/Option.php` se han abordado. Se ha reducido el tiempo necesario para exportar o importar más de 100.000 registros. Consulte la [Importar/Exportar tarda más de lo esperado con un gran número de opciones de producto](https://support.magento.com/hc/en-us/articles/360050695772) Artículo de la Base de conocimiento.

<!-- MC-37799-->

* `Magento_Csp/Model/BlockCache` se ha rediseñado para reducir el consumo de memoria y la generación de cadenas en caché innecesariamente grandes. Anteriormente, las páginas que incluían scripts y estilos en la lista blanca dinámica solían experimentar problemas de rendimiento. [GitHub-29964](https://github.com/magento/magento2/issues/29964)

<!-- MC-37816 -->

* Hemos mejorado el rendimiento de las exportaciones programadas de catálogos que incluyen más de 100.000 productos que utilizan consumidores.

<!-- MC-38306 -->

* La aplicación ya no descarga la caché de categorías al agregar o guardar un producto deshabilitado en una categoría. Anteriormente, la aplicación vaciaba la caché para categorías relacionadas a pesar del estado del producto, lo que afectaba al rendimiento del servidor.

<!-- MC-38518 -->

* Se ha mejorado el tiempo de carga de la página para actualizar la cantidad de producto en el carro de compras. Anteriormente, la aplicación ejecutaba varias consultas independientes para cada producto en el carro de compras, lo que aumentaba el tiempo de carga de la página.

<!-- MC-39700 -->

* Se ha añadido un indizador a la variable `Magento_Bulk` La tabla MySQL, que ha mejorado el rendimiento de las operaciones masivas.

<!-- MC-38593 -->

* La aplicación ahora almacena en caché los ID secundarios de los productos configurables. Esto ha mejorado el rendimiento de carga de página al reducir el número de solicitudes de base de datos. [GitHub-30585 ](https://github.com/magento/magento2/issues/30585)

<!-- MC-37594 -->

* Se ha mejorado la carga del panel de administración. Anteriormente, la aplicación mostraba los nombres de las pestañas como una lista antes de que la página terminara de cargarse.

<!-- MC-37417 -->

* La administración de caché de Redis se ha mejorado mediante la adición de límites de caducidad para las cachés de diseño. Anteriormente, las cachés de Redis alcanzaban rápidamente la memoria máxima asignada en implementaciones grandes y la aplicación generaba errores en las operaciones de escritura.

<!-- ENGCOM-8016 -->

* El rendimiento del cierre de compra se ha mejorado mediante la eliminación de una consulta de base de datos redundante en `app/code/Magento/Catalog/Model/CategoryLink.php`. [GitHub-29453](https://github.com/magento/magento2/issues/29453)

<!-- ENGCOM-8290 -->

* `Magento\Framework\DB\Adapter\Pdo\Mysql->isTableExists` se ha refactorizado para mejorar el rendimiento. Llamadas redundantes a `SHOW TABLE STATUS` para comprobar la existencia de una tabla se han reducido. [GitHub-29662](https://github.com/magento/magento2/issues/29662)

<!-- ENGCOM-8258 -->

* `getPageLayoutsConfig` ahora se guarda en la caché, lo que ha mejorado el rendimiento del generador de configuración. [GitHub-29546](https://github.com/magento/magento2/issues/29546)

<!-- MC-35614-->

* Se ha mejorado el rendimiento de Adobe Commerce durante las operaciones de edición y almacenamiento de segmentos de clientes que contienen más de 3000 000 clientes.

### Persistente

<!-- MC-36647 -->

* Los compradores ya no pueden realizar un pedido una vez que la cookie de sesión ha caducado cuando el carro persistente está activado. En su lugar, la aplicación muestra la página de inicio de sesión para que el comprador pueda iniciar sesión. Anteriormente, la aplicación realizaba el pedido. La aplicación no validó correctamente al cliente persistente cuando `PHPSESSID` hayan caducado y `customerSession` se volvió a crear a partir de la información persistente.

<!-- MC-39127-->

* La aplicación ahora muestra el mensaje de bienvenida tal como se espera después de que un comprador inicie sesión en una tienda donde el carro de compras persistente esté habilitado. Anteriormente, la aplicación mostraba la variable **¿Tú no?** después de iniciar sesión.

<!-- MC-38269-->

* La aplicación ya no muestra la variable **¿Tú no?** texto cuando un cliente selecciona la variable **Recordarme** al iniciar sesión en una implementación en la que el carro de compras persistente esté habilitado.

<!-- MC-37109-->

* La aplicación ya no muestra el contenido del carro de compras de un cliente una vez que caduca la sesión del cliente. Anteriormente, la aplicación mostraba este error cuando un cliente invitado intentaba desproteger cuando el carro de compras persistente estaba habilitado: `No such entity with cartid = 0`.

### Precio

<!-- MC-34394-->

* Las actualizaciones de precios asincrónicas consecutivas ya no interfieren entre sí y se asigna el estado correcto a cada operación. Anteriormente, si fallaba una actualización de precios asincrónica, todas las actualizaciones de precios asincrónicas siguientes fallarían hasta que se reiniciara el consumidor de cola correspondiente. [GitHub-27865](https://github.com/magento/magento2/issues/27865)

### Informes

<!-- MC-36652 38925-->

* **Informes** > **Marketing** > **Productos en carros de compras** ahora solo muestra el registro en el ámbito permitido del usuario que está generando el informe. Anteriormente, todos los datos estaban disponibles para todos los ámbitos.

<!-- MC-38074-->

* La aplicación ahora utiliza la moneda especificada en el ámbito de función del comerciante que genera el informe al mostrar la moneda del producto en el informe Productos en el carro de compras .

<!-- MC-37934-->

* Las funciones de producto Vistas recientemente y Comparadas recientemente ahora muestran estadísticas para diferentes tiendas y sitios web en el Administrador, como se espera en una implementación de varias tiendas. Anteriormente, estas funciones no tenían en cuenta todas las tiendas o sitios web.

<!-- MC-37217-->

* Los precios en los informes de pedidos ahora utilizan el símbolo de moneda correcto.

<!-- ENGCOM-8314 -->

* La aplicación ahora verifica la existencia de un token cuando un usuario hace clic en el panel de administración **Ir al informe avanzado** botón.  Si existe el token, la aplicación muestra la página Informes avanzados . Si el token no está configurado, la aplicación muestra una página informativa en la Guía del usuario. [GitHub-25411](https://github.com/magento/magento2/issues/25411)

### Autorizaciones de devolución de mercancías (RMA)

<!-- MC-36057-->

* Las opciones seleccionadas ahora se aplican a elementos de línea divididos al dividir una RMA. Anteriormente, los valores de Motivo de devolución, Condición del elemento y Resolución no se guardaban.

<!-- MC-35360-->

* Ahora puede eliminar la información de seguimiento y envío de una RMA cuando el paquete JavaScript está habilitado.

<!-- MC-36757-->

* Los administradores con acceso restringido solo a productos en un ámbito de sitio web específico ahora pueden agregar un elemento a un retorno aunque ese elemento ya no esté en el ámbito de su sitio web.

### Reseñas

<!-- MC-37145-->

* El número de clasificaciones mostradas en **Almacenes** > **Atributo** > **Clasificación** ahora coincide con el recuento de clasificaciones de una implementación de varios sitios. [GitHub-30258](https://github.com/magento/magento2/issues/30258)

<!-- MC-37117-->

* La página Nueva revisión ahora se carga según lo esperado al hacer clic en el botón **Nueva revisión** botón en Administración **Marketing** > **Todas las revisiones**. Al hacer clic en un producto en esta página, se abre el nuevo formulario de revisión esperado para ese producto.

<!-- ENGCOM-8383 -->

* La aplicación ya no genera este error cuando intenta editar un pedido desde el administrador **Marketing**  >  **Todas las revisiones**: `Uncaught TypeError: Event.observe is not a function`. [GitHub-30388](https://github.com/magento/magento2/issues/30388)

### Recompensas

<!-- MC-38257-->

* Los puntos de devolución ahora se calculan como se espera para los pedidos sujetos a impuestos cuando se completa un pedido parcial.

<!-- MC-37244-->

* Los comerciantes ahora pueden emitir con éxito un reembolso parcial para un pedido que se compró con puntos de recompensa y posteriormente reembolsar el resto del pedido. Anteriormente, los comerciantes no podían reembolsar los puntos de recompensa del pedido restante.

<!-- MC-37113-->

* La aplicación ya no muestra este error cuando un comprador vuelve a aplicar puntos de recompensa después de eliminarlos: `You removed the reward points from this order`.

<!-- MC-37032-->

* Los puntos de devolución ahora se calculan correctamente cuando un cliente realiza un pedido utilizando una moneda no base en una tienda que admite varias monedas.

### Ventas

<!-- MC-36219-->

* La variable `order_created_at` de `sales_shipment_grid` ahora se actualiza según lo esperado después de cada actualización.

<!-- MC-36405-->

* Ahora puede volver a ordenar correctamente un producto con una fecha de opciones personalizadas desde una tienda para la que **Usar calendario de JavaScript** está activada. Anteriormente, cuando intentaba realizar un nuevo pedido, la aplicación no agregaba el elemento al carro de compras y mostraba este error: `Could not add the product with SKU "simp1" to the shopping cart: Please specify date required option(s).`

<!-- MC-36533-->

* La aplicación ya no cierra inmediatamente un pedido cuando un comprador cierra un pedido que consta de un producto virtual con un coste total de 0 $ en implementaciones en las que está activado el método de cierre de compra de cero subtotal.

<!-- MC-36755-->

* La aplicación ya no archiva un pedido antes de procesarlo. Anteriormente, la acción de selección múltiple en la cuadrícula Orden de administración afectaba a los pedidos no seleccionados.

<!-- MC-37371-->

* La cuadrícula de notas de abono ahora muestra el símbolo de moneda correcto cuando el Rial Saudita (SAR) está establecido como moneda base.

<!-- MC-37880-->

* La aplicación ahora muestra de forma consistente la información de dirección de envío como se espera en la página de pedido durante el cierre de compra.

<!-- MC-38666-->

* El valor de `total_qty` ahora coincide con el valor de `total_qty_ordered` en facturas de venta.

<!-- MC-38717-->

* El envío asincrónico de correos electrónicos de ventas ahora envía correos electrónicos únicamente para aquellos pedidos que se crearon después de la fecha de la última actualización. Anteriormente, la aplicación no filtraba correos electrónicos por fecha cuando se habilitaba el envío asincrónico.

<!-- MC-39135-->

* La aplicación ahora envía el correo electrónico de la factura como se espera cuando se realiza un pedido desde el administrador.

<!-- MC-38917-->

* La aplicación ahora borra los datos de pedidos existentes durante una sesión en la que un comerciante crea un nuevo pedido para un cliente desde el administrador.

<!-- MC-38915-->

* Ahora puede cambiar el grupo de clientes para clientes nuevos que se crean mediante una orden de administración al **Habilitar la asignación automática para el grupo de clientes** está activada. También puede asignar grupos de clientes en función de la validación del IVA. Anteriormente, al validar el número de IVA, el objeto de solicitud no comprobaba la solicitud asignada `group_id`. De forma predeterminada, utilizaba el `group_id`.

<!-- MC-37539-->

* La aplicación ya no cambia el estado de un pedido personalizado con `Suspected Fraud` estado a `Processing` después de que un comerciante cree un envío parcial utilizando la API de REST.

### Regla de ventas

<!-- MC-34793-->

* Los códigos de cupones que se han aplicado según el método de envío ya no se aplican cuando un comprador cambia el método de envío. Anteriormente, la aplicación no borraba los códigos de cupones cuando los compradores intercambiaban métodos de envío.

<!-- MC-34649-->

* Los compradores no pueden aplicar un código de cupón con más frecuencia que el **Usos por cliente** permisos de configuración. Anteriormente, si un comprador tenía varias ventanas de navegador abiertas y realizaba varios pedidos simultáneamente, cada pedido recibía el descuento, aunque la variable **Usos por cliente** tenía un valor de **1**.

### Buscar {#search-heading}

<!-- MC-35095-->

* El Elasticsearch ya no genera un error de modificador desconocido cuando un comprador busca en un sinónimo de búsqueda. Anteriormente, el carácter de escape carecía de un símbolo de barra oblicua en las expresiones regulares, lo que provocaba un error grave.

<!-- MC-37577-->

* La búsqueda avanzada ya no devuelve los elementos secundarios de productos configurables como resultados de búsqueda individuales cuando los productos secundarios se configuraron con la visibilidad establecida en **No visible individualmente**.

<!-- MC-37954-->

* El tipo de Elasticsearch de nombres de productos en los resultados de búsqueda ya no distingue entre mayúsculas y minúsculas.

<!-- ENGCOM-8329 -->

* La página de resultados de la búsqueda ahora se almacena en caché como se espera cuando la variable **establecer Número de resultados de búsqueda principales en caché en 0** está habilitado en Administración **Almacenes**  >  **Configuración**  >  **Catálogo**  >  **Catálogo**  > **Buscar en el catálogo**.

<!-- MC-36807-->

* El indexador de búsqueda de catálogo ahora se ejecuta sin mostrar un error debido al límite de campo de Elasticsearch. Anteriormente, la aplicación generaba este error: `Limit of total fields [xxx] in index [m24dev_product_1_v10] has been exceeded`.

<!-- MC-35491-->

* Se ha mejorado el rendimiento de la búsqueda en el catálogo. Desactivación **Habilitar sugerencias de búsqueda** (**Almacenes** > **Configuración** > **Catálogo** > **Buscar en el catálogo** ) funciona según lo esperado. Anteriormente, la aplicación consultaba el archivo MySQL `search_query` en lugar de Elasticsearch para las sugerencias de búsqueda de autocompletar. [GitHub-25534](https://github.com/magento/magento2/issues/25534)

<!-- MC-35256-->

* Elasticsearch ahora filtra los precios del producto igual que MySQL. El tipo de campo `price_*`  se cambió de `float` a `double` en el índice Elasticsearch para mejorar la precisión y corregir un error de coma flotante.

<!-- ENGCOM-8393 -->

* Se ha agregado un detector de eventos de keydown al administrador para activar el formulario de búsqueda global cuando se introduce una barra diagonal. [GitHub-29551](https://github.com/magento/magento2/issues/29551)

<!-- MC-24217-->

* El Elasticsearch ya no genera un error, pero en su lugar no muestra ningún producto como se espera cuando se produce un error `string` se usa para filtrar productos por atributo con un `integer` o `decimal` tipo backend . Anteriormente, la aplicación mostraba este error en `exception.log`: `number format exception`.

<!-- ENGCOM-8303 -->

* El Elasticsearch ya no genera una excepción cuando un término de búsqueda contiene un  `/`.  [GitHub-25886](https://github.com/magento/magento2/issues/25886), [GitHub-25110](https://github.com/magento/magento2/issues/25110)

* La búsqueda ahora está deshabilitada como se espera para un grupo de clientes seleccionado de la consulta de productos cuando la variable **No permitir la búsqueda en el catálogo por** La configuración de en los Permisos generales de categoría está activada. [GitHub-29927](https://github.com/magento/magento2/issues/29927)

<!-- ENGCOM-8466 -->

* Los resultados de la búsqueda ya no incluyen comillas múltiples de la misma palabra. [GitHub-30104](https://github.com/magento/magento2/issues/30104)

### Envío

<!-- MC-38247 -->

* El proceso de cierre de compra ya no falla cuando una interrupción de la red interrumpe la conexión al método de envío de DHL. En su lugar, la aplicación muestra otros métodos de envío disponibles. Anteriormente, el proceso de cierre de compra se demoraba cuando se interrumpió la conexión con el envío de DHL y la aplicación mostraba este error: `Sorry, no quotes are available for this order at this time`. [GitHub-29902](https://github.com/magento/magento2/issues/29902)

<!-- MC-35194-->

* Los campos que describen el método de envío de UPS en Administración **Almacenes** >  **Configuración** > **Ventas** > **Métodos de envío** ahora están habilitadas según lo esperado.

<!-- MC-35633-->

* Envíos creados mediante el POST `/rest/V1/shipment` el extremo ahora actualiza correctamente los pedidos. Anteriormente, la aplicación creaba un envío, pero el estado del envío seguía en estado de procesamiento.

<!-- MC-37120-->

* La aplicación ya no elimina los productos simples del carro de compras cuando se elimina otro producto del carro de compras antes de cerrar la compra con Enviar a varias direcciones. [GitHub-30259](https://github.com/magento/magento2/issues/30259)

<!-- MC-38031-->

* La página Revisión de Pedidos ahora muestra el importe de impuestos antes del importe de envío como se espera para los pedidos que se envían a varias direcciones.

<!-- ENGCOM-8257 -->

* El seguimiento del envío de UPS ahora indica el estado de `Delivered On` solo cuando se ha entregado un paquete. [GitHub-30032](https://github.com/magento/magento2/issues/30032)

<!-- MC-38825-->

* La aplicación ahora muestra el subtotal correcto del carro de compras para los pedidos que contienen un producto virtual cuando el comprador regresa al carro de compras y no se desprotege con varias direcciones.

<!-- MC-38682-->

* Los comerciantes ahora pueden crear una etiqueta de envío desde la página de envío para un pedido existente que utilice el envío de FedEx cuando el paquete JavaScript está habilitado. Anteriormente, la aplicación generaba un error cuando el comerciante hacía clic en la variable **Crear etiqueta de envío** botón.

<!-- MC-36953-->

* El vínculo de seguimiento del envío en el correo electrónico de confirmación del envío enviado a los clientes funciona ahora según lo esperado. Anteriormente, este vínculo devolvía un error 404.

<!-- ENGCOM-8025 -->

* La aplicación ahora muestra un mensaje de error informativo cuando un comprador cierra la compra con varias direcciones y luego elimina todos los productos que no sean un producto virtual. [GitHub-25595](https://github.com/magento/magento2/issues/25595)

<!-- ENGCOM-8253 -->

* Ahora puede crear una etiqueta de envío como se espera para un pedido parcial. Anteriormente, cuando intentaba crear una etiqueta de envío para un solo artículo de un pedido, la aplicación agregaba todos los productos al paquete y la validación fallaba. [GitHub-29552](https://github.com/magento/magento2/issues/29552)

<!-- ENGCOM-8154 -->

* La validación del método de envío ya no se omite al llamar a `/V1/guest-carts/:cartId/totals-information`. [GitHub-25147](https://github.com/magento/magento2/issues/25147)

### Mapa del sitio

<!-- MC-37306-->

* Mapas de sitios generados por `cron` ahora incluya direcciones URL de imagen correctas. Anteriormente, la ruta de la imagen en caché generada era incorrecta en las implementaciones de varias tiendas.

### Ensayo

<!-- MC-39046 -->

* La página Editar página principal ahora muestra todas las actualizaciones programadas según lo esperado cuando se buscan actualizaciones programadas de la página principal. Anteriormente, la aplicación solo mostraba una de varias actualizaciones programadas.

<!-- MC-34988 -->

* Enviando 0 con la variable `/rest/V1/products/special-price-information` el punto final de precio especial ahora guarda el precio y devuelve el programa como se esperaba.

<!-- MC-35362 -->

* Las importaciones programadas ahora se ejecutan como se espera cuando el archivo CSV de importación contiene una marca de orden de bytes (BOM).

<!-- MC-38026 -->

* La aplicación ya no elimina la clase de cuerpo del diseño cuando un comerciante programa una actualización de categoría.

<!-- MC-38234 -->

* Los cambios programados del producto ahora ya no se borran después de un `cron` ejecute.

<!-- MC-38759-->

* La aplicación ya no genera un error al intentar programar una actualización para una categoría. Anteriormente, la aplicación generaba este error al hacer clic en ella **Guardar** en la página Programar nueva actualización : `Something went wrong while saving the Magento\Catalog\Api\Data\CategoryInterface`.

<!-- MC-38455-->

* La variable `rest/V1/products/special-price` Ahora, la API se puede utilizar para programar precios especiales de productos para varias tiendas. Anteriormente, la aplicación generaba un error cuando un comerciante programaba una actualización de precios para varias tiendas para el mismo `from` y `to` tiempo en el que está disponible una reversión en la hora de inicio de la nueva programación.

### Tienda

<!-- ENGCOM-7543 -->

* El administrador y el conmutador de tienda principal ahora reflejan los cambios realizados en el criterio de ordenación de la tienda en el Administrador. [GitHub-13401](https://github.com/magento/magento2/issues/13401)

<!-- ENGCOM-8274 -->

* La aplicación ahora crea direcciones URL correctas para categorías y productos después de cambiar la clave URL de nivel superior de una vista de tienda. Anteriormente, cuando el árbol de categorías de una vista de tienda contenía modificaciones  `url_keys`, si una clave de categoría no ha cambiado pero la clave principal de la categoría sí, el código original utilizaría la vista de tienda predeterminada de la categoría al crear direcciones URL. [GitHub-28633](https://github.com/magento/magento2/issues/28633)

### Reglas de Target

<!-- MC-34998-->

* Se ha optimizado la carga de las páginas de detalles del producto. Hemos agregado índices para tablas de base de datos que optimizan las consultas de condiciones de reglas de objetivo para muchos casos.

<!-- MC-36288-->

* Las reglas de objetivo para productos relacionados ahora funcionan cuando la variable `is one of` condición que se usa para la función Productos para mostrar contiene varias condiciones. Anteriormente, cuando esta condición contenía varios valores, no se analizaba.

### Impuesto

<!-- MC-37666-->

* La validación del IVA en un pedido invitado ya no hace que la aplicación guarde la oferta con una clase de impuesto al cliente incorrecta. [GitHub-30018](https://github.com/magento/magento2/issues/30018)

<!-- MC-37761-->

* Los pedidos que se envían a varias direcciones ahora se pueden guardar durante el cierre de compra cuando se configura FPT. Anteriormente, después de completar un pedido de varias direcciones, la aplicación mostraba una página en blanco en lugar de la página de solicitud correcta.

<!-- ENGCOM-8158 -->

* Las páginas de detalles del producto de tienda ahora muestran los precios antiguos y nuevos con y sin impuestos según lo esperado. [GitHub-27500](https://github.com/magento/magento2/issues/27500), [GitHub-11998](https://github.com/magento/magento2/issues/11998)

### Prueba

<!-- MC-37364-->

* `bin/magento dev:tests:run` ahora inicia las siguientes pruebas según lo esperado: todos, unidad, integración, integración, todos, estáticos, estáticos, estáticos, integrales, heredados y predeterminados.

<!-- MC-38488-->

* `AdminMediaGalleryInsertLargeImageFileSizeTest` se ha refactorizado.

<!-- ENGCOM-8158 -->

* Las pruebas unitarias son ahora compatibles con PHPUnit 8. [GitHub-29779](https://github.com/magento/magento2/issues/29779)

<!-- ENGCOM-8009 -->

* `\Magento\TestFramework\TestCase\WebapiAbstract` ahora contiene una función que permite comparar grandes matrices anidadas de resultados esperados y reales en pruebas. Ahora se pueden ignorar las claves irrelevantes en el resultado. [GitHub-29498](https://github.com/magento/magento2/issues/29498)

<!-- ENGCOM-8024 -->

* `AdminMediaGalleryCatalogUiEditCategoryGridPageTest` ya no falla aleatoriamente. [GitHub-1764](https://github.com/magento/adobe-stock-integration/issues/1764)

<!-- ENGCOM-8041 -->

* `dev/tests/integration/testsuite/Magento/Customer/Controller/AccountTest` se ha mejorado. (`assert` ahora se basa en `XPath` en lugar de `assertStringContainsString`.) [GitHub-29700](https://github.com/magento/magento2/issues/29700)

<!-- ENGCOM-8017 -->

* Se ha agregado cobertura de prueba para la variable `AdminAnalytics` módulo. [GitHub-29500](https://github.com/magento/magento2/issues/29500)

<!-- ENGCOM-8266 -->

* Las pruebas funcionales de integración y API ahora son compatibles con PHPUnit 9.3. [GitHub-30146](https://github.com/magento/magento2/issues/30146)

<!-- MC-35798 8109-->

* Se han corregido problemas con GraphQL `testRequestCacheTagsForCategoryListOnMultipleIds` prueba. [GitHub-29372](https://github.com/magento/magento2/issues/29372)

<!-- ENGCOM-8327 -->

* Se ha automatizado la prueba de disponibilidad de moneda para el crédito de la empresa.

<!-- ENGCOM-7762 -->

* Los valores de encabezado que incluyen direcciones URL ahora se analizan correctamente en `ApiFunctional TestFramewor`k. [GitHub-26425](https://github.com/magento/magento2/issues/26425)

<!-- ENGCOM-8382 -->

* `—no-tablespaces` se ha añadido a todas las ocurrencias de `mysqldump`, lo que permite que las pruebas de integración se ejecuten sin la variable `PROCESS` privilegio (requerido desde MySQL 5.7.31 / 8.0.21 para ejecutarse `mysqldump` de forma predeterminada). [GitHub-30566](https://github.com/magento/magento2/issues/30566)

### Tema

<!-- ENGCOM-8419 -->

* Un nuevo `--no-parent` se ha agregado el indicador a la variable `bin/magento setup:static-content:deploy` que impide que se compilen los elementos principales de un tema. Este nuevo indicador permite mejorar significativamente el rendimiento del proceso de implementación de contenido estático al evitar una compilación innecesaria. Tenga en cuenta que este nuevo indicador no funciona al usar la variable `compact` estrategia. [GitHub-30184](https://github.com/magento/magento2/issues/30184)

<!-- MC-37630 -->

* La configuración de diseño ya no genera operaciones DDL. Anteriormente, cuando se actualizaba la configuración del diseño, la aplicación generaba instrucciones DDL que podían déclencheur de errores de MySQL.

<!-- ENGCOM-8112 -->

* Código redundante en la variable `Magento_ConfigurableProduct` en el tema Administrador se ha eliminado.  [GitHub-29857](https://github.com/magento/magento2/issues/29857)

<!-- ENGCOM-8144 -->

* Se han eliminado la navegación redundante con menos estilos y las propiedades no utilizadas en el tema en blanco. [GitHub-29914](https://github.com/magento/magento2/issues/29914)

<!-- ENGCOM-8285 -->

* Se ha agregado la funcionalidad de navegación contraíble al tema en blanco en la vista móvil. [GitHub-30237](https://github.com/magento/magento2/issues/30237)

<!-- ENGCOM-7803 -->

* Se ha optimizado la carga de fuentes web para temas.  [GitHub-29526](https://github.com/magento/magento2/issues/29526)

<!-- ENGCOM-8068 -->

* Los desarrolladores ahora pueden especificar el tipo de fuente al declarar una fuente personalizada en un tema. [GitHub-29719](https://github.com/magento/magento2/issues/29719)

### Traducción y configuraciones regionales

<!-- MC-36836 -->

* El Selector de fechas de la cuadrícula de Pedidos de administrador ahora funciona según lo esperado cuando la configuración regional de administración es árabe (`ar_SA - Saudi Arabia`).

<!-- MC-38476 -->

* La aplicación ya no muestra un mensaje de error cuando un comprador introduce una dirección argentina con un código postal válido al registrar o añadir una dirección nueva. Anteriormente, la aplicación mostraba este error: `Provided Zip/Postal Code seems to be invalid. Example: 1234. If you believe it is the right one you can ignore this notice.`

<!-- MC-38663-->

* La aplicación ya no genera un error cuando un comprador introduce un código postal de cinco dígitos para una dirección coreana.

<!-- ENGCOM-8244 -->

* Se agregó compatibilidad con las regiones de Uruguay definidas en [ISO 3166-2:UY](https://en.wikipedia.org/wiki/ISO_3166-2:UY). [GitHub-29729](https://github.com/magento/magento2/issues/29729)

<!-- ENGCOM-8220 -->

* `zip_codes.xml` se ha actualizado para aplicar ocho dígitos a los códigos postales brasileños. [GitHub-29984](https://github.com/magento/magento2/issues/29984)

<!-- ENGCOM-8304 -->

* Se ha mejorado la localización de las frases no localizadas restantes. [GitHub-11175](https://github.com/magento/magento2/issues/11175)

<!-- ENGCOM-8380 -->

* El marcador de posición de entrada de búsqueda de cuadrícula ahora se puede traducir. [GitHub-30510](https://github.com/magento/magento2/issues/30510)

<!-- ENGCOM-8018 -->

* La aplicación ahora descarga módulos JavaScript de traducciones en línea únicamente cuando están activados.  [GitHub-29553](https://github.com/magento/magento2/issues/29553)

### IU

<!-- MC-38509-->

* La variable **Crear una cuenta** en la página Crear nueva cuenta permanece activa cuando un comprador introduce datos no válidos. Anteriormente, este botón se deshabilitaba, lo que impedía que los compradores volvieran a intentar crear una cuenta después de cometer un error. Este fue un problema conocido en 2.4.1. [GitHub-30513](https://github.com/magento/magento2/issues/30513)

<!-- MC-38698-->

* Se ha mejorado la carga de la cuadrícula de envío en la página Editar orden de administración .

<!-- MC-37870-->

* La aplicación ahora muestra la variable  **Igual Que La Dirección De Facturación** como se espera en la página de pedido cuando los productos se han agregado al carro de compras por SKU.

<!-- ENGCOM-8007 -->

* La clase CSS que definió la anchura limitada ahora se aplica según lo esperado al **Hora de inicio** campos en Administración **Tienda**  >  **Configuración**  >  **Catálogo**  >  **Mapa del sitio XML**  >  **Configuración de generación**.  [GitHub-29496](https://github.com/magento/magento2/issues/29496)

<!-- ENGCOM-7992 -->

* Se corrigieron los problemas de visualización con la etiqueta de casilla de verificación Términos y condiciones .  [GitHub-24060](https://github.com/magento/magento2/issues/24060)

<!-- ENGCOM-7948 -->

* La aplicación ya no muestra el código CSS para un bloque de precio de nivel en la página del producto cuando los precios de nivel no están disponibles. [GitHub-29194](https://github.com/magento/magento2/issues/29194)

<!-- ENGCOM-8084 -->

* La posición de los botones en la página de detalles de la vista de imagen se ha reordenado para ajustarse a las directrices de la interfaz de usuario.  [GitHub-1783](https://github.com/magento/adobe-stock-integration/issues/1783)

<!-- ENGCOM-8342 -->

* El campo de texto Código de cupón ahora se muestra con la anchura adecuada en los navegadores Internet Explorer/EDGE.

<!-- ENGCOM-7630 -->

* La variable `@button__border-radius` ahora se define en la variable `lib/web/css/source/lib/variables/_buttons.less` biblioteca.  `border-radius` tiene un valor predeterminado de `3px`. Anteriormente, `border-radius` estaba codificado.  [GitHub-28674](https://github.com/magento/magento2/issues/28674)

<!-- ENGCOM-8067 -->

* El botón de enviar búsqueda (lupa) del campo de minibúsqueda ahora está desactivado hasta que se alcance la longitud mínima de la cadena de búsqueda. [GitHub-29704](https://github.com/magento/magento2/issues/29704)

<!-- MC-38807-->

* La variable **Vista previa de plantilla** ahora funciona como se espera en la página Editar cola .

<!-- MC-35624-->

* Se ha ajustado la posición del cursor desde el centro hasta el principio del **Mensaje** campo en **Mi cuenta** > **Registro de regalos** > **Registro de regalo compartido**.

<!-- MC-33497-->

* Se han resuelto los problemas de visualización con el diseño de columna en la página Añadir exportación programada .

<!-- MC-31892-->

* La aplicación ahora conserva el valor de un atributo cuando mueve el atributo de un grupo a otro.

<!-- MC-37635-->

* La aplicación ahora muestra un icono de calendario junto al **Fecha** campo de entrada como se espera en la tienda Crear una página de cuenta.

<!-- ENGCOM-8085 -->

* Se ha agregado una variable pesada de ponderación de fuente a `lib/web/css/source/lib/variables/_typography.less`. [GitHub-29778](https://github.com/magento/magento2/issues/29778)

<!-- ENGCOM-8211 -->

* La visibilidad del filtro ahora funciona con la visibilidad de la columna como se espera en las cuadrículas de administración.  [GitHub-30345](https://github.com/magento/magento2/issues/30345)

<!-- ENGCOM-7977 -->

* El banner que la aplicación muestra en la página Inicio de sesión de administrador como cliente ahora permanece en la parte superior de la página cuando el usuario se desplaza. [GitHub-29354](https://github.com/magento/magento2/issues/29354)

<!-- ENGCOM-8152 -->

* Las opciones de componentes seleccionados por la interfaz de usuario ya no están visibles cuando `this.disabled(true)` está configurado. [GitHub-29098](https://github.com/magento/magento2/issues/29098)

<!-- ENGCOM-7901 -->

* La variable `@font-family-name__base` ya no se utiliza al cargar la fuente Open Sans. [GitHub-29515](https://github.com/magento/magento2/issues/29515)

<!-- ENGCOM-8120 -->

* El atributo WAI-ARIA `aria-atomic="true"` se ha agregado a la etiqueta contenedora de error. [GitHub-29560](https://github.com/magento/magento2/issues/29560)

<!-- ENGCOM-8175 -->

* Las cuadrículas de componentes de la interfaz de usuario ahora muestran un recuento preciso de los elementos seleccionados. Anteriormente, las cuadrículas indicaban un número incorrecto de selecciones cuando una búsqueda por palabra clave seleccionaba todos los elementos de la cuadrícula y el comprador posteriormente anulaba la selección de algunos elementos antes de seleccionar la casilla de verificación del encabezado. [GitHub-29968](https://github.com/magento/magento2/issues/29968)

<!-- ENGCOM-8118 -->

* La aplicación ya no muestra el HTML sin procesar en las páginas de información general de facturas y envíos. [GitHub-29958](https://github.com/magento/magento2/issues/29958)

<!-- ENGCOM-8066 -->

* Hacer clic **Opciones** en el Administrador **Almacenes**  >  **Tipos de Cambio**  ahora dirige a los usuarios a la sección opciones de moneda expandida de la página Configuración del sistema. [GitHub-29336](https://github.com/magento/magento2/issues/29336)

<!-- ENGCOM-8361 -->

* Se ha mejorado la compatibilidad con la visualización de un widget en función de otra condición para `adminhtml` widgets cuando se utiliza un tipo de widget de selector. [GitHub-13316](https://github.com/magento/magento2/issues/13316), [GitHub-7252](https://github.com/magento/magento2/issues/7252), [GitHub-6868](https://github.com/magento/magento2/issues/6868)

<!-- ENGCOM-8336 -->

* Se ha mejorado el relleno de texto en los cuadros de diálogo emergentes de confirmación en el tema de Luma. [GitHub-30452](https://github.com/magento/magento2/issues/30452)

### Vault

<!-- MC-39109-->

* La variable `Vault` ahora reconoce los códigos de método de pago de la solicitud del servicio de gestión de la información de pago. Anteriormente, cuando un comprador realizaba un pedido utilizando una tarjeta de crédito de Braintree guardada, la aplicación generaba este error incluso cuando se utilizaba un método de pago válido: `The requested Payment Method is not available`.

### Vértice

* Las sugerencias de dirección ahora se eliminan del modo esperado cuando se modifica una dirección.

* Se ha resuelto una condición de carrera que impedía a algunos clientes guardar su dirección en el panel de cuenta.

* La validación de direcciones de vértice ya no agrega la página de edición de direcciones a la caché de página completa en ciertas condiciones.

* El impuesto calculado por vértice ahora se tiene en cuenta cuando el envío gratuito está configurado para una cantidad incluida de impuesto.

### Marco de API web

<!-- MC-23904 ENGCOM-8421-->

* Ahora puede utilizar POST `V1/invoice/:invoiceId/refund` para devolver una factura que tenga una cantidad cero de productos y cero gastos de envío (por ejemplo, `{"items": [{"qty": 0, "orderItemId": 6, "extensionAttributes": {}}], "appendComment": false, "notify": true, "isOnline": true, "arguments": {"adjustment_negative": 0.0, "adjustment_positive": 0.99, "shipping_amount": 0}}.` ) Anteriormente, la aplicación generaba este error: `You can't create a creditmemo without products`. [GitHub-23069](https://github.com/magento/magento2/issues/23069)

<!-- MC-33732 -->

* Ahora puede utilizar POST `V1/categories` para crear o actualizar una categoría. Anteriormente, la aplicación no guardaba el valor si la variable `default_sort_by` se estableció como matriz. Cuando la variable `default_sort_by` se estableció como una cadena, la aplicación lanzó este error: `Error occurred during \"custom_attributes\" processing. Attribute \"default_sort_by\" has invalid value. The \"string\" value's type is invalid. The \"string[]\" type was expected. Verify and try again.`

<!-- MC-35740 -->

* Uso del POST `V1/invoices/:id/capture` para capturar la información de pago ahora funciona según lo esperado. Anteriormente, la aplicación autorizaba la solicitud, pero la capturaba solo en el sitio de la puerta de enlace de pago.

<!-- MC-37794 -->

* Cuando use POST `V1/order/:orderId/ship` para crear un envío parcial, el extremo devuelve el número correcto de productos enviados.

<!-- MC-38425-->

* Facturas creadas con el POST `V1/order/:orderID/invoice` ahora refleja con precisión el pago parcial por crédito de tienda. Anteriormente, cuando un pedido se pagaba parcialmente con crédito de tienda, la factura se creaba sin tener en cuenta el crédito de almacén.

<!-- MC-36830-->

* El GET `rest/all/V1/categories` y GET `rest/all/V1/categories?rootCategoryId=2` llamadas ahora devuelven rellenas `name` y `product_count` como se espera para todas las categorías del árbol. Anteriormente, los valores de los campos de categoría estaban vacíos. El complemento resolver nombre de tabla devolvió un nombre de tabla incorrecto para recuperar el recuento de productos por categoría.

<!-- ENGCOM-8286 -->

* El PUT `V1/categories/:id` El extremo ahora almacena los datos necesarios para crear redirecciones 301 para claves de URL de categoría cuando `save_rewrites_history` se proporciona un atributo personalizado. [GitHub-29174](https://github.com/magento/magento2/issues/29174), [GitHub-30240](https://github.com/magento/magento2/issues/30240)

### Lista de deseos

<!-- MC-33626-->

* Los compradores ahora pueden agregar un producto a una lista de deseos cuando el producto se asigna a una fuente de inventario personalizada. [GitHub-3018](https://github.com/magento/inventory/issues/3018)

<!-- MC-35416-->

* Los administradores ahora pueden acceder a la página Administrar carro de compras desde la página Administrador del cliente después de que un cliente haya agregado un producto a su lista de deseos desde la tienda. Anteriormente, la aplicación mostraba el siguiente error cuando el administrador hacía clic en el botón **Administrar carro de compras** botón: `An error has occurred. See error log for details`.

<!-- MC-35573-->

* La variable **Agregar al carro** en la página de lista de deseos compartidos ahora funciona según lo esperado para usuarios anónimos, invitados y que no han iniciado sesión.

<!-- MC-34411-->

* Los compradores ahora pueden mover correctamente un producto de una lista de deseos a otra.

<!-- ENGCOM-8062 -->

* La aplicación ahora muestra las opciones de atributos de producto configurables seleccionadas en la página de lista de deseos según lo esperado. [GitHub-24091](https://github.com/magento/magento2/issues/24091),  [GitHub-22503](https://github.com/magento/magento2/issues/22503)

<!-- ENGCOM-7779 -->

* Implementado `ActionInterface` para `\Magento\Wishlist\Controller\Shared\Allcart`. [GitHub-29537](https://github.com/magento/magento2/issues/29537)

## Problemas conocidos

**Problema**: La variable `[magento_root]/index.php` se ha eliminado y la aplicación ahora se ejecuta desde `/pub` de forma predeterminada para las configuraciones de Apache. Las tiendas que se proporcionan desde subcarpetas no funcionarán del modo esperado y podrían mostrar errores 404. **Solución alternativa**: Utilice enlaces simbólicos para emular la instalación en subcarpetas. El siguiente ejemplo utiliza dos tiendas (`https://shop01.com/shop/` y `https://shop02.com/shop/`) para ilustrar cómo utilizar un enlace simbólico para emular una instalación en subcarpetas.

1. Cree un subdirectorio para `https://shop01.com/shop/`:

   ```bash
   mkdir magento_root/pub/shop01
   ```

   ```bash
   cd magento_root/pub/shop01
   ```

1. Cree enlaces simbólicos para los directorios principales de la tienda en el directorio recién creado:

   ```bash
   ln -s ../media media
   ```

   ```bash
   ln -s ../static static
   ```

   ```bash
   ln -s ../../../pub pub
   ```

   ```bash
   ln -s ../.htaccess .htaccess
   ```

   ```bash
   ln -s ../health_check.php health_check.php
   ```

1. Cree un `index.php` dentro del nuevo directorio (`magento_root/pub/shop01/index.php`) y añada este contenido:

```php
   <?php
   require realpath(__DIR__) . '/../../../app/bootstrap.php';

   switch ($_SERVER['HTTP_HOST']) {
       case 'shop01.com':
       case 'www.shop01.com':
           $params = $_SERVER;
           $params[\Magento\Store\Model\StoreManager::PARAM_RUN_CODE] = 'shop01';
           $params[\Magento\Store\Model\StoreManager::PARAM_RUN_TYPE] = 'website';
           $bootstrap = \Magento\Framework\App\Bootstrap::create(BP, $params);
           $app = $bootstrap->createApplication(\Magento\Framework\App\Http::class);
           $bootstrap->run($app);
           break;

       default:
           $bootstrap = \Magento\Framework\App\Bootstrap::create(BP, $_SERVER);
           /** @var \Magento\Framework\App\Http $app */
           $app = $bootstrap->createApplication(\Magento\Framework\App\Http::class);
           $bootstrap->run($app);
       break;
   }
```

1. Configure el servidor Apache para que apunte al nuevo subdirectorio. Las configuraciones de implementación pueden variar ampliamente. A continuación se muestra un ejemplo de configuración del servidor:

```xml
   <VirtualHost *:80>
       DocumentRoot "magento_root/pub/shop1"
       ServerName shop01.com
   </VirtualHost>
```

**Problema**: Los comerciantes deben activar la funcionalidad de TLS de Forzar desde el administrador para habilitar el redireccionamiento global de HTTP a HTTPS para todas las páginas de tiendas. Consulte la [Redireccionar HTTP a HTTPS para todas las páginas en la nube (Forzar TLS)](https://support.magento.com/hc/en-us/articles/360006296953) Artículo de la Base de conocimiento. <!-- MC-39988-->

**Problema**: No puede usar la variable `addConfigurableProductToCart` Mutación de GraphQL para agregar un producto configurable a un carro de compras en una vista de tienda no predeterminada en una implementación de varias tiendas que ejecute Inventory. (Las tiendas de Luma no se ven afectadas). la aplicación muestra este error: `Could not add item to cart. Please check required options and try again`. **Solución alternativa**: Utilice la variable `addProductsToCart` mutación en su lugar. [GitHub-31660](https://github.com/magento/magento2/issues/31660)<!-- PWA-1298-->

**Problema**: La aplicación no envía la información de pago como se espera cuando un comprador introduce por primera vez un código correcto en el campo CAPTCHA de la página Pago, pero muestra este error: `There has been an error processing your request`. Esto solo ocurre cuando el comprador intenta realizar el pedido sin introducir el código CAPTCHA o introduciéndolo incorrectamente.  **Solución alternativa**: Actualice la página. <!-- MC-40506-->

**Problema**: La aplicación crea un pedido en Braintree como se espera cuando un comprador hace clic en **Pagar con Venmo**, pero no crea el orden en el Administrador. **Solución alternativa**: Ninguno. Consulte la [2.4.2 problema conocido: El pago de Venmo del Braintree no funciona](https://support.magento.com/hc/en-us/articles/360054662652/)  Artículo de la Base de conocimiento.  <!-- BUNDLE-2894-->

### Problemas conocidos de B2B

**Problema**: Los compradores B2B pueden utilizar métodos de pago en línea para evitar el flujo habitual de pedidos de compra. Este escenario puede ocurrir si el comprador puede reducir todo su total de cierre de compra a un 0 (por ejemplo, mediante un código promocional o una tarjeta de regalo) y posteriormente eliminar el código o la tarjeta de regalo. Incluso en esas condiciones, la solicitud sigue realizando el pedido de la cantidad correcta basándose en los precios de los artículos en su catálogo asignado. **Solución alternativa**: Deshabilite tarjetas de regalo y códigos de cupones cuando los métodos de pago en línea estén habilitados para la aprobación de órdenes de compra. <!-- B2B-1603-->

**Problema**: Los compradores se redirigen al carro de compras cuando intentan realizar un pedido desde un pedido de compra utilizando PayPal Express Checkout cuando **Modo en contexto** está desactivado. <!-- B2B-1604-->

**Problema**: La aplicación muestra a veces un error 404 cuando un comprador crea un pedido de compra y luego navega a la página de cierre de compra. Este error se produce cuando un comprador ha creado previamente un pedido de compra diferente con un método de pago en línea antes de navegar a la página de cierre de compra sin completar la compra anterior. El comprador aún puede realizar la orden de compra. **Solución alternativa**: Ninguno. <!-- B2B-1605-->

**Problema**: Los descuentos para un método de pago específico persisten durante el cierre de compra de una orden de compra incluso cuando el comprador cambia su método de pago durante el cierre de compra final. Como resultado, los clientes pueden recibir un descuento al que no tienen derecho. Esto ocurre porque se sigue aplicando una regla de carrito para el método de pago original a pesar del cambio en el método de pago. **Solución alternativa**: Ninguno. Consulte la [2.4.2 Problema conocido B2B: el descuento queda para pedidos de compra en línea después de cambiar el método de pago](https://support.magento.com/hc/en-us/articles/360054667312) Artículo de la Base de conocimiento. <!-- B2B-1012 -->

**Problema**: La variable `deleteRequisitionListOutput` query devuelve detalles sobre la lista de solicitudes eliminadas en lugar de las listas de solicitudes restantes. <!-- MC-39894-->

## Contribuciones comunitarias

Damos las gracias a la comunidad de Magento Open Source en general y quisiéramos agradecer su contribución a esta versión.

El equipo de ingeniería de la comunidad [Colaboradores Magento](https://magento.com/magento-contributors) mantiene una lista de los principales colaboradores individuales y socios por mes, trimestre y año. Desde esa página de colaboradores, puede seguir los vínculos a sus relaciones públicas combinadas en GitHub.

### Contribuciones de socios

En el siguiente cuadro se destacan las contribuciones realizadas por los Asociados. En esta tabla se muestra el Partner que contribuyó a la solicitud de extracción, la solicitud de extracción externa y el número de problema de GitHub asociado a ella (si está disponible).

{{$include /help/_includes/release-notes/engcomm-2-4-2-partner.md}}

### Contribuciones de colaborador individual

La siguiente tabla identifica las contribuciones de los miembros de nuestra comunidad. En esta tabla se enumeran las solicitudes de extracción externas, el número de problema de GitHub asociado a él (si está disponible) y el miembro de la comunidad que contribuyó a la solicitud de extracción.

{{$include /help/_includes/release-notes/engcomm-2-4-2-issues.md}}

### Requisitos del sistema

Nuestra pila de tecnología está construida en PHP y MySQL. Para obtener más información, consulte [Requisitos del sistema](../../../installation/system-requirements.md).

### Instrucciones de instalación y actualización

Puede instalar Adobe Commerce 2.4.2 mediante [Compositor](../../../installation/composer.md).

## Juegos de herramientas de migración

La herramienta de migración de datos ayuda a transferir los datos de almacenamiento de Magento 1.x existentes a Magento 2.x. Esta interfaz de línea de comandos incluye funciones de verificación, seguimiento del progreso, registro y prueba. Para obtener instrucciones de instalación, consulte [Instalación de la herramienta de migración de datos](../../../tools/data-migration-tool/install.md). Considere la posibilidad de explorar o contribuir a la [Repositorio de migración de datos](https://github.com/magento/data-migration-tool).

La variable [Kit de herramientas de migración de código](https://github.com/magento-commerce/code-migration) ayuda a transferir las extensiones y personalizaciones de almacenamiento de Magento 1.x existentes a Magento 2.x. La interfaz de la línea de comandos incluye secuencias de comandos para convertir módulos y diseños de Magento 1.x.
