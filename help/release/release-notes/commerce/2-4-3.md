---
title: Notas de la versión de Adobe Commerce 2.4.3
description: Obtenga información sobre las nuevas funciones, mejoras, correcciones de errores y problemas conocidos de la versión 2.4.3 de Adobe Commerce.
source-git-commit: 4c3a5b6462668993dcfb0ecb9327a7ffc47ced44
workflow-type: tm+mt
source-wordcount: '15953'
ht-degree: 0%

---


# Notas de la versión de Adobe Commerce 2.4.3

Adobe Commerce 2.4.3 presenta mejoras en el rendimiento y la seguridad, además de mejoras significativas en la plataforma. Las mejoras de seguridad incluyen la expansión de la cobertura de reCAPTCHA y la inclusión de límites de velocidad integrados. Las dependencias del compositor principal y las bibliotecas de terceros se han actualizado a las últimas versiones compatibles con PHP 8.x.

Esta versión incluye más de 370 nuevas correcciones para el código principal y 33 mejoras de seguridad. Todos los problemas conocidos identificados en las notas de la versión de Adobe Commerce 2.4.2 se han corregido en esta versión.

{{bics}}

Consulte [Notas de la versión de Adobe Commerce 2.4.2-p2](../security/2-4-2-p2.md) para obtener información sobre Adobe Commerce 2.4.2-p2.

## Otra información de la versión

Aunque el código de estas funciones está empaquetado con versiones trimestrales , varios de estos proyectos (por ejemplo, B2B, Page Builder y Progressive Web Application (PWA) Studio) también se publican de forma independiente. Las correcciones de errores de estos proyectos se documentan en la información de versión específica del proyecto que está disponible en la documentación de cada proyecto.

## Aplique el parche MC-43048__set_rate_limits__2.4.3 para resolver el problema con la limitación de la velocidad de API

Esta corrección proporciona una solución para el problema en el que las API web no pueden procesar solicitudes que contengan más de 20 elementos en una matriz. Este problema afecta a las implementaciones que ejecutan Magento Open Source 2.4.3, Adobe Commerce 2.4.3 o 2.3.7-p1. A estas versiones se ha agregado un límite de velocidad integrado para evitar ataques de denegación de servicio (DoS) y el máximo predeterminado se ha establecido en 20. Este parche revierte el límite predeterminado a un valor mayor. Si cree que su tienda está experimentando un ataque de denegación de servicio, Adobe recomienda reducir los límites de entrada predeterminados a un valor inferior para restringir el número de recursos que se pueden solicitar. Consulte la [La API web no puede procesar solicitudes con más de 20 elementos en la matriz](https://support.magento.com/hc/en-us/articles/4406893342093) Artículo de la Base de conocimiento.

## Aplique AC-384__Fix_Incompatible_PHP_Method__2.4.3_ce.patch para solucionar el error fatal de PHP en la actualización

Durante la actualización a Adobe Commerce 2.4.3 puede producirse el siguiente error grave:

```terminal
PHP Fatal error: Uncaught Error: Call to undefined function Magento\Framework\Filesystem\Directory\str_contains() in [...]/magento/vendor/magento/framework/Filesystem/Directory/DenyListPathValidator.php:74
```

Este error se debe al uso de la variable `str_contains` , que es una función PHP 8.x. Adobe Commerce 2.4.3 no es compatible con PHP 8.x. Esta corrección sustituye esta función por una función PHP 7.x compatible. Consulte la [Actualización de Adobe Commerce 2.4.3, 2.3.7-p1 PHP Error irrecuperable](https://support.magento.com/hc/en-us/articles/4408021533069-Adobe-Commerce-upgrade-2-4-3-2-3-7-p1-PHP-Fatal-error-Hotfix) Artículo de la Base de conocimiento.

## Aplicar `AC-3022.patch` seguir ofreciendo DHL como transportista marítimo

DHL ha introducido la versión de esquema 6.2 y dejará de utilizar la versión de esquema 6.0 en un futuro próximo. Adobe Commerce 2.4.4 y versiones anteriores compatibles con la integración de DHL solo admiten la versión 6.0. Los comerciantes que implementen estas versiones deben aplicar `AC-3022.patch` lo antes posible para seguir ofreciendo DHL como transportista marítimo. Consulte la [Aplique un parche para seguir ofreciendo DHL como transportista de envío](https://support.magento.com/hc/en-us/articles/7707818131597-Apply-a-patch-to-continue-offering-DHL-as-shipping-carrier) Artículo de la Base de conocimiento para obtener información sobre cómo descargar e instalar el parche.

## Puntos destacados

Busque los siguientes aspectos destacados en esta versión.

### Mejoras sustanciales de seguridad

Esta versión incluye 33 correcciones de seguridad y mejoras de seguridad de la plataforma. Muchas de estas correcciones de seguridad se han backportado a 2.4.2-p2 y 2.3.7-p1.

#### Treinta y tres mejoras de seguridad que ayudan a cerrar las vulnerabilidades de ejecución de código remoto (RCE) y scripts entre sitios (XSS)

Hasta la fecha no se han producido ataques confirmados relacionados con estos problemas. Sin embargo, algunas vulnerabilidades se pueden aprovechar para acceder a la información del cliente o para hacerse cargo de las sesiones del administrador. La mayoría de estos problemas requieren que un atacante obtenga primero acceso al administrador. Como resultado, le recordamos que siga todos los pasos necesarios para proteger a su administrador, incluidos, entre otros, estos esfuerzos: INCLUSIÓN EN LA LISTA DE PERMITIDOS IP, [autenticación de dos factores](https://devdocs.magento.com/guides/v2.4/security/two-factor-authentication.html), el uso de una VPN, el uso de una ubicación única en lugar de `/admin`, y buena higiene de las contraseñas. Consulte [Boletín de seguridad de Adobe](https://helpx.adobe.com/security/products/magento/apsb21-64.html) para debatir estas cuestiones fijas.

#### Mejoras de seguridad adicionales

Las mejoras de seguridad para esta versión mejoran el cumplimiento de las prácticas recomendadas de seguridad más recientes, incluidas:

* A **nuevo complemento de Composer** ayuda a evitar la confusión de dependencias e identifica paquetes maliciosos con los mismos nombres que los paquetes internos en el repositorio de paquetes públicos. Consulte la [Adobe lanza el nuevo complemento de compositor con la versión 2.4.3](https://magento.com/blog/best-practices/adobe-releases-new-composer-plugin-magento-243-release) entrada de blog.

* **La limitación de velocidad ahora está integrada en las API** para evitar ataques de denegación de servicio (DoS). Las API web ahora imponen restricciones en el tamaño o el número de recursos (el máximo predeterminado se establece en 20 y se puede configurar en un valor diferente en función de las necesidades comerciales) que un cliente puede solicitar. Consulte [Límite de velocidad](https://developer.adobe.com/commerce/webapi/get-started/api-security/) para obtener información sobre la configuración de estas restricciones. <!-- MC-35358-->

* **Se ha ampliado la cobertura de ReCAPTCHA** para incluir:

   * Las API web que tienen páginas de HTML correspondientes se tratan a través de ReCAPTCHA. (Esto excluye las API web a las que se accede mediante integraciones). La cobertura de ReCAPTCHA protege los extremos de ataques de spam. Cuando se accede a las API web a través de un servicio de integración de terceros que utiliza OAuth, ReCAPTCHA se desactiva.<!-- MC-34472-->

   * La página de tienda de realización de pedido y las API web relacionadas con pagos. La protección de ReCAPTCHA para estas páginas está deshabilitada de forma predeterminada y se puede habilitar desde el administrador. Esta cobertura añade un mecanismo de fuerza anti-bruta para proteger las tiendas de ataques de carding.

{{cve-notice}}

### Mejoras en la infraestructura

Esta versión contiene mejoras que mejoran la calidad del marco y las siguientes áreas funcionales:

* Cuenta del cliente

* Catálogo

* CMS

* OMS

* Importar/Exportar

* Promociones y segmentación

* Carro de compras y cierre de compra

* B2B

* Ensayo y vista previa

**PayPal Pay Later es ahora compatible** en implementaciones que incluyen PayPal. Esta función permite a los compradores pagar un pedido en cuotas quincenales en lugar de pagar la cantidad completa en el momento de la compra. <!-- MC-40556-->

**Nuevo `use_application_lock` modo de indexación**. La variable `use_application_lock` permite habilitar la reindexación mediante el uso de variables de entorno o configurando la variable `app/etc/env.php` archivo. Ya no es necesario restablecer manualmente el indizador después de un error con este modo habilitado. Consulte [Uso del modo de bloqueo de aplicación para procesos de reindexación](https://developer.adobe.com/commerce/php/development/components/indexing/#using-application-lock-mode-for-reindex-processes).

### Mejoras en la plataforma

La versión 2.4.3 aún no es compatible con PHP 8.x, pero las siguientes actualizaciones de plataforma nos acercan a la compatibilidad futura con PHP 8.x.

* Las dependencias del Compositor principal y las bibliotecas de terceros se han actualizado a las últimas versiones compatibles con PHP 8.x. <!-- MC-39514-->

* La biblioteca KnockoutJS se ha actualizado a la versión 3.5.1 (la última versión). <!-- MC-40694-->

* Se ha eliminado la biblioteca TinyMCE v3 obsoleta. La variable `Magento_Tinymce3Banner` Las pruebas de módulo y MFTF relacionadas con TinyMCE v3.x se han eliminado de Adobe Commerce. <!-- MC-42199 42170 -->

* La versión 2.4.3 ha sido probada y confirmada como compatible con Redis 6.0.12. (la versión 2.4.x sigue siendo compatible con Redis 5.x)

* Las dependencias de la biblioteca Laminas se han actualizado a versiones compatibles con PHP 8.x. Algunas dependencias redundantes se han eliminado de la función `composer.json` archivo. **Adobe Commerce 2.4.3 utiliza Laminas 3.4.0**. <!-- MC-39513-->

### Mejoras de rendimiento

Esta versión incluye mejoras que reducen el tiempo de indexación de los indexadores de Precio de producto y Regla de catálogo. Los comerciantes ahora pueden excluir un sitio web de un grupo de clientes o catálogo compartido, lo que reduce el número de registros para la indexación y mejora los tiempos de indexación.

### Live Search

[Live Search](https://docs.magento.com/user-guide/live-search/overview.html) equipado con [Adobe Sensei](https://www.adobe.com/sensei.html) ofrece una experiencia de búsqueda intuitiva mediante el uso de inteligencia artificial y algoritmos de aprendizaje automático para realizar un análisis profundo de los datos agregados del visitante. Consulte [Notas de la versión de Live Search](https://experienceleague.adobe.com/docs/commerce-merchant-services/live-search/release-notes.html).

### GraphQL

Esta versión incorpora compatibilidad con GraphQL para las siguientes funciones:

* **Catálogos compartidos**<!-- PWA-1294-->

* **Listas de deseos**. La variable [mutación addWishlistItemsToCart](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-wishlist-items-to-cart.html) mueve artículos de la lista de deseos especificada al carro del cliente. <!-- magento/partners-magento2ee#449-->

* **Registros de regalos**. Las tareas incluidas incluyen: <!-- PWA-1290-->

   * Utilice la variable [consulta de regaloRegistry](https://devdocs.magento.com/guides/v2.4/graphql/queries/gift-registry.html) para devolver el contenido de los registros de regalo del cliente.

   * Buscar registros de regalos por [type](https://devdocs.magento.com/guides/v2.4/graphql/queries/gift-registry-type-search.html), [email](https://devdocs.magento.com/guides/v2.4/graphql/queries/gift-registry-email-search.html)o [ID](https://devdocs.magento.com/guides/v2.4/graphql/queries/gift-registry-id-search.html).

   * [Crear](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-gift-registry.html), [actualizar](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-gift-registry.html)o [delete](https://devdocs.magento.com/guides/v2.4/graphql/mutations/remove-gift-registry.html) registros de regalos.

   * [Actualizar](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-gift-registry-items.html) o [remove](https://devdocs.magento.com/guides/v2.4/graphql/mutations/remove-gift-registry-items.html) elementos de un registro de regalos.

   * [Mover todos los elementos](https://devdocs.magento.com/guides/v2.4/graphql/mutations/move-cart-items-to-gift-registry.html) del carro de compras al registro de regalos. <!-- ENGCOM-9082 9087-->

   * [Agregar](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-gift-registry-registrants.html), [actualizar](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-gift-registry-registrants.html)o [remove](https://devdocs.magento.com/guides/v2.4/graphql/mutations/remove-gift-registry-registrants.html) inscritos de un registro de regalos.

   * [Compartir](https://devdocs.magento.com/guides/v2.4/graphql/mutations/share-gift-registry.html) un registro de regalos con invitados.

* **Comillas negociables**. Consulte la [`negotiableQuote`](https://devdocs.magento.com/guides/v2.4/graphql/queries/negotiable-quote.html) y [`negotiableQuotes`](https://devdocs.magento.com/guides/v2.4/graphql/queries/negotiable-quotes.html) consultas. <!-- PWA-1292-->

   Las mutaciones nuevas incluyen:

   * [`requestNegotiableQuote`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/request-negotiable-quote.html)

   * [`setNegotiableQuoteShippingAddresses`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/set-negotiable-quote-shipping-address.html)

   * [`updateNegotiableQuoteQuantities`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-negotiable-quote-quantities.html)

   * [`removeNegotiableQuoteItems`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/remove-negotiable-quote-items.html)

   * [`closeNegotiableQuotes`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/close-negotiable-quotes.html)

   * [`deleteNegotiableQuotes`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/delete-negotiable-quotes.html).

* **Rutas compartidas**. La variable [consulta de ruta](https://devdocs.magento.com/guides/v2.4/graphql/queries/route.html) y [Interfaz enrutable](https://devdocs.magento.com/guides/v2.4/graphql/interfaces/routable-interface.html) admiten solicitudes de enrutamiento en páginas de productos, categorías y CMS. La variable `urlResolver` la consulta ha quedado obsoleta y su funcionalidad ha sido reemplazada por la función `route` consulta.

Consulte la [Guía para desarrolladores de GraphQL](https://devdocs.magento.com/guides/v2.4/graphql/) para obtener más información sobre estas mejoras.

### B2B

La versión 2.4.3 presenta B2B v1.3.2. Esta versión incluye varias correcciones de errores. Consulte [Notas de la versión B2B](https://experienceleague.adobe.com/docs/commerce-admin/b2b/release-notes.html).

### Page Builder

Page Builder ahora está disponible como extensión agrupada en Magento Open Source. Ahora es la herramienta de edición de contenido predeterminada para Adobe Commerce 2.4.3 y Magento Open Source 2.4.3. Puede reemplazar el editor WYSIWG con cualquier módulo de terceros.

El Creador de páginas reemplaza el editor TinyMCE en las siguientes áreas de administración:

* Página de CMS
* Bloque CMS
* Descripción de la categoría
* Descripción del producto

Todo el contenido creado en TinyMCE se ha migrado a Page Builder como HTML.

### PWA Studio

Para obtener información sobre las mejoras y correcciones de errores, consulte [Versiones de PWA Studio](https://github.com/magento/pwa-studio/releases). Consulte [compatibilidad](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) para obtener una lista de versiones de PWA Studio y sus versiones compatibles.

### Herramienta de compatibilidad de actualización

El ámbito de aplicación del [Herramienta de compatibilidad de actualización](https://experienceleague.adobe.com/docs/commerce-operations/upgrade-guide/upgrade-compatibility-tool/overview.html) se ha ampliado en función de las opiniones de la comunidad. Únase a nuestra [#upgrade-compatibility-tool](https://magentocommeng.slack.com/archives/C019Y143U9F) Canal de Slack para obtener asistencia del equipo de producto de Adobe y de la comunidad, así como para ayudar a guiar la futura dirección de la herramienta.

### Actualizaciones de servicios administrados en la nube

Esta versión incluye mejoras en nuestra compatibilidad con los servicios administrados en la nube Amazon Simple Storage Service (AWS S3) y Amazon Aurora. Proporciona compatibilidad certificada para AWS ElastiCache, AWS Elasticsearch y AWS Managed Queues (Rabbit MQ). (Hemos probado la funcionalidad, el rendimiento y la integración de estos servicios con Adobe Commerce).

### Integración de Adobe Stock

Esta versión incluye Adobe Stock Integration v2.1.1.

### Extensiones desarrolladas por proveedores

Consulte los siguientes temas para estar al día de las últimas funciones y cambios de esta versión:

* [Amazon Pay](https://docs.magento.com/user-guide/payment/amazon-pay.html). Amazon Pay se ha desaprobado y se eliminará en una versión posterior 2.4.x. La versión 2.4.3 y posteriores solo contendrán actualizaciones de compatibilidad y correcciones para errores importantes.

* [Braintree](https://docs.magento.com/user-guide/payment/braintree.html)

* [dotdigital Engagement Cloud](../../../upgrade/modules/upgrade.md)

* [Klarna](https://docs.magento.com/user-guide/payment/klarna.html)

* [Vertex Cloud](https://docs.magento.com/user-guide/tax/vertex.html)

* [Revisiones del producto Yotpo](../../../upgrade/modules/upgrade.md)

## Problemas solucionados

Hemos corregido cientos de problemas en el código principal de 2.4.3.

### Instalación, actualización, implementación

<!-- MC-41154-->

* La variable `bin/magento setup:db:status` ahora devuelve un mensaje que indica que todo está actualizado después de una actualización correcta. Anteriormente, la aplicación mostraba este error: `Declarative Schema is not up to date`.

<!-- MC-40031 -->

* Los valores de configuración ahora se conservan al volver a cargar el formulario cuando falla la creación de un nuevo producto configurable. Anteriormente, se perdían valores durante la recarga del formulario y la aplicación mostraba este error: `The value specified in the URL Key field would generate a URL that already exists`. [GitHub-32102](https://github.com/magento/magento2/issues/32102)

<!-- MC-37596-->

* La aplicación ya no genera una excepción al ejecutar `bin/magento setup:upgrade` para actualizar desde una implementación de Magento Open Source con Redis a Adobe Commerce.

<!-- MC-34453-->

* Las reglas de precios del carro creadas anteriormente ahora se muestran en la página del panel Ensayo de contenido después de actualizar una implementación de Magento Open Source a Adobe Commerce.

<!-- ENGCOM-8508 -->

* Las implementaciones que se ejecutan en el clúster de Galera ahora admiten más clientes. [GitHub-31038](https://github.com/magento/magento2/issues/31038)

<!-- ENGCOM-9036 MC-41938 -->

* Los administradores ahora pueden iniciar sesión correctamente en una implementación cuando la aplicación se haya instalado con la variable `—use-rewrites=0` o con `web/seo/use_rewrites` configurado en 0 pulg `core_config_data_table`. [GitHub-32100](https://github.com/magento/magento2/issues/32100)

<!-- ENGCOM-8451 -->

* Actualizado `sortOrder` cargar para `AsyncCssPlugin`. La aplicación ahora se carga `AsyncCssPlugin` before `JsFooterPlugin`. [GitHub-30882](https://github.com/magento/magento2/issues/30882)

<!-- ENGCOM-8701 -->

* `Magento\Config\Model\Config\PathValidator` ahora comprueba la ruta de visualización para determinar si existe un elemento y si tiene una ruta de configuración, utiliza la variable `config.xml` ruta en lugar de validación. [GitHub-27678](https://github.com/magento/magento2/issues/27678)

<!-- ENGCOM-8684 -->

* La compilación de menos archivos con Grunt o por compilación del lado del servidor ahora produce los mismos resultados. Anteriormente. `.abs- styles`, que amplía otras `.abs- styles` en `_extends.less`, no se mostraban correctamente cuando se compilaba con Grunt. Esto daba lugar a diferencias entre las implementaciones de producción y desarrollo. [GitHub-7231](https://github.com/magento/magento2/issues/7231)

### AdminGWS

<!-- MC-40703-->

* Administración GWS ahora utiliza `int` los valores de la variable `website_id` Condición SQL en las colecciones de administración para administradores con permisos personalizados.

### Integración de Adobe Stock

<!-- MC-39754-->

* La aplicación ahora muestra un mensaje informativo y un vínculo al administrador **Almacenes** > **Configuración** > **Avanzadas** > **Sistema** en la página Buscar Adobe Stock cuando **Clave de API (ID de cliente)** y **Secreto del cliente** no están configuradas. Anteriormente, la aplicación mostraba este error: `We couldn't find any records` y sin vínculo.

### Back-end

<!-- MC-40389-->

* Los administradores con acceso restringido (por ejemplo, a los que se les asigna acceso a un solo sitio web) ya no pueden editar las categorías definidas en Ámbito global.

<!-- MC-39037-->

* El informe del sistema generado (**Sistema** > **Asistencia** > **Informe del sistema**) ahora se representa correctamente. Anteriormente, el contenido del informe estaba desalineado.

<!-- MC-30152 ENGCOM-8625-->

* La aplicación ahora desactiva la validación en el **Precio** como se espera cuando la variable **Precio dinámico** se habilita durante la creación del producto del paquete. Anteriormente, la aplicación generaba un error de validación al eliminar un valor del **Precio** cuando la variable **Precio dinámico** estaba activada. [GitHub-26214](https://github.com/magento/magento2/issues/26214)

<!-- MC-24840-->

* Ya no se producen redirecciones infinitas cuando la dirección URL de administración difiere de la dirección URL de sitio web predeterminada en implementaciones en las que la aplicación está configurada para ser accesible desde dos direcciones URL.

### Paquete de productos

<!-- MC-41810-->

* Ahora puede usar la variable `addProductsToCart` mutación para agregar un producto de paquete con más de una opción de casilla de verificación a un carro de compras.

<!-- MC-41614-->

* La indexación de precios de los productos del paquete ahora se ejecuta utilizando tablas temporales, lo que evita bloquear las tablas de la base de datos. Anteriormente, la aplicación utilizaba tablas físicas, lo que daba como resultado tablas bloqueadas.

<!-- MC-41177 magento/magento2#32594-->

* El precio de un artículo de paquete ahora se puede establecer en 0,00. Anteriormente, cuando volvía a la página de edición después de establecer el precio en 0,00, el precio volvía a su valor predeterminado. [GitHub-32383](https://github.com/magento/magento2/issues/32383)

<!-- MC-40603-->

* Los detalles de los pedidos que contienen productos de paquete ahora muestran el precio correcto para los productos de paquete si el precio se cambió antes de realizar el pedido.

<!-- MC-40035-->

* El estado de existencias del producto del paquete ahora se actualiza en función del estado de existencias de sus productos secundarios. Anteriormente, los productos del paquete se mostraban como fuera de existencias cuando se eliminaba una opción del producto y el producto del paquete tenía dos opciones con el mismo SKU.

<!-- MC-39276-->

* Un administrador ahora puede cambiar el valor de un paquete de productos `Shipment Type` después de haber sido movido a un grupo de atributos diferente. Anteriormente, este atributo siempre se guardaba con un `Together` si se movió a un grupo de atributos distinto del grupo predeterminado en el conjunto de atributos.

<!-- MC-38900-->

* GraphQL `setGuestEmailOnCart` la mutación ahora actualiza correctamente el correo electrónico del invitado. Anteriormente, las tablas de dirección de presupuesto y presupuesto no se actualizaban.

<!-- MC-37719-->

* Añadir, quitar o actualizar un producto secundario a un producto de paquete mediante llamadas a la API de REST ahora déclencheur volver a indexar como se espera. Anteriormente, estas acciones no tenían déclencheur para la reindexación y, como resultado, el producto del paquete no cambiaba su estado de existencias hasta que se realizaba la reindexación manual.

<!-- MC-35725 ENGCOM-8568-->

* La aplicación ahora muestra el rango de precios correcto para los productos de paquete con precios de nivel. [GitHub-30284](https://github.com/magento/magento2/issues/30284)

<!-- MC-35638-->

* La aplicación ahora muestra el mismo precio total que se espera en la página del carro de compras y en el paso de envío del flujo de trabajo de cierre de compra después de que haya cambiado el precio de una opción de paquete.

<!-- MC-32617-->

* Ahora puede configurar correctamente un producto de paquete accediendo a él desde un carro de compras del cliente. Anteriormente, la página Configurar producto nunca se cargaba completamente y no se podía guardar la configuración.

<!-- MC-30317 ENGCOM-7141-->

* Los comerciantes ahora pueden asignar un precio único para un paquete de productos en cada vista de tienda de una implementación multitienda. Los precios específicos del sitio web se guardan en la `catalog_product_bundle_selection_price` tabla. Anteriormente, la aplicación no basaba el precio de un producto del paquete en el ámbito del sitio web, incluso cuando  **Almacenes** > **Configuración** > **Catálogo** > **Catálogo** > **Precio** > **Alcance del precio del catálogo** se estableció en `Website`. No se guardaron precios específicos del sitio web en `catalog_product_bundle_selection_price`. [GitHub-12584](https://github.com/magento/magento2/issues/12584)

<!-- ENGCOM-8705 MC-38953-->

* Las facturas de los productos del paquete ahora muestran la cantidad correcta para los productos simples asociados cuando **Precios dinámicos** está desactivado. Anteriormente, los productos simples asociados con el producto del paquete tenían la cantidad del producto principal, no el producto del paquete). [GitHub-30802](https://github.com/magento/magento2/issues/30802)

<!-- magento/magento2#30374 MC-36930-->

* La variable `updateProductsInWishlist` la mutación ahora actualiza correctamente los elementos que pertenecen a un paquete de productos en una lista de deseos. Anteriormente, en lugar de actualizar el elemento de la lista de deseos, esta mutación borraba el elemento y creaba uno nuevo, que cambiaba el ID del elemento.

<!-- MC-38575-->

* Ahora puede configurar la variable `required_options` y `has_options` agrupe los atributos como se espera mientras crea o actualiza un producto de paquete usando la variable `POST /V1/product/:sku` punto final. Anteriormente, estos atributos personalizados se establecían en 0 (cero) a pesar de los esfuerzos por establecerlo en 1 (uno).

<!-- MC-38483-->

* El paquete de datos de productos que antes faltaban ahora se incluye en el proceso de ensayo. Esto resuelve incoherencias en el comportamiento del producto cuando los compradores compraron un producto del paquete desde la página de lista de productos en lugar de agregarlo directamente desde una página de productos.

### Caché

<!-- ENGCOM-8554-->

* La variable `varnish6.vcl` se ha actualizado para evitar el almacenamiento en caché de la página del cliente.

### CAPTCHA

<!-- MC-41572-->

* CAPTCHA ahora valida correctamente los datos proporcionados por un comprador, y los campos CAPTCHA ahora se muestran tal como se espera después de los múltiples intentos fallidos de un comprador para realizar la comprobación con PayPal Payflow Pro.

<!-- MC-41281-->

* La validación de CAPTCHA ya no falla aleatoriamente en la página de pago del flujo de trabajo de cierre de compra.

<!-- MC-41001-->

* La aplicación ahora muestra los campos CAPTCHA como se espera después de superar el número de intentos de finalización fallidos. Anteriormente, aunque la aplicación le pedía que volviera a intentar el desafío CAPTCHA, no mostraba los campos CAPTCHA.

<!-- MC-40359-->

* CAPTCHA ahora funciona según lo esperado en la página de cierre de compra. Anteriormente, después de que un comprador respondiera correctamente a un desafío de CAPTCHA, el cargador en la página de cierre de compra nunca se completaba y la aplicación mostraba este error: `captchaData[formId] is undefined`. (Este error solo se producía cuando el comprador utilizaba el mismo explorador desde el que había accedido anteriormente a una implementación que ejecuta 2.3.5-p1.)

<!-- ENGCOM-8630-->

* `_.isEmpty()` en el `defaultCaptcha.js` El archivo ahora se ha completado correctamente. Anteriormente, estas comprobaciones no se completaban y, como resultado, la página de cierre de compra no se cargaba después de la actualización. [GitHub-31641](https://github.com/magento/magento2/issues/31641)

### Carro de compras y cierre de compra

<!-- MC-41911-->

* La aplicación ahora tiene en cuenta los localizadores decimales específicos de la configuración regional al convertir y actualizar la cantidad de producto en el carro de compras.

<!-- MC-41574-->

* Los pedidos ya no omiten un nombre de cliente proporcionado con una dirección de envío. Anteriormente, se omitían los nombres porque la variable `same_as_billing` El indicador no se guardó en la base de datos.

<!-- MC-40946-->

* Los vínculos a registros de regalos ahora persisten según lo esperado al editar un producto en el carro de compras. Anteriormente, estos vínculos desaparecían al hacer clic en el **Actualizar carro** botón.

<!-- MC-40696-->

* Todos los mensajes de cola para consumidores `quoteItemCleaner` ahora cambie su estado a `complete` como se espera después de la eliminación de varios productos. Anteriormente, solo un mensaje para este consumidor cambiaba su estado a `complete`y el resto ha cambiado de estado a `in progress`.

<!-- MC-40657-->

* La aplicación ahora muestra el mensaje de validación Términos y condiciones en el bloque correspondiente solo cuando un comprador hace clic en el botón **Realizar pedido** botón. Anteriormente, la aplicación mostraba este mensaje en el bloque Aplicar código de descuento siempre que un comprador cambiaba el método de pago en el flujo de trabajo de cierre de compra: `The order wasn't placed. First, agree to the terms and conditions, then try placing your order again`.

<!-- MC-40271 magento/partners-magento2ee#476-->

* Ahora se le redirige a la página de cierre de compra como se espera después de agregar un producto de paquete al carro de compras desde una vista previa de actualización de programa y haciendo clic en el carro de compras. [GitHub-447](https://github.com/magento/partners-magento2ee/issues/447)

<!-- MC-39581-->

* La aplicación ahora descarta los cambios en el formulario de dirección de facturación en el paso de pago de pago de pago si el comprador no hace clic en el botón **Actualizar** y volvió al paso de envío.

<!-- MC-39517  magento/partners-magento2ee#460-->

* La aplicación ahora muestra un mensaje de error informativo y no actualiza la cantidad del producto cuando un comprador añade una cantidad de producto no válida y hace clic en el botón **Actualizar elementos y cantidades** en la página Administrar carro de compras . Anteriormente, la aplicación actualizaba la cantidad de producto y no mostraba un mensaje de error. [GitHub-459](https://github.com/magento/partners-magento2ee/issues/459)

<!-- MC-37807 ENGCOM-8530-->

* Productos con una opción personalizable `(File)` ahora incluya vínculos activos como se espera a lo largo del proceso de cierre de compra multienvío. Anteriormente, faltaba este vínculo. [GitHub-31095](https://github.com/magento/magento2/issues/31095)

<!-- MC-37689-->

* El carro de compras del administrador ahora muestra los precios de los productos en monedas correctas para las tiendas que admiten varias monedas. Anteriormente, los precios se convertían a la moneda especificada más de una vez: primero, cuando los productos se añadían al carro desde la tienda y, después, de nuevo, cuando el pedido se procesaba posteriormente en el Administrador.

<!-- MC-36703  magento/partners-magento2ee#439-->

* La aplicación ahora vacía el carro de compras como se espera después de que un administrador complete un pedido del administrador que fue creado por un comprador en la tienda. Anteriormente, cuando el cliente iniciaba sesión de nuevo después de que el administrador completara el pedido, el carro de compras seguía conteniendo el contenido del pedido. [GitHub-30262](https://github.com/magento/magento2/issues/30262)

<!-- MC-35640-->

* Los compradores ahora pueden agregar un producto al carro cuyo precio mínimo publicitado (MAP) exceda el precio normal del producto.

<!-- MC-35289-->

* Los compradores ahora pueden cambiar correctamente su dirección de facturación desde el flujo de trabajo de cierre de compra al realizar la comprobación con varias direcciones.

<!-- MC-29335-->

* Todas las transacciones de pago creadas por los clientes ahora se guardan en la base de datos y se pueden ver en el Administrador como se espera. Anteriormente, solo se guardaba un pequeño subconjunto de pedidos simultáneos en la base de datos y la mayoría de los pedidos se perdían debido a tiempos de espera resultantes de bloqueos de base de datos. [GitHub-25862](https://github.com/magento/magento2/issues/25862)

<!-- MC-23989 magento/magento2#32251 -->

* La aplicación ahora muestra correctamente mensajes de bienvenida en línea que contienen caracteres especiales cuando un invitado coloca un producto en el minicarro. Anteriormente, la aplicación no agregaba el producto al minicarrito ni mostraba el mensaje de bienvenida. [GitHub-32250](https://github.com/magento/magento2/issues/32250)

<!-- MC-41165-->

* La página de envío del flujo de trabajo de cierre de compra ahora se carga correctamente cuando el envío en la tienda está habilitado. Anteriormente, la aplicación generaba un error de JavaScript y la página de cierre de compra de envío no se representaba completamente.

<!-- ENGCOM-9006-->

* Se ha añadido la variable `itemResolvers` al catálogo `di.xml` archivo. Como resultado, el cierre de compra ya no se interrumpe si los módulos de productos configurables y agrupados están desactivados. [GitHub-30860](https://github.com/magento/magento2/issues/30860)

<!-- ENGCOM-8944-->

* La aplicación ahora muestra los botones de opción en la sección **Información de Pago y Envío** como se espera durante el flujo de trabajo de reorganización del administrador. [GitHub-30257](https://github.com/magento/magento2/issues/30257)

<!-- MC-39158 ENGCOM-8493-->

* La aplicación ahora aplica correctamente las reglas de precios del carro de compras con un descuento fijo a nivel de carro de compras cuando el carro contiene un producto de paquete con múltiples opciones. Anteriormente, la regla de precios del carro de compras no se aplicaba completamente al pedido. [GitHub-30952](https://github.com/magento/magento2/issues/30952)

<!-- MC-40983 ENGCOM-8828-->

* La variable **Agregar al carro** en la vista de lista de categorías ahora funciona según lo esperado. [GitHub-32232](https://github.com/magento/magento2/issues/32232)

<!-- ENGCOM-8490-->

* Ahora puede utilizar POST `/V1/carts/mine/items` para agregar una cantidad personalizada de productos agrupados a un carro de compras. [GitHub-26909](https://github.com/magento/magento2/issues/26909)

<!-- ENGCOM-8886-->

* La aplicación ya no rellena el área de dirección de facturación del flujo de trabajo de cierre de compra con la dirección de envío. Anteriormente, cuando la variable **Estado/provincia** el campo de la dirección de facturación estaba vacío y las direcciones de envío y facturación diferían, la aplicación rellenaba la dirección de facturación **Estado/provincia** con información de la dirección de envío. [GitHub-31608](https://github.com/magento/magento2/issues/31608)

### Catálogo

<!-- MC-36787-->

* Actualización masiva de **Habilitar incrementos de cantidad** y **Incrementos de cantidad** ahora funciona según lo esperado. [GitHub-29544](https://github.com/magento/magento2/issues/29544)

<!-- MC-41801-->

* Ahora puede duplicar correctamente un catálogo compartido que contenga SKU de solo número. Anteriormente, la aplicación generaba un error al intentar duplicar un catálogo compartido porque la función `\Magento\Catalog\Model\ProductIdLocator` La clase no funcionaba correctamente con los SKU de solo número.

<!-- MC-41575-->

* La aplicación ya no genera un error de JavaScript después de habilitar la sincronización de productos recientes con el administrador. Anteriormente, la aplicación mostraba este error de JavaScript: `Cannot read property 'status' of undefined`.

<!-- MC-41534-->

* Las actualizaciones de diseño de tema personalizado ahora se aplican según lo esperado. Anteriormente, se omitían las actualizaciones de diseño de temas personalizadas.

<!-- MC-41499-->

* La caché de categoría del producto ahora se borra según lo esperado por `cron` during `indexer_update_all_views` ejecución. Anteriormente, los recuentos de productos en la página Categoría después de la reindexación eran incorrectos.

<!-- MC-41422-->

* Los valores de atributo ahora permanecen inalterados cuando no se especifica ningún atributo en una solicitud de API de REST de actualización de producto para una vista de tienda. Anteriormente, si no se especificaba ningún atributo, la aplicación restablecía el valor del atributo a su valor de ámbito predeterminado.

<!-- MC-41284-->

* La cuadrícula Productos de administración (Administrador) **Catálogo** > **Productos**) ahora muestra el recuento de productos correcto cuando los productos se filtran por SKU.

<!-- MC-40873-->

* La aplicación ahora muestra un estado de existencias preciso cuando se agrega un producto a una página de CMS cuando los permisos de categoría están activados y evita que se muestre el precio del grupo del cliente especificado. Anteriormente, todos los productos se mostraban como fuera de existencias independientemente del estado real de las existencias.

<!-- MC-40859-->

* El campo de entrada Precio de bloque de precio de grupo de clientes de precios avanzados ahora tiene una anchura mínima de cinco dígitos. Anteriormente, solo dos símbolos eran visibles en este campo en visualizaciones de baja resolución.

<!-- MC-40825-->

* La aplicación ahora elimina correctamente una imagen multimedia del producto después de eliminar un producto. Anteriormente, la imagen multimedia del producto permanecía en la carpeta después de eliminar correctamente el producto.

<!-- MC-40811 magento/magento2#32042-->

* El diseño de la página ahora se actualiza según lo esperado al crear o editar un producto en Administración y, a continuación, crear una actualización de diseño de programación. [GitHub-32007](https://github.com/magento/magento2/issues/32007)

<!-- MC-40773-->

* Un atributo de producto personalizado con un valor de cero ahora se puede guardar correctamente como en blanco. Anteriormente, la aplicación no actualizaba este valor a blanco.

<!-- MC-40736 ENGCOM-8789-->

* Los archivos personalizados de actualización del diseño de categorías ahora se aplican a los productos según lo esperado. Anteriormente, el controlador del archivo de actualización (`catalog_category_view_*`) no coincide con el identificador del producto. [GitHub-27285](https://github.com/magento/magento2/issues/27285)

<!-- MC-40679-->

* La ordenación se ha deshabilitado para la columna Impuesto fijo del producto (FPT) de la lista de productos de administración. Anteriormente, la página Productos no se podía volver a cargar después de que se hubiera ordenado la columna FPT.

<!-- MC-40443-->

* La vista previa del widget de productos de Page Builder ahora funciona según lo esperado en una implementación multisitio web cuando los productos coincidentes tienen un precio diferente en cada sitio web.

<!-- MC-40344 ENGCOM-8629-->

* Clasificación por posición en la búsqueda de productos mediante GET `/rest/V1/products/?searchCriteria[filterGroups]` ahora funciona según lo esperado. Anteriormente, la recopilación de productos no tenía un campo `position` para ordenar. [GitHub-31591](https://github.com/magento/magento2/issues/31591)

<!-- MC-40122-->

* Los usuarios administradores ahora pueden ver espacios dobles en la variable **Nombre** y **SKU** campos de la cuadrícula del producto. Anteriormente, la aplicación contraía varios espacios en un solo espacio.

<!-- MC-39869-->

* Los productos ahora se muestran como fuera de existencias en la tienda cuando la cantidad vendible en el Administrador es 0. Anteriormente, estos productos estaban enumerados como en existencias en la tienda y la aplicación mostraba una actividad **Agregar al carro** botón. [GitHub-31117](https://github.com/magento/magento2/issues/31117)

<!-- MC-39809-->

* Los administradores ahora pueden agregar productos con opciones personalizables `(File)` a la cuadrícula Artículos pedidos de la sección Carro de compras (columna Actividades del cliente) de la página Cliente administrador. Anteriormente, la aplicación no agregaba el elemento a la lista porque el valor no tenía el formato correcto antes de insertarlo en `\Magento\Catalog\Model\Product\Type\AbstractType::_prepareOptions`.

<!-- MC-39619-->

* La aplicación ya no solicita a los compradores que seleccionen una opción de producto para un producto agrupado que solo tenga una opción.

<!-- MC-39617-->

* La aplicación ahora muestra todas las subcategorías en actualizaciones de diseño (categorías de anclaje y no anclaje) durante la creación de un nuevo widget.

<!-- MC-39481-->

* La variable `product` query ya no sobrescribe los valores predeterminados de todas las vistas de tiendas en una implementación de varias tiendas cuando el nombre de un producto se actualiza solo para una vista de tienda. [GitHub-31083](https://github.com/magento/magento2/issues/31083)

<!-- MC-39470 magento/magento2#31492-->

* Adobe Commerce actualiza el recuento total de páginas como se espera cuando se cambia el valor por página de la lista Productos relacionados con el administrador, Ventas ascendentes y Ventas cruzadas. [GitHub-31059](https://github.com/magento/magento2/issues/31059)

<!-- MC-39444-->

* Los administradores ahora pueden agregar productos con dos o más opciones personalizables `(File)` a un pedido por SKU.

<!-- MC-39140-->

* La aplicación ya no genera un error cuando un administrador con permisos restringidos agrega un widget de producto a una página de CMS en el Administrador. Anteriormente, la aplicación generaba este error cuando el administrador hacía clic en el **Guardar** botón:  `We are sorry, an error has occurred while generating the content`.

<!-- MC-39134-->

* Las páginas de detalles del producto ahora se abren con la opción personalizable de fecha rellenada con la fecha del pedido anterior cuando **Usar calendario de JavaScript** está activada. La resolución del valor de la opción de fecha personalizada ahora vuelve a tener un formato alternativo si el valor no tiene formato basado en la configuración actual. Anteriormente, el valor de la opción de fecha personalizada estaba vacío.

<!-- MC-39104-->

* La aplicación ahora solo muestra un error en el carro de compras cuando el producto no está en existencias. Anteriormente, la aplicación mostraba mensajes redundantes. [GitHub-27469](https://github.com/magento/magento2/issues/27469)

<!-- MC-35717  magento/partners-magento2ee#427-->

* Los administradores ahora pueden agregar un producto con una opción personalizable `(File)` a un pedido por SKU. [GitHub-30285](https://github.com/magento/magento2/issues/30285)

<!-- MC-30625-->

* Ahora puede guardar un producto y un precio sin especificar `type_id`. [GitHub-13639](https://github.com/magento/magento2/issues/13639)

<!-- MC-39024-->

* Los productos de grupo ya están disponibles en la tienda, tal como se espera cuando se produce un REST `PUT /V1/products/:sku/links` se usa para asociar un nuevo producto secundario a un nuevo producto de grupo. Anteriormente, los productos no se indexaban correctamente después de ejecutarse `bin/magento cron:run`.

<!-- ENGCOM-9010 8947-->

* Ya no se puede crear un producto con un `NULL` Valor de SKU. Anteriormente, se podía crear un producto sin un valor SKU a través de un importador personalizado o directamente en la base de datos, pero cuando se intentaba editarlo desde el Administrador, la aplicación generaba un error. [GitHub-27411](https://github.com/magento/magento2/issues/27411), [GitHub-32525](https://github.com/magento/magento2/issues/32525)

<!-- ENGCOM-8902-->

* Al agregar las opciones personalizadas necesarias a un producto simple, ya no se elimina de los productos compuestos principales sin previo aviso. La aplicación ahora muestra una advertencia informativa y no guarda el producto.  Anteriormente, la aplicación guardaba los cambios del producto y no mostraba ninguna advertencia. [GitHub-30492](https://github.com/magento/magento2/issues/30492)

### Regla del catálogo

<!-- MC-39896-->

* La variable `products` query ahora devuelve los valores actuales cuando se aplica una regla de precio de catálogo a un artículo. [GitHub-26738](https://github.com/magento/magento2/issues/26738)

<!-- ENGCOM-8367-->

* Tablas temporales que comienzan por `catalogrule_product__temp` ahora se eliminan del modo esperado cuando la reindexación falla después de que caduque una regla de carro o catálogo, se deshabilite o se vuelva inactiva. [GitHub-22273](https://github.com/magento/magento2/issues/22273)

<!-- ENGCOM-8949-->

* Las zonas horarias ahora se aplican del mismo modo en `\Magento\CatalogRule\Model\Indexer\IndexBuilder::reindexById` y `\Magento\CatalogRule\Model\Indexer\IndexBuilder::reindexByIds`. [GitHub-29549](https://github.com/magento/magento2/issues/29549)

### Contenido de CMS

<!-- MC-41471-->

* Las imágenes grandes ahora cambian de tamaño tal como se espera durante la carga cuando el ajuste **Habilitar el cambio de tamaño del front-end** está habilitado.

<!-- MC-40663 ENGCOM-8883-->

* Se ha corregido la administración de errores para el controlador de guardado de páginas de CMS. Anteriormente, cuando un `Error` se ha generado en el `cms_page_prepare_save` , la aplicación pasó este objeto a la función `addExceptionMessage` rompiendo el contrato porque esta función espera un `Exception`. Esto se resolvió añadiendo un mensaje de error usando la variable `addErrorMessage` función. [GitHub-30149](https://github.com/magento/magento2/issues/30149)

<!-- MC-33490 magento/partners-magento2ee#435 -->

* Ahora puede asignar una nueva página a varios nodos desde la pestaña Jerarquía de páginas de edición de CMS. Anteriormente, se producía una infracción de restricción única cuando intentaba asignar la página a un nodo. [GitHub-363](https://github.com/magento/partners-magento2ee/issues/363)

### Productos configurables

<!-- MC-40719-->

* La aplicación ya no duplica miniaturas de productos en la galería de imágenes de un producto al hacer clic en las opciones configurables de un producto.

<!-- MC-37418-->

* La ventana emergente de configuración que la aplicación muestra cuando edita un producto configurable desde una lista de deseos ahora se cierra según lo esperado al hacer clic en el **OK** botón.

<!-- MC-39878  magento/magento2#31472-->

* La aplicación ahora genera correctamente facturas para pedidos que contienen solo un producto configurable. [GitHub-31143](https://github.com/magento/magento2/issues/31143)

<!-- ENGCOM-8673-->

* Los compradores ahora pueden agregar productos configurables al carro desde una vista de tienda no predeterminada. Anteriormente, cuando el comprador en una vista de tienda no predeterminada intentaba añadir un producto configurable, la aplicación mostraba este error: `Could not add item to cart. Please check required options and try again`. [GitHub-31660](https://github.com/magento/magento2/issues/31660)

### Política de seguridad de contenido (CSP)

<!-- ENGCOM-8577-->

* La Política de seguridad de contenido ahora admite la carga de imágenes y fuentes codificadas con base64 a través de `data: scheme`.

### cron

<!-- MC-30804-->

* Las consultas de limpieza cron se han refactorizado para reducir o eliminar los siguientes problemas de rendimiento: `cron` los trabajos permanecen estancados en un estado pendiente, las consultas MySQL son cada vez más lentas y aumenta el uso de la CPU. [GitHub-26507](https://github.com/magento/magento2/issues/26507)

<!-- ENGCOM-8571-->

* `cronjobs` que han estado en estado `running` para más de 24 horas ahora se cambia automáticamente a estado `error`.  Como resultado, una nueva instancia de ese trabajo se puede ejecutar de nuevo y no es necesario cambiar manualmente el estado del trabajo cuando un trabajo permanece establecido incorrectamente en estado `running`. Anteriormente, si un `cronjob` estaban atascados en estado `running`, la aplicación impedía que se iniciaran nuevas instancias del mismo trabajo y tenía que cambiar manualmente el estado del trabajo. [GitHub-8933](https://github.com/magento/magento2/issues/8933)

<!-- ENGCOM-8571-->

* `cron` los trabajos ahora se completan según lo esperado y ya no se genera este error de serialización:  `[Magento\Framework\DB\Adapter\DeadlockException]SQLSTATE[40001]: Serialization failure: 1213 Deadlock found when trying to get lock; try restarting transaction, query was: DELETE FROM cron_schedule WHERE (status = 'missed') AND (job_code in ('indexer_reindex_all_invalid', 'indexer_update_all_views', 'indexer_clean_all_changelogs')) AND (created_at < '2018-09-28 18:32:28')`. [GitHub-18409](https://github.com/magento/magento2/issues/18409)

<!-- ENGCOM-8571-->

* `indexer_update_all_views`  los trabajos de cron ahora se ejecutan según lo esperado después de un error anterior. La ejecución fallida se marca como un error en la variable `cron_schedule schedule`y la ejecución posterior no falla automáticamente. Anteriormente, la variable `cron_schedule` tabla rellenada con trabajos pendientes, y `indexer_update_all_views` el trabajo de cron no se ejecutó. [GitHub-23054](https://github.com/magento/magento2/issues/23054)

<!-- ENGCOM-8571-->

* `cron` ya no se producen bloqueos como resultado de `cron` intentando establecer un bloqueo en implementaciones grandes en las que los grupos se superpusieron. [GitHub-8933](https://github.com/magento/magento2/issues/8933)

<!-- ENGCOM-8571-->

* `cron` ya no se producen bloqueos en la variable `cron_schedule` después de `cron` se han ejecutado trabajos. [GitHub-22438](https://github.com/magento/magento2/issues/22438)

### Atributos del cliente personalizados

<!-- MC-41611-->

* La variable **Estado** en la libreta de direcciones de la cuenta de cliente de tienda ahora se carga como y permanece como un elemento de página desplegable. La variable **Submit** ahora está desactivado hasta que todos los elementos de la página se hayan cargado por completo. Anteriormente, la aplicación cargaba este campo como un cuadro de texto antes de procesarlo como elemento desplegable, y los compradores podían introducir y guardar valores en el campo de texto, lo que posteriormente causaba un error durante el cierre de compra.

<!-- MC-40906 magento/partners-magento2ee#509-->

* La aplicación ahora muestra correctamente los atributos de dirección de cliente personalizados en las páginas de tienda y de orden de administración. Anteriormente, la opción seleccionada del atributo desplegable faltaba en la sección Address information y el valor del atributo de entrada contenía el código de atributo. [GitHub-508](https://github.com/magento/partners-magento2ee/issues/508)

<!-- MC-40329-->

* La aplicación ya no genera un error al guardar un atributo de dirección de cliente con un archivo adjunto en el campo Dirección del cliente administrador al cargar archivos. Esto se produjo debido a la falta de una sentencia de retorno en la acción del controlador. Anteriormente, la aplicación generaba este error: `Something went wrong while saving the file`.

<!-- MC-39354-->

* Las llamadas a la API del carro de compras de REST ahora devuelven valores de atributos personalizados correctos para las direcciones de facturación y envío. Anteriormente, los atributos de dirección personalizados se mostraban incorrectamente en la página de detalles del pedido de la página Mi tienda de cuenta y en el Administrador.

<!-- MC-24495-->

* La aplicación ahora gestiona correctamente archivos que contienen atributos de dirección del cliente con tipo de entrada `file (attachment)`. Anteriormente, la aplicación generaba este error durante la carga del archivo adjunto: `Something went wrong while saving the file`.

### Cliente

<!-- MC-41216-->

* El correo electrónico de crédito del almacén ahora tiene en cuenta el ámbito seleccionado y se envía desde la dirección de correo electrónico correcta.

<!-- MC-40579-->

* El filtrado por fecha de creación de la cuenta ahora produce resultados que cumplen con la configuración de zona horaria y que capturan todas las cuentas creadas relevantes.

<!-- MC-40502-->

* El filtro de cuadrícula de cliente ahora utiliza una opción de sitio web correcta para un usuario restringido si los datos se almacenaron en caché previamente. Anteriormente, el filtro de cuadrícula de cliente recuperaba parámetros de sitio web de la caché e incluía datos incorrectos para usuarios restringidos.

<!-- MC-39189-->

* La aplicación ya no genera una excepción en la página Clientes administradores cuando se elimina un sitio web en una implementación multisitio web. Anteriormente, cuando un administrador intentaba acceder a la lista completa de clientes, la aplicación no mostraba todos los clientes y mostraba el siguiente error: `The website with id 2 that was requested wasn't found. Verify the website and try again`.

<!-- MC-38913-->

* Los administradores con permiso ahora pueden reasignar clientes a distintos sitios web desde la pestaña Información de la cuenta del cliente.

<!-- MC-39852-->

* Ahora puede cargar un archivo correctamente al crear un atributo de dirección de cliente con un tipo de entrada `(File)`. Anteriormente, cuando intentaba cargar y guardar un archivo, la aplicación generaba este error: `Something went wrong while saving the file`.

### Segmento de cliente

<!-- MC-40999-->

* La aplicación ahora muestra los productos relacionados en función de los segmentos de clientes en la tienda, según lo esperado. Anteriormente, la aplicación no mostraba esta sección cuando se creaba una regla de productos relacionada para segmentos de clientes específicos.

<!-- MC-40503-->

* Los bloques dinámicos ahora se muestran para clientes registrados en sus carros de compras cuando el segmento de cliente correspondiente se aplica tanto a clientes como a clientes registrados. Anteriormente, la aplicación solo mostraba el bloque para los clientes.

<!-- MC-40385-->

* Los segmentos del cliente ahora se actualizan automáticamente después de realizar un pedido desde el administrador. Anteriormente, después de crear una orden de administración, el usuario administrador tenía que actualizar manualmente los datos de segmentos relacionados navegando a segmentos de clientes relacionados y haciendo clic en el botón **Actualizar datos de segmentos** botón.

<!-- MC-39490-->

* La aplicación ahora muestra bloques dinámicos en el carro de compras para todos los clientes en los segmentos de clientes relevantes. Anteriormente, los clientes no veían ningún bloque aunque el segmento de clientes incluyera tanto a clientes como a clientes registrados.

<!-- MC-39464-->

* Problemas de rendimiento de la base de datos que se derivan de reglas de segmentación de clientes que utilizan la variable `Product was Ordered` se han resuelto.

<!-- MC-38895-->

* Se ha agregado un observador de eventos de segmento de cliente para la API REST/SOAP. Como resultado, los segmentos de clientes ahora se actualizan automáticamente según lo esperado si los criterios definidos en los segmentos coinciden cuando los pedidos se realizan a través de la API REST/SOAP.

<!-- MC-38346-->

* Se ha agregado un procesador de eventos de segmento de cliente para las solicitudes de GraphQL. Anteriormente, los descuentos en reglas de precios del carro de compras no se aplicaban al carro de compras cuando se usaba un segmento de cliente en una condición de regla de precios del carro de compras. [GitHub-371](https://github.com/magento/partners-magento2ee/issues/371)

### Directorio

<!-- MC-39520-->

* La aplicación ya no genera una excepción cuando un comprador introduce un código postal no válido durante la sección de envío del flujo de trabajo de cierre de compra. [GitHub-23371](https://github.com/magento/magento2/issues/23371)

### Descargable

<!-- MC-35779-->

* La aplicación ahora muestra vínculos a productos descargables en el correo electrónico de nuevo pedido cuando el pedido contiene un producto descargable y un producto configurable con una opción descargable. Anteriormente, la aplicación mostraba el vínculo al producto descargable independiente, pero no el vínculo al producto configurable con una opción descargable.

### Bloque dinámico (anteriormente banner)

<!-- MC-40327-->

* Los bloques dinámicos ahora solo se muestran en la página especificada. Anteriormente, la aplicación mostraba todos los banners asignados al widget en todas las páginas si no se especificaban bloques dinámicos.

<!-- MC-39839-->

* Ahora puede guardar bloques dinámicos con contenido vacío.

### EAV

<!-- MC-41756-->

* Los valores de fecha de atributo de la dirección del cliente ahora se guardan en formato de cuatro dígitos en lugar de en formato de dos dígitos.

### Correo electrónico

<!-- MC-39757-->

* El vínculo de restablecimiento de contraseña en la página de restablecimiento de contraseña del administrador ahora funciona según lo esperado. Anteriormente, cuando se utilizaba una plantilla personalizada para la página restablecer contraseña de administrador, la aplicación mostraba este mensaje cuando un administrador hacía clic en el vínculo dentro del correo electrónico: `Your password reset link has expired`. Esto ocurría porque la plantilla de correo electrónico personalizada contenía la variable incorrecta para el ID de usuario.

<!-- MC-41588-->

* El envío de correo electrónico del cliente desde el administrador ahora funciona correctamente cuando se habilita en el nivel de vista de tienda. Anteriormente, la aplicación no enviaba correos electrónicos de clientes cuando la configuración de notificaciones por correo electrónico estaba habilitada en el nivel de vista de tienda, pero no en el nivel global.

<!-- MC-40950-->

* La aplicación ahora envía correos electrónicos como se espera en implementaciones de varios sitios donde no todos los sitios web han habilitado el envío asincrónico de correo electrónico. Anteriormente, si al menos un sitio web tenía esta configuración deshabilitada, el correo electrónico no se enviaba desde ningún sitio web, aunque estuviera habilitado. Los correos electrónicos de facturas, envíos y notas de crédito tenían problemas similares. Sin embargo, los correos electrónicos Comentarios de pedidos, Comentarios de facturas, Comentarios de envíos y Comentarios de notas de crédito se enviaron correctamente. [GitHub-31950](https://github.com/magento/magento2/issues/31950)

<!-- MC-34323 magento/partners-magento2ee#505-->

* El mensaje de correo electrónico que la aplicación envía cuando comparte un registro de regalo del administrador ahora contiene un vínculo válido a la ubicación del registro. Anteriormente, al tomar este vínculo, se producía un error 404. [GitHub-504](https://github.com/magento/partners-magento2ee/issues/504)

<!-- MC-30127 magento/magento2#31455-->

* Los PDF de facturas y facturas ahora incluyen los mismos precios para los productos agrupados que se esperaba. Anteriormente, los PDF de facturas incluían el precio incorrecto de los productos del paquete. [GitHub-12856](https://github.com/magento/magento2/issues/12856)

<!-- ENGCOM-9021-->

* Se ha añadido la conversión de cadenas al método de filtro de plantilla de correo electrónico para garantizar que el valor devuelto sea un `string`. Anteriormente, cuando se capturaba una excepción sin estar en modo de desarrollador, la aplicación devolvía un valor `phrase` objeto. Esto, a su vez, provocó la muerte de `Uncaught TypeError`. [GitHub-32671](https://github.com/magento/magento2/issues/32671)

<!-- ENGCOM-8807-->

* Los correos electrónicos de confirmación de pedido se envían según lo esperado cuando se habilita la entrega asincrónica (**Almacenes**  >  **Configuración**  >  **Ventas**  > **Correos electrónicos de ventas**  >  **Configuración general**  >  **Envío asincrónico**) en un sitio web en una implementación de varios sitios. [GitHub-31950](https://github.com/magento/magento2/issues/31950)

<!-- MC-18023 ENGCOM-9000-->

* La aplicación ahora registra un error como se espera cuando se produce una excepción cuando un cliente intenta enviar un correo electrónico desde el formulario Contactar con nosotros. [GitHub-23645](https://github.com/magento/magento2/issues/23645)

### Marcos

<!-- MC-41712-->

* Las clases principales del administrador ahora se comprueban para la anotación docblock junto con la clase original y las interfaces heredadas. Anteriormente, como no se comprobaban las clases principales, realizar cualquier acción relacionada con el cliente en el Administrador que activara un evento daba como resultado un error. La aplicación registró este error en el registro de excepciones: `report.CRITICAL: Method's return type must be specified using @return annotation.`.

<!-- MC-41192-->

* La aplicación ya no genera un error grave cuando el servidor de Redis se detiene en una implementación en la que está habilitado el almacenamiento en caché de páginas de Redis.

<!-- MC-40739-->

* La aplicación ahora respeta el **Excluir carpeta de medios de la copia de seguridad** configuración cuando la copia de seguridad está habilitada con `bin/magento config:set system/backup/functionality_enabled 1`. Anteriormente, se realizaba una copia de seguridad de la carpeta de medios a pesar de esta configuración porque la ruta a `/magento` se formó incorrectamente con un // doble.

<!-- MC-40654 ENGCOM-8881-->

* La aplicación traduce ahora todas las cadenas traducibles como se espera para la página del carro de administración. Anteriormente, la carga de traducción se producía demasiado tarde y se omitían todos los observadores suscritos a la acción del controlador antes del envío. [GitHub-31849](https://github.com/magento/magento2/issues/31849)

<!-- MC-39776-->

* La validación de formularios en la página Crear nueva cuenta de cliente ahora funciona correctamente cuando el **Iniciar sesión como cliente** habilitar la configuración de extensión está desactivada. Anteriormente, la aplicación generaba un error de JavaScript.

<!-- MC-39537-->

* Uso `bin/magento setup:db-schema:split-sales` mover tablas de base de datos ahora funciona como se espera. Las tablas ahora se crean y rellenan correctamente con los datos. Anteriormente, como la comprobación de la existencia de la tabla era incorrecta, la aplicación se bloqueaba `SQLSTATE` errores al ejecutar `bin/magento setup:db-schema:split-sales`.

<!-- MC-39193-->

* Gestión de excepciones para procesos secundarios ramificados por `ProcessManager` se ha mejorado. Cuando se produce una excepción ahora, el proceso principal se cierra y un mensaje de error se muestra una sola vez. Anteriormente, se registraban varios errores de indexador y se mostraban varios mensajes. [GitHub-30622](https://github.com/magento/magento2/issues/30622)

<!-- MC-39132-->

* Complementos globales de Adobe Commerce (por ejemplo, `webapi_rest` y `graphql` ) ya no se activan para un nuevo tipo de área personalizada cuando la variable `di.xml` de este archivo de área no contiene complementos registrados.

<!-- MC-38770-->

* Las excepciones que se producen durante la inicialización ya no se almacenan en caché y ahora se déclencheur un código de respuesta 500.

<!-- MC-33179  magento/partners-magento2ee#431-->

* Los comerciantes ahora pueden asignar o eliminar una imagen de un evento de catálogo por vista de tienda. Anteriormente, cuando se cambiaba la vista de la tienda al editar un evento de catálogo, la variable **Eliminar imagen** La casilla de verificación no estaba activa y la aplicación mostraba este error: `Uncaught ReferenceError: toggleValueElements is not defined at HTMLInputElement.onclick`. [GitHub-364](https://github.com/magento/partners-magento2ee/issues/364)

<!-- ENGCOM-8232-->

* El último controlador combinado en una `communication.xml` ya no anula todos los controladores creados anteriormente. [GitHub-29528](https://github.com/magento/magento2/issues/29528)

### Correcciones generales

<!-- MC-41194-->

* La aplicación ahora muestra el número correcto de estrellas en la página Mis revisiones de productos y en las revisiones recientes de la página Mi cuenta . Anteriormente, la aplicación aplicaba las estrellas de revisión solo a la primera revisión y dejaba las otras revisiones en la página sin comenzar.

<!-- MC-40653-->

* Los vínculos de cuenta en los encabezados ahora siguen los estándares WCAG. Anteriormente, los vínculos de cuenta en los encabezados contenían ID duplicados, lo que provocaba que fallara la validación de WCAG.

<!-- MC-40528-->

* La aplicación ahora guarda las fechas de los eventos del catálogo en las zonas horarias UTC. Anteriormente, la aplicación guardaba fechas de evento de catálogo en el huso horario del usuario.

<!-- MC-39765-->

* La aplicación ya no genera errores de registro del sistema cuando un comprador invitado utiliza una dirección no válida. Anteriormente, la aplicación mostraba de forma intermitente este error en lugar de procesar la página: `No such entity with addressId`. [GitHub-15115](https://github.com/magento/magento2/issues/15115)

<!-- MC-39747-->

* El proceso de cambio de tamaño de la imagen ya no se detiene para las imágenes en un formato no admitido. Anteriormente, cuando `catalog:images:resize` se encontró un formato de imagen no admitido, el proceso se detuvo y la aplicación mostró este error: `bin/magento catalog:images:resize Unsupported image format`.

<!-- ENGCOM-8925-->

* Se ha añadido al administrador la compatibilidad con WEBP y AVIF para imágenes de logotipo. [GitHub-32495](https://github.com/magento/magento2/issues/32495)

<!-- MC-38156-->

* Ya no puede cambiar el ámbito de la variable `media_gallery` atributo. Anteriormente, cuando se cambiaba el ámbito de la variable `media_gallery` volver a `global`, la aplicación generó un error.

<!-- MC-36818  magento/partners-magento2ee#470-->

* Los productos relacionados que se añadieron como una actualización programada ya no se muestran en una página de producto de tienda después de la fecha de finalización de la actualización. [GitHub-469](https://github.com/magento/partners-magento2ee/issues/469)

<!-- MC-34489 magento/partners-magento2ee#491-->

* La aplicación ahora muestra un mensaje informativo y preciso al hacer clic en **Administrar elementos** en la página Registro de regalos de cuenta y los productos del registro no están en existencias. Anteriormente, la aplicación generaba este error: `Error: Call to a member function getId() …`. [GitHub-490](https://github.com/magento/partners-magento2ee/issues/490)

<!-- MC-33667-->

* Ahora puede agregar una página de CMS desde la página Agregar nueva página a la jerarquía raíz del sitio web como se espera.

<!-- MC-33499 magento/partners-magento2ee#446-->

* El filtrado ahora funciona como se espera en la lista de exportaciones programadas cuando se selecciona el tipo de entidad. Anteriormente, el filtro no funcionaba y la aplicación generaba un error de JavaScript. [GitHub-361](https://github.com/magento/partners-magento2ee/issues/361)

<!-- MC-30084 ENGCOM-8674-->

* Las imágenes de categoría ahora se copian según lo esperado del `catalog/tmp/category` para `catalog/category` cuando las categorías se guardan mediante el método de almacenamiento de la base de datos. La fila de la imagen en la `media_storage_file_storage` la tabla ahora también tiene la `directory_id`. [GitHub-11995](https://github.com/magento/magento2/issues/11995)

<!-- MC-24768-->

* Ahora se notifica a los comerciantes de las cachés invalidadas como se espera después de enviar los cambios a la jerarquía de CMS. Anteriormente, la aplicación no invalidaba las cachés al guardar la jerarquía de CMS.

<!-- MC-24725-->

* Se han reducido las solicitudes de AJAX redundantes a la sección del carro de compras del carro de compras. Anteriormente, la aplicación no cargaba correctamente el subtotal del carro de compras, lo que activaba la recarga del carro de compras de nuevo.

<!-- MC-23740-->

* Se ha añadido la validación para las direcciones URL a fin de evitar que las palabras reservadas se incluyan en las claves URL. Consulte [Definición de identificadores de recursos uniformes (URI) conocidos](https://tools.ietf.org/html/rfc5785)

<!-- ENGCOM-9037-->

* En implementaciones que ejecutan PHP 7.4, la aplicación ahora devuelve un error 404 cuando la variable **Generar reescrituras de URL de &quot;categoría/producto&quot;** está configurada en **No**, y un comprador intenta acceder a una ruta de categoría inexistente. Anteriormente, la aplicación devolvía un error 500 que afirmaba: `Trying to access array offset on value of type bool`. [GitHub-31984](https://github.com/magento/magento2/issues/31984)

<!-- MC-32257 magento/partners-magento2ee#507-->

* Ahora puede editar correctamente un producto creado mediante un conjunto de atributos desde el que **Diseño Grupo Y Programar Actualización De Diseño** se han eliminado los grupos.  Anteriormente, cuando intentaba editar un producto creado a partir de ese conjunto de atributos, la aplicación generaba un error grave. [GitHub-44](https://github.com/magento/partners-magento2ee/issues/44)

<!-- ENGCOM-8901-->

* `nowdoc` ha reemplazado `heredoc` en el `Magento_Backend` alternador de tiendas. [GitHub-32262](https://github.com/magento/magento2/issues/32262)

<!-- ENGCOM-8539-->

* Los administradores ahora se redirigen directamente a la página de administración solicitada después del inicio de sesión.  Anteriormente, cuando un administrador iniciaba sesión, se les redirigía al panel de administración (o a la página que se configurara como página de inicio) y tenía que navegar manualmente a su destino. [GitHub-31042](https://github.com/magento/magento2/issues/31042)

<!-- ENGCOM-8685-->

* Se agregaron las regiones de Argentina, Bolivia, Chile, Ecuador, Guyana, Paraguay, Perú, Surinam y Venezuela a la `directory_country_region` tabla. [GitHub-31169](https://github.com/magento/magento2/issues/31169)

<!-- ENGCOM-8505-->

* Se han añadido las regiones de Albania, Dinamarca, Grecia, Islandia, Portugal y Suecia al `directory_country_region` tabla. [GitHub-31040](https://github.com/magento/magento2/issues/31040)

<!-- MC-30104 magento/magento2#31480 -->

* Los mensajes ahora se marcan como errores en la cola de mensajes de MysqlMQ cuando se producen excepciones. [GitHub-18140](https://github.com/magento/magento2/issues/18140)

<!-- ENGCOM-8579-->

* La aplicación ahora hace referencia al objeto de clase correcto al cargar información de impuestos para las páginas de nota de crédito de administración y de factura. [GitHub-31197](https://github.com/magento/magento2/issues/31197)

<!-- MC-40346-->

* La integración de Royal Mail Click &amp; Drop ahora funciona según lo esperado. Anteriormente, la aplicación generaba este error al intentar activar esta integración: `Sorry! Something went wrong. Please try again later`. [GitHub-28996](https://github.com/magento/magento2/issues/28996)

<!-- ENGCOM-8498-->

* La aplicación ahora muestra un mensaje de error informativo cuando se pasa un envío, una nota de crédito o un ID de factura incorrectos en una dirección URL. Anteriormente, la aplicación generaba un error grave. [GitHub-30424](https://github.com/magento/magento2/issues/30424)

<!-- ENGCOM-8632-->

* Se ha eliminado la recursión en la ubicación de los archivos estáticos.  La aplicación ahora muestra una página 404 en lugar de un error 500. Anteriormente, un error en la configuración predeterminada de NGINX conducía a una recursión infinita. [GitHub-31530](https://github.com/magento/magento2/issues/31530)

<!-- ENGCOM-8550-->

* El nombre del `cms_index_noroute.xml` se ha corregido a `cms_noroute_index.xml`. [GitHub-31300](https://github.com/magento/magento2/issues/31300)

<!-- ENGCOM-8516-->

* La variable `.editorconfig` se ha refactorizado para corregir el formato automático de `db_schema_whitelist.json` archivos. [GitHub-31171](https://github.com/magento/magento2/issues/31171)

<!-- ENGCOM-9018-->

* Al cambiar el tamaño de una ventana del explorador, ya no se generan déclencheur en los eventos de aumento de enlace duplicados. [GitHub-30788](https://github.com/magento/magento2/issues/30788)

<!-- ENGCOM-8722-->

* La aplicación ya no genera una excepción SQL al filtrar `Magento\Users\Model\ResourceModel\Users\Collection` por `user_id`. [GitHub-31216](https://github.com/magento/magento2/issues/31216)

### Tarjetas de regalo

<!-- MC-40412-->

* Los cargos de pago pendientes ahora se eliminan de una tarjeta de regalo como se espera cuando se cancela una tarjeta de regalo. Anteriormente, la aplicación generaba un error cuando `cron` corrió después de que la tarjeta de regalo fuera borrada.

<!-- MC-37658-->

* Los compradores ahora pueden eliminar tarjetas de regalo de un pedido en la página Revisar pedido al realizar la comprobación con varias direcciones. Anteriormente, la aplicación no eliminaba la tarjeta de regalo del pedido cuando el comprador seleccionaba la tarjeta y hacía clic en ella **Eliminar**.

<!-- MC-34407-->

* La aplicación ahora muestra el nuevo precio de una tarjeta de regalo en el carro de compras cuando cambia el valor de la tarjeta de regalo después de agregarla al carro de compras.

<!-- MC-32651-->

* La lógica de validación del rango de precios se ha agregado a la página de creación de la tarjeta de regalo. Anteriormente, un administrador podía crear una tarjeta con un valor mínimo que excediera el valor máximo. [GitHub-493](https://github.com/magento/partners-magento2ee/issues/493)

<!-- MC-32638979 magento/partners-magento2ee#40851-->

* La variable `addRequisitionListItemsToCart` La consulta ahora devuelve la cantidad de una tarjeta regalo personalizada como se espera cuando la solicitud no contiene un valor para `allow_open_amount`.

<!-- MC-32373-->

### Mensaje de regalo

<!-- MC-38655-->

* La variable `setGiftOptionsOnCart` la mutación ahora crea correctamente mensajes de regalo. [GitHub-388](https://github.com/magento/partners-magento2ee/issues/388)

### Registro de regalos

<!-- MC-33057 magento/partners-magento2ee#467-->

* **Fecha del evento** los valores son ahora los mismos en la tienda y el administrador durante la creación o edición del registro de regalos. Anteriormente, cada vez que editaba y guardaba el registro de regalos, la aplicación ajustaba el **Fecha del evento** un día atrás en la tienda y en el administrador. [GitHub-466](https://github.com/magento/partners-magento2ee/issues/466)

<!-- MC-32587  magento/partners-magento2ee#511-->

* La aplicación ya no muestra productos desactivados en los registros de regalos. Anteriormente, si un producto se deshabilitaba después de agregarse a un registro de regalos, la aplicación mostraba este mensaje cuando un comprador accedía al registro: `Error: Call to a member function getId() …`. [GitHub-510](https://github.com/magento/partners-magento2ee/issues/510)

### Ajuste de regalo

<!-- MC-38260-->

* La traducción de las etiquetas de ajuste de regalo para las vistas de tiendas ahora funciona según lo esperado.

<!-- MC-36749-->

* El ajuste de regalo ahora se aplica según lo esperado a los pedidos que se envían a varias direcciones.

<!-- MC-34820-->

* La aplicación ahora elimina los cargos de envoltura de regalos del carro de compras cuando se han eliminado todos los productos.

<!-- MC-32259 magento/partners-magento2ee#500-->

* Los totales de nota de crédito ahora son correctos cuando la nota de crédito contiene envoltura de regalo y cargos configurables por producto. Anteriormente, el importe de impuesto de ajuste de regalo no siempre se incluía en el total de la nota de abono. [GitHub-34](https://github.com/magento/partners-magento2ee/issues/34)

### Google Analytics

<!-- ENGCOM-8450-->

* La aplicación ya no genera un error cuando un administrador intenta cargar una página en la tienda cuando los Google Analytics están habilitados. Una entrada CSP para `connect-src` se ha agregado para permitir solicitudes de AJAX a www.google-analytics.com. [GitHub-30880](https://github.com/magento/magento2/issues/30880)

### Administrador de etiquetas de Google

<!-- MC-39072-->

* El componente IU de la dirección de facturación de la página de pago del flujo de trabajo de cierre de compra ahora utiliza correctamente la dirección de cotización cuando Google Tag Manager está habilitado. Anteriormente, se producía un error de JavaScript en la página de pago.

### GraphQL

<!-- MC-41885-->

* GraphQL `products` la consulta ahora devuelve opciones de atributo que están ordenadas en el mismo orden utilizado en la página de edición de atributos.

<!-- MC-41473-->

* La respuesta a la variable `{ category(id: 2){ children { name children { name } } } }` La solicitud de GraphQL ahora incluye un árbol de categorías correctamente ordenado.

<!-- MC-41030-->

* La variable `CartItemPrices` El objeto ahora contiene el nuevo campo GraphQL `fixed_product_taxes`, que devuelve una matriz de los impuestos fijos del producto que se aplican a un artículo del carro de compras. Anteriormente, los impuestos de productos fijos que se aplicaban a un artículo del carro de compras no se incluían en la consulta del carro de compras.

<!-- MC-40920-->

* Las solicitudes vacías a GraphQL ahora arrojan el código de respuesta 200 en lugar de 500. Anteriormente, el analizador de GraphQL arrojaba una excepción antes de que se generara el resultado de la consulta.

<!-- MC-40867 magento/partners-magento2ee#532 -->

* La variable `applyRewardPointsToCart` la mutación ahora actualiza el total general de un carro de compras para reflejar con precisión el valor de los puntos de recompensa deducidos. [GitHub-486](https://github.com/magento/partners-magento2ee/issues/486)

<!-- MC-40379-->

* Los productos desactivados ya no se incluyen en la respuesta de GraphQL cuando GraphQL se utiliza para vincular productos de ventas al descubierto.

<!-- MC-40262-->

* Los comerciantes ahora pueden utilizar GraphQL `setShippingAddressesOnCart` método para establecer las direcciones de facturación y envío de un carro de compras cuando se deshabilita el cierre de compra del cliente.

<!-- MC-39508-->

* La variable `categoryList` la consulta ya no genera una excepción cuando contiene varios fragmentos en la variable `CategoryTree` objeto. [GitHub-31086](https://github.com/magento/magento2/issues/31086)

<!-- MC-38995-->

* GraphQL `product` query ahora devuelve los precios correctos del grupo de clientes.

<!-- MC-38822-->

* GraphQL `products` la respuesta de consulta ahora ordena las agregaciones según la posición del atributo del producto.

<!-- ENGCOM-8462-->

* La aplicación ya no genera errores de tipo durante las consultas de GraphQL cuando los sufijos de URL de producto y categoría contienen valores nulos. [GitHub-30909](https://github.com/magento/magento2/issues/30909)

<!-- magento/magento2#31164-->

* La variable `CustomizableDateValue` el objeto ahora contiene el `type` atributo. Su valor es una enumeración que se puede establecer en FECHA, FECHA_HORA o HORA.

<!--  magento/partners-magento2ee#421-->

* La variable [`dynamicBlocks` query](https://devdocs.magento.com/guides/v2.4/graphql/queries/dynamic-blocks.html) devuelve el contenido de bloques dinámicos que coinciden con los filtros especificados.

<!-- ENGCOM-8603-->

* El POST `V1/products/special-price-delete` ahora, la solicitud de elimina únicamente el precio con un `store_id` según lo esperado. Anteriormente, la llamada eliminaba todos los precios especiales del SKU especificado de todas las tiendas. [GitHub-25907](https://github.com/magento/magento2/issues/25907)

<!--  magento/partners-magento2ee#280 -->

* Se ha corregido un error con la variable `country_code` en la variable `createGiftRegistry` mutación.

<!-- magento/partners-magento2ee#280 -->

* Se han corregido problemas con la variable `giftRegistryUid` del `updateGiftRegistryItems` mutación.

<!-- magento/partners-magento2ee#280 -->

* Se ha añadido una comprobación adicional para evitar la `updateGiftRegistryRegistrants` mutación de ser usada para agregar personas aleatorias como registradores a un registro de regalos.

<!-- magento/magento2#31380 -->

* La variable `addConfigurableProductsToCart` la mutación ahora devuelve la miniatura correcta del producto especificado. Anteriormente, devolvía la miniatura del producto principal.

<!-- ENGCOM-8477-->

* La variable `products` La consulta ya no expone el precio especial de un producto cuando el periodo de precio especial se establece para una fecha futura. [GitHub-30210](https://github.com/magento/magento2/issues/30210), [GitHub-29631](https://github.com/magento/magento2/issues/29631)

<!-- magento-engcom/magento2ee#576-->

* La variable `customer` la respuesta de consulta ahora incluye el `total_giftcard` como parte del `OrderTotal` objeto.

<!-- MC-41084 ENGCOM-9042 -->

* Se corrigió un problema que causaba que la variable `products` consulta para devolver información errónea sobre los niveles de precios en artículos que no tienen establecidos precios de nivel. [GitHub-32279](https://github.com/magento/magento2/issues/32279)

### Imagen

<!-- MC-38951-->

* Ahora puede establecer los atributos de paquete required_options y has_options según lo esperado al crear o actualizar un producto de paquete mediante el POST `/V1/product/:sku` punto final. Anteriormente, estos atributos personalizados se establecían en 0 (cero) a pesar de los esfuerzos por establecerlo en 1 (uno).

### Importar/exportar

<!-- MC-41576-->

* El filtro ID de categoría para entidades de producto de la cuadrícula Atributos de entidad de la página de exportación ahora funciona según lo esperado.

<!-- MC-41439 ENGCOM-9005-->

* El estado de las existencias de productos agrupados ahora se actualiza según lo esperado para que no estén en existencias cuando todos los productos secundarios no estén en existencias. [GitHub-32647](https://github.com/magento/magento2/issues/32647)

<!-- MC-41184-->

* El estado de las existencias de productos configurables ahora se actualiza automáticamente según lo esperado cuando la importación actualiza el estado de las existencias de productos secundarias. Anteriormente, el estado de las existencias de productos no se actualizaba automáticamente cuando la importación actualizaba el estado de las existencias de productos secundarios.

<!-- MC-41151-->

* Ahora puede guardar valores vacíos en una exportación programada. Anteriormente, la aplicación actualizaba los valores de filtro vacíos después de la creación o guardado de la exportación. Ambas `no` y `not specified` los valores se representaban por cero en la base de datos y un valor de `not selected` se ha anulado con `no`.

<!-- MC-41092-->

* El proceso de exportación ahora tiene en cuenta el ámbito de las funciones de usuario al exportar productos, fuentes de existencias y entidades de cliente. Anteriormente, el proceso de exportación ignoraba el ámbito de las funciones de usuario, lo que permitía la exportación de entidades de exportación de funciones de usuario privadas.

<!-- MC-40943-->

* La aplicación ahora establece la clase de impuesto del producto en `None` si un producto se importa con `tax_class_name` values `None` o `0`. Anteriormente, si `product tax_class_name` was `None` en el archivo CSV, la aplicación creó una nueva clase de impuesto `None`, que duplicaban la clase de impuesto existente. If `product tax_class_name` was `0` en el archivo CSV, la aplicación ignoró ese valor y la clase de impuesto del producto no cambió después de la importación.

<!-- MC-40898-->

* Los administradores ahora pueden cambiar correctamente el `name` de un producto de paquete `bundle_values` del administrador. Anteriormente, la aplicación mostraba el producto como sin existencias en la tienda después de cambiar el nombre del administrador. Los productos también se combinaron con el mismo SKU en una sola sección de opciones de paquete.

<!-- MC-40333-->

* La aplicación ahora tiene en cuenta el ámbito del usuario al exportar datos de clientes. Anteriormente, al intentar exportar clientes, la aplicación exportaba datos de clientes desde todos los sitios web.

<!-- MC-40305-->

* La aplicación ahora elimina las relaciones de producto entre ventas superiores, ventas cruzadas y productos relacionados durante la importación de archivos CSV como se espera cuando `__EMPTY__VALUE__` se especifica en el archivo CSV.

<!-- MC-40012-->

* Exportación de datos de direcciones personalizadas para muchos clientes (administrador) **Sistema** > **Exportar**) ya no resulta normalmente en un error de memoria. Anteriormente, al exportar datos de direcciones personalizadas, la aplicación intentaba cargar todos los datos del cliente, lo que provocaba la pérdida de memoria y la aplicación generaba un error de asignación de memoria incorrecta.

<!-- MC-39977-->

* Los precios de nivel duplicados ya no se importan durante el proceso de importación de CSV predeterminado. Anteriormente, faltaba la validación para impedir la importación de precios de nivel duplicados y, cuando se producían precios de nivel duplicados, los comerciantes no podían guardar productos. Los comerciantes también vieron este error cuando intentaron programar un cambio de producto: `SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry…`.

<!-- MC-39609  magento/magento2#31397-->

* Todas las imágenes de producto ahora se validan durante la importación. Anteriormente, la aplicación solo validaba la primera imagen cuando un producto tenía varias imágenes. [GitHub-28236](https://github.com/magento/magento2/issues/28236)

<!-- MC-39483-->

* Ahora puede eliminar una región de una dirección de cliente según lo esperado durante la importación. Anteriormente, la región asignada no cambiaba cuando se importaba una dirección de cliente con una región vacía.

<!-- MC-38810-->

* Los productos con contenido JSON o HTML como atributos de producto adicionales ahora se exportan correctamente a un archivo CSV. Anteriormente, el archivo CSV contenía cadenas de datos superpuestas en campos incorrectos.

### Índice

<!-- MC-39718 ENGCOM-8567-->

* El Administrador de procesos ahora se cierra con un error cuando falla un proceso secundario. Anteriormente, Process Manager siempre se cerraba correctamente si el número de funciones pasadas a él (por ejemplo, dimensiones de indexador) era inferior al valor de la variable `MAGE_INDEXER_THREADS_COUNT` variable de entorno. [GitHub-30964](https://github.com/magento/magento2/issues/30964)

<!-- MC-39272-->

* Los productos ya están disponibles tal como se espera en los resultados de búsqueda de tienda al vincular productos con un PUT REST `/V1/products/:sku/links` solicitud cuando el modo de indexador está establecido en **Actualizar al guardar**.

<!-- MC-38310 magento/magento2#32693-->

* El indexador de reglas de precio del catálogo funciona ahora como se espera cuando el modo indexador está configurado en **Actualizar al guardar**. [GitHub-370](https://github.com/magento/partners-magento2ee/issues/370)

<!-- ENGCOM-8890-->

* La eliminación de una categoría deshabilitada que no incluye un producto ahora no tiene ningún efecto en las tablas de búsqueda en catálogo y de índice plano de categoría. Anteriormente, la eliminación de una categoría inactiva activaba un reíndice completo. [GitHub-23297](https://github.com/magento/magento2/issues/23297)

<!-- ENGCOM-8599 8474-->

* Los indexadores personalizados ahora pueden usar diferentes nombres de columna de entidad para las suscripciones. Anteriormente, el déclencheur de la base de datos utilizaba el nombre de columna del indizador establecido por última vez en **Actualizar por programación** en lugar del indexador designado. [GitHub-21853](https://github.com/magento/magento2/issues/21853)

<!-- ENGCOM-8887-->

* La aplicación ya no envía solicitudes AJAX para volver a cargar secciones de datos de clientes (`Magento_Customer/js/section-config`) que no se vean afectados por la solicitud. [GitHub-31948](https://github.com/magento/magento2/issues/31948)

<!-- MC-39569-->

* Los siguientes indexadores ya no se invalidan después de agregar, quitar o reordenar productos en una categoría: `catalog_category_product` y `catalogsearch_fulltext` (y sus dependientes). Anteriormente, estas eliminaciones involuntarias desencadenaban una reindexación completa de los sitios. Ahora se impide un reíndice completo en estas condiciones cuando el catálogo plano no está habilitado.

### Infraestructura

<!-- MC-41445-->

* La dependencia `pelago/emogrifier` se ha actualizado de la versión 3.1.0 a la 5.0.0. Esta actualización dio como resultado la introducción de cambios incompatibles con versiones anteriores del `Magento\Email\Model\Template\Filter` Clase . El código modificado se ejecuta durante el procesamiento de plantillas de correo electrónico. Consulte [Referencia BIC](https://developer.adobe.com/commerce/php/development/backward-incompatible-changes/reference/).

<!-- MC-42212-->

* Se ha corregido un problema con `\Magento\CatalogInventory\Model\Indexer\Stock\CacheCleaner::getCategoryIdsByProductIds` que impedía guardar un nuevo producto.

<!-- MC-42199-->

* Se ha eliminado la biblioteca TinyMCE v3 obsoleta. La variable `Magento_Tinymce3Banner` Las pruebas de módulo y MFTF relacionadas con TinyMCE v3.x se han eliminado de Adobe Commerce.

<!-- MC-41497-->

* La aplicación ya no genera un `Invalid header value detected` error en el formulario Contactar con nosotros cuando un comprador introduce una dirección de correo electrónico que contiene marcas diacríticas francesas (como &quot;é&quot;, &quot;è&quot;). La aplicación ahora convierte las letras UTF-8 del nombre de usuario a codificación ASCII. Anteriormente, las letras UTF-8 no se convertían a codificación ASCII en la sección única de la dirección de correo electrónico.

<!-- MC-39947-->

* La aplicación ya no genera un error grave de PHP cuando se agrega un complemento a una clase principal. [GitHub-31291](https://github.com/magento/magento2/issues/31291)

<!-- ENGCOM-9012-->

* Se han actualizado los archivos README.md para estos módulos: `Magento_Msrp`, `Magento_MsrpConfigurableProduct`, `Magento_MsrpGroupedProduct`, `Magento_Multishipping`, `Magento_MysqlMq`. [GitHub-32577](https://github.com/magento/magento2/issues/32577)

<!-- magento/partners-magento2ee#501-->

* `phpcpd` se ha actualizado a la versión 6.0.3 para la compatibilidad con PHP 8.

<!-- ENGCOM-9073-->

* `ramsey/uuid` se ha actualizado por compatibilidad con PHP 8.0. [GitHub-31777](https://github.com/magento/magento2/issues/31777), [GitHub-826](https://github.com/magento/magento2-functional-testing-framework/issues/826)

<!-- ENGCOM-8997-->

* `colinmollenhour/php-redis-session-abstract` se ha actualizado a la versión 1.4.4 para la compatibilidad con PHP 8. [GitHub-32709](https://github.com/magento/magento2/issues/32709)

<!-- ENGCOM-8527-->

* Se ha corregido una combinación no válida de tabulaciones y espacios en la variable `phpstan.neon` archivo. [GitHub-31239](https://github.com/magento/magento2/issues/31239)

<!-- ENGCOM-8668-->

* Se ha eliminado el uso de propiedades obsoletas `$_isScopePrivate` en toda la base de código. [GitHub-30506](https://github.com/magento/magento2/issues/30506)

<!-- ENGCOM-8551-->

* Los diseños de página ya no están codificados en  `Magento\Widget\Block\Adminhtml\Widget\Instance\Edit\Chooser\Container`.  Como resultado, la variable `getPageLayouts()` ahora devuelve la lista real de diseños de página declarados por los distintos módulos como se espera. Anteriormente, solo devolvía diseños codificados. [GitHub-31168](https://github.com/magento/magento2/issues/31168)

<!-- ENGCOM-8509-->

* La variable `composer.lock` se ha actualizado a la última versión de Coding Standard. [GitHub-31152](https://github.com/magento/magento2/issues/31152)

<!-- ENGCOM-9015 -->

* Se ha añadido una dependencia que faltaba en la variable `web-token/jwt-framework` al `magento/module-jwt-framework-adapter`. [GitHub-32578](https://github.com/magento/magento2/issues/32578)

<!-- ENGCOM-9019 -->

* Se han agregado oyentes pasivos al `fotorama.js` biblioteca para mejorar la puntuación de las métricas del faro. [GitHub-31140](https://github.com/magento/magento2/issues/31140)

<!-- ENGCOM-9014 -->

* Se ha actualizado el archivo README.md para el módulo Google Analytics. [GitHub-32616](https://github.com/magento/magento2/issues/32616)

<!-- ENGCOM-8375 -->

* El Administrador de procesos ahora gestiona correctamente las excepciones en los procesos ramificados. El proceso principal ahora se cierra y la aplicación ahora muestra un mensaje de error solo una vez. Además, las excepciones de los procesos ramificados ahora se gestionan cuando se lanzan en el proceso principal. Anteriormente, la aplicación registraba varios errores de indexador y mostraba varios mensajes de error.  [GitHub-30622](https://github.com/magento/magento2/issues/30622)

<!-- ENGCOM-8544 -->

* La aplicación ya no genera un error cuando se agrega un complemento a una clase principal. (El `optionsProvider` ahora se declara después de `getContentIdentities` en `Assest.php`.) Anteriormente, la aplicación generaba este error:  `Error: Cannot instantiate interface Magento\Framework\Data\OptionSourceInterface`. [GitHub-31291](https://github.com/magento/magento2/issues/31291)

<!-- ENGCOM-8549 -->

* En ejecución `Magento\Framework\Filesystem\Io\Ftp::ls()` en una carpeta vacía ahora devuelve una matriz vacía como se esperaba. Anteriormente, la aplicación arrojaba esta excepción: `Invalid argument supplied for foreach() in vendor/magento/framework/Filesystem/Io/Ftp.php…`. [GitHub-31288](https://github.com/magento/magento2/issues/31288)

<!-- ENGCOM-8791 -->

* La variable `update` para las reglas y las funciones se ha marcado como obsoleto en `app/code/Magento/Authorization/Model/Role.php`. [GitHub-30756](https://github.com/magento/magento2/issues/30756)

<!-- ENGCOM-8946 -->

* Se ha corregido la concatenación de los parámetros de cookies de SameSite. Anteriormente, una concatenación incorrecta añadía el valor `lex` sufijo a `value`, `domain`y otros parámetros. [GitHub-26377](https://github.com/magento/magento2/issues/26377), [GitHub-32440](https://github.com/magento/magento2/issues/32440)

<!-- ENGCOM-8698 ENGCOM-9034 -->

* `allure-framework/allure-phpunit` se ha actualizado a v1.3.1 en toda la base de código. Anteriormente, la aplicación mostraba este error:  `Warning: Use of undefined constant GLOB_BRACE - assumed 'GLOB_BRACE' (this will throw an Error in a future version of PHP) in /var/www/html/src/vendor/allure-framework/allure-phpunit/src/Yandex/Allure/Adapter/AllureAdapter.php:74.` [GitHub-24635](https://github.com/magento/magento2/issues/24635)

<!-- ENGCOM-8783 -->

* La aplicación ahora muestra más errores informativos cuando se producen errores en ejecución `bin/magento` en modo de producción. Anteriormente, la aplicación no mostraba mensajes de error o mostraba mensajes que carecían de información. [GitHub-32786](https://github.com/magento/magento2/issues/32786)

<!-- ENGCOM-8953 -->

* La variable `ArrayIterator` El objeto PHP se ha actualizado para funcionar como se espera con PHP 7.4. [GitHub-32088](https://github.com/magento/magento2/issues/32088)

<!-- ENGCOM-8469 -->

* La aplicación ya no genera un error cuando un cliente intenta completar un pedido cuando no hay operadores de envío disponibles. En su lugar, muestra la página de cierre de compra y este mensaje: `Sorry, no quotes are available for this order at this time`. Anteriormente, la aplicación mostraba una página de cierre de compra en blanco y registraba este mensaje en el registro de excepciones: `array_keys() expects parameter 1 to be array, null given`. [GitHub-30830](https://github.com/magento/magento2/issues/30830)

<!-- ENGCOM-8557 -->

* La aplicación ya no registra cada cookie como un contexto separado. La variable `$_COOKIE` también se ha convertido en una cadena. Anteriormente, como cada cookie se registraba como un contexto independiente, cuando el número de cookies superaba los 50, la aplicación registraba este mensaje: `Unable to send the cookie. Maximum number of cookies would be exceeded`. [GitHub-31334](https://github.com/magento/magento2/issues/31334)

### Factura

<!-- ENGCOM-8472 -->

* Al crear nuevas facturas en el Administrador, la variable **Copia de correo electrónico de** ahora funciona según lo esperado. Anteriormente, la casilla de verificación se ignoraba si la configuración global para enviar correos electrónicos de factura estaba habilitada en **Correos electrónicos de ventas**. Ahora es coherente y funciona de la misma manera que las páginas de creación del envío y la nota de crédito. [GitHub-28511](https://github.com/magento/magento2/issues/28511)

### Galería de medios

<!-- MC-41728-->

* `bin/magento media-gallery:sync` ahora falla como se espera al procesar imágenes PNG que carecen de información XMP.

<!-- ENGCOM-8814-->

* Entradas en el `catalog_product_entity_media_gallery` se eliminan del modo esperado cuando se eliminan productos relacionados. [GitHub-17727](https://github.com/magento/magento2/issues/17727)

<!-- ENGCOM-8945-->

* Los detalles de las imágenes ahora se pueden actualizar en la Galería multimedia cuando la minificación de JavaScript está habilitada. Anteriormente, los detalles de la imagen no se guardaban y la aplicación mostraba este error: `TypeError: Cannot read property 'call' of undefined in jquery.validate`. [GitHub-31633](https://github.com/magento/magento2/issues/31633)

### MFTF

Las nuevas funciones y las correcciones de errores principales de MFTF se describen en la sección [Registro de cambios del marco de pruebas funcionales](https://github.com/magento/magento2-functional-testing-framework/blob/develop/CHANGELOG.md).

<!-- ENGCOM-8496-->

* La variable `magento indexer:reindex` y `cache:flush` y `AdminReindexAndFlushCache` se ha eliminado el grupo de acciones de las pruebas para mejorar la ejecución de los siguientes módulos: `Bundle`, `Catalog`, `CatalogRule`, `CatalogRuleConfigurable`, `CatalogUrlRewrite`, `Downloadable`, `Indexer`, `Paypal`y `Sales`. [GitHub-31031](https://github.com/magento/magento2/issues/31031)

<!-- ENGCOM-8562-->

* `AdminSubmitCategoriesPopupActionGroup` se ha añadido a las pruebas para evitar fallos en las pruebas. [GitHub-31251](https://github.com/magento/magento2/issues/31251)

<!-- ENGCOM-8562-->

* Las pruebas se han refactorizado con `StorefrontCheckQuickSearchStringActionGroup` y `StorefrontAssertProductNameOnProductMainPageActionGroup` (grupos de acciones existentes). [GitHub-31251](https://github.com/magento/magento2/issues/31251)

#### Pruebas refactorizadas

Se han refactorizado las siguientes pruebas para mejorar el tiempo de ejecución:

`AddOutOfStockProductToCompareListTest`  <!-- ENGCOM-8547-->

`AdminApplyTierPriceToProductWithPercentageDiscountTest` <!-- ENGCOM-8522-->

`AdminCheckingCreditMemoTotalsTest` <!-- ENGCOM-8606-->

`AdminCheckDashboardWithChartsTest` <!-- ENGCOM-8897-->

`AdminConfigDefaultProductLayoutFromConfigurationSettingTest`  <!-- ENGCOM-8891-->

`AdminCreateInvoiceTest` <!-- ENGCOM-8581-->

`AdminCreateOrderAddProductCheckboxTest` <!-- ENGCOM-8492-->

`AdminMassOrdersCancelCompleteAndClosedTest` <!-- ENGCOM-8538-->

`AdminMassOrdersCancelProcessingAndClosedTest`  <!-- ENGCOM-8670-->

`AdminMassOrdersHoldOnCompleteTest`  <!-- ENGCOM-8897-->

`AdminMassOrdersHoldOnPendingAndProcessingTest`  (reemplazo para obsoleto) `AdminMassOrdersHoldOnPendingAndProcessingTest`) <!-- ENGCOM-8669-->

`AdminMassOrdersUpdateCancelPendingOrderTest` <!-- ENGCOM-8602-->

`AdminMassProductPriceUpdateTest` <!-- ENGCOM-8587-->

`AdminMassUpdateProductAttributesMissingRequiredFieldTest` <!-- ENGCOM-8511-->

`AdminOrdersReleaseInUnholdStatusTest`  <!-- ENGCOM-8592—-->

`AdminPanelIsFrozenIfStorefrontIsOpenedViaCustomerViewTest`  <!-- ENGCOM-8601-->

`AdminSortingByWebsitesTest`  <!-- ENGCOM-8583-->

`AdminUpdateSimpleProduct` <!-- ENGCOM-8536-->

`AdminUpdateSimpleProductWithRegularPriceInStockEnabledFlatTest`  <!-- ENGCOM-8533-->

`AdminValidateShippingTrackingNumberTest`  <!-- ENGCOM-8593-->

`CancelOrdersInOrderSalesReportTest`  <!-- ENGCOM-8591-->

`ProductsQtyReturnAfterOrderCancelTest` <!-- ENGCOM-8506-->

`StorefrontConfigurableProductBasicInfoTest`  <!-- ENGCOM-8711-->

#### Grupos de acciones

Las acciones repetitivas se han sustituido por grupos de acción en estas pruebas:

`AdminCheckConfigurableProductPriceWithDisabledChildProductTest`  <!-- ENGCOM-8574-->

`AdminConfigurableProductCreateTest` <!-- ENGCOM-9013-->

`AdminConfigurableProductRemoveAnOptionTest` <!-- ENGCOM-9038-->

`AdminCreateProductDuplicateUrlkeyTest` <!-- ENGCOM-9007-->

`AdminCreateSimpleProductNegativePriceTest` <!-- ENGCOM-900-->

`AdminCreateSimpleProductZeroPriceTest`  <!-- ENGCOM-9040-->

`AdminCreateVirtualProductFillingRequiredFieldsOnlyTest` <!-- ENGCOM-9003-->

`AdminUpdateSimpleProductWithRegularPriceInStockDisabledProductTest` <!-- ENGCOM-9002-->

`AdminUpdateSimpleProductWithRegularPriceInStockNotVisibleIndividuallyTest`  <!-- ENGCOM-9011-->

`AdminUpdateSimpleProductWithRegularPriceInStockVisibleInCatalogOnlyTest`  <!-- ENGCOM-9041-->

#### Nuevos grupos de acciones

`AdminClearFiltersOnGridActionGroup` <!-- ENGCOM-8604-->

`AdminClickAddNewPageOnPagesGridActionGroup`  <!-- ENGCOM-8613-->

`AdminClickInsertWidgetActionGroup` <!-- ENGCOM-8614-->

`AdminClickRefundOfflineOnNewMemoPageActionGroup` <!-- ENGCOM-8580-->

`AdminFillAccountInformationOnCreateOrderPageActionGroup` <!-- ENGCOM-8495-->

`AdminGoToOrderStatusPageActionGroup`  <!-- ENGCOM-8615-->

`AdminOpenCMSPagesGridActionGroup`<!-- ENGCOM-8682-->

`AdminSelectAttributeSetOnEditProductPageActionGroup` <!-- ENGCOM-8566-->

`AssertAdminProductIsAssignedToCategoryActionGroup`  (reemplaza el filtrado de la cuadrícula de productos por SKU y haga clic en la primera fila (para reducir el tiempo de ejecución de la prueba) <!-- ENGCOM-8535 8534-->

`AssertLinkActionGroup` <!-- ENGCOM-8457-->

`AssertStorefrontCartDiscountActionGroup` <!-- ENGCOM-8431-->

`ClickPlaceOrderActionGroup` <!-- ENGCOM-8671-->

`SaveCmsPageActionGroup` <!-- ENGCOM-8683-->

`StorefrontAssertProductNameIsNotOnProductMainPageActionGroup` <!-- ENGCOM-8562-->

`StorefrontGuestCheckoutProceedToPaymentStepActionGroup` <!-- ENGCOM-8582-->

`StorefrontHoverProductOnCategoryPageActionGroup` <!-- ENGCOM-8575-->

`StorefrontSelectCustomizeAndAddToTheCartButtonActionGroup` <!-- ENGCOM-8573-->

#### Grupos de acciones eliminados

<!-- ENGCOM-8525 8558 8608 8546 8695 8889 8681 8627 8714-->

* Eliminado  `CliIndexerReindexActionGroup` (o el valor modificado) de las pruebas para mejorar el tiempo de ejecución del `Backend`, `Bundle`, `BundleImportExport`, `Catalog`, `CatalogRule`, `CatalogSearch`, `Checkout`, `Downloadable`,  `Elasticsearch`,  `Elasticsearch6`,  `Indexer`, `LayeredNavigation`,  `LoginAsCustomer`,  `Newsletter`, `Sales`, `SalesRule`, `Search`, `Store`,  `Swatches`, `UrlRewrite`, `Weee`y `Wishlist`módulos.

<!-- ENGCOM-8893 8951 8893 9001 8715 8724 8721 8843-->

* Eliminado `CliCacheFlushActionGroup` from `Catalog`, `CatalogUrlRewrite`, `Checkout`, `Config`, `ConfigurableProduct`,`Contact`, `Cookie`, `CurrencySymbol`, `Customer`, `Downloadable`, `Elasticsearch`, `Elasticsearch6`, `Fedex`, `Indexer`, `LayeredNavigation`,`LoginAsCustomer`, `Msrp`, `Multishipping`, `Sales`, `Swatches`, `Translation`, `UrlRewrite`, `Vault`, `Weee`y `Wishlist` módulos.

### Newsletter

<!-- ENGCOM-8948 MC-40885-->

* La aplicación ya no envía el correo electrónico del boletín a un cliente que se ha dado de baja de la newsletter en el período entre la creación de la cola y el envío de la misma. [GitHub-32116](https://github.com/magento/magento2/issues/32116)

<!-- ENGCOM-8675-->

* La aplicación ahora respeta la configuración de activación del boletín informativo (**Almacenes**  >  **Configuración**  >  **Configuración**  >  **Clientes**  >  **Newsletter**  >  **Opciones generales**). Anteriormente, estos ajustes siempre se recuperaban del ámbito predeterminado en implementaciones de varias tiendas. [GitHub-31188](https://github.com/magento/magento2/issues/31188)

<!-- ENGCOM-8551-->

* La GET de llamada REST `/V1/customers/search` ahora devuelve información correcta para los clientes suscritos a varios boletines. [GitHub-31168](https://github.com/magento/magento2/issues/31168)

<!-- ENGCOM-8817-->

* El estado de suscripción del almacenamiento en caché se ha eliminado del complemento del boletín informativo. [GitHub-19345](https://github.com/magento/magento2/issues/19345)

### Pedido

<!-- MC-40963-->

* La aplicación ahora calcula correctamente un saldo de cliente facturado al devolver el crédito de tienda a una cuenta de cliente para un pedido parcialmente facturado.

<!-- ENGCOM-8710-->

* La aplicación ahora guarda un pedido modificado como se espera cuando guarda un saldo de cliente reembolsado. [GitHub-393](https://github.com/magento/partners-magento2ee/issues/393)

### Métodos de pago

<!-- MC-41525-->

* La aplicación ahora procesa bloques de pago en `frontend` independientemente del área desde la que se envió el correo electrónico. (El área actual ahora se emula como `frontend` antes de que se procese el bloque de pago). Anteriormente, los bloques de pago se representaban en el área desde la que se enviaba el correo electrónico. Como resultado, tanto si el correo electrónico de ventas se activó desde el administrador como desde la API de REST, las URL de los recursos intentaron cargarlos desde el área incorrecta (`webapi_rest` o `adminhtml`).

<!-- MC-40810-->

* La aplicación ahora envía el vínculo de un producto descargable a la dirección de correo electrónico especificada durante el cierre de compra. Anteriormente, cuando un comprador invitado utilizaba PayPal Express Checkout e introducía distintas direcciones de correo electrónico para enviar el pedido y para realizar la comprobación, la aplicación enviaba el vínculo del producto descargable a la primera dirección.

<!-- MC-38051-->

* La aplicación ahora muestra un valor preciso para el crédito de almacén disponible en la página Método de Pago en implementaciones que admiten varias monedas.

<!-- MC-37820-->

* La lista de métodos de pago ahora se actualiza según lo esperado cuando un comprador invitado cambia la dirección de envío de un pedido a otro país durante el cierre de compra. Anteriormente, el cambio de la dirección de facturación no déclencheur una actualización de los posibles métodos de pago.

#### PayPal

<!-- MC-39895-->

* Los compradores ahora pueden consultar correctamente un pedido de PayPal Payflow Pro con una dirección de envío que contiene caracteres especiales. Anteriormente, la solicitud declinaba el pago de estas órdenes.

<!-- MC-39861-->

* Los compradores ahora son redirigidos a la página de éxito de pedidos después de un pago exitoso usando PayPal. Anteriormente, los compradores se redirigían a una página en blanco porque se perdían datos de sesión.

### Rendimiento

<!-- MC-41647-->

* Se ha mejorado el rendimiento de la búsqueda de SKU de administración en catálogos grandes. Las sugerencias del optimizador de consultas ahora fuerzan el uso del índice durante la ejecución de la consulta.

<!-- MC-41440-->

* El rendimiento del `catalog_product_alert` `cron` al ejecutar tablas grandes (varios millones de filas) se ha mejorado. Anteriormente, `catalog_product_alert` cargó todas las alertas de producto, lo que provocó una excepción de memoria insuficiente.

<!-- ENGCOM-8752-->

* La aplicación ya no carga todas las páginas de CMS cuando solo necesita una página de edición para procesar un formulario de Administración.  Estas páginas ahora se cargan más rápido. [GitHub-30936](https://github.com/magento/magento2/issues/30936)

<!-- ENGCOM-8510-->

* Valores numéricos en `WHERE IN` las expresiones ahora se muestran como números, no como cadenas, lo que mejora el rendimiento de la consulta en algunas versiones de MariaDB. [GitHub-31135](https://github.com/magento/magento2/issues/31135)

* La variable `use_application_lock` permite habilitar la reindexación mediante el uso de variables de entorno o configurando la variable `app/etc/env.php` archivo. Ya no es necesario restablecer manualmente el indizador después de un error con este modo habilitado. Cuando este modo no está habilitado, debe restablecer manualmente el indizador tras un error. Consulte [Uso del modo de bloqueo de aplicación para procesos de reindexación](https://developer.adobe.com/commerce/php/development/components/indexing/#using-application-lock-mode-for-reindex-processes).

### Precio

<!-- MC-41767-->

* La aplicación ahora actualiza correctamente el precio de un producto con precios agrupados cuando un comprador actualiza la cantidad del producto en la tienda. [GitHub-32669](https://github.com/magento/magento2/issues/32669)

<!-- MC-39282-->

* Los productos del paquete ahora se pueden guardar cuando a los productos se les ha asignado un precio de nivel y `Magento\Framework\Api\ExtensibleDataObjectConverter` se utiliza para convertir datos de productos. Anteriormente, cuando `Magento\Framework\Api\ExtensibleDataObjectConverter` se utilizó para convertir los datos del producto en una matriz cuando se guardó un producto, la aplicación no guardó el producto y mostró este error: `Notice: Undefined index: price in app/code/Magento/Catalog/Model/Product/Type/Price.php on line 382.`

<!-- MC-36811-->

* Las actualizaciones de precios programadas ahora se aplican a productos que ya están en el carro de compras. [GitHub-356](https://github.com/magento/partners-magento2ee/issues/356)

<!-- MC-24693-->

* El precio de nivel ahora se aplica a un producto como se espera cuando los incrementos de cantidad están habilitados y el inventario decimal es menor que 1. Anteriormente, la cantidad mínima del precio del nivel se establecía en 1.

### Vídeo del producto

<!-- MC-39755-->

* Ahora puede usar la variable **Agregar vídeo** botón (Administrador **Catálogo** > **Productos**) para agregar varios vídeos de forma consecutiva. Anteriormente, los campos de vídeo conservaban los detalles del vídeo anterior.

<!-- MC-40817-->

* La introducción del modo de pantalla completa para un vídeo de producto en una página de producto ahora funciona como se espera en los dispositivos móviles. Anteriormente, al entrar en el modo de pantalla completa, el vídeo se detenía antes de salir del modo de pantalla completa.

<!-- MC-39759-->

* Botones de flecha de navegación (**Siguiente** y **Anterior**) ahora están visibles como se espera en los vídeos de producto de tienda.

<!-- MC-40463-->

* Los comerciantes ahora pueden agregar vídeos Vimeo usando la variable **Inserción de vídeo** en la página del producto como se espera. Anteriormente, la aplicación mostraba un error 404. [GitHub-31753](https://github.com/magento/magento2/issues/31753)

### Cita

<!-- MC-39531-->

* La variable `/V1/guest-carts/examplecartid/items` ahora devuelve la vista de tienda solicitada. Anteriormente, devolvía la primera vista de tienda en la tienda, no la solicitada.

<!-- MC-33893 ENGCOM-8992-->

* El envío de facturas ahora se puede configurar. Anteriormente, el envío de facturas no se podía configurar y la aplicación siempre enviaba una factura después de crearla. Los correos electrónicos de factura y pedido se enviaron en el ámbito de un observador. Los observadores independientes ahora rigen el envío del correo electrónico del pedido y el correo electrónico de la factura. [GitHub-27656](https://github.com/magento/magento2/issues/27656)

### Informes

<!-- MC-40998-->

* Todos los informes del sistema ahora se pueden ver y descargar del proyecto de infraestructura de nube de Adobe Commerce. Anteriormente, no se podían descargar informes del sistema para Registros, Datos, Diseño o Almacenes.

<!-- MC-39737-->

* La fecha de la última revisión en el administrador **Informes** > **Reseñas** > **Por productos** ahora muestra la fecha de revisión correcta. Anteriormente, la aplicación mostraba la fecha de creación del producto en lugar de la fecha de revisión.

### Autorizaciones de devolución de mercancías (RMA)

<!-- MC-41866-->

* La RMA `resolution` el atributo ya no se muestra como necesario cuando el valor del campo atributo `required` está configurado como **no**.

<!-- MC-41808-->

* Ahora, el administrador puede seleccionar varios pedidos para que se devuelvan. Anteriormente, la aplicación generaba un error al hacer clic en **Submit** después de seleccionar varias devoluciones y seleccionar Cerrar en el menú desplegable Acciones .

<!-- MC-41759-->

* La aplicación ahora envía notificaciones por correo electrónico a los clientes según lo esperado después de cambiar el estado de una devolución mediante la API de REST.

<!-- MC-39981  magento/partners-magento2ee#442 -->

* La aplicación ahora filtra los registros según los valores de filtro en la cuadrícula que devuelve el cliente de administración. Anteriormente, la aplicación le dirigía a la página Admin Todos los clientes y hacía clic en el botón **Restablecer filtro** también se redirige a esta página. [GitHub-436](https://github.com/magento/partners-magento2ee/issues/436)

### Reseñas

<!-- MC-40116-->

* Las estrellas de clasificación de revisión del producto ahora se calculan correctamente en la sección Detalles de revisión de la página Mi cuenta .

<!-- MC-39763-->

* Las secciones Clasificación promedio del producto y Clasificación del producto de la página de detalles de revisión del producto ahora se representan correctamente. Anteriormente, el ID de revisión no se establecía cuando la aplicación calculaba la clasificación de tienda y la plantilla de revisión del producto no se representaba correctamente.

<!-- MC-36149-->

* La variable **Ser el primero en revisar este producto** ahora cambia como se espera a un recuento de revisiones después de que un administrador apruebe una revisión.

<!-- ENGCOM-8501 MC-30270-->

* Los administradores ahora pueden ordenar las revisiones de producto en la sección Revisiones de producto de la página de edición de producto como se espera. [GitHub-30270](https://github.com/magento/magento2/issues/30270)

<!-- MC-41003  magento/magento2#32259-->

* Las revisiones ahora se guardan con el ID de almacén correcto después de que un administrador apruebe y guarde la revisión desde un dominio diferente al de la tienda. [GitHub-17510](https://github.com/magento/magento2/issues/17510)

### Recompensas

<!-- MC-41159-->

* Los comerciantes ahora pueden cancelar un pedido que se haya realizado total o parcialmente utilizando puntos de recompensa después de que el cliente que realizó el pedido haya sido eliminado del sistema.

<!-- MC-40037-->

* Los comerciantes ahora pueden eliminar los puntos de recompensa de las reglas de precios del carro de compras. Anteriormente, cuando un comerciante intentaba establecer **Puntos de rebote** a 0 al crear una regla de precio del carro de compras, se conservaba el valor anterior para la cantidad de punto de recompensa.

<!-- MC-39890-->

* Los puntos de devolución para revisiones de productos ahora están asociados al sitio web relevante cuando se aprueban varias revisiones por parte del administrador **Marketing** > **Revisiones pendientes** cuadrícula. Anteriormente, los puntos de recompensa no se mostraban en la tienda y no estaban vinculados al sitio web relevante en el Administrador.

<!-- MC-39820-->

* La aplicación ahora actualiza la lista de métodos de pago cuando un comprador que realiza la comprobación con varias direcciones comprueba o desmarca la **Crédito de tienda (Puntos de recompensa)** .

### Ventas

<!-- MC-39796-->

* Los usuarios administradores ahora pueden realizar pedidos de elementos fuera de existencias cuando el **Se permiten pedidos anteriores** está activada (**Almacenes** > **Configuración** > **Catálogo** > **Inventario** > **Opciones de existencias de productos**). Anteriormente, la aplicación generaba un error.

<!-- MC-42280-->

* Los compradores ahora pueden encontrar un pedido en la página Pedidos y Devoluciones cuando el apellido termina con un espacio en blanco.

<!-- MC-41438-->

* Las facturas ahora se crean con el total general correcto cuando una regla de precio del carro de compras que asigna un 100% de descuento se aplica a un pedido que también está sujeto a los impuestos sobre productos y descuentos del catálogo y que califica para envío gratuito. Anteriormente, el pedido tenía el precio correcto, pero la factura no. [GitHub-30853](https://github.com/magento/magento2/issues/30853)

<!-- MC-40384-->

* El filtrado de pedidos por fecha ahora devuelve resultados precisos. Anteriormente, la aplicación no devolvía un pedido que se realizaba después de las 00:00 UTC cuando se filtraban los pedidos por fecha de pedido.

<!-- MC-40030-->

* La cuadrícula de notas de abono ahora muestra el símbolo de moneda correcto cuando **Sitio web** el ámbito se utiliza para un **Precio** en una implementación de varias tiendas.

<!-- MC-40013 ENGCOM-8781-->

* Los botones de opción de métodos de pago ya no desaparecen en la sección Información de envío y pago del flujo de trabajo de cierre de compra después de que se vuelva a cargar la página Crear nuevo pedido del administrador. [GitHub-32106](https://github.com/magento/magento2/issues/32106)

<!-- MC-39891-->

* El texto en árabe ahora se muestra correctamente en las facturas.

<!-- MC-39864-->

* La aplicación ahora calcula correctamente los totales de impuestos parciales de las notas de abono basados en un pedido o en una factura de tiendas que implementan PayPal Payment Pro como puerta de enlace de pago. Anteriormente, en el caso de pedidos con varias facturas, la aplicación aplicaba todo el impuesto de ese pedido para la cancelación parcial de facturas en la nota de abono.

<!-- MC-39521 ENGCOM-8528-->

* La aplicación ya no crea bloqueos aleatorios de base de datos al enviar nuevos correos electrónicos de pedido a los clientes. Anteriormente, se producían interbloqueos porque la aplicación guardaba todo el objeto y sus objetos relacionados en lugar de columnas SQL actualizadas. La aplicación mostraba este tipo de error: `SQLSTATE[40001]: Serialization failure: 1213 Deadlock found when trying to get lock; try restarting transaction`. [GitHub-31090](https://github.com/magento/magento2/issues/31090)

<!-- MC-39353-->

* La página de detalles de pedidos de tienda ahora muestra la cantidad de producto enviada correcta. Anteriormente, las cantidades del producto eran incorrectas porque la plantilla de la página Envío de pedido representada **Cantidad enviada** como `int`. Esto se ha cambiado por `float`.

<!-- MC-39026-->

* La aplicación ya no envía copias de correos electrónicos de una factura de pedido cuando el **Copia de factura por correo electrónico** está desmarcado. Anteriormente, la aplicación enviaba un correo electrónico a **Cliente** y **Enviar copia de correo electrónico de factura a**. [GitHub-28511](https://github.com/magento/magento2/issues/28511)

<!-- MC-38973-->

* La aplicación ya no crea entradas de dirección duplicadas para una cuenta de cliente al crear un nuevo pedido desde el Administrador para un cliente existente. La variable **Guardar en Libreta de direcciones** se ha cambiado el nombre de la casilla de verificación a **Agregar a Libreta de direcciones** y ahora está desmarcado en Administración de forma predeterminada.

<!-- MC-38834-->

* La aplicación ahora utiliza el logotipo que se ha cargado en la variable **Logotipo para vista de impresión del HTML** cuando los compradores imprimen un pedido de su cuenta. Anteriormente, la aplicación mostraba el logotipo de LUMA en lugar del logotipo cargado.

<!-- MC-38625-->

* El busca de artículos de pedido en la tienda ahora funciona como se espera cuando el recuento de artículos supera los 20. Anteriormente, el buscador tenía en cuenta los productos secundarios y el recuento total era incorrecto.

<!-- MC-23915 ENGCOM-8713-->

* La aplicación ahora muestra los símbolos de moneda correctos para los valores de subtotal y envío y gestión en las cuadrículas de página Pedido y Nota de Crédito . [GitHub-22662](https://github.com/magento/magento2/issues/22662)

<!-- ENGCOM-8486-->

* Los administradores que utilizan Safari ahora pueden agregar correctamente un producto a un pedido desde el administrador. Anteriormente, cuando el administrador hacía clic en la variable **Añadir productos seleccionados para pedir** , la aplicación mostraba el icono de carga giratoria y la página colgaba. [GitHub-30265](https://github.com/magento/magento2/issues/30265)

### Regla de ventas

<!-- MC-40671-->

* La aplicación ahora aplica las reglas de precios del carro de compras con **El descuento de cantidad máxima se aplica a** o **Paso de cantidad de descuento (Comprar X)** condiciones correctamente cuando se aplican varias reglas de precios del carro de compras al carro de compras. Anteriormente, si una regla de precio del carro de compras incluía **El descuento de cantidad máxima se aplica a** o **Paso de cantidad de descuento (Comprar X)** se aplicó después de otra regla de precio del carro de compras, el descuento total se redujo al valor configurado para **El descuento de cantidad máxima se aplica a** o **Paso de cantidad de descuento (Comprar X)** el precio del producto.

<!-- MC-39827-->

* El informe Cupón ahora refleja con precisión la actividad de cupones en implementaciones en las que se ha implementado una base de datos dividida.

<!-- MC-39477-->

* Reglas de precios del carro de compras que contienen la condición Categoría **IS NOT** ahora se aplican según lo esperado a productos secundarios/simples configurables que no están asignados a una categoría pero cuyos productos principales están asignados.

<!-- MC-39034-->

* GraphQL `cart` La consulta ahora devuelve el total general correcto para el paso de facturación de un carro de compras cuando se aplica un cupón al pedido.

### Buscar

<!-- MC-41138-->

* La página de categoría ya no contiene estos ID de elemento de HTML duplicados: `modes-label`, `mode-list`, `toolbar-amount`, `sorter`, `limiter`.

<!-- MC-40981-->

* Los resultados de búsqueda de palabras parciales ya no incluyen coincidencias inesperadas o irrelevantes, y las búsquedas producen resultados coherentes tanto en la tienda como en el administrador. La aplicación ahora utiliza un analizador diferente sin un contenedor para búsquedas de palabras parciales. Anteriormente, los resultados de búsqueda mostraban productos que no incluían palabras clave de búsqueda. (Anteriormente, el analizador predeterminado incluía un contenedor y, como se usaba el mismo analizador en el momento de la búsqueda para la búsqueda de palabras parciales, el resultado de la búsqueda podía producir coincidencias inesperadas o irrelevantes).

<!-- MC-40715-->

* La búsqueda rápida ahora devuelve resultados si la consulta de búsqueda tiene varias palabras y el nombre del producto está configurado como no se puede buscar. Anteriormente, si el nombre del producto estaba configurado como no se podía buscar, la aplicación arrojaba una excepción de consulta en consultas de búsqueda con varias palabras.

<!-- MC-40672-->

* Los resultados de búsqueda ahora incluyen el `weight` como se espera cuando se configura como buscable.

<!-- MC-40409-->

* La aplicación ya no genera un error cuando se ve una página de categoría vacía con el Elasticsearch habilitado. En su lugar, presenta la página como se espera y muestra un mensaje informativo. Anteriormente, un índice de texto completo vacío activaba una excepción en una página de categoría.

<!-- MC-40376-->

* La función de autocompletar campo de búsqueda ahora funciona según lo esperado si un comprador hace clic fuera del campo de búsqueda después de comenzar la búsqueda. Las sugerencias de autocompletar ahora vuelven a aparecer cuando el comprador reanuda la escritura. Anteriormente, la aplicación no mostraba sugerencias de autocompletar y hacer clic en el cuadro de búsqueda no hacía que las sugerencias de búsqueda volvieran a ser visibles (aunque sí lo hacía al escribir letras adicionales).

<!-- MC-34217-->

* Al buscar un producto basado en su SKU completo o parcial en Búsqueda avanzada ahora se devuelve el producto esperado.

<!-- MC-31395-->

* Los filtros de navegación en capas ahora muestran recuentos de productos precisos. Anteriormente, los valores de recuento de productos de Elasticsearch no se filtraban mediante permisos de catálogo.

<!-- MC-23881 ENGCOM-8618-->

* El Elasticsearch ya no genera un error cuando el parámetro de página de la dirección URL de la categoría supera la paginación. [GitHub-23843](https://github.com/magento/magento2/issues/23843)

<!-- MC-24033  magento/magento2#3274-->

* Ahora puede agregar un asignador de campos de Elasticsearch personalizado a `Magento\Elasticsearch\Model\Adapter\FieldMapper\Product\FieldProvider\FieldName\Resolver\CompositeResolver`. [GitHub-24350](https://github.com/magento/magento2/issues/24350)

<!-- ENGCOM-9029 MC-24026-->

* Los desarrolladores ahora pueden cambiar las asignaciones de Elasticsearch. Anteriormente, las plantillas dinámicas enviadas al servidor de Elasticsearch en las asignaciones predeterminadas estaban codificadas, lo que impedía a los desarrolladores indexar en Elasticsearch cualquier dato adicional asociado con un módulo personalizado. [GitHub-24363](https://github.com/magento/magento2/issues/24363)

<!-- ENGCOM-8464 -->

* Los campos de búsqueda (minibúsqueda del formulario) ahora funcionan según lo esperado cuando las sugerencias de búsqueda están deshabilitadas. [GitHub-30584](https://github.com/magento/magento2/issues/30584)

### Envío

<!-- MC-41464-->

* La aplicación ahora actualiza el precio de envío como se espera cuando un comprador regresa a la página del carro de compras después de eliminar un producto durante el cierre de compra con varias direcciones.

<!-- MC-41343-->

* La aplicación ahora muestra el precio de envío ajustado correcto cuando algunos artículos del carro de compras cumplen los requisitos para envío gratuito. Anteriormente, cuando un subconjunto de artículos del carro de compras cumplía los requisitos para el envío gratuito, la aplicación no ajustaba el precio de envío y mostraba el precio de envío completo al comprador.

<!-- MC-41186-->

* Los administradores que están restringidos a un sitio web específico ahora pueden crear un envío para un pedido colocado en el mismo sitio web. Anteriormente, la aplicación activaba esta excepción cuando un administrador que carecía de permiso para acceder a la vista de tienda predeterminada intentaba enviar un pedido que se colocaba en una vista de tienda a la que el administrador tenía acceso: `Notice: Undefined offset: 1 in /app/code/Magento/Catalog/Model/Product/Attribute/Backend/GroupPrice/AbstractGroupPrice.php on line 293`.

<!-- MC-41069-->

* La aplicación ahora tiene en cuenta los descuentos pertinentes de las reglas de precios del carro de compras al determinar si un pedido cumple las condiciones para el envío gratuito de DHL.

<!-- MC-40702 ENGCOM-8728-->

* Las etiquetas de envío ahora utilizan la moneda base como se espera en lugar de la moneda de pedido para las tiendas que admiten varias monedas cuando se realiza un pedido en una moneda no base. [GitHub-31891](https://github.com/magento/magento2/issues/31891)

<!-- MC-40678 magento/magento2#31925-->

* La aplicación ahora muestra el subtotal del pedido correcto cuando un comprador regresa a la página del carro de compras durante el cierre de compra después de salir de la página de envío múltiple. [GitHub-31889](https://github.com/magento/magento2/issues/31889)

<!-- MC-40541 magento/magento2#31841 -->

* La edición de la información de facturación durante la creación del pedido de administrador ya no cambia la información de envío de los clientes con distintas direcciones de envío y facturación predeterminadas. [GitHub-31786](https://github.com/magento/magento2/issues/31786)

<!-- MC-37385 ENGCOM-8578-->

* La aplicación ya no desmarca la **Anexar comentarios** casilla de verificación cuando un comprador hace clic **Obtener métodos y tarifas de envío** y selecciona un método de envío al crear un pedido desde el Administrador. [GitHub-30256](https://github.com/magento/magento2/issues/30256)

<!-- MC-36425-->

* Los compradores ahora pueden utilizar el botón Atrás del explorador para volver a la página Seleccionar método de envío mientras realizan la comprobación de un pedido con varias direcciones. Anteriormente, la aplicación mostraba una página Seleccionar método de envío dañada. [GitHub-30268](https://github.com/magento/magento2/issues/30268)

<!-- MC-40021 ENGCOM-8983-->

* La cantidad de producto ahora permanece sin cambios, tal como se espera después de que un comprador cambie la cantidad en la página Dirección múltiples Enviar a y haga clic en el botón Atrás del explorador. [GitHub-31956](https://github.com/magento/magento2/issues/31956)

<!-- ENGCOM-9096-->

* Los gastos del método de envío a tarifa fija ya no se convierten en cero cuando se aplica una regla de precio del carro de compras durante el cierre de compra. [GitHub-21832](https://github.com/magento/magento2/issues/21832)

<!-- ENGCOM-8537-->

* La aplicación ya no genera un error cuando un comerciante intenta enviar una solicitud utilizando DHL cuando la variable **Crear etiqueta de envío** está activada y el nombre del producto contiene caracteres Unicode. Anteriormente, la aplicación mostraba este error al solicitar la creación de etiquetas: `The response is in wrong format`. [GitHub-31032](https://github.com/magento/magento2/issues/31032)

<!-- ENGCOM-8952 -->

* Puede realizar correctamente un pedido desde el administrador en una implementación de varios sitios en la que `United States` está habilitado en un sitio web y`Disable all countries` está habilitado como ámbito predeterminado en el otro sitio web. Anteriormente, la aplicación no realizaba el pedido y mostraba este error: `Please check the shipping address information. "regionId" is required. Enter and try again`. [GitHub-30577](https://github.com/magento/magento2/issues/30577)

### Ensayo

<!-- MC-39807-->

* La función Programar actualización de bloque ahora funciona como se espera en las implementaciones que implementan Fray. Anteriormente, la aplicación no actualizaba el contenido del bloque porque las etiquetas de la caché de Flash no se invalidaban y, por último, seguía ofreciendo contenido obsoleto.

<!-- MC-41142-->

* La vista previa de la configuración de la regla de precio del carro de compras ahora se carga en el sitio web correspondiente cuando se asigna a varias vistas de la tienda de sitios web. Anteriormente, la vista previa de la configuración de la regla de precio del carro de compras se cargaba en la vista de tienda predeterminada independientemente de los sitios web asignados.

<!-- MC-40916-->

* Los precios especiales de los productos en la vista de tienda no predeterminada ahora se establecen en el valor predeterminado, tal como se espera después de que haya finalizado una actualización programada.

<!-- MC-40850  magento/partners-magento2ee#489-->

* Los comerciantes ahora pueden guardar correctamente un producto descargable con una muestra vinculada desde la página de producto descargable después de crear una actualización de ensayo futura con una fecha de finalización. Anteriormente, la aplicación no guardaba el producto y mostraba este mensaje: `The downloadable sample isn't related to the product. Verify the link and try again`. [GitHub-488](https://github.com/magento/partners-magento2ee/issues/488)

<!-- MC-40734-->

* La aplicación ya no ejecuta consultas de base de datos grandes que incluyan todos los ID de producto durante la previsualización de una actualización de programación de una categoría. En su lugar, el filtro de categoría se aplica a la colección de productos para crear una tabla temporal para las vistas previas de la categoría. Anteriormente, la aplicación insertaba todos los productos en una tabla temporal para la vista previa de ensayo, lo que degradaba el rendimiento.

<!-- MC-40714-->

* La variable `Magento_SalesRuleStaging` El módulo ya no déclencheur errores durante la actualización de 2.3.x.

<!-- MC-40697-->

* La aplicación ahora muestra las condiciones de las reglas de catálogo con los datos correctos al ver una actualización de programación. Anteriormente, si se visualizaba una actualización de programación creada con condiciones, la aplicación no mostraba condiciones o mostraba condiciones con datos incorrectos.

<!-- MC-40604-->

* La variable **Utilizar valor predeterminado** La casilla de verificación de un producto permanece marcada después de que una actualización programada no esté marcada antes de la actualización.

<!-- MC-40588 magento/partners-magento2ee#463-->

* Las reglas de precios del catálogo ahora se aplican según lo esperado a productos con valores de atributo no definidos. Anteriormente, los descuentos creados mediante una regla de precio de catálogo no se aplicaban a productos con atributos no definidos. [GitHub-461](https://github.com/magento/partners-magento2ee/issues/461)

<!-- MC-40283-->

* Las reglas de catálogo ahora funcionan según lo esperado en implementaciones de varios sitios web con tiendas en diferentes zonas horarias. Anteriormente, la aplicación aplicaba o desactivaba las reglas de catálogo en todos los sitios web a la vez.

<!-- MC-40054-->

* Los precios de nivel ya no se eliminan cuando se crea una actualización de programación para un sitio web específico.

<!-- MC-39784 magento/partners-magento2ee#475-->

* Ahora puede guardar un producto de la página de producto descargable después de crear una actualización de ensayo futura con una fecha de finalización. Anteriormente, la aplicación no guardaba el producto y mostraba este mensaje: `The downloadable link isn't related to the product. Verify the link and try again`. [GitHub-474](https://github.com/magento/partners-magento2ee/issues/474)

### Tienda

<!-- MC-40538-->

* La aplicación ya no trata una cadena de `0` como valor vacío al mostrar una página de inicio de una tienda. Anteriormente, la aplicación trataba un valor entero al principio de una ruta de solicitud como un ID de almacén, que tenía efectos no deseados en SEO.

<!-- MC-40313  magento/magento2#31970-->

* Complementos para `\Magento\Framework\App\ActionInterface` under `lib/internal/Magento/Framework/App/Action/Plugin` se han eliminado para mantener la guía de que los complementos deben utilizarse para personalizar el comportamiento de un módulo de otro módulo. [GitHub-28050](https://github.com/magento/magento2/issues/28050)

<!-- MC-24772-->

* La aplicación ahora muestra este mensaje cuando intenta seleccionar `Website` como predeterminado cuando `Store View` se desactiva durante la creación del sitio web: `Please enable your Store View before using this Web Site as Default`. Anteriormente, el sitio web se bloqueaba y la aplicación no mostraba ninguna alerta.

### Impuesto

<!-- MC-39571-->

* La aplicación ahora tiene en cuenta los impuestos ocultos durante la validación del importe mínimo del pedido.

<!-- MC-38025 ENGCOM-8612-->

* La aplicación ahora muestra los Impuestos de producto fijos (FPT) como se espera cuando un comprador regresa al carro de compras y continúa con el cierre de compra después de agregar productos de paquete al carro de compras. [GitHub-30250](https://github.com/magento/magento2/issues/30250)

<!-- MC-37657 magento/magento2#31850-->

* La aplicación ahora rellena previamente la variable **Número de IVA** campos de entrada para las direcciones de facturación y envío de la sección Información de dirección de la página de administración de nuevo pedido con números de IVA guardados cuando un administrador crea un pedido para un cliente existente. [GitHub-31846](https://github.com/magento/magento2/issues/31846)

<!-- ENGCOM-8617 magento-engcom/magento2ee#558-->

* La aplicación ahora muestra un **Número de IVA** en la página de registro del cliente cuando `customer/create_account/vat_frontend_visibility` está activada. [GitHub-31326](https://github.com/magento/magento2/issues/31326)

### Prueba

<!-- MC-41393-->

* Los entornos de prueba se han actualizado a Redis 6.0.12.

<!-- ENGCOM-8529-->

* Eliminado `CacheCleaner::cleanAll();` de las pruebas de integración. [GitHub-31074](https://github.com/magento/magento2/issues/31074)

<!-- ENGCOM-8898-->

* Se ha añadido una prueba para este escenario: Los usuarios administradores pueden editar una cuenta de cliente cuando el cliente está suscrito a un boletín en cola. [GitHub-30645](https://github.com/magento/magento2/issues/30645)

<!-- ENGCOM-8484-->

* Se ha eliminado el `cache:flush` de pruebas para mejorar el tiempo de ejecución del `Catalog`, `CatalogUrlRewrite`y `LoginAsCustomer` módulos. [GitHub-31056](https://github.com/magento/magento2/issues/31056)

<!-- ENGCOM-8499-->

* Se han eliminado los parámetros redundantes y se ha cambiado el POST a GET donde fuera necesario en `\Magento\Logging\Model\ProcessorTest::testLoggingProcessorLogsActionShipping`.

### Tema

<!-- MC-41474-->

* La página de inicio de sesión del cliente ya no muestra este mensaje cuando la variable **Mover el código JS a la parte inferior de la página** configure (**Tienda** > **Configuraciones** > **Avance** > **Desarrollador** > **Configuración de JavaScript**) y las cookies están habilitadas: `The store will not work correctly in the case when cookies are disabled`.

<!-- MC-40982-->

* Los vínculos de cuenta en los encabezados ahora siguen los estándares WCAG. Anteriormente, los vínculos de cuenta en los encabezados contenían ID duplicados, lo que provocaba que fallara la validación de WCAG.

<!-- MC-40278-->

* La aplicación ahora prioriza la configuración de almacenamiento de una imagen de logotipo de tienda sobre la configuración de diseño. Anteriormente, el tamaño de las imágenes de logotipo era fijo y no variaba según la tienda.

<!-- MC-35227-->

* La aplicación ahora muestra elementos de página de forma consistente en páginas de tienda que utilizan temas estándar de Adobe Commerce. Anteriormente, no todos los estilos se aplicaban en un tema en blanco, por lo que no todos los elementos de página se mostraban en páginas que utilizaban este tema. (Por ejemplo, no había ningún icono de lupa en el campo de búsqueda de la página Mis pedidos ).

### Traducción y configuraciones regionales

<!-- MC-23553 ENGCOM-8839-->

* Los corchetes que se agregan a cadenas ya no se escapan cuando se configura la traducción en línea. Anteriormente, la variable `escapeHtmlAttr` ha convertido los corchetes en códigos de entidad de HTML. [GitHub-32000](https://github.com/magento/magento2/issues/32000)

<!-- ENGCOM-8694-->

* Las frases intraducibles en el administrador ahora se pueden traducir. (Esta solicitud de extracción contribuye a los esfuerzos en curso para que todas las cadenas de administración se puedan localizar). [GitHub-11175](https://github.com/magento/magento2/issues/11175)

<!-- ENGCOM-8584-->

* Cadenas de texto de la plantilla que se utilizan para administrar los métodos de pago almacenados (**Mi cuenta**  >  **Métodos de pago almacenados** ) ahora se pueden traducir. [GitHub-31211](https://github.com/magento/magento2/issues/31211)

<!-- MC-30798 ENGCOM-8717-->

* Los correos electrónicos de pedido enviados desde el administrador ahora utilizan la configuración regional de la tienda, no la configuración regional asociada a la cuenta del administrador. [GitHub-26521](https://github.com/magento/magento2/issues/26521)

### IU

<!-- MC-41784-->

* El pie de página del administrador ahora muestra la versión de producto correcta.

<!-- MC-41067-->

* La paginación de los orígenes ahora está presente como se espera durante la creación del envío del administrador.

<!-- MC-40240-->

* El filtro de cuadrícula de producto ahora funciona correctamente cuando se usan atributos de fecha personalizados para filtrar productos y la configuración regional del usuario administrador es `en_GB`.

<!-- MC-39279-->

* Los gestos de pellizco para hacer zoom ahora funcionan como se espera en el ampliador de la galería de imágenes de la página del producto en los dispositivos iOS.

<!-- MC-38787-->

* La paginación de los resultados de búsqueda de la cuadrícula del producto del administrador ahora comienza en la página uno para cada búsqueda como se esperaba.

<!-- MC-38423-->

* Anomalías con la visualización del carro de compras cuando se ha ampliado se han resuelto. Anteriormente, los elementos de visualización se superponían cuando se ampliaba esta página.

<!-- MC-38235 magento/partners-magento2ee#492 -->

* Problemas de alineación con las pestañas en la página de invitación del administrador (Administrador) **Marketing** > **Ventas privadas** > **Invitaciones**). Anteriormente, la visualización de la pestaña de invitaciones aceptadas por un cliente no estaba alineada correctamente. [GitHub-333](https://github.com/magento/partners-magento2ee/issues/333)

<!-- MC-38226 magento/magento2#32008-->

* La página de revisión de pedidos mostrada durante el cierre de compra con PayPal Express Checkout ahora se carga correctamente. Anteriormente, la plantilla contenía el contenido no utilizado **Actualizar método de entrega** , que la secuencia de comandos solo ocultó parcialmente durante el procesamiento de la página. [GitHub-32006](https://github.com/magento/magento2/issues/32006)

<!-- MC-37941 magento/magento2#31892-->

* Las estrellas de clasificación y el texto de revisión de la sección de revisiones del cliente de la página del producto ahora están correctamente espaciados cuando hay nombres de clasificación largos. [GitHub-31890](https://github.com/magento/magento2/issues/31890)

<!-- MC-37688-->

* Las opciones ahora se muestran según lo esperado en la lista desplegable Acciones de las páginas Archivar Facturas, Envíos y Notas de Crédito.

<!-- MC-23729  magento/magento2#31549-->

* La aplicación ahora muestra un valor de tiempo correcto cuando la variable `datetime` componente `timeOnly` está configurada en **yes**. [GitHub-23157](https://github.com/magento/magento2/issues/23157)

<!-- ENGCOM-8514 -->

* Ahora puede quitar una actualización de diseño después de crear un nuevo widget en el administrador **Contenido** > **Widgets**.  [GitHub-29936](https://github.com/magento/magento2/issues/29936)

<!-- ENGCOM-8502 MC-35716-->

* La variable **Quitar actualización de diseño** ahora funciona según lo esperado en cualquier diseño que haya agregado desde Admin **Contenido** > **Widgets**. Anteriormente, este botón no funcionaba en ningún diseño que no fuera el primero seleccionado al añadir varios diseños. [GitHub-30286](https://github.com/magento/magento2/issues/30286)

<!-- ENGCOM-8524 -->

* La aplicación ahora utiliza el título de la página que se establece en el archivo de diseño como título de la página del explorador para el archivo de edición de cuentas de cliente. Anteriormente, la variable `Magento\Customer\Controller\Account\Edit` la acción del controlador aplicó el valor del título de la página a `Account Information`. [GitHub-30724](https://github.com/magento/magento2/issues/30724)

<!-- ENGCOM-8896 8826-->

* Se han agregado a estas páginas casillas de verificación que permiten a los comerciantes alternar entre mostrar y ocultar contraseñas:
   * Inicio de sesión del cliente
   * Registro de clientes
   * Edición del cliente (sección Cambiar contraseña )
   * Contraseña nueva establecida por el cliente [GitHub-31557](https://github.com/magento/magento2/issues/31557)

<!-- ENGCOM-8545 -->

* Se ha eliminado un encabezado redundante en las celdas de la cuadrícula que aparecía cuando un administrador añadía un producto a un conjunto de productos agrupados después de cambiar el conjunto de atributos. [GitHub-30911](https://github.com/magento/magento2/issues/30911)

<!-- ENGCOM-8895 -->

* La aplicación ahora muestra un `DateRange` en el área Logged in de la **Cliente**  >  **Inicio de sesión** página. Anteriormente, la aplicación mostraba un `Text` filtro. [GitHub-30328](https://github.com/magento/magento2/issues/30328)

<!-- ENGCOM-9009 -->

* JavaScript se ha eliminado de los archivos de plantilla y se ha movido a archivos independientes para reducir los problemas de renderización en las páginas de administración. Anteriormente, las páginas de administración no se representaban correctamente en implementaciones en las que se había habilitado la minimización de HTML. La aplicación mostraba este error: `An error has happened during application run. See exception log for details`. [GitHub-32454](https://github.com/magento/magento2/issues/32454)

<!-- ENGCOM-9044 -->

* La variable `dropdownDialog` Ahora, la utilidad carga únicamente el elemento arrastrable y reajustable `jquery-ui` chunks que necesita. Anteriormente, cargaba grandes cantidades de código innecesario, lo que aumentaba el tiempo de carga y reducía el rendimiento. [GitHub-32810](https://github.com/magento/magento2/issues/32810)

### Reescrituras de URL

<!-- MC-41550-->

* Las reescrituras de URL de producto para un sitio web específico en una implementación multisitio ahora se generan según lo esperado después de que los productos se asignen a un sitio web mediante una actualización masiva.

<!-- MC-40780 magento/magento2#32598-->

* La aplicación ahora genera correctamente la ruta de URL para las categorías secundarias cuando la variable **Usar valor predeterminado** la casilla de verificación de la clave URL está habilitada para la categoría principal. Anteriormente, el desplazamiento de una categoría en la jerarquía daba como resultado un error `url_path` cuando se usan claves de URL diferentes en una implementación de vista de varias tiendas. [GitHub-16202](https://github.com/magento/magento2/issues/16202)

<!-- MC-40371-->

* La aplicación ahora actualiza el `url_path` de la categoría que está asignada a todo el ámbito de almacenamiento cuando mueve una categoría en la jerarquía de categorías. Anteriormente, el desplazamiento de una categoría en la jerarquía daba como resultado un error `url_path`.

<!-- MC-39463-->

* Las redirecciones URL creadas desde el administrador con una dirección URL personalizada ahora funcionan correctamente. Anteriormente, GraphQL almacenaba en caché la respuesta de GraphQL `urlResolver` y devolvió el valor antiguo después de la actualización de reescritura de la URL.

<!-- MC-38931  magento/magento2#31106-->

* Las reescrituras de URL de producto ahora se eliminan del modo esperado cuando un producto se elimina de un sitio web. [GitHub-24184](https://github.com/magento/magento2/issues/24184)

<!-- ENGCOM-8719 -->

* Se ha añadido un `main_table` referencia al `store_id` en el `addStoreFilter` de la función `app/code/Magento/UrlRewrite/Model/ResourceModel/UrlRewriteCollection.php` colección. Anteriormente, se producían problemas cada vez que se producía una `join` se agrega a la colección en una tabla que también contiene un `store_id` para abrir el Navegador. [GitHub-31853](https://github.com/magento/magento2/issues/31853)

<!-- ENGCOM-8894 -->

* La variable `PUT /V1/products/:sku` El extremo REST ahora vuelve a generar las reescrituras de la URL del producto según lo esperado. Anteriormente, el extremo generaba de nuevo el producto `url_key` pero no reescribe la dirección URL. [GitHub-30316](https://github.com/magento/magento2/issues/30316)

### Usuario

<!-- MC-40777  magento/magento2#31998-->

* Ahora puede guardar una función de usuario nueva efectiva (Administrador **Sistema** > **Permisos** > **Funciones del usuario**) con el `Catalog` árbol seleccionado `Edit Product Design` ( **Catálogo** > **Inventario** > **Productos** > **Editar diseño de producto**). Anteriormente, la aplicación no guardaba los cambios de producto realizados por un usuario en esta función y mostraba este error: `Not allowed to edit the product's design attributes`. [GitHub-31973](https://github.com/magento/magento2/issues/31973)

<!-- MC-38442-->

* La aplicación ahora utiliza la plantilla de correo electrónico personalizada correcta al generar correo electrónico para nuevos administradores. Anteriormente, la aplicación utilizaba la plantilla predeterminada antigua, que omitía los nombres y apellidos del administrador.

<!-- MC-38122-->

* La aplicación ahora utiliza la plantilla de correo electrónico correcta al enviar correos electrónicos a nuevos usuarios. Anteriormente, la aplicación utilizaba la plantilla predeterminada incluso cuando se seleccionaba una plantilla personalizada.

### VersionCMS

<!-- MC-39953-->

* La aplicación ahora aplica el tema correcto a una página de CMS después de cambiar su diseño. Anteriormente, la aplicación cambiaba el tema asignado a Luma después de guardar los cambios de diseño, independientemente del tema que se asignara a la página.

<!-- MC-40431-->

* Los administradores con funciones restringidas ahora pueden agregar, actualizar o duplicar correctamente las páginas a las que tiene acceso y que están asignadas a un nodo de jerarquía. Anteriormente, la aplicación generaba un error fatal en estas condiciones.

### Vídeo

<!-- MC-42059 ENGCOM-9039-->

* Los vídeos ya están disponibles en la galería de productos, tal como se espera cuando el paquete avanzado de JavaScript está habilitado y se utiliza. [GitHub-32501](https://github.com/magento/magento2/issues/32501)

<!-- ENGCOM-8532-->

* Los vídeos de YouTube para productos sencillos que pertenecen a un producto configurable ahora funcionan según lo esperado. Anteriormente, las imágenes se ordenaban por ID en lugar de por posición. En consecuencia, algunos videos fueron tratados como imágenes. [GitHub-29690](https://github.com/magento/magento2/issues/29690)

### Comerciante visual

<!-- MC-40797-->

* Se ha mejorado el rendimiento de las cargas de página de categoría Administración con Visual Merchandiser. Al cargar páginas de categoría de administración ya no se generan consultas de base de datos de gran tamaño.

### Marco de API web

<!-- MC-41758-->

* La API de catálogo ahora actualiza correctamente los valores de opción personalizados de un producto añadiendo nuevos valores y eliminando valores antiguos. Anteriormente, la API no eliminaba los valores antiguos.

<!-- MC-34431-->

* POST `/V1/guest-carts/:cartId/billing-address` ahora devuelve el ID de dirección como un número entero, no como una cadena.

### Restricción del sitio web

<!-- MC-38516-->

* Los compradores ahora son redirigidos a la página a la que intentaban acceder antes de que se les pidiera que iniciaran sesión. Anteriormente, en implementaciones en las que las restricciones del sitio web estaban habilitadas y el modo de restricción estaba establecido en **Ventas privadas: Solo inicio de sesión**, los compradores fueron redirigidos a la página principal de la tienda.

### Widget

<!-- MC-39128-->

* Un administrador ahora puede eliminar todas las actualizaciones de diseño de un widget. Anteriormente, cuando un widget tenía varias actualizaciones de diseño, un administrador solo podía eliminar la primera.

<!-- MC-39107-->

* Al hacer clic en **Agregar al carro** en el widget de producto ya no resulta en una recarga de página. Anteriormente, al hacer clic en el botón **Agregar al carro** en un widget de producto, una página actual se volvía a cargar antes de que el producto se agregara al carro de compras.

<!-- MC-23590-->

* El widget de vínculo de nodo de jerarquía de CMS en TinyMCE ahora procesa los vínculos de jerarquía como se espera cuando la variable **Anclar texto personalizado** El campo está vacío.

### Lista de deseos

<!-- MC-40651 ENGCOM-8769-->

* La aplicación ya no restablece los ajustes de configuración de un producto configurable al hacer clic en el botón **Editar elemento** para el producto de una lista de deseos. [GitHub-32119](https://github.com/magento/magento2/issues/32119)

<!-- MC-40417-->

* La aplicación ahora muestra el precio de producto correcto al actualizar un producto con una opción de archivo personalizable en la lista de deseos. Anteriormente, la aplicación mostraba un precio de producto incorrecto y no mostraba ningún vínculo al archivo cargado.

<!-- MC-39060-->

* El recuento total de productos en una lista de deseos para un cliente con varias listas de deseos ahora coincide con el número de artículos en la lista de deseos. Anteriormente, los productos fuera de existencias se incluían en el recuento total de productos.

<!-- MC-36779 magento/magento2#31110-->

* La aplicación ahora elimina un producto de una lista de deseos después de agregarlo a un pedido. [GitHub-30260](https://github.com/magento/magento2/issues/30260)

<!-- MC-34456 ENGCOM-8816-->

* Los compradores ahora pueden agregar productos relacionados a su carro de compras desde una lista de deseos. Anteriormente, la aplicación agregaba únicamente el producto configurable, no el producto configurable y sus productos relacionados cuando un comprador hacía clic en el **Seleccionar todo** vínculo de la sección Productos relacionados. [GitHub-32274](https://github.com/magento/magento2/issues/32274)

## Problemas conocidos

**Problema**: _Error de JavaScript cuando reCAPTCHA está desactivado_. Si reCAPTCHA está deshabilitado para el cierre de compra, el cierre de compra continúa, pero la aplicación muestra un `Uncaught TypeError` en el registro de la consola.  Este problema se solucionará en una versión posterior. <!-- MC-42589 42649-->

**Problema**: _Error de la directiva de seguridad de contenido_. La tienda muestra el siguiente error en el registro de la consola: `The Content-Security-Policy directive frame-ancestors does not support the source expression unsafe-inline`. El rendimiento de la tienda no se ve afectado. <!-- MC-42613-->

**Problema**: _Anomalías con PayPal Crédito mostrado de las cantidades de tarjetas regalo_. Cuando el crédito de PayPal está habilitado y se configuran varias cantidades de tarjetas de regalo, si un comprador cambia la cantidad por el valor de una tarjeta de regalo, la tienda no actualiza la cantidad para pagos a plazos. Se incluirá una corrección para este problema en Adobe Commerce 2.4.4 y Magento Open Source 2.4.4.<!-- MC-42499 AC-344-->

**Problema**:  _La variable **Añadir al orden**no funciona para productos agregados al carro de compras por SKU_.  la aplicación muestra este mensaje de error al hacer clic en el botón **Añadir al orden** después de agregar productos al pedido por SKU: `An error has happened during application run`. Los productos no se agregan al carro de compras. **Solución alternativa**: Utilice la función Agregar productos . <!-- AC-345-->

**Problema**: GraphQL `category` y `categoryList` las consultas ignoran los permisos de categoría que determinan si las categorías de un catálogo compartido están ocultas o expuestas. Actualmente, la tienda muestra todas las categorías que se han asignado o no asignado al catálogo compartido. Esto afecta a las implementaciones de Adobe Commerce 2.4.3 que implementan una tienda de PWA para la que se han habilitado catálogos compartidos B2B. <!-- MC-42528-->

## Contribuciones comunitarias

Damos las gracias a la comunidad de Magento Open Source en general y quisiéramos agradecer su contribución a esta versión.

El equipo de ingeniería de la comunidad [Colaboradores Magento](https://magento.com/magento-contributors) mantiene una lista de los principales colaboradores individuales y socios por mes, trimestre y año. Desde esa página de colaboradores, puede seguir los vínculos a sus relaciones públicas combinadas en GitHub.

### Contribuciones de socios

En el siguiente cuadro se destacan las contribuciones realizadas por los Asociados. En esta tabla se muestra el Partner que contribuyó a la solicitud de extracción, la solicitud de extracción externa y el número de problema de GitHub asociado a ella (si está disponible).

{{$include /help/_includes/release-notes/engcomm-2-4-3-partner.md}}

### Contribuciones de colaborador individual

La siguiente tabla identifica las contribuciones de los miembros de nuestra comunidad. En esta tabla se enumeran las solicitudes de extracción externas, el número de problema de GitHub asociado a él (si está disponible) y el miembro de la comunidad que contribuyó a la solicitud de extracción.

{{$include /help/_includes/release-notes/engcomm-2-4-3-issues.md}}

### Requisitos del sistema

Nuestra pila de tecnología está construida en PHP y MySQL. Para obtener más información, consulte [Requisitos del sistema](../../../installation/system-requirements.md).

### Instrucciones de instalación y actualización

Puede instalar Adobe Commerce 2.4.3 mediante [Compositor](../../../installation/composer.md).

## Juegos de herramientas de migración

La herramienta de migración de datos ayuda a transferir los datos de almacenamiento de Magento 1.x existentes a Magento 2.x. Esta interfaz de línea de comandos incluye funciones de verificación, seguimiento del progreso, registro y prueba. Para obtener instrucciones de instalación, consulte [Instalación de la herramienta de migración de datos](../../../tools/data-migration-tool/install.md). Considere la posibilidad de explorar o contribuir a la [Repositorio de migración de datos](https://github.com/magento/data-migration-tool).

La variable [Kit de herramientas de migración de código](https://github.com/magento-commerce/code-migration) ayuda a transferir las extensiones y personalizaciones de almacenamiento de Magento 1.x existentes a Magento 2.x. La interfaz de la línea de comandos incluye secuencias de comandos para convertir módulos y diseños de Magento 1.x.
